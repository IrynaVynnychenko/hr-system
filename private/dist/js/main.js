/*! jQuery v3.4.1 | (c) JS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],E=C.document,r=Object.getPrototypeOf,s=t.slice,g=t.concat,u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},x=function(e){return null!=e&&e===e.window},c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.4.1",k=function(e,t){return new k.fn.init(e,t)},p=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function d(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}k.fn=k.prototype={jquery:f,constructor:k,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=k.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return k.each(this,e)},map:function(n){return this.pushStack(k.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},k.extend=k.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(k.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||k.isPlainObject(n)?n:{},i=!1,a[t]=k.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},k.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t){b(e,{nonce:t&&t.nonce})},each:function(e,t){var n,r=0;if(d(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(p,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(d(Object(e))?k.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(d(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g.apply([],a)},guid:1,support:y}),"function"==typeof Symbol&&(k.fn[Symbol.iterator]=t[Symbol.iterator]),k.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var h=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,k="sizzle"+1*new Date,m=n.document,S=0,r=0,p=ue(),x=ue(),N=ue(),A=ue(),D=function(e,t){return e===t&&(l=!0),0},j={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",$=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",F=new RegExp(M+"+","g"),B=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp($),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),ne=function(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(m.childNodes),m.childNodes),t[m.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&((e?e.ownerDocument||e:m)!==C&&T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!A[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&U.test(t)){(s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=k),o=(l=h(t)).length;while(o--)l[o]="#"+s+" "+xe(l[o]);c=l.join(","),f=ee.test(t)&&ye(e.parentNode)||e}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){A(t,!0)}finally{s===k&&e.removeAttribute("id")}}}return g(t.replace(B,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[k]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:m;return r!==C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),m!==C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=k,!C.getElementsByName||!C.getElementsByName(k).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){a.appendChild(e).innerHTML="<a id='"+k+"'></a><select id='"+k+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+k+"-]").length||v.push("~="),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+k+"+*").length||v.push(".#.+[+~]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",$)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},D=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e===C||e.ownerDocument===m&&y(m,e)?-1:t===C||t.ownerDocument===m&&y(m,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e===C?-1:t===C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]===m?-1:s[r]===m?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if((e.ownerDocument||e)!==C&&T(e),d.matchesSelector&&E&&!A[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){A(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!==C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!==C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&j.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(D),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=p[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&p(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(F," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[S,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===S&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[k]||(a[k]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[S,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[k]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace(B,"$1"));return s[k]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[S,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[k]||(e[k]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===S&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[k]&&(v=Ce(v)),y&&!y[k]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[k]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(B,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace(B," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=N[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[k]?i.push(a):o.push(a);(a=N(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=S+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t===C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument===C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(S=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(S=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=k.split("").sort(D).join("")===k,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);k.find=h,k.expr=h.selectors,k.expr[":"]=k.expr.pseudos,k.uniqueSort=k.unique=h.uniqueSort,k.text=h.getText,k.isXMLDoc=h.isXML,k.contains=h.contains,k.escapeSelector=h.escape;var T=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&k(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},N=k.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var D=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?k.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?k.grep(e,function(e){return e===n!==r}):"string"!=typeof n?k.grep(e,function(e){return-1<i.call(n,e)!==r}):k.filter(n,e,r)}k.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?k.find.matchesSelector(r,e)?[r]:[]:k.find.matches(e,k.grep(t,function(e){return 1===e.nodeType}))},k.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(k(e).filter(function(){for(t=0;t<r;t++)if(k.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)k.find(e,i[t],n);return 1<r?k.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&N.test(e)?k(e):e||[],!1).length}});var q,L=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(k.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||q,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:L.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof k?t[0]:t,k.merge(this,k.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),D.test(r[1])&&k.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(k):k.makeArray(e,this)}).prototype=k.fn,q=k(E);var H=/^(?:parents|prev(?:Until|All))/,O={children:!0,contents:!0,next:!0,prev:!0};function P(e,t){while((e=e[t])&&1!==e.nodeType);return e}k.fn.extend({has:function(e){var t=k(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(k.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&k(e);if(!N.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&k.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?k.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(k(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(k.uniqueSort(k.merge(this.get(),k(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),k.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return T(e,"parentNode")},parentsUntil:function(e,t,n){return T(e,"parentNode",n)},next:function(e){return P(e,"nextSibling")},prev:function(e){return P(e,"previousSibling")},nextAll:function(e){return T(e,"nextSibling")},prevAll:function(e){return T(e,"previousSibling")},nextUntil:function(e,t,n){return T(e,"nextSibling",n)},prevUntil:function(e,t,n){return T(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return"undefined"!=typeof e.contentDocument?e.contentDocument:(A(e,"template")&&(e=e.content||e),k.merge([],e.childNodes))}},function(r,i){k.fn[r]=function(e,t){var n=k.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=k.filter(t,n)),1<this.length&&(O[r]||k.uniqueSort(n),H.test(r)&&n.reverse()),this.pushStack(n)}});var R=/[^\x20\t\r\n\f]+/g;function M(e){return e}function I(e){throw e}function W(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}k.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},k.each(e.match(R)||[],function(e,t){n[t]=!0}),n):k.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){k.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return k.each(arguments,function(e,t){var n;while(-1<(n=k.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<k.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},k.extend({Deferred:function(e){var o=[["notify","progress",k.Callbacks("memory"),k.Callbacks("memory"),2],["resolve","done",k.Callbacks("once memory"),k.Callbacks("once memory"),0,"resolved"],["reject","fail",k.Callbacks("once memory"),k.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return k.Deferred(function(r){k.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,M,s),l(u,o,I,s)):(u++,t.call(e,l(u,o,M,s),l(u,o,I,s),l(u,o,M,o.notifyWith))):(a!==M&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){k.Deferred.exceptionHook&&k.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==I&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(k.Deferred.getStackHook&&(t.stackTrace=k.Deferred.getStackHook()),C.setTimeout(t))}}return k.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:M,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:M)),o[2][3].add(l(0,e,m(n)?n:I))}).promise()},promise:function(e){return null!=e?k.extend(e,a):a}},s={};return k.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=k.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(W(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)W(i[t],a(t),o.reject);return o.promise()}});var $=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;k.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&$.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},k.readyException=function(e){C.setTimeout(function(){throw e})};var F=k.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),k.ready()}k.fn.ready=function(e){return F.then(e)["catch"](function(e){k.readyException(e)}),this},k.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--k.readyWait:k.isReady)||(k.isReady=!0)!==e&&0<--k.readyWait||F.resolveWith(E,[k])}}),k.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(k.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var _=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)_(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(k(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},z=/^-ms-/,U=/-([a-z])/g;function X(e,t){return t.toUpperCase()}function V(e){return e.replace(z,"ms-").replace(U,X)}var G=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=k.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},G(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[V(t)]=n;else for(r in t)i[V(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][V(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(V):(t=V(t))in r?[t]:t.match(R)||[]).length;while(n--)delete r[t[n]]}(void 0===t||k.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!k.isEmptyObject(t)}};var Q=new Y,J=new Y,K=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function ee(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:K.test(i)?JSON.parse(i):i)}catch(e){}J.set(e,t,n)}else n=void 0;return n}k.extend({hasData:function(e){return J.hasData(e)||Q.hasData(e)},data:function(e,t,n){return J.access(e,t,n)},removeData:function(e,t){J.remove(e,t)},_data:function(e,t,n){return Q.access(e,t,n)},_removeData:function(e,t){Q.remove(e,t)}}),k.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=J.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=V(r.slice(5)),ee(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){J.set(this,n)}):_(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=J.get(o,n))?t:void 0!==(t=ee(o,n))?t:void 0;this.each(function(){J.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){J.remove(this,e)})}}),k.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Q.get(e,t),n&&(!r||Array.isArray(n)?r=Q.access(e,t,k.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=k.queue(e,t),r=n.length,i=n.shift(),o=k._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){k.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Q.get(e,n)||Q.access(e,n,{empty:k.Callbacks("once memory").add(function(){Q.remove(e,[t+"queue",n])})})}}),k.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?k.queue(this[0],t):void 0===n?this:this.each(function(){var e=k.queue(this,t,n);k._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&k.dequeue(this,t)})},dequeue:function(e){return this.each(function(){k.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=k.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Q.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var te=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ne=new RegExp("^(?:([+-])=|)("+te+")([a-z%]*)$","i"),re=["Top","Right","Bottom","Left"],ie=E.documentElement,oe=function(e){return k.contains(e.ownerDocument,e)},ae={composed:!0};ie.getRootNode&&(oe=function(e){return k.contains(e.ownerDocument,e)||e.getRootNode(ae)===e.ownerDocument});var se=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&oe(e)&&"none"===k.css(e,"display")},ue=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=a[o];return i};function le(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return k.css(e,t,"")},u=s(),l=n&&n[3]||(k.cssNumber[t]?"":"px"),c=e.nodeType&&(k.cssNumber[t]||"px"!==l&&+u)&&ne.exec(k.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)k.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,k.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ce={};function fe(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Q.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&se(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ce[s])||(o=a.body.appendChild(a.createElement(s)),u=k.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ce[s]=u)))):"none"!==n&&(l[c]="none",Q.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}k.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){se(this)?k(this).show():k(this).hide()})}});var pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i,ge={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?k.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Q.set(e[n],"globalEval",!t||Q.get(t[n],"globalEval"))}ge.optgroup=ge.option,ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td;var me,xe,be=/<|&#?\w+;/;function we(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))k.merge(p,o.nodeType?[o]:o);else if(be.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+k.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;k.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<k.inArray(o,r))i&&i.push(o);else if(l=oe(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}me=E.createDocumentFragment().appendChild(E.createElement("div")),(xe=E.createElement("input")).setAttribute("type","radio"),xe.setAttribute("checked","checked"),xe.setAttribute("name","t"),me.appendChild(xe),y.checkClone=me.cloneNode(!0).cloneNode(!0).lastChild.checked,me.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!me.cloneNode(!0).lastChild.defaultValue;var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ee=/^([^.]*)(?:\.(.+)|)/;function ke(){return!0}function Se(){return!1}function Ne(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ae(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Se;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return k().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=k.guid++)),e.each(function(){k.event.add(this,t,i,r,n)})}function De(e,i,o){o?(Q.set(e,i,!1),k.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Q.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(k.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Q.set(this,i,r),t=o(this,i),this[i](),r!==(n=Q.get(this,i))||t?Q.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n.value}else r.length&&(Q.set(this,i,{value:k.event.trigger(k.extend(r[0],k.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Q.get(e,i)&&k.event.add(e,i,ke)}k.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.get(t);if(v){n.handler&&(n=(o=n).handler,i=o.selector),i&&k.find.matchesSelector(ie,i),n.guid||(n.guid=k.guid++),(u=v.events)||(u=v.events={}),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof k&&k.event.triggered!==e.type?k.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(R)||[""]).length;while(l--)d=g=(s=Ee.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=k.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=k.event.special[d]||{},c=k.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&k.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),k.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Q.hasData(e)&&Q.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(R)||[""]).length;while(l--)if(d=g=(s=Ee.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=k.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||k.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)k.event.remove(e,d+t[l],n,r,!0);k.isEmptyObject(u)&&Q.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=k.event.fix(e),u=new Array(arguments.length),l=(Q.get(this,"events")||{})[s.type]||[],c=k.event.special[s.type]||{};for(u[0]=s,t=1;t<arguments.length;t++)u[t]=arguments[t];if(s.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,s)){a=k.event.handlers.call(this,s,l),t=0;while((i=a[t++])&&!s.isPropagationStopped()){s.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!s.isImmediatePropagationStopped())s.rnamespace&&!1!==o.namespace&&!s.rnamespace.test(o.namespace)||(s.handleObj=o,s.data=o.data,void 0!==(r=((k.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(s.result=r)&&(s.preventDefault(),s.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,s),s.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<k(i,this).index(l):k.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(k.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[k.expando]?e:new k.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click",ke),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&De(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Q.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},k.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},k.Event=function(e,t){if(!(this instanceof k.Event))return new k.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?ke:Se,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&k.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[k.expando]=!0},k.Event.prototype={constructor:k.Event,isDefaultPrevented:Se,isPropagationStopped:Se,isImmediatePropagationStopped:Se,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=ke,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=ke,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=ke,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},k.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},k.event.addProp),k.each({focus:"focusin",blur:"focusout"},function(e,t){k.event.special[e]={setup:function(){return De(this,e,Ne),!1},trigger:function(){return De(this,e),!0},delegateType:t}}),k.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){k.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||k.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),k.fn.extend({on:function(e,t,n,r){return Ae(this,e,t,n,r)},one:function(e,t,n,r){return Ae(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,k(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Se),this.each(function(){k.event.remove(this,e,n,t)})}});var je=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,qe=/<script|<style|<link/i,Le=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Oe(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&k(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Re(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Me(e,t){var n,r,i,o,a,s,u,l;if(1===t.nodeType){if(Q.hasData(e)&&(o=Q.access(e),a=Q.set(t,o),l=o.events))for(i in delete a.handle,a.events={},l)for(n=0,r=l[i].length;n<r;n++)k.event.add(t,i,l[i][n]);J.hasData(e)&&(s=J.access(e),u=k.extend({},s),J.set(t,u))}}function Ie(n,r,i,o){r=g.apply([],r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Le.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),Ie(t,r,i,o)});if(f&&(t=(e=we(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=k.map(ve(e,"script"),Pe)).length;c<f;c++)u=e,c!==p&&(u=k.clone(u,!0,!0),s&&k.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,k.map(a,Re),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Q.access(u,"globalEval")&&k.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?k._evalUrl&&!u.noModule&&k._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):b(u.textContent.replace(He,""),u,l))}return n}function We(e,t,n){for(var r,i=t?k.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||k.cleanData(ve(r)),r.parentNode&&(n&&oe(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}k.extend({htmlPrefilter:function(e){return e.replace(je,"<$1></$2>")},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=oe(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||k.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Me(o[r],a[r]);else Me(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=k.event.special,o=0;void 0!==(n=e[o]);o++)if(G(n)){if(t=n[Q.expando]){if(t.events)for(r in t.events)i[r]?k.event.remove(n,r):k.removeEvent(n,r,t.handle);n[Q.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),k.fn.extend({detach:function(e){return We(this,e,!0)},remove:function(e){return We(this,e)},text:function(e){return _(this,function(e){return void 0===e?k.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return Ie(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Oe(this,e).appendChild(e)})},prepend:function(){return Ie(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Oe(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return Ie(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(k.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return k.clone(this,e,t)})},html:function(e){return _(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!qe.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=k.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(k.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return Ie(this,arguments,function(e){var t=this.parentNode;k.inArray(this,n)<0&&(k.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),k.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){k.fn[e]=function(e){for(var t,n=[],r=k(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),k(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var $e=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),Fe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Be=new RegExp(re.join("|"),"i");function _e(e,t,n){var r,i,o,a,s=e.style;return(n=n||Fe(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||oe(e)||(a=k.style(e,t)),!y.pixelBoxStyles()&&$e.test(a)&&Be.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function ze(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){s.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ie.appendChild(s).appendChild(u);var e=C.getComputedStyle(u);n="1%"!==e.top,a=12===t(e.marginLeft),u.style.right="60%",o=36===t(e.right),r=36===t(e.width),u.style.position="absolute",i=12===t(u.offsetWidth/3),ie.removeChild(s),u=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s=E.createElement("div"),u=E.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===u.style.backgroundClip,k.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),i}}))}();var Ue=["Webkit","Moz","ms"],Xe=E.createElement("div").style,Ve={};function Ge(e){var t=k.cssProps[e]||Ve[e];return t||(e in Xe?e:Ve[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Ue.length;while(n--)if((e=Ue[n]+t)in Xe)return e}(e)||e)}var Ye=/^(none|table(?!-c[ea]).+)/,Qe=/^--/,Je={position:"absolute",visibility:"hidden",display:"block"},Ke={letterSpacing:"0",fontWeight:"400"};function Ze(e,t,n){var r=ne.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function et(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=k.css(e,n+re[a],!0,i)),r?("content"===n&&(u-=k.css(e,"padding"+re[a],!0,i)),"margin"!==n&&(u-=k.css(e,"border"+re[a]+"Width",!0,i))):(u+=k.css(e,"padding"+re[a],!0,i),"padding"!==n?u+=k.css(e,"border"+re[a]+"Width",!0,i):s+=k.css(e,"border"+re[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function tt(e,t,n){var r=Fe(e),i=(!y.boxSizingReliable()||n)&&"border-box"===k.css(e,"boxSizing",!1,r),o=i,a=_e(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if($e.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||"auto"===a||!parseFloat(a)&&"inline"===k.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===k.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+et(e,t,n||(i?"border":"content"),o,r,a)+"px"}function nt(e,t,n,r,i){return new nt.prototype.init(e,t,n,r,i)}k.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=_e(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=V(t),u=Qe.test(t),l=e.style;if(u||(t=Ge(s)),a=k.cssHooks[t]||k.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=ne.exec(n))&&i[1]&&(n=le(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(k.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=V(t);return Qe.test(t)||(t=Ge(s)),(a=k.cssHooks[t]||k.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=_e(e,t,r)),"normal"===i&&t in Ke&&(i=Ke[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),k.each(["height","width"],function(e,u){k.cssHooks[u]={get:function(e,t,n){if(t)return!Ye.test(k.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?tt(e,u,n):ue(e,Je,function(){return tt(e,u,n)})},set:function(e,t,n){var r,i=Fe(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===k.css(e,"boxSizing",!1,i),s=n?et(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-et(e,u,"border",!1,i)-.5)),s&&(r=ne.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=k.css(e,u)),Ze(0,t,s)}}}),k.cssHooks.marginLeft=ze(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(_e(e,"marginLeft"))||e.getBoundingClientRect().left-ue(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),k.each({margin:"",padding:"",border:"Width"},function(i,o){k.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+re[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(k.cssHooks[i+o].set=Ze)}),k.fn.extend({css:function(e,t){return _(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Fe(e),i=t.length;a<i;a++)o[t[a]]=k.css(e,t[a],!1,r);return o}return void 0!==n?k.style(e,t,n):k.css(e,t)},e,t,1<arguments.length)}}),((k.Tween=nt).prototype={constructor:nt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||k.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(k.cssNumber[n]?"":"px")},cur:function(){var e=nt.propHooks[this.prop];return e&&e.get?e.get(this):nt.propHooks._default.get(this)},run:function(e){var t,n=nt.propHooks[this.prop];return this.options.duration?this.pos=t=k.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):nt.propHooks._default.set(this),this}}).init.prototype=nt.prototype,(nt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=k.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){k.fx.step[e.prop]?k.fx.step[e.prop](e):1!==e.elem.nodeType||!k.cssHooks[e.prop]&&null==e.elem.style[Ge(e.prop)]?e.elem[e.prop]=e.now:k.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=nt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},k.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},k.fx=nt.prototype.init,k.fx.step={};var rt,it,ot,at,st=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function lt(){it&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(lt):C.setTimeout(lt,k.fx.interval),k.fx.tick())}function ct(){return C.setTimeout(function(){rt=void 0}),rt=Date.now()}function ft(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=re[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function pt(e,t,n){for(var r,i=(dt.tweeners[t]||[]).concat(dt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function dt(o,e,t){var n,a,r=0,i=dt.prefilters.length,s=k.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=rt||ct(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:k.extend({},e),opts:k.extend(!0,{specialEasing:{},easing:k.easing._default},t),originalProperties:e,originalOptions:t,startTime:rt||ct(),duration:t.duration,tweens:[],createTween:function(e,t){var n=k.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=V(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=k.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=dt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(k._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return k.map(c,pt,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),k.fx.timer(k.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}k.Animation=k.extend(dt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,ne.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(R);for(var n,r=0,i=e.length;r<i;r++)n=e[r],dt.tweeners[n]=dt.tweeners[n]||[],dt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&se(e),v=Q.get(e,"fxshow");for(r in n.queue||(null==(a=k._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,k.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],st.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||k.style(e,r)}if((u=!k.isEmptyObject(t))||!k.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Q.get(e,"display")),"none"===(c=k.css(e,"display"))&&(l?c=l:(fe([e],!0),l=e.style.display||l,c=k.css(e,"display"),fe([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===k.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Q.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&fe([e],!0),p.done(function(){for(r in g||fe([e]),Q.remove(e,"fxshow"),d)k.style(e,r,d[r])})),u=pt(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?dt.prefilters.unshift(e):dt.prefilters.push(e)}}),k.speed=function(e,t,n){var r=e&&"object"==typeof e?k.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return k.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in k.fx.speeds?r.duration=k.fx.speeds[r.duration]:r.duration=k.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&k.dequeue(this,r.queue)},r},k.fn.extend({fadeTo:function(e,t,n,r){return this.filter(se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=k.isEmptyObject(t),o=k.speed(e,n,r),a=function(){var e=dt(this,k.extend({},t),o);(i||Q.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=k.timers,r=Q.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&ut.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||k.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Q.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=k.timers,o=n?n.length:0;for(t.finish=!0,k.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),k.each(["toggle","show","hide"],function(e,r){var i=k.fn[r];k.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(ft(r,!0),e,t,n)}}),k.each({slideDown:ft("show"),slideUp:ft("hide"),slideToggle:ft("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){k.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),k.timers=[],k.fx.tick=function(){var e,t=0,n=k.timers;for(rt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||k.fx.stop(),rt=void 0},k.fx.timer=function(e){k.timers.push(e),k.fx.start()},k.fx.interval=13,k.fx.start=function(){it||(it=!0,lt())},k.fx.stop=function(){it=null},k.fx.speeds={slow:600,fast:200,_default:400},k.fn.delay=function(r,e){return r=k.fx&&k.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},ot=E.createElement("input"),at=E.createElement("select").appendChild(E.createElement("option")),ot.type="checkbox",y.checkOn=""!==ot.value,y.optSelected=at.selected,(ot=E.createElement("input")).value="t",ot.type="radio",y.radioValue="t"===ot.value;var ht,gt=k.expr.attrHandle;k.fn.extend({attr:function(e,t){return _(this,k.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){k.removeAttr(this,e)})}}),k.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?k.prop(e,t,n):(1===o&&k.isXMLDoc(e)||(i=k.attrHooks[t.toLowerCase()]||(k.expr.match.bool.test(t)?ht:void 0)),void 0!==n?null===n?void k.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=k.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(R);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ht={set:function(e,t,n){return!1===t?k.removeAttr(e,n):e.setAttribute(n,n),n}},k.each(k.expr.match.bool.source.match(/\w+/g),function(e,t){var a=gt[t]||k.find.attr;gt[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=gt[o],gt[o]=r,r=null!=a(e,t,n)?o:null,gt[o]=i),r}});var vt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;function mt(e){return(e.match(R)||[]).join(" ")}function xt(e){return e.getAttribute&&e.getAttribute("class")||""}function bt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(R)||[]}k.fn.extend({prop:function(e,t){return _(this,k.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[k.propFix[e]||e]})}}),k.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&k.isXMLDoc(e)||(t=k.propFix[t]||t,i=k.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=k.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(k.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),k.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){k.propFix[this.toLowerCase()]=this}),k.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).addClass(t.call(this,e,xt(this)))});if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){k(this).removeClass(t.call(this,e,xt(this)))});if(!arguments.length)return this.attr("class","");if((e=bt(t)).length)while(n=this[u++])if(i=xt(n),r=1===n.nodeType&&" "+mt(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=mt(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){k(this).toggleClass(i.call(this,e,xt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=k(this),r=bt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=xt(this))&&Q.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Q.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+mt(xt(n))+" ").indexOf(t))return!0;return!1}});var wt=/\r/g;k.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,k(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=k.map(t,function(e){return null==e?"":e+""})),(r=k.valHooks[this.type]||k.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=k.valHooks[t.type]||k.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(wt,""):null==e?"":e:void 0}}),k.extend({valHooks:{option:{get:function(e){var t=k.find.attr(e,"value");return null!=t?t:mt(k.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=k(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=k.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<k.inArray(k.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),k.each(["radio","checkbox"],function(){k.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<k.inArray(k(e).val(),t)}},y.checkOn||(k.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var Tt=/^(?:focusinfocus|focusoutblur)$/,Ct=function(e){e.stopPropagation()};k.extend(k.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!Tt.test(d+k.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[k.expando]?e:new k.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:k.makeArray(t,[e]),c=k.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,Tt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Q.get(o,"events")||{})[e.type]&&Q.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&G(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!G(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),k.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,Ct),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,Ct),k.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=k.extend(new k.Event,n,{type:e,isSimulated:!0});k.event.trigger(r,null,t)}}),k.fn.extend({trigger:function(e,t){return this.each(function(){k.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return k.event.trigger(e,t,n,!0)}}),y.focusin||k.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){k.event.simulate(r,e.target,k.event.fix(e))};k.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=Q.access(e,r);t||e.addEventListener(n,i,!0),Q.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=Q.access(e,r)-1;t?Q.access(e,r,t):(e.removeEventListener(n,i,!0),Q.remove(e,r))}}});var Et=C.location,kt=Date.now(),St=/\?/;k.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||k.error("Invalid XML: "+e),t};var Nt=/\[\]$/,At=/\r?\n/g,Dt=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;function qt(n,e,r,i){var t;if(Array.isArray(e))k.each(e,function(e,t){r||Nt.test(n)?i(n,t):qt(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)qt(n+"["+t+"]",e[t],r,i)}k.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!k.isPlainObject(e))k.each(e,function(){i(this.name,this.value)});else for(n in e)qt(n,e[n],t,i);return r.join("&")},k.fn.extend({serialize:function(){return k.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=k.prop(this,"elements");return e?k.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!k(this).is(":disabled")&&jt.test(this.nodeName)&&!Dt.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=k(this).val();return null==n?null:Array.isArray(n)?k.map(n,function(e){return{name:t.name,value:e.replace(At,"\r\n")}}):{name:t.name,value:n.replace(At,"\r\n")}}).get()}});var Lt=/%20/g,Ht=/#.*$/,Ot=/([?&])_=[^&]*/,Pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Rt=/^(?:GET|HEAD)$/,Mt=/^\/\//,It={},Wt={},$t="*/".concat("*"),Ft=E.createElement("a");function Bt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(R)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function _t(t,i,o,a){var s={},u=t===Wt;function l(e){var r;return s[e]=!0,k.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function zt(e,t){var n,r,i=k.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&k.extend(!0,e,r),e}Ft.href=Et.href,k.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Et.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Et.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":k.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,k.ajaxSettings),t):zt(k.ajaxSettings,e)},ajaxPrefilter:Bt(It),ajaxTransport:Bt(Wt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=k.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?k(y):k.event,x=k.Deferred(),b=k.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=Pt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||Et.href)+"").replace(Mt,Et.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(R)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Ft.protocol+"//"+Ft.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=k.param(v.data,v.traditional)),_t(It,v,t,T),h)return T;for(i in(g=k.event&&v.global)&&0==k.active++&&k.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Rt.test(v.type),f=v.url.replace(Ht,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Lt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(St.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Ot,"$1"),o=(St.test(f)?"&":"?")+"_="+kt+++o),v.url=f+o),v.ifModified&&(k.lastModified[f]&&T.setRequestHeader("If-Modified-Since",k.lastModified[f]),k.etag[f]&&T.setRequestHeader("If-None-Match",k.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+$t+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=_t(Wt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(k.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(k.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--k.active||k.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return k.get(e,t,n,"json")},getScript:function(e,t){return k.get(e,void 0,t,"script")}}),k.each(["get","post"],function(e,i){k[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),k.ajax(k.extend({url:e,type:i,dataType:r,data:t,success:n},k.isPlainObject(e)&&e))}}),k._evalUrl=function(e,t){return k.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){k.globalEval(e,t)}})},k.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=k(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){k(this).wrapInner(n.call(this,e))}):this.each(function(){var e=k(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){k(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){k(this).replaceWith(this.childNodes)}),this}}),k.expr.pseudos.hidden=function(e){return!k.expr.pseudos.visible(e)},k.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},k.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Ut={0:200,1223:204},Xt=k.ajaxSettings.xhr();y.cors=!!Xt&&"withCredentials"in Xt,y.ajax=Xt=!!Xt,k.ajaxTransport(function(i){var o,a;if(y.cors||Xt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Ut[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),k.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),k.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return k.globalEval(e),e}}}),k.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),k.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=k("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var Vt,Gt=[],Yt=/(=)\?(?=&|$)|\?\?/;k.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Gt.pop()||k.expando+"_"+kt++;return this[e]=!0,e}}),k.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Yt,"$1"+r):!1!==e.jsonp&&(e.url+=(St.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||k.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?k(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Gt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((Vt=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Vt.childNodes.length),k.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=D.exec(e))?[t.createElement(i[1])]:(i=we([e],t,o),o&&o.length&&k(o).remove(),k.merge([],i.childNodes)));var r,i,o},k.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=mt(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&k.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?k("<div>").append(k.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},k.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){k.fn[t]=function(e){return this.on(t,e)}}),k.expr.pseudos.animated=function(t){return k.grep(k.timers,function(e){return t===e.elem}).length},k.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=k.css(e,"position"),c=k(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=k.css(e,"top"),u=k.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,k.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},k.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){k.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===k.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===k.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=k(e).offset()).top+=k.css(e,"borderTopWidth",!0),i.left+=k.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-k.css(r,"marginTop",!0),left:t.left-i.left-k.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===k.css(e,"position"))e=e.offsetParent;return e||ie})}}),k.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;k.fn[t]=function(e){return _(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),k.each(["top","left"],function(e,n){k.cssHooks[n]=ze(y.pixelPosition,function(e,t){if(t)return t=_e(e,n),$e.test(t)?k(e).position()[n]+"px":t})}),k.each({Height:"height",Width:"width"},function(a,s){k.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){k.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return _(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?k.css(e,t,i):k.style(e,t,n,i)},s,n?e:void 0,n)}})}),k.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){k.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),k.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),k.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}}),k.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||k.guid++,i},k.holdReady=function(e){e?k.readyWait++:k.ready(!0)},k.isArray=Array.isArray,k.parseJSON=JSON.parse,k.nodeName=A,k.isFunction=m,k.isWindow=x,k.camelCase=V,k.type=w,k.now=Date.now,k.isNumeric=function(e){var t=k.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return k});var Qt=C.jQuery,Jt=C.$;return k.noConflict=function(e){return C.$===k&&(C.$=Jt),e&&C.jQuery===k&&(C.jQuery=Qt),k},e||(C.jQuery=C.$=k),k});

/*!
  * Bootstrap v4.4.1 (https://getbootstrap.com/)
  * Copyright 2011-2019 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],e):e((t=t||self).bootstrap={},t.jQuery,t.Popper)}(this,function(t,g,u){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function l(o){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e(Object(r),!0).forEach(function(t){var e,n,i;e=o,i=r[n=t],n in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach(function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(r,t))})}return o}g=g&&g.hasOwnProperty("default")?g.default:g,u=u&&u.hasOwnProperty("default")?u.default:u;var n="transitionend";function o(t){var e=this,n=!1;return g(this).one(_.TRANSITION_END,function(){n=!0}),setTimeout(function(){n||_.triggerTransitionEnd(e)},t),this}var _={TRANSITION_END:"bsTransitionEnd",getUID:function(t){for(;t+=~~(1e6*Math.random()),document.getElementById(t););return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var n=t.getAttribute("href");e=n&&"#"!==n?n.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var e=g(t).css("transition-duration"),n=g(t).css("transition-delay"),i=parseFloat(e),o=parseFloat(n);return i||o?(e=e.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(e)+parseFloat(n))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){g(t).trigger(n)},supportsTransitionEnd:function(){return Boolean(n)},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,n){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var o=n[i],r=e[i],s=r&&_.isElement(r)?"element":(a=r,{}.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(o).test(s))throw new Error(t.toUpperCase()+': Option "'+i+'" provided type "'+s+'" but expected type "'+o+'".')}var a},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"!=typeof t.getRootNode)return t instanceof ShadowRoot?t:t.parentNode?_.findShadowRoot(t.parentNode):null;var e=t.getRootNode();return e instanceof ShadowRoot?e:null},jQueryDetection:function(){if("undefined"==typeof g)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=g.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||4<=t[0])throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};_.jQueryDetection(),g.fn.emulateTransitionEnd=o,g.event.special[_.TRANSITION_END]={bindType:n,delegateType:n,handle:function(t){if(g(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}};var r="alert",a="bs.alert",c="."+a,h=g.fn[r],f={CLOSE:"close"+c,CLOSED:"closed"+c,CLICK_DATA_API:"click"+c+".data-api"},d="alert",m="fade",p="show",v=function(){function i(t){this._element=t}var t=i.prototype;return t.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},t.dispose=function(){g.removeData(this._element,a),this._element=null},t._getRootElement=function(t){var e=_.getSelectorFromElement(t),n=!1;return e&&(n=document.querySelector(e)),n=n||g(t).closest("."+d)[0]},t._triggerCloseEvent=function(t){var e=g.Event(f.CLOSE);return g(t).trigger(e),e},t._removeElement=function(e){var n=this;if(g(e).removeClass(p),g(e).hasClass(m)){var t=_.getTransitionDurationFromElement(e);g(e).one(_.TRANSITION_END,function(t){return n._destroyElement(e,t)}).emulateTransitionEnd(t)}else this._destroyElement(e)},t._destroyElement=function(t){g(t).detach().trigger(f.CLOSED).remove()},i._jQueryInterface=function(n){return this.each(function(){var t=g(this),e=t.data(a);e||(e=new i(this),t.data(a,e)),"close"===n&&e[n](this)})},i._handleDismiss=function(e){return function(t){t&&t.preventDefault(),e.close(this)}},s(i,null,[{key:"VERSION",get:function(){return"4.4.1"}}]),i}();g(document).on(f.CLICK_DATA_API,'[data-dismiss="alert"]',v._handleDismiss(new v)),g.fn[r]=v._jQueryInterface,g.fn[r].Constructor=v,g.fn[r].noConflict=function(){return g.fn[r]=h,v._jQueryInterface};var y="button",E="bs.button",C="."+E,T=".data-api",b=g.fn[y],S="active",D="btn",I="focus",w='[data-toggle^="button"]',A='[data-toggle="buttons"]',N='[data-toggle="button"]',O='[data-toggle="buttons"] .btn',k='input:not([type="hidden"])',P=".active",L=".btn",j={CLICK_DATA_API:"click"+C+T,FOCUS_BLUR_DATA_API:"focus"+C+T+" blur"+C+T,LOAD_DATA_API:"load"+C+T},H=function(){function n(t){this._element=t}var t=n.prototype;return t.toggle=function(){var t=!0,e=!0,n=g(this._element).closest(A)[0];if(n){var i=this._element.querySelector(k);if(i){if("radio"===i.type)if(i.checked&&this._element.classList.contains(S))t=!1;else{var o=n.querySelector(P);o&&g(o).removeClass(S)}else"checkbox"===i.type?"LABEL"===this._element.tagName&&i.checked===this._element.classList.contains(S)&&(t=!1):t=!1;t&&(i.checked=!this._element.classList.contains(S),g(i).trigger("change")),i.focus(),e=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(e&&this._element.setAttribute("aria-pressed",!this._element.classList.contains(S)),t&&g(this._element).toggleClass(S))},t.dispose=function(){g.removeData(this._element,E),this._element=null},n._jQueryInterface=function(e){return this.each(function(){var t=g(this).data(E);t||(t=new n(this),g(this).data(E,t)),"toggle"===e&&t[e]()})},s(n,null,[{key:"VERSION",get:function(){return"4.4.1"}}]),n}();g(document).on(j.CLICK_DATA_API,w,function(t){var e=t.target;if(g(e).hasClass(D)||(e=g(e).closest(L)[0]),!e||e.hasAttribute("disabled")||e.classList.contains("disabled"))t.preventDefault();else{var n=e.querySelector(k);if(n&&(n.hasAttribute("disabled")||n.classList.contains("disabled")))return void t.preventDefault();H._jQueryInterface.call(g(e),"toggle")}}).on(j.FOCUS_BLUR_DATA_API,w,function(t){var e=g(t.target).closest(L)[0];g(e).toggleClass(I,/^focus(in)?$/.test(t.type))}),g(window).on(j.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(O)),e=0,n=t.length;e<n;e++){var i=t[e],o=i.querySelector(k);o.checked||o.hasAttribute("checked")?i.classList.add(S):i.classList.remove(S)}for(var r=0,s=(t=[].slice.call(document.querySelectorAll(N))).length;r<s;r++){var a=t[r];"true"===a.getAttribute("aria-pressed")?a.classList.add(S):a.classList.remove(S)}}),g.fn[y]=H._jQueryInterface,g.fn[y].Constructor=H,g.fn[y].noConflict=function(){return g.fn[y]=b,H._jQueryInterface};var R="carousel",x="bs.carousel",F="."+x,U=".data-api",W=g.fn[R],q={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},M={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},K="next",Q="prev",B="left",V="right",Y={SLIDE:"slide"+F,SLID:"slid"+F,KEYDOWN:"keydown"+F,MOUSEENTER:"mouseenter"+F,MOUSELEAVE:"mouseleave"+F,TOUCHSTART:"touchstart"+F,TOUCHMOVE:"touchmove"+F,TOUCHEND:"touchend"+F,POINTERDOWN:"pointerdown"+F,POINTERUP:"pointerup"+F,DRAG_START:"dragstart"+F,LOAD_DATA_API:"load"+F+U,CLICK_DATA_API:"click"+F+U},z="carousel",X="active",$="slide",G="carousel-item-right",J="carousel-item-left",Z="carousel-item-next",tt="carousel-item-prev",et="pointer-event",nt=".active",it=".active.carousel-item",ot=".carousel-item",rt=".carousel-item img",st=".carousel-item-next, .carousel-item-prev",at=".carousel-indicators",lt="[data-slide], [data-slide-to]",ct='[data-ride="carousel"]',ht={TOUCH:"touch",PEN:"pen"},ut=function(){function r(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(at),this._touchSupported="ontouchstart"in document.documentElement||0<navigator.maxTouchPoints,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var t=r.prototype;return t.next=function(){this._isSliding||this._slide(K)},t.nextWhenVisible=function(){!document.hidden&&g(this._element).is(":visible")&&"hidden"!==g(this._element).css("visibility")&&this.next()},t.prev=function(){this._isSliding||this._slide(Q)},t.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(st)&&(_.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},t.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},t.to=function(t){var e=this;this._activeElement=this._element.querySelector(it);var n=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)g(this._element).one(Y.SLID,function(){return e.to(t)});else{if(n===t)return this.pause(),void this.cycle();var i=n<t?K:Q;this._slide(i,this._items[t])}},t.dispose=function(){g(this._element).off(F),g.removeData(this._element,x),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},t._getConfig=function(t){return t=l({},q,{},t),_.typeCheckConfig(R,t,M),t},t._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=40)){var e=t/this.touchDeltaX;(this.touchDeltaX=0)<e&&this.prev(),e<0&&this.next()}},t._addEventListeners=function(){var e=this;this._config.keyboard&&g(this._element).on(Y.KEYDOWN,function(t){return e._keydown(t)}),"hover"===this._config.pause&&g(this._element).on(Y.MOUSEENTER,function(t){return e.pause(t)}).on(Y.MOUSELEAVE,function(t){return e.cycle(t)}),this._config.touch&&this._addTouchEventListeners()},t._addTouchEventListeners=function(){var e=this;if(this._touchSupported){var n=function(t){e._pointerEvent&&ht[t.originalEvent.pointerType.toUpperCase()]?e.touchStartX=t.originalEvent.clientX:e._pointerEvent||(e.touchStartX=t.originalEvent.touches[0].clientX)},i=function(t){e._pointerEvent&&ht[t.originalEvent.pointerType.toUpperCase()]&&(e.touchDeltaX=t.originalEvent.clientX-e.touchStartX),e._handleSwipe(),"hover"===e._config.pause&&(e.pause(),e.touchTimeout&&clearTimeout(e.touchTimeout),e.touchTimeout=setTimeout(function(t){return e.cycle(t)},500+e._config.interval))};g(this._element.querySelectorAll(rt)).on(Y.DRAG_START,function(t){return t.preventDefault()}),this._pointerEvent?(g(this._element).on(Y.POINTERDOWN,function(t){return n(t)}),g(this._element).on(Y.POINTERUP,function(t){return i(t)}),this._element.classList.add(et)):(g(this._element).on(Y.TOUCHSTART,function(t){return n(t)}),g(this._element).on(Y.TOUCHMOVE,function(t){return function(t){t.originalEvent.touches&&1<t.originalEvent.touches.length?e.touchDeltaX=0:e.touchDeltaX=t.originalEvent.touches[0].clientX-e.touchStartX}(t)}),g(this._element).on(Y.TOUCHEND,function(t){return i(t)}))}},t._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},t._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(ot)):[],this._items.indexOf(t)},t._getItemByDirection=function(t,e){var n=t===K,i=t===Q,o=this._getItemIndex(e),r=this._items.length-1;if((i&&0===o||n&&o===r)&&!this._config.wrap)return e;var s=(o+(t===Q?-1:1))%this._items.length;return-1==s?this._items[this._items.length-1]:this._items[s]},t._triggerSlideEvent=function(t,e){var n=this._getItemIndex(t),i=this._getItemIndex(this._element.querySelector(it)),o=g.Event(Y.SLIDE,{relatedTarget:t,direction:e,from:i,to:n});return g(this._element).trigger(o),o},t._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var e=[].slice.call(this._indicatorsElement.querySelectorAll(nt));g(e).removeClass(X);var n=this._indicatorsElement.children[this._getItemIndex(t)];n&&g(n).addClass(X)}},t._slide=function(t,e){var n,i,o,r=this,s=this._element.querySelector(it),a=this._getItemIndex(s),l=e||s&&this._getItemByDirection(t,s),c=this._getItemIndex(l),h=Boolean(this._interval);if(o=t===K?(n=J,i=Z,B):(n=G,i=tt,V),l&&g(l).hasClass(X))this._isSliding=!1;else if(!this._triggerSlideEvent(l,o).isDefaultPrevented()&&s&&l){this._isSliding=!0,h&&this.pause(),this._setActiveIndicatorElement(l);var u=g.Event(Y.SLID,{relatedTarget:l,direction:o,from:a,to:c});if(g(this._element).hasClass($)){g(l).addClass(i),_.reflow(l),g(s).addClass(n),g(l).addClass(n);var f=parseInt(l.getAttribute("data-interval"),10);f?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=f):this._config.interval=this._config.defaultInterval||this._config.interval;var d=_.getTransitionDurationFromElement(s);g(s).one(_.TRANSITION_END,function(){g(l).removeClass(n+" "+i).addClass(X),g(s).removeClass(X+" "+i+" "+n),r._isSliding=!1,setTimeout(function(){return g(r._element).trigger(u)},0)}).emulateTransitionEnd(d)}else g(s).removeClass(X),g(l).addClass(X),this._isSliding=!1,g(this._element).trigger(u);h&&this.cycle()}},r._jQueryInterface=function(i){return this.each(function(){var t=g(this).data(x),e=l({},q,{},g(this).data());"object"==typeof i&&(e=l({},e,{},i));var n="string"==typeof i?i:e.slide;if(t||(t=new r(this,e),g(this).data(x,t)),"number"==typeof i)t.to(i);else if("string"==typeof n){if("undefined"==typeof t[n])throw new TypeError('No method named "'+n+'"');t[n]()}else e.interval&&e.ride&&(t.pause(),t.cycle())})},r._dataApiClickHandler=function(t){var e=_.getSelectorFromElement(this);if(e){var n=g(e)[0];if(n&&g(n).hasClass(z)){var i=l({},g(n).data(),{},g(this).data()),o=this.getAttribute("data-slide-to");o&&(i.interval=!1),r._jQueryInterface.call(g(n),i),o&&g(n).data(x).to(o),t.preventDefault()}}},s(r,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return q}}]),r}();g(document).on(Y.CLICK_DATA_API,lt,ut._dataApiClickHandler),g(window).on(Y.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(ct)),e=0,n=t.length;e<n;e++){var i=g(t[e]);ut._jQueryInterface.call(i,i.data())}}),g.fn[R]=ut._jQueryInterface,g.fn[R].Constructor=ut,g.fn[R].noConflict=function(){return g.fn[R]=W,ut._jQueryInterface};var ft="collapse",dt="bs.collapse",gt="."+dt,_t=g.fn[ft],mt={toggle:!0,parent:""},pt={toggle:"boolean",parent:"(string|element)"},vt={SHOW:"show"+gt,SHOWN:"shown"+gt,HIDE:"hide"+gt,HIDDEN:"hidden"+gt,CLICK_DATA_API:"click"+gt+".data-api"},yt="show",Et="collapse",Ct="collapsing",Tt="collapsed",bt="width",St="height",Dt=".show, .collapsing",It='[data-toggle="collapse"]',wt=function(){function a(e,t){this._isTransitioning=!1,this._element=e,this._config=this._getConfig(t),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'));for(var n=[].slice.call(document.querySelectorAll(It)),i=0,o=n.length;i<o;i++){var r=n[i],s=_.getSelectorFromElement(r),a=[].slice.call(document.querySelectorAll(s)).filter(function(t){return t===e});null!==s&&0<a.length&&(this._selector=s,this._triggerArray.push(r))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var t=a.prototype;return t.toggle=function(){g(this._element).hasClass(yt)?this.hide():this.show()},t.show=function(){var t,e,n=this;if(!this._isTransitioning&&!g(this._element).hasClass(yt)&&(this._parent&&0===(t=[].slice.call(this._parent.querySelectorAll(Dt)).filter(function(t){return"string"==typeof n._config.parent?t.getAttribute("data-parent")===n._config.parent:t.classList.contains(Et)})).length&&(t=null),!(t&&(e=g(t).not(this._selector).data(dt))&&e._isTransitioning))){var i=g.Event(vt.SHOW);if(g(this._element).trigger(i),!i.isDefaultPrevented()){t&&(a._jQueryInterface.call(g(t).not(this._selector),"hide"),e||g(t).data(dt,null));var o=this._getDimension();g(this._element).removeClass(Et).addClass(Ct),this._element.style[o]=0,this._triggerArray.length&&g(this._triggerArray).removeClass(Tt).attr("aria-expanded",!0),this.setTransitioning(!0);var r="scroll"+(o[0].toUpperCase()+o.slice(1)),s=_.getTransitionDurationFromElement(this._element);g(this._element).one(_.TRANSITION_END,function(){g(n._element).removeClass(Ct).addClass(Et).addClass(yt),n._element.style[o]="",n.setTransitioning(!1),g(n._element).trigger(vt.SHOWN)}).emulateTransitionEnd(s),this._element.style[o]=this._element[r]+"px"}}},t.hide=function(){var t=this;if(!this._isTransitioning&&g(this._element).hasClass(yt)){var e=g.Event(vt.HIDE);if(g(this._element).trigger(e),!e.isDefaultPrevented()){var n=this._getDimension();this._element.style[n]=this._element.getBoundingClientRect()[n]+"px",_.reflow(this._element),g(this._element).addClass(Ct).removeClass(Et).removeClass(yt);var i=this._triggerArray.length;if(0<i)for(var o=0;o<i;o++){var r=this._triggerArray[o],s=_.getSelectorFromElement(r);if(null!==s)g([].slice.call(document.querySelectorAll(s))).hasClass(yt)||g(r).addClass(Tt).attr("aria-expanded",!1)}this.setTransitioning(!0);this._element.style[n]="";var a=_.getTransitionDurationFromElement(this._element);g(this._element).one(_.TRANSITION_END,function(){t.setTransitioning(!1),g(t._element).removeClass(Ct).addClass(Et).trigger(vt.HIDDEN)}).emulateTransitionEnd(a)}}},t.setTransitioning=function(t){this._isTransitioning=t},t.dispose=function(){g.removeData(this._element,dt),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},t._getConfig=function(t){return(t=l({},mt,{},t)).toggle=Boolean(t.toggle),_.typeCheckConfig(ft,t,pt),t},t._getDimension=function(){return g(this._element).hasClass(bt)?bt:St},t._getParent=function(){var t,n=this;_.isElement(this._config.parent)?(t=this._config.parent,"undefined"!=typeof this._config.parent.jquery&&(t=this._config.parent[0])):t=document.querySelector(this._config.parent);var e='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',i=[].slice.call(t.querySelectorAll(e));return g(i).each(function(t,e){n._addAriaAndCollapsedClass(a._getTargetFromElement(e),[e])}),t},t._addAriaAndCollapsedClass=function(t,e){var n=g(t).hasClass(yt);e.length&&g(e).toggleClass(Tt,!n).attr("aria-expanded",n)},a._getTargetFromElement=function(t){var e=_.getSelectorFromElement(t);return e?document.querySelector(e):null},a._jQueryInterface=function(i){return this.each(function(){var t=g(this),e=t.data(dt),n=l({},mt,{},t.data(),{},"object"==typeof i&&i?i:{});if(!e&&n.toggle&&/show|hide/.test(i)&&(n.toggle=!1),e||(e=new a(this,n),t.data(dt,e)),"string"==typeof i){if("undefined"==typeof e[i])throw new TypeError('No method named "'+i+'"');e[i]()}})},s(a,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return mt}}]),a}();g(document).on(vt.CLICK_DATA_API,It,function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var n=g(this),e=_.getSelectorFromElement(this),i=[].slice.call(document.querySelectorAll(e));g(i).each(function(){var t=g(this),e=t.data(dt)?"toggle":n.data();wt._jQueryInterface.call(t,e)})}),g.fn[ft]=wt._jQueryInterface,g.fn[ft].Constructor=wt,g.fn[ft].noConflict=function(){return g.fn[ft]=_t,wt._jQueryInterface};var At="dropdown",Nt="bs.dropdown",Ot="."+Nt,kt=".data-api",Pt=g.fn[At],Lt=new RegExp("38|40|27"),jt={HIDE:"hide"+Ot,HIDDEN:"hidden"+Ot,SHOW:"show"+Ot,SHOWN:"shown"+Ot,CLICK:"click"+Ot,CLICK_DATA_API:"click"+Ot+kt,KEYDOWN_DATA_API:"keydown"+Ot+kt,KEYUP_DATA_API:"keyup"+Ot+kt},Ht="disabled",Rt="show",xt="dropup",Ft="dropright",Ut="dropleft",Wt="dropdown-menu-right",qt="position-static",Mt='[data-toggle="dropdown"]',Kt=".dropdown form",Qt=".dropdown-menu",Bt=".navbar-nav",Vt=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Yt="top-start",zt="top-end",Xt="bottom-start",$t="bottom-end",Gt="right-start",Jt="left-start",Zt={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},te={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},ee=function(){function c(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var t=c.prototype;return t.toggle=function(){if(!this._element.disabled&&!g(this._element).hasClass(Ht)){var t=g(this._menu).hasClass(Rt);c._clearMenus(),t||this.show(!0)}},t.show=function(t){if(void 0===t&&(t=!1),!(this._element.disabled||g(this._element).hasClass(Ht)||g(this._menu).hasClass(Rt))){var e={relatedTarget:this._element},n=g.Event(jt.SHOW,e),i=c._getParentFromElement(this._element);if(g(i).trigger(n),!n.isDefaultPrevented()){if(!this._inNavbar&&t){if("undefined"==typeof u)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var o=this._element;"parent"===this._config.reference?o=i:_.isElement(this._config.reference)&&(o=this._config.reference,"undefined"!=typeof this._config.reference.jquery&&(o=this._config.reference[0])),"scrollParent"!==this._config.boundary&&g(i).addClass(qt),this._popper=new u(o,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===g(i).closest(Bt).length&&g(document.body).children().on("mouseover",null,g.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),g(this._menu).toggleClass(Rt),g(i).toggleClass(Rt).trigger(g.Event(jt.SHOWN,e))}}},t.hide=function(){if(!this._element.disabled&&!g(this._element).hasClass(Ht)&&g(this._menu).hasClass(Rt)){var t={relatedTarget:this._element},e=g.Event(jt.HIDE,t),n=c._getParentFromElement(this._element);g(n).trigger(e),e.isDefaultPrevented()||(this._popper&&this._popper.destroy(),g(this._menu).toggleClass(Rt),g(n).toggleClass(Rt).trigger(g.Event(jt.HIDDEN,t)))}},t.dispose=function(){g.removeData(this._element,Nt),g(this._element).off(Ot),this._element=null,(this._menu=null)!==this._popper&&(this._popper.destroy(),this._popper=null)},t.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},t._addEventListeners=function(){var e=this;g(this._element).on(jt.CLICK,function(t){t.preventDefault(),t.stopPropagation(),e.toggle()})},t._getConfig=function(t){return t=l({},this.constructor.Default,{},g(this._element).data(),{},t),_.typeCheckConfig(At,t,this.constructor.DefaultType),t},t._getMenuElement=function(){if(!this._menu){var t=c._getParentFromElement(this._element);t&&(this._menu=t.querySelector(Qt))}return this._menu},t._getPlacement=function(){var t=g(this._element.parentNode),e=Xt;return t.hasClass(xt)?(e=Yt,g(this._menu).hasClass(Wt)&&(e=zt)):t.hasClass(Ft)?e=Gt:t.hasClass(Ut)?e=Jt:g(this._menu).hasClass(Wt)&&(e=$t),e},t._detectNavbar=function(){return 0<g(this._element).closest(".navbar").length},t._getOffset=function(){var e=this,t={};return"function"==typeof this._config.offset?t.fn=function(t){return t.offsets=l({},t.offsets,{},e._config.offset(t.offsets,e._element)||{}),t}:t.offset=this._config.offset,t},t._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),l({},t,{},this._config.popperConfig)},c._jQueryInterface=function(e){return this.each(function(){var t=g(this).data(Nt);if(t||(t=new c(this,"object"==typeof e?e:null),g(this).data(Nt,t)),"string"==typeof e){if("undefined"==typeof t[e])throw new TypeError('No method named "'+e+'"');t[e]()}})},c._clearMenus=function(t){if(!t||3!==t.which&&("keyup"!==t.type||9===t.which))for(var e=[].slice.call(document.querySelectorAll(Mt)),n=0,i=e.length;n<i;n++){var o=c._getParentFromElement(e[n]),r=g(e[n]).data(Nt),s={relatedTarget:e[n]};if(t&&"click"===t.type&&(s.clickEvent=t),r){var a=r._menu;if(g(o).hasClass(Rt)&&!(t&&("click"===t.type&&/input|textarea/i.test(t.target.tagName)||"keyup"===t.type&&9===t.which)&&g.contains(o,t.target))){var l=g.Event(jt.HIDE,s);g(o).trigger(l),l.isDefaultPrevented()||("ontouchstart"in document.documentElement&&g(document.body).children().off("mouseover",null,g.noop),e[n].setAttribute("aria-expanded","false"),r._popper&&r._popper.destroy(),g(a).removeClass(Rt),g(o).removeClass(Rt).trigger(g.Event(jt.HIDDEN,s)))}}}},c._getParentFromElement=function(t){var e,n=_.getSelectorFromElement(t);return n&&(e=document.querySelector(n)),e||t.parentNode},c._dataApiKeydownHandler=function(t){if((/input|textarea/i.test(t.target.tagName)?!(32===t.which||27!==t.which&&(40!==t.which&&38!==t.which||g(t.target).closest(Qt).length)):Lt.test(t.which))&&(t.preventDefault(),t.stopPropagation(),!this.disabled&&!g(this).hasClass(Ht))){var e=c._getParentFromElement(this),n=g(e).hasClass(Rt);if(n||27!==t.which)if(n&&(!n||27!==t.which&&32!==t.which)){var i=[].slice.call(e.querySelectorAll(Vt)).filter(function(t){return g(t).is(":visible")});if(0!==i.length){var o=i.indexOf(t.target);38===t.which&&0<o&&o--,40===t.which&&o<i.length-1&&o++,o<0&&(o=0),i[o].focus()}}else{if(27===t.which){var r=e.querySelector(Mt);g(r).trigger("focus")}g(this).trigger("click")}}},s(c,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return Zt}},{key:"DefaultType",get:function(){return te}}]),c}();g(document).on(jt.KEYDOWN_DATA_API,Mt,ee._dataApiKeydownHandler).on(jt.KEYDOWN_DATA_API,Qt,ee._dataApiKeydownHandler).on(jt.CLICK_DATA_API+" "+jt.KEYUP_DATA_API,ee._clearMenus).on(jt.CLICK_DATA_API,Mt,function(t){t.preventDefault(),t.stopPropagation(),ee._jQueryInterface.call(g(this),"toggle")}).on(jt.CLICK_DATA_API,Kt,function(t){t.stopPropagation()}),g.fn[At]=ee._jQueryInterface,g.fn[At].Constructor=ee,g.fn[At].noConflict=function(){return g.fn[At]=Pt,ee._jQueryInterface};var ne="modal",ie="bs.modal",oe="."+ie,re=g.fn[ne],se={backdrop:!0,keyboard:!0,focus:!0,show:!0},ae={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},le={HIDE:"hide"+oe,HIDE_PREVENTED:"hidePrevented"+oe,HIDDEN:"hidden"+oe,SHOW:"show"+oe,SHOWN:"shown"+oe,FOCUSIN:"focusin"+oe,RESIZE:"resize"+oe,CLICK_DISMISS:"click.dismiss"+oe,KEYDOWN_DISMISS:"keydown.dismiss"+oe,MOUSEUP_DISMISS:"mouseup.dismiss"+oe,MOUSEDOWN_DISMISS:"mousedown.dismiss"+oe,CLICK_DATA_API:"click"+oe+".data-api"},ce="modal-dialog-scrollable",he="modal-scrollbar-measure",ue="modal-backdrop",fe="modal-open",de="fade",ge="show",_e="modal-static",me=".modal-dialog",pe=".modal-body",ve='[data-toggle="modal"]',ye='[data-dismiss="modal"]',Ee=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ce=".sticky-top",Te=function(){function o(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(me),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var t=o.prototype;return t.toggle=function(t){return this._isShown?this.hide():this.show(t)},t.show=function(t){var e=this;if(!this._isShown&&!this._isTransitioning){g(this._element).hasClass(de)&&(this._isTransitioning=!0);var n=g.Event(le.SHOW,{relatedTarget:t});g(this._element).trigger(n),this._isShown||n.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),g(this._element).on(le.CLICK_DISMISS,ye,function(t){return e.hide(t)}),g(this._dialog).on(le.MOUSEDOWN_DISMISS,function(){g(e._element).one(le.MOUSEUP_DISMISS,function(t){g(t.target).is(e._element)&&(e._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return e._showElement(t)}))}},t.hide=function(t){var e=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning){var n=g.Event(le.HIDE);if(g(this._element).trigger(n),this._isShown&&!n.isDefaultPrevented()){this._isShown=!1;var i=g(this._element).hasClass(de);if(i&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),g(document).off(le.FOCUSIN),g(this._element).removeClass(ge),g(this._element).off(le.CLICK_DISMISS),g(this._dialog).off(le.MOUSEDOWN_DISMISS),i){var o=_.getTransitionDurationFromElement(this._element);g(this._element).one(_.TRANSITION_END,function(t){return e._hideModal(t)}).emulateTransitionEnd(o)}else this._hideModal()}}},t.dispose=function(){[window,this._element,this._dialog].forEach(function(t){return g(t).off(oe)}),g(document).off(le.FOCUSIN),g.removeData(this._element,ie),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},t.handleUpdate=function(){this._adjustDialog()},t._getConfig=function(t){return t=l({},se,{},t),_.typeCheckConfig(ne,t,ae),t},t._triggerBackdropTransition=function(){var t=this;if("static"===this._config.backdrop){var e=g.Event(le.HIDE_PREVENTED);if(g(this._element).trigger(e),e.defaultPrevented)return;this._element.classList.add(_e);var n=_.getTransitionDurationFromElement(this._element);g(this._element).one(_.TRANSITION_END,function(){t._element.classList.remove(_e)}).emulateTransitionEnd(n),this._element.focus()}else this.hide()},t._showElement=function(t){var e=this,n=g(this._element).hasClass(de),i=this._dialog?this._dialog.querySelector(pe):null;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),g(this._dialog).hasClass(ce)&&i?i.scrollTop=0:this._element.scrollTop=0,n&&_.reflow(this._element),g(this._element).addClass(ge),this._config.focus&&this._enforceFocus();function o(){e._config.focus&&e._element.focus(),e._isTransitioning=!1,g(e._element).trigger(r)}var r=g.Event(le.SHOWN,{relatedTarget:t});if(n){var s=_.getTransitionDurationFromElement(this._dialog);g(this._dialog).one(_.TRANSITION_END,o).emulateTransitionEnd(s)}else o()},t._enforceFocus=function(){var e=this;g(document).off(le.FOCUSIN).on(le.FOCUSIN,function(t){document!==t.target&&e._element!==t.target&&0===g(e._element).has(t.target).length&&e._element.focus()})},t._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?g(this._element).on(le.KEYDOWN_DISMISS,function(t){27===t.which&&e._triggerBackdropTransition()}):this._isShown||g(this._element).off(le.KEYDOWN_DISMISS)},t._setResizeEvent=function(){var e=this;this._isShown?g(window).on(le.RESIZE,function(t){return e.handleUpdate(t)}):g(window).off(le.RESIZE)},t._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(function(){g(document.body).removeClass(fe),t._resetAdjustments(),t._resetScrollbar(),g(t._element).trigger(le.HIDDEN)})},t._removeBackdrop=function(){this._backdrop&&(g(this._backdrop).remove(),this._backdrop=null)},t._showBackdrop=function(t){var e=this,n=g(this._element).hasClass(de)?de:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=ue,n&&this._backdrop.classList.add(n),g(this._backdrop).appendTo(document.body),g(this._element).on(le.CLICK_DISMISS,function(t){e._ignoreBackdropClick?e._ignoreBackdropClick=!1:t.target===t.currentTarget&&e._triggerBackdropTransition()}),n&&_.reflow(this._backdrop),g(this._backdrop).addClass(ge),!t)return;if(!n)return void t();var i=_.getTransitionDurationFromElement(this._backdrop);g(this._backdrop).one(_.TRANSITION_END,t).emulateTransitionEnd(i)}else if(!this._isShown&&this._backdrop){g(this._backdrop).removeClass(ge);var o=function(){e._removeBackdrop(),t&&t()};if(g(this._element).hasClass(de)){var r=_.getTransitionDurationFromElement(this._backdrop);g(this._backdrop).one(_.TRANSITION_END,o).emulateTransitionEnd(r)}else o()}else t&&t()},t._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},t._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},t._checkScrollbar=function(){var t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},t._setScrollbar=function(){var o=this;if(this._isBodyOverflowing){var t=[].slice.call(document.querySelectorAll(Ee)),e=[].slice.call(document.querySelectorAll(Ce));g(t).each(function(t,e){var n=e.style.paddingRight,i=g(e).css("padding-right");g(e).data("padding-right",n).css("padding-right",parseFloat(i)+o._scrollbarWidth+"px")}),g(e).each(function(t,e){var n=e.style.marginRight,i=g(e).css("margin-right");g(e).data("margin-right",n).css("margin-right",parseFloat(i)-o._scrollbarWidth+"px")});var n=document.body.style.paddingRight,i=g(document.body).css("padding-right");g(document.body).data("padding-right",n).css("padding-right",parseFloat(i)+this._scrollbarWidth+"px")}g(document.body).addClass(fe)},t._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(Ee));g(t).each(function(t,e){var n=g(e).data("padding-right");g(e).removeData("padding-right"),e.style.paddingRight=n||""});var e=[].slice.call(document.querySelectorAll(""+Ce));g(e).each(function(t,e){var n=g(e).data("margin-right");"undefined"!=typeof n&&g(e).css("margin-right",n).removeData("margin-right")});var n=g(document.body).data("padding-right");g(document.body).removeData("padding-right"),document.body.style.paddingRight=n||""},t._getScrollbarWidth=function(){var t=document.createElement("div");t.className=he,document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},o._jQueryInterface=function(n,i){return this.each(function(){var t=g(this).data(ie),e=l({},se,{},g(this).data(),{},"object"==typeof n&&n?n:{});if(t||(t=new o(this,e),g(this).data(ie,t)),"string"==typeof n){if("undefined"==typeof t[n])throw new TypeError('No method named "'+n+'"');t[n](i)}else e.show&&t.show(i)})},s(o,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return se}}]),o}();g(document).on(le.CLICK_DATA_API,ve,function(t){var e,n=this,i=_.getSelectorFromElement(this);i&&(e=document.querySelector(i));var o=g(e).data(ie)?"toggle":l({},g(e).data(),{},g(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var r=g(e).one(le.SHOW,function(t){t.isDefaultPrevented()||r.one(le.HIDDEN,function(){g(n).is(":visible")&&n.focus()})});Te._jQueryInterface.call(g(e),o,this)}),g.fn[ne]=Te._jQueryInterface,g.fn[ne].Constructor=Te,g.fn[ne].noConflict=function(){return g.fn[ne]=re,Te._jQueryInterface};var be=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],Se={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},De=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Ie=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function we(t,r,e){if(0===t.length)return t;if(e&&"function"==typeof e)return e(t);for(var n=(new window.DOMParser).parseFromString(t,"text/html"),s=Object.keys(r),a=[].slice.call(n.body.querySelectorAll("*")),i=function(t){var e=a[t],n=e.nodeName.toLowerCase();if(-1===s.indexOf(e.nodeName.toLowerCase()))return e.parentNode.removeChild(e),"continue";var i=[].slice.call(e.attributes),o=[].concat(r["*"]||[],r[n]||[]);i.forEach(function(t){!function(t,e){var n=t.nodeName.toLowerCase();if(-1!==e.indexOf(n))return-1===be.indexOf(n)||Boolean(t.nodeValue.match(De)||t.nodeValue.match(Ie));for(var i=e.filter(function(t){return t instanceof RegExp}),o=0,r=i.length;o<r;o++)if(n.match(i[o]))return!0;return!1}(t,o)&&e.removeAttribute(t.nodeName)})},o=0,l=a.length;o<l;o++)i(o);return n.body.innerHTML}var Ae="tooltip",Ne="bs.tooltip",Oe="."+Ne,ke=g.fn[Ae],Pe="bs-tooltip",Le=new RegExp("(^|\\s)"+Pe+"\\S+","g"),je=["sanitize","whiteList","sanitizeFn"],He={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},Re={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},xe={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:Se,popperConfig:null},Fe="show",Ue="out",We={HIDE:"hide"+Oe,HIDDEN:"hidden"+Oe,SHOW:"show"+Oe,SHOWN:"shown"+Oe,INSERTED:"inserted"+Oe,CLICK:"click"+Oe,FOCUSIN:"focusin"+Oe,FOCUSOUT:"focusout"+Oe,MOUSEENTER:"mouseenter"+Oe,MOUSELEAVE:"mouseleave"+Oe},qe="fade",Me="show",Ke=".tooltip-inner",Qe=".arrow",Be="hover",Ve="focus",Ye="click",ze="manual",Xe=function(){function i(t,e){if("undefined"==typeof u)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var t=i.prototype;return t.enable=function(){this._isEnabled=!0},t.disable=function(){this._isEnabled=!1},t.toggleEnabled=function(){this._isEnabled=!this._isEnabled},t.toggle=function(t){if(this._isEnabled)if(t){var e=this.constructor.DATA_KEY,n=g(t.currentTarget).data(e);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),g(t.currentTarget).data(e,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(g(this.getTipElement()).hasClass(Me))return void this._leave(null,this);this._enter(null,this)}},t.dispose=function(){clearTimeout(this._timeout),g.removeData(this.element,this.constructor.DATA_KEY),g(this.element).off(this.constructor.EVENT_KEY),g(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&g(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},t.show=function(){var e=this;if("none"===g(this.element).css("display"))throw new Error("Please use show on visible elements");var t=g.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){g(this.element).trigger(t);var n=_.findShadowRoot(this.element),i=g.contains(null!==n?n:this.element.ownerDocument.documentElement,this.element);if(t.isDefaultPrevented()||!i)return;var o=this.getTipElement(),r=_.getUID(this.constructor.NAME);o.setAttribute("id",r),this.element.setAttribute("aria-describedby",r),this.setContent(),this.config.animation&&g(o).addClass(qe);var s="function"==typeof this.config.placement?this.config.placement.call(this,o,this.element):this.config.placement,a=this._getAttachment(s);this.addAttachmentClass(a);var l=this._getContainer();g(o).data(this.constructor.DATA_KEY,this),g.contains(this.element.ownerDocument.documentElement,this.tip)||g(o).appendTo(l),g(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new u(this.element,o,this._getPopperConfig(a)),g(o).addClass(Me),"ontouchstart"in document.documentElement&&g(document.body).children().on("mouseover",null,g.noop);var c=function(){e.config.animation&&e._fixTransition();var t=e._hoverState;e._hoverState=null,g(e.element).trigger(e.constructor.Event.SHOWN),t===Ue&&e._leave(null,e)};if(g(this.tip).hasClass(qe)){var h=_.getTransitionDurationFromElement(this.tip);g(this.tip).one(_.TRANSITION_END,c).emulateTransitionEnd(h)}else c()}},t.hide=function(t){function e(){n._hoverState!==Fe&&i.parentNode&&i.parentNode.removeChild(i),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),g(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),t&&t()}var n=this,i=this.getTipElement(),o=g.Event(this.constructor.Event.HIDE);if(g(this.element).trigger(o),!o.isDefaultPrevented()){if(g(i).removeClass(Me),"ontouchstart"in document.documentElement&&g(document.body).children().off("mouseover",null,g.noop),this._activeTrigger[Ye]=!1,this._activeTrigger[Ve]=!1,this._activeTrigger[Be]=!1,g(this.tip).hasClass(qe)){var r=_.getTransitionDurationFromElement(i);g(i).one(_.TRANSITION_END,e).emulateTransitionEnd(r)}else e();this._hoverState=""}},t.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},t.isWithContent=function(){return Boolean(this.getTitle())},t.addAttachmentClass=function(t){g(this.getTipElement()).addClass(Pe+"-"+t)},t.getTipElement=function(){return this.tip=this.tip||g(this.config.template)[0],this.tip},t.setContent=function(){var t=this.getTipElement();this.setElementContent(g(t.querySelectorAll(Ke)),this.getTitle()),g(t).removeClass(qe+" "+Me)},t.setElementContent=function(t,e){"object"!=typeof e||!e.nodeType&&!e.jquery?this.config.html?(this.config.sanitize&&(e=we(e,this.config.whiteList,this.config.sanitizeFn)),t.html(e)):t.text(e):this.config.html?g(e).parent().is(t)||t.empty().append(e):t.text(g(e).text())},t.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t=t||("function"==typeof this.config.title?this.config.title.call(this.element):this.config.title)},t._getPopperConfig=function(t){var e=this;return l({},{placement:t,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:Qe},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){return e._handlePopperPlacementChange(t)}},{},this.config.popperConfig)},t._getOffset=function(){var e=this,t={};return"function"==typeof this.config.offset?t.fn=function(t){return t.offsets=l({},t.offsets,{},e.config.offset(t.offsets,e.element)||{}),t}:t.offset=this.config.offset,t},t._getContainer=function(){return!1===this.config.container?document.body:_.isElement(this.config.container)?g(this.config.container):g(document).find(this.config.container)},t._getAttachment=function(t){return Re[t.toUpperCase()]},t._setListeners=function(){var i=this;this.config.trigger.split(" ").forEach(function(t){if("click"===t)g(i.element).on(i.constructor.Event.CLICK,i.config.selector,function(t){return i.toggle(t)});else if(t!==ze){var e=t===Be?i.constructor.Event.MOUSEENTER:i.constructor.Event.FOCUSIN,n=t===Be?i.constructor.Event.MOUSELEAVE:i.constructor.Event.FOCUSOUT;g(i.element).on(e,i.config.selector,function(t){return i._enter(t)}).on(n,i.config.selector,function(t){return i._leave(t)})}}),this._hideModalHandler=function(){i.element&&i.hide()},g(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=l({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},t._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");!this.element.getAttribute("title")&&"string"==t||(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},t._enter=function(t,e){var n=this.constructor.DATA_KEY;(e=e||g(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),g(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusin"===t.type?Ve:Be]=!0),g(e.getTipElement()).hasClass(Me)||e._hoverState===Fe?e._hoverState=Fe:(clearTimeout(e._timeout),e._hoverState=Fe,e.config.delay&&e.config.delay.show?e._timeout=setTimeout(function(){e._hoverState===Fe&&e.show()},e.config.delay.show):e.show())},t._leave=function(t,e){var n=this.constructor.DATA_KEY;(e=e||g(t.currentTarget).data(n))||(e=new this.constructor(t.currentTarget,this._getDelegateConfig()),g(t.currentTarget).data(n,e)),t&&(e._activeTrigger["focusout"===t.type?Ve:Be]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=Ue,e.config.delay&&e.config.delay.hide?e._timeout=setTimeout(function(){e._hoverState===Ue&&e.hide()},e.config.delay.hide):e.hide())},t._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},t._getConfig=function(t){var e=g(this.element).data();return Object.keys(e).forEach(function(t){-1!==je.indexOf(t)&&delete e[t]}),"number"==typeof(t=l({},this.constructor.Default,{},e,{},"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),_.typeCheckConfig(Ae,t,this.constructor.DefaultType),t.sanitize&&(t.template=we(t.template,t.whiteList,t.sanitizeFn)),t},t._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},t._cleanTipClass=function(){var t=g(this.getTipElement()),e=t.attr("class").match(Le);null!==e&&e.length&&t.removeClass(e.join(""))},t._handlePopperPlacementChange=function(t){var e=t.instance;this.tip=e.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},t._fixTransition=function(){var t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&(g(t).removeClass(qe),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)},i._jQueryInterface=function(n){return this.each(function(){var t=g(this).data(Ne),e="object"==typeof n&&n;if((t||!/dispose|hide/.test(n))&&(t||(t=new i(this,e),g(this).data(Ne,t)),"string"==typeof n)){if("undefined"==typeof t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},s(i,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return xe}},{key:"NAME",get:function(){return Ae}},{key:"DATA_KEY",get:function(){return Ne}},{key:"Event",get:function(){return We}},{key:"EVENT_KEY",get:function(){return Oe}},{key:"DefaultType",get:function(){return He}}]),i}();g.fn[Ae]=Xe._jQueryInterface,g.fn[Ae].Constructor=Xe,g.fn[Ae].noConflict=function(){return g.fn[Ae]=ke,Xe._jQueryInterface};var $e="popover",Ge="bs.popover",Je="."+Ge,Ze=g.fn[$e],tn="bs-popover",en=new RegExp("(^|\\s)"+tn+"\\S+","g"),nn=l({},Xe.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),on=l({},Xe.DefaultType,{content:"(string|element|function)"}),rn="fade",sn="show",an=".popover-header",ln=".popover-body",cn={HIDE:"hide"+Je,HIDDEN:"hidden"+Je,SHOW:"show"+Je,SHOWN:"shown"+Je,INSERTED:"inserted"+Je,CLICK:"click"+Je,FOCUSIN:"focusin"+Je,FOCUSOUT:"focusout"+Je,MOUSEENTER:"mouseenter"+Je,MOUSELEAVE:"mouseleave"+Je},hn=function(t){function i(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),(t.prototype.constructor=t).__proto__=e}(i,t);var e=i.prototype;return e.isWithContent=function(){return this.getTitle()||this._getContent()},e.addAttachmentClass=function(t){g(this.getTipElement()).addClass(tn+"-"+t)},e.getTipElement=function(){return this.tip=this.tip||g(this.config.template)[0],this.tip},e.setContent=function(){var t=g(this.getTipElement());this.setElementContent(t.find(an),this.getTitle());var e=this._getContent();"function"==typeof e&&(e=e.call(this.element)),this.setElementContent(t.find(ln),e),t.removeClass(rn+" "+sn)},e._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},e._cleanTipClass=function(){var t=g(this.getTipElement()),e=t.attr("class").match(en);null!==e&&0<e.length&&t.removeClass(e.join(""))},i._jQueryInterface=function(n){return this.each(function(){var t=g(this).data(Ge),e="object"==typeof n?n:null;if((t||!/dispose|hide/.test(n))&&(t||(t=new i(this,e),g(this).data(Ge,t)),"string"==typeof n)){if("undefined"==typeof t[n])throw new TypeError('No method named "'+n+'"');t[n]()}})},s(i,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return nn}},{key:"NAME",get:function(){return $e}},{key:"DATA_KEY",get:function(){return Ge}},{key:"Event",get:function(){return cn}},{key:"EVENT_KEY",get:function(){return Je}},{key:"DefaultType",get:function(){return on}}]),i}(Xe);g.fn[$e]=hn._jQueryInterface,g.fn[$e].Constructor=hn,g.fn[$e].noConflict=function(){return g.fn[$e]=Ze,hn._jQueryInterface};var un="scrollspy",fn="bs.scrollspy",dn="."+fn,gn=g.fn[un],_n={offset:10,method:"auto",target:""},mn={offset:"number",method:"string",target:"(string|element)"},pn={ACTIVATE:"activate"+dn,SCROLL:"scroll"+dn,LOAD_DATA_API:"load"+dn+".data-api"},vn="dropdown-item",yn="active",En='[data-spy="scroll"]',Cn=".nav, .list-group",Tn=".nav-link",bn=".nav-item",Sn=".list-group-item",Dn=".dropdown",In=".dropdown-item",wn=".dropdown-toggle",An="offset",Nn="position",On=function(){function n(t,e){var n=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(e),this._selector=this._config.target+" "+Tn+","+this._config.target+" "+Sn+","+this._config.target+" "+In,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,g(this._scrollElement).on(pn.SCROLL,function(t){return n._process(t)}),this.refresh(),this._process()}var t=n.prototype;return t.refresh=function(){var e=this,t=this._scrollElement===this._scrollElement.window?An:Nn,o="auto"===this._config.method?t:this._config.method,r=o===Nn?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(t){var e,n=_.getSelectorFromElement(t);if(n&&(e=document.querySelector(n)),e){var i=e.getBoundingClientRect();if(i.width||i.height)return[g(e)[o]().top+r,n]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},t.dispose=function(){g.removeData(this._element,fn),g(this._scrollElement).off(dn),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},t._getConfig=function(t){if("string"!=typeof(t=l({},_n,{},"object"==typeof t&&t?t:{})).target){var e=g(t.target).attr("id");e||(e=_.getUID(un),g(t.target).attr("id",e)),t.target="#"+e}return _.typeCheckConfig(un,t,mn),t},t._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},t._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},t._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},t._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),n<=t){var i=this._targets[this._targets.length-1];this._activeTarget!==i&&this._activate(i)}else{if(this._activeTarget&&t<this._offsets[0]&&0<this._offsets[0])return this._activeTarget=null,void this._clear();for(var o=this._offsets.length;o--;){this._activeTarget!==this._targets[o]&&t>=this._offsets[o]&&("undefined"==typeof this._offsets[o+1]||t<this._offsets[o+1])&&this._activate(this._targets[o])}}},t._activate=function(e){this._activeTarget=e,this._clear();var t=this._selector.split(",").map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'}),n=g([].slice.call(document.querySelectorAll(t.join(","))));n.hasClass(vn)?(n.closest(Dn).find(wn).addClass(yn),n.addClass(yn)):(n.addClass(yn),n.parents(Cn).prev(Tn+", "+Sn).addClass(yn),n.parents(Cn).prev(bn).children(Tn).addClass(yn)),g(this._scrollElement).trigger(pn.ACTIVATE,{relatedTarget:e})},t._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(t){return t.classList.contains(yn)}).forEach(function(t){return t.classList.remove(yn)})},n._jQueryInterface=function(e){return this.each(function(){var t=g(this).data(fn);if(t||(t=new n(this,"object"==typeof e&&e),g(this).data(fn,t)),"string"==typeof e){if("undefined"==typeof t[e])throw new TypeError('No method named "'+e+'"');t[e]()}})},s(n,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"Default",get:function(){return _n}}]),n}();g(window).on(pn.LOAD_DATA_API,function(){for(var t=[].slice.call(document.querySelectorAll(En)),e=t.length;e--;){var n=g(t[e]);On._jQueryInterface.call(n,n.data())}}),g.fn[un]=On._jQueryInterface,g.fn[un].Constructor=On,g.fn[un].noConflict=function(){return g.fn[un]=gn,On._jQueryInterface};var kn="bs.tab",Pn="."+kn,Ln=g.fn.tab,jn={HIDE:"hide"+Pn,HIDDEN:"hidden"+Pn,SHOW:"show"+Pn,SHOWN:"shown"+Pn,CLICK_DATA_API:"click"+Pn+".data-api"},Hn="dropdown-menu",Rn="active",xn="disabled",Fn="fade",Un="show",Wn=".dropdown",qn=".nav, .list-group",Mn=".active",Kn="> li > .active",Qn='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',Bn=".dropdown-toggle",Vn="> .dropdown-menu .active",Yn=function(){function i(t){this._element=t}var t=i.prototype;return t.show=function(){var n=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&g(this._element).hasClass(Rn)||g(this._element).hasClass(xn))){var t,i,e=g(this._element).closest(qn)[0],o=_.getSelectorFromElement(this._element);if(e){var r="UL"===e.nodeName||"OL"===e.nodeName?Kn:Mn;i=(i=g.makeArray(g(e).find(r)))[i.length-1]}var s=g.Event(jn.HIDE,{relatedTarget:this._element}),a=g.Event(jn.SHOW,{relatedTarget:i});if(i&&g(i).trigger(s),g(this._element).trigger(a),!a.isDefaultPrevented()&&!s.isDefaultPrevented()){o&&(t=document.querySelector(o)),this._activate(this._element,e);var l=function(){var t=g.Event(jn.HIDDEN,{relatedTarget:n._element}),e=g.Event(jn.SHOWN,{relatedTarget:i});g(i).trigger(t),g(n._element).trigger(e)};t?this._activate(t,t.parentNode,l):l()}}},t.dispose=function(){g.removeData(this._element,kn),this._element=null},t._activate=function(t,e,n){function i(){return o._transitionComplete(t,r,n)}var o=this,r=(!e||"UL"!==e.nodeName&&"OL"!==e.nodeName?g(e).children(Mn):g(e).find(Kn))[0],s=n&&r&&g(r).hasClass(Fn);if(r&&s){var a=_.getTransitionDurationFromElement(r);g(r).removeClass(Un).one(_.TRANSITION_END,i).emulateTransitionEnd(a)}else i()},t._transitionComplete=function(t,e,n){if(e){g(e).removeClass(Rn);var i=g(e.parentNode).find(Vn)[0];i&&g(i).removeClass(Rn),"tab"===e.getAttribute("role")&&e.setAttribute("aria-selected",!1)}if(g(t).addClass(Rn),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),_.reflow(t),t.classList.contains(Fn)&&t.classList.add(Un),t.parentNode&&g(t.parentNode).hasClass(Hn)){var o=g(t).closest(Wn)[0];if(o){var r=[].slice.call(o.querySelectorAll(Bn));g(r).addClass(Rn)}t.setAttribute("aria-expanded",!0)}n&&n()},i._jQueryInterface=function(n){return this.each(function(){var t=g(this),e=t.data(kn);if(e||(e=new i(this),t.data(kn,e)),"string"==typeof n){if("undefined"==typeof e[n])throw new TypeError('No method named "'+n+'"');e[n]()}})},s(i,null,[{key:"VERSION",get:function(){return"4.4.1"}}]),i}();g(document).on(jn.CLICK_DATA_API,Qn,function(t){t.preventDefault(),Yn._jQueryInterface.call(g(this),"show")}),g.fn.tab=Yn._jQueryInterface,g.fn.tab.Constructor=Yn,g.fn.tab.noConflict=function(){return g.fn.tab=Ln,Yn._jQueryInterface};var zn="toast",Xn="bs.toast",$n="."+Xn,Gn=g.fn[zn],Jn={CLICK_DISMISS:"click.dismiss"+$n,HIDE:"hide"+$n,HIDDEN:"hidden"+$n,SHOW:"show"+$n,SHOWN:"shown"+$n},Zn="fade",ti="hide",ei="show",ni="showing",ii={animation:"boolean",autohide:"boolean",delay:"number"},oi={animation:!0,autohide:!0,delay:500},ri='[data-dismiss="toast"]',si=function(){function i(t,e){this._element=t,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var t=i.prototype;return t.show=function(){var t=this,e=g.Event(Jn.SHOW);if(g(this._element).trigger(e),!e.isDefaultPrevented()){this._config.animation&&this._element.classList.add(Zn);var n=function(){t._element.classList.remove(ni),t._element.classList.add(ei),g(t._element).trigger(Jn.SHOWN),t._config.autohide&&(t._timeout=setTimeout(function(){t.hide()},t._config.delay))};if(this._element.classList.remove(ti),_.reflow(this._element),this._element.classList.add(ni),this._config.animation){var i=_.getTransitionDurationFromElement(this._element);g(this._element).one(_.TRANSITION_END,n).emulateTransitionEnd(i)}else n()}},t.hide=function(){if(this._element.classList.contains(ei)){var t=g.Event(Jn.HIDE);g(this._element).trigger(t),t.isDefaultPrevented()||this._close()}},t.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(ei)&&this._element.classList.remove(ei),g(this._element).off(Jn.CLICK_DISMISS),g.removeData(this._element,Xn),this._element=null,this._config=null},t._getConfig=function(t){return t=l({},oi,{},g(this._element).data(),{},"object"==typeof t&&t?t:{}),_.typeCheckConfig(zn,t,this.constructor.DefaultType),t},t._setListeners=function(){var t=this;g(this._element).on(Jn.CLICK_DISMISS,ri,function(){return t.hide()})},t._close=function(){function t(){e._element.classList.add(ti),g(e._element).trigger(Jn.HIDDEN)}var e=this;if(this._element.classList.remove(ei),this._config.animation){var n=_.getTransitionDurationFromElement(this._element);g(this._element).one(_.TRANSITION_END,t).emulateTransitionEnd(n)}else t()},i._jQueryInterface=function(n){return this.each(function(){var t=g(this),e=t.data(Xn);if(e||(e=new i(this,"object"==typeof n&&n),t.data(Xn,e)),"string"==typeof n){if("undefined"==typeof e[n])throw new TypeError('No method named "'+n+'"');e[n](this)}})},s(i,null,[{key:"VERSION",get:function(){return"4.4.1"}},{key:"DefaultType",get:function(){return ii}},{key:"Default",get:function(){return oi}}]),i}();g.fn[zn]=si._jQueryInterface,g.fn[zn].Constructor=si,g.fn[zn].noConflict=function(){return g.fn[zn]=Gn,si._jQueryInterface},t.Alert=v,t.Button=H,t.Carousel=ut,t.Collapse=wt,t.Dropdown=ee,t.Modal=Te,t.Popover=hn,t.Scrollspy=On,t.Tab=Yn,t.Toast=si,t.Tooltip=Xe,t.Util=_,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=bootstrap.min.js.map
/*!
 * dist/jquery.inputmask.min
 * https://github.com/RobinHerbots/Inputmask
 * Copyright (c) 2010 - 2020 Robin Herbots
 * Licensed under the MIT license
 * Version: 5.0.3
 */
!function webpackUniversalModuleDefinition(root,factory){if("object"==typeof exports&&"object"==typeof module)module.exports=factory(require("jquery"));else if("function"==typeof define&&define.amd)define(["jquery"],factory);else{var a="object"==typeof exports?factory(require("jquery")):factory(root.jQuery);for(var i in a)("object"==typeof exports?exports:root)[i]=a[i]}}(window,function(__WEBPACK_EXTERNAL_MODULE__3__){return modules=[function(module){module.exports=JSON.parse('{"BACKSPACE":8,"BACKSPACE_SAFARI":127,"DELETE":46,"DOWN":40,"END":35,"ENTER":13,"ESCAPE":27,"HOME":36,"INSERT":45,"LEFT":37,"PAGE_DOWN":34,"PAGE_UP":33,"RIGHT":39,"SPACE":32,"TAB":9,"UP":38,"X":88,"CONTROL":17}')},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var $=__webpack_require__(2),window=__webpack_require__(4),document=window.document,generateMaskSet=__webpack_require__(5).generateMaskSet,analyseMask=__webpack_require__(5).analyseMask,maskScope=__webpack_require__(8);function Inputmask(alias,options,internal){if(!(this instanceof Inputmask))return new Inputmask(alias,options,internal);this.el=void 0,this.events={},this.maskset=void 0,this.refreshValue=!1,!0!==internal&&($.isPlainObject(alias)?options=alias:(options=options||{},alias&&(options.alias=alias)),this.opts=$.extend(!0,{},this.defaults,options),this.noMasksCache=options&&void 0!==options.definitions,this.userOptions=options||{},resolveAlias(this.opts.alias,options,this.opts),this.isRTL=this.opts.numericInput)}function resolveAlias(aliasStr,options,opts){var aliasDefinition=Inputmask.prototype.aliases[aliasStr];return aliasDefinition?(aliasDefinition.alias&&resolveAlias(aliasDefinition.alias,void 0,opts),$.extend(!0,opts,aliasDefinition),$.extend(!0,opts,options),!0):(null===opts.mask&&(opts.mask=aliasStr),!1)}function importAttributeOptions(npt,opts,userOptions,dataAttribute){function importOption(option,optionData){optionData=void 0!==optionData?optionData:npt.getAttribute(dataAttribute+"-"+option),null!==optionData&&("string"==typeof optionData&&(0===option.indexOf("on")?optionData=window[optionData]:"false"===optionData?optionData=!1:"true"===optionData&&(optionData=!0)),userOptions[option]=optionData)}if(!0===opts.importDataAttributes){var attrOptions=npt.getAttribute(dataAttribute),option,dataoptions,optionData,p;if(attrOptions&&""!==attrOptions&&(attrOptions=attrOptions.replace(/'/g,'"'),dataoptions=JSON.parse("{"+attrOptions+"}")),dataoptions)for(p in optionData=void 0,dataoptions)if("alias"===p.toLowerCase()){optionData=dataoptions[p];break}for(option in importOption("alias",optionData),userOptions.alias&&resolveAlias(userOptions.alias,userOptions,opts),opts){if(dataoptions)for(p in optionData=void 0,dataoptions)if(p.toLowerCase()===option.toLowerCase()){optionData=dataoptions[p];break}importOption(option,optionData)}}return $.extend(!0,opts,userOptions),"rtl"!==npt.dir&&!opts.rightAlign||(npt.style.textAlign="right"),"rtl"!==npt.dir&&!opts.numericInput||(npt.dir="ltr",npt.removeAttribute("dir"),opts.isRTL=!0),Object.keys(userOptions).length}Inputmask.prototype={dataAttribute:"data-inputmask",defaults:{_maxTestPos:500,placeholder:"_",optionalmarker:["[","]"],quantifiermarker:["{","}"],groupmarker:["(",")"],alternatormarker:"|",escapeChar:"\\",mask:null,regex:null,oncomplete:$.noop,onincomplete:$.noop,oncleared:$.noop,repeat:0,greedy:!1,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,insertModeVisual:!0,clearIncomplete:!1,alias:null,onKeyDown:$.noop,onBeforeMask:null,onBeforePaste:function onBeforePaste(pastedValue,opts){return $.isFunction(opts.onBeforeMask)?opts.onBeforeMask.call(this,pastedValue,opts):pastedValue},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:$.noop,skipOptionalPartCharacter:" ",numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",_radixDance:!1,groupSeparator:"",keepStatic:null,positionCaretOnTab:!0,tabThrough:!1,supportsInputType:["text","tel","url","password","search"],ignorables:[8,9,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123,0,229],isComplete:null,preValidation:null,postValidation:null,staticDefinitionSymbol:void 0,jitMasking:!1,nullable:!0,inputEventOnly:!1,noValuePatching:!1,positionCaretOnClick:"lvp",casing:null,inputmode:"text",importDataAttributes:!0,shiftPositions:!0},definitions:{9:{validator:"[0-9\uff11-\uff19]",definitionSymbol:"*"},a:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",definitionSymbol:"*"},"*":{validator:"[0-9\uff11-\uff19A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]"}},aliases:{},masksCache:{},mask:function mask(elems){var that=this;return"string"==typeof elems&&(elems=document.getElementById(elems)||document.querySelectorAll(elems)),elems=elems.nodeName?[elems]:elems,$.each(elems,function(ndx,el){var scopedOpts=$.extend(!0,{},that.opts);if(importAttributeOptions(el,scopedOpts,$.extend(!0,{},that.userOptions),that.dataAttribute)){var maskset=generateMaskSet(scopedOpts,that.noMasksCache);void 0!==maskset&&(void 0!==el.inputmask&&(el.inputmask.opts.autoUnmask=!0,el.inputmask.remove()),el.inputmask=new Inputmask(void 0,void 0,!0),el.inputmask.opts=scopedOpts,el.inputmask.noMasksCache=that.noMasksCache,el.inputmask.userOptions=$.extend(!0,{},that.userOptions),el.inputmask.isRTL=scopedOpts.isRTL||scopedOpts.numericInput,el.inputmask.el=el,el.inputmask.maskset=maskset,$.data(el,"_inputmask_opts",scopedOpts),maskScope.call(el.inputmask,{action:"mask"}))}}),elems&&elems[0]&&elems[0].inputmask||this},option:function option(options,noremask){return"string"==typeof options?this.opts[options]:"object"===_typeof(options)?($.extend(this.userOptions,options),this.el&&!0!==noremask&&this.mask(this.el),this):void 0},unmaskedvalue:function unmaskedvalue(value){return this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache),maskScope.call(this,{action:"unmaskedvalue",value:value})},remove:function remove(){return maskScope.call(this,{action:"remove"})},getemptymask:function getemptymask(){return this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache),maskScope.call(this,{action:"getemptymask"})},hasMaskedValue:function hasMaskedValue(){return!this.opts.autoUnmask},isComplete:function isComplete(){return this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache),maskScope.call(this,{action:"isComplete"})},getmetadata:function getmetadata(){return this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache),maskScope.call(this,{action:"getmetadata"})},isValid:function isValid(value){return this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache),maskScope.call(this,{action:"isValid",value:value})},format:function format(value,metadata){return this.maskset=this.maskset||generateMaskSet(this.opts,this.noMasksCache),maskScope.call(this,{action:"format",value:value,metadata:metadata})},setValue:function setValue(value){this.el&&$(this.el).trigger("setvalue",[value])},analyseMask:analyseMask},Inputmask.extendDefaults=function(options){$.extend(!0,Inputmask.prototype.defaults,options)},Inputmask.extendDefinitions=function(definition){$.extend(!0,Inputmask.prototype.definitions,definition)},Inputmask.extendAliases=function(alias){$.extend(!0,Inputmask.prototype.aliases,alias)},Inputmask.format=function(value,options,metadata){return Inputmask(options).format(value,metadata)},Inputmask.unmask=function(value,options){return Inputmask(options).unmaskedvalue(value)},Inputmask.isValid=function(value,options){return Inputmask(options).isValid(value)},Inputmask.remove=function(elems){"string"==typeof elems&&(elems=document.getElementById(elems)||document.querySelectorAll(elems)),elems=elems.nodeName?[elems]:elems,$.each(elems,function(ndx,el){el.inputmask&&el.inputmask.remove()})},Inputmask.setValue=function(elems,value){"string"==typeof elems&&(elems=document.getElementById(elems)||document.querySelectorAll(elems)),elems=elems.nodeName?[elems]:elems,$.each(elems,function(ndx,el){el.inputmask?el.inputmask.setValue(value):$(el).trigger("setvalue",[value])})};var escapeRegexRegex=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"].join("|\\")+")","gim");Inputmask.escapeRegex=function(str){return str.replace(escapeRegexRegex,"\\$1")},Inputmask.dependencyLib=$,window.Inputmask=Inputmask,module.exports=Inputmask},function(module,exports,__webpack_require__){"use strict";var jquery=__webpack_require__(3);if(void 0===jquery)throw"jQuery not loaded!";module.exports=jquery},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE__3__},function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}__WEBPACK_AMD_DEFINE_RESULT__=function(){return"undefined"!=typeof window?window:new(eval("require('jsdom').JSDOM"))("").window}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){"use strict";var $=__webpack_require__(2);function generateMaskSet(opts,nocache){var ms;function generateMask(mask,metadata,opts){var regexMask=!1,masksetDefinition,maskdefKey;if(null!==mask&&""!==mask||(regexMask=null!==opts.regex,mask=regexMask?(mask=opts.regex,mask.replace(/^(\^)(.*)(\$)$/,"$2")):(regexMask=!0,".*")),1===mask.length&&!1===opts.greedy&&0!==opts.repeat&&(opts.placeholder=""),0<opts.repeat||"*"===opts.repeat||"+"===opts.repeat){var repeatStart="*"===opts.repeat?0:"+"===opts.repeat?1:opts.repeat;mask=opts.groupmarker[0]+mask+opts.groupmarker[1]+opts.quantifiermarker[0]+repeatStart+","+opts.repeat+opts.quantifiermarker[1]}return maskdefKey=regexMask?"regex_"+opts.regex:opts.numericInput?mask.split("").reverse().join(""):mask,!1!==opts.keepStatic&&(maskdefKey="ks_"+maskdefKey),void 0===Inputmask.prototype.masksCache[maskdefKey]||!0===nocache?(masksetDefinition={mask:mask,maskToken:Inputmask.prototype.analyseMask(mask,regexMask,opts),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},excludes:{},metadata:metadata,maskLength:void 0,jitOffset:{}},!0!==nocache&&(Inputmask.prototype.masksCache[maskdefKey]=masksetDefinition,masksetDefinition=$.extend(!0,{},Inputmask.prototype.masksCache[maskdefKey]))):masksetDefinition=$.extend(!0,{},Inputmask.prototype.masksCache[maskdefKey]),masksetDefinition}if($.isFunction(opts.mask)&&(opts.mask=opts.mask(opts)),$.isArray(opts.mask)){if(1<opts.mask.length){null===opts.keepStatic&&(opts.keepStatic=!0);var altMask=opts.groupmarker[0];return $.each(opts.isRTL?opts.mask.reverse():opts.mask,function(ndx,msk){1<altMask.length&&(altMask+=opts.groupmarker[1]+opts.alternatormarker+opts.groupmarker[0]),void 0===msk.mask||$.isFunction(msk.mask)?altMask+=msk:altMask+=msk.mask}),altMask+=opts.groupmarker[1],generateMask(altMask,opts.mask,opts)}opts.mask=opts.mask.pop()}return null===opts.keepStatic&&(opts.keepStatic=!1),ms=opts.mask&&void 0!==opts.mask.mask&&!$.isFunction(opts.mask.mask)?generateMask(opts.mask.mask,opts.mask,opts):generateMask(opts.mask,opts.mask,opts),ms}function analyseMask(mask,regexMask,opts){var tokenizer=/(?:[?*+]|\{[0-9+*]+(?:,[0-9+*]*)?(?:\|[0-9+*]*)?\})|[^.?*+^${[]()|\\]+|./g,regexTokenizer=/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,escaped=!1,currentToken=new MaskToken,match,m,openenings=[],maskTokens=[],openingToken,currentOpeningToken,alternator,lastMatch,closeRegexGroup=!1;function MaskToken(isGroup,isOptional,isQuantifier,isAlternator){this.matches=[],this.openGroup=isGroup||!1,this.alternatorGroup=!1,this.isGroup=isGroup||!1,this.isOptional=isOptional||!1,this.isQuantifier=isQuantifier||!1,this.isAlternator=isAlternator||!1,this.quantifier={min:1,max:1}}function insertTestDefinition(mtoken,element,position){position=void 0!==position?position:mtoken.matches.length;var prevMatch=mtoken.matches[position-1];if(regexMask)0===element.indexOf("[")||escaped&&/\\d|\\s|\\w]/i.test(element)||"."===element?mtoken.matches.splice(position++,0,{fn:new RegExp(element,opts.casing?"i":""),static:!1,optionality:!1,newBlockMarker:void 0===prevMatch?"master":prevMatch.def!==element,casing:null,def:element,placeholder:void 0,nativeDef:element}):(escaped&&(element=element[element.length-1]),$.each(element.split(""),function(ndx,lmnt){prevMatch=mtoken.matches[position-1],mtoken.matches.splice(position++,0,{fn:/[a-z]/i.test(opts.staticDefinitionSymbol||lmnt)?new RegExp("["+(opts.staticDefinitionSymbol||lmnt)+"]",opts.casing?"i":""):null,static:!0,optionality:!1,newBlockMarker:void 0===prevMatch?"master":prevMatch.def!==lmnt&&!0!==prevMatch.static,casing:null,def:opts.staticDefinitionSymbol||lmnt,placeholder:void 0!==opts.staticDefinitionSymbol?lmnt:void 0,nativeDef:(escaped?"'":"")+lmnt})})),escaped=!1;else{var maskdef=(opts.definitions?opts.definitions[element]:void 0)||Inputmask.prototype.definitions[element];maskdef&&!escaped?mtoken.matches.splice(position++,0,{fn:maskdef.validator?"string"==typeof maskdef.validator?new RegExp(maskdef.validator,opts.casing?"i":""):new function(){this.test=maskdef.validator}:new RegExp("."),static:maskdef.static||!1,optionality:!1,newBlockMarker:void 0===prevMatch?"master":prevMatch.def!==(maskdef.definitionSymbol||element),casing:maskdef.casing,def:maskdef.definitionSymbol||element,placeholder:maskdef.placeholder,nativeDef:element,generated:maskdef.generated}):(mtoken.matches.splice(position++,0,{fn:/[a-z]/i.test(opts.staticDefinitionSymbol||element)?new RegExp("["+(opts.staticDefinitionSymbol||element)+"]",opts.casing?"i":""):null,static:!0,optionality:!1,newBlockMarker:void 0===prevMatch?"master":prevMatch.def!==element&&!0!==prevMatch.static,casing:null,def:opts.staticDefinitionSymbol||element,placeholder:void 0!==opts.staticDefinitionSymbol?element:void 0,nativeDef:(escaped?"'":"")+element}),escaped=!1)}}function verifyGroupMarker(maskToken){maskToken&&maskToken.matches&&$.each(maskToken.matches,function(ndx,token){var nextToken=maskToken.matches[ndx+1];(void 0===nextToken||void 0===nextToken.matches||!1===nextToken.isQuantifier)&&token&&token.isGroup&&(token.isGroup=!1,regexMask||(insertTestDefinition(token,opts.groupmarker[0],0),!0!==token.openGroup&&insertTestDefinition(token,opts.groupmarker[1]))),verifyGroupMarker(token)})}function defaultCase(){if(0<openenings.length){if(currentOpeningToken=openenings[openenings.length-1],insertTestDefinition(currentOpeningToken,m),currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++)alternator.matches[mndx].isGroup&&(alternator.matches[mndx].isGroup=!1);0<openenings.length?(currentOpeningToken=openenings[openenings.length-1],currentOpeningToken.matches.push(alternator)):currentToken.matches.push(alternator)}}else insertTestDefinition(currentToken,m)}function reverseTokens(maskToken){function reverseStatic(st){return st===opts.optionalmarker[0]?st=opts.optionalmarker[1]:st===opts.optionalmarker[1]?st=opts.optionalmarker[0]:st===opts.groupmarker[0]?st=opts.groupmarker[1]:st===opts.groupmarker[1]&&(st=opts.groupmarker[0]),st}for(var match in maskToken.matches=maskToken.matches.reverse(),maskToken.matches)if(Object.prototype.hasOwnProperty.call(maskToken.matches,match)){var intMatch=parseInt(match);if(maskToken.matches[match].isQuantifier&&maskToken.matches[intMatch+1]&&maskToken.matches[intMatch+1].isGroup){var qt=maskToken.matches[match];maskToken.matches.splice(match,1),maskToken.matches.splice(intMatch+1,0,qt)}void 0!==maskToken.matches[match].matches?maskToken.matches[match]=reverseTokens(maskToken.matches[match]):maskToken.matches[match]=reverseStatic(maskToken.matches[match])}return maskToken}function groupify(matches){var groupToken=new MaskToken(!0);return groupToken.openGroup=!1,groupToken.matches=matches,groupToken}function closeGroup(){if(openingToken=openenings.pop(),openingToken.openGroup=!1,void 0!==openingToken)if(0<openenings.length){if(currentOpeningToken=openenings[openenings.length-1],currentOpeningToken.matches.push(openingToken),currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++)alternator.matches[mndx].isGroup=!1,alternator.matches[mndx].alternatorGroup=!1;0<openenings.length?(currentOpeningToken=openenings[openenings.length-1],currentOpeningToken.matches.push(alternator)):currentToken.matches.push(alternator)}}else currentToken.matches.push(openingToken);else defaultCase()}function groupQuantifier(matches){var lastMatch=matches.pop();return lastMatch.isQuantifier&&(lastMatch=groupify([matches.pop(),lastMatch])),lastMatch}for(regexMask&&(opts.optionalmarker[0]=void 0,opts.optionalmarker[1]=void 0);match=regexMask?regexTokenizer.exec(mask):tokenizer.exec(mask);){if(m=match[0],regexMask)switch(m.charAt(0)){case"?":m="{0,1}";break;case"+":case"*":m="{"+m+"}";break;case"|":if(0===openenings.length){var altRegexGroup=groupify(currentToken.matches);altRegexGroup.openGroup=!0,openenings.push(altRegexGroup),currentToken.matches=[],closeRegexGroup=!0}break}if(escaped)defaultCase();else switch(m.charAt(0)){case"(?=":break;case"(?!":break;case"(?<=":break;case"(?<!":break;case opts.escapeChar:escaped=!0,regexMask&&defaultCase();break;case opts.optionalmarker[1]:case opts.groupmarker[1]:closeGroup();break;case opts.optionalmarker[0]:openenings.push(new MaskToken(!1,!0));break;case opts.groupmarker[0]:openenings.push(new MaskToken(!0));break;case opts.quantifiermarker[0]:var quantifier=new MaskToken(!1,!1,!0);m=m.replace(/[{}]/g,"");var mqj=m.split("|"),mq=mqj[0].split(","),mq0=isNaN(mq[0])?mq[0]:parseInt(mq[0]),mq1=1===mq.length?mq0:isNaN(mq[1])?mq[1]:parseInt(mq[1]);"*"!==mq0&&"+"!==mq0||(mq0="*"===mq1?0:1),quantifier.quantifier={min:mq0,max:mq1,jit:mqj[1]};var matches=0<openenings.length?openenings[openenings.length-1].matches:currentToken.matches;if(match=matches.pop(),match.isAlternator){matches.push(match),matches=match.matches;var groupToken=new MaskToken(!0),tmpMatch=matches.pop();matches.push(groupToken),matches=groupToken.matches,match=tmpMatch}match.isGroup||(match=groupify([match])),matches.push(match),matches.push(quantifier);break;case opts.alternatormarker:if(0<openenings.length){currentOpeningToken=openenings[openenings.length-1];var subToken=currentOpeningToken.matches[currentOpeningToken.matches.length-1];lastMatch=currentOpeningToken.openGroup&&(void 0===subToken.matches||!1===subToken.isGroup&&!1===subToken.isAlternator)?openenings.pop():groupQuantifier(currentOpeningToken.matches)}else lastMatch=groupQuantifier(currentToken.matches);if(lastMatch.isAlternator)openenings.push(lastMatch);else if(lastMatch.alternatorGroup?(alternator=openenings.pop(),lastMatch.alternatorGroup=!1):alternator=new MaskToken(!1,!1,!1,!0),alternator.matches.push(lastMatch),openenings.push(alternator),lastMatch.openGroup){lastMatch.openGroup=!1;var alternatorGroup=new MaskToken(!0);alternatorGroup.alternatorGroup=!0,openenings.push(alternatorGroup)}break;default:defaultCase()}}for(closeRegexGroup&&closeGroup();0<openenings.length;)openingToken=openenings.pop(),currentToken.matches.push(openingToken);return 0<currentToken.matches.length&&(verifyGroupMarker(currentToken),maskTokens.push(currentToken)),(opts.numericInput||opts.isRTL)&&reverseTokens(maskTokens[0]),maskTokens}module.exports={generateMaskSet:generateMaskSet,analyseMask:analyseMask}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(7),__webpack_require__(9),__webpack_require__(10),__webpack_require__(11),module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){"use strict";var Inputmask=__webpack_require__(1);Inputmask.extendDefinitions({A:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",casing:"upper"},"&":{validator:"[0-9A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",casing:"upper"},"#":{validator:"[0-9A-Fa-f]",casing:"upper"}});var ipValidatorRegex=new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]");function ipValidator(chrs,maskset,pos,strict,opts){return chrs=-1<pos-1&&"."!==maskset.buffer[pos-1]?(chrs=maskset.buffer[pos-1]+chrs,-1<pos-2&&"."!==maskset.buffer[pos-2]?maskset.buffer[pos-2]+chrs:"0"+chrs):"00"+chrs,ipValidatorRegex.test(chrs)}Inputmask.extendAliases({cssunit:{regex:"[+-]?[0-9]+\\.?([0-9]+)?(px|em|rem|ex|%|in|cm|mm|pt|pc)"},url:{regex:"(https?|ftp)//.*",autoUnmask:!1},ip:{mask:"i[i[i]].j[j[j]].k[k[k]].l[l[l]]",definitions:{i:{validator:ipValidator},j:{validator:ipValidator},k:{validator:ipValidator},l:{validator:ipValidator}},onUnMask:function onUnMask(maskedValue,unmaskedValue,opts){return maskedValue},inputmode:"numeric"},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,63}]@-{1,63}.-{1,63}[.-{1,63}][.-{1,63}]",greedy:!1,casing:"lower",onBeforePaste:function onBeforePaste(pastedValue,opts){return pastedValue=pastedValue.toLowerCase(),pastedValue.replace("mailto:","")},definitions:{"*":{validator:"[0-9\uff11-\uff19A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5!#$%&'*+/=?^_`{|}~-]"},"-":{validator:"[0-9A-Za-z-]"}},onUnMask:function onUnMask(maskedValue,unmaskedValue,opts){return maskedValue},inputmode:"email"},mac:{mask:"##:##:##:##:##:##"},vin:{mask:"V{13}9{4}",definitions:{V:{validator:"[A-HJ-NPR-Za-hj-npr-z\\d]",casing:"upper"}},clearIncomplete:!0,autoUnmask:!0},ssn:{mask:"999-99-9999",postValidation:function postValidation(buffer,pos,c,currentResult,opts,maskset,strict){return/^(?!219-09-9999|078-05-1120)(?!666|000|9.{2}).{3}-(?!00).{2}-(?!0{4}).{4}$/.test(buffer.join(""))}}}),module.exports=Inputmask},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var $=__webpack_require__(2),window=__webpack_require__(4),document=window.document,ua=window.navigator&&window.navigator.userAgent||"",ie=0<ua.indexOf("MSIE ")||0<ua.indexOf("Trident/"),mobile="ontouchstart"in window,iemobile=/iemobile/i.test(ua),iphone=/iphone/i.test(ua)&&!iemobile,keyCode=__webpack_require__(0);module.exports=function maskScope(actionObj,maskset,opts){maskset=maskset||this.maskset,opts=opts||this.opts;var inputmask=this,el=this.el,isRTL=this.isRTL||(this.isRTL=opts.numericInput),undoValue,$el,skipKeyPressEvent=!1,skipInputEvent=!1,validationEvent=!1,ignorable=!1,maxLength,mouseEnter=!1,originalPlaceholder=void 0;function getMaskTemplate(baseOnInput,minimalPos,includeMode,noJit,clearOptionalTail){var greedy=opts.greedy;clearOptionalTail&&(opts.greedy=!1),minimalPos=minimalPos||0;var maskTemplate=[],ndxIntlzr,pos=0,test,testPos,jitRenderStatic;do{if(!0===baseOnInput&&maskset.validPositions[pos])testPos=clearOptionalTail&&!0===maskset.validPositions[pos].match.optionality&&void 0===maskset.validPositions[pos+1]&&(!0===maskset.validPositions[pos].generatedInput||maskset.validPositions[pos].input==opts.skipOptionalPartCharacter&&0<pos)?determineTestTemplate(pos,getTests(pos,ndxIntlzr,pos-1)):maskset.validPositions[pos],test=testPos.match,ndxIntlzr=testPos.locator.slice(),maskTemplate.push(!0===includeMode?testPos.input:!1===includeMode?test.nativeDef:getPlaceholder(pos,test));else{testPos=getTestTemplate(pos,ndxIntlzr,pos-1),test=testPos.match,ndxIntlzr=testPos.locator.slice();var jitMasking=!0!==noJit&&(!1!==opts.jitMasking?opts.jitMasking:test.jit);jitRenderStatic=jitRenderStatic&&test.static&&test.def!==opts.groupSeparator&&null===test.fn||maskset.validPositions[pos-1]&&test.static&&test.def!==opts.groupSeparator&&null===test.fn,jitRenderStatic||!1===jitMasking||void 0===jitMasking||"number"==typeof jitMasking&&isFinite(jitMasking)&&pos<jitMasking?maskTemplate.push(!1===includeMode?test.nativeDef:getPlaceholder(pos,test)):jitRenderStatic=!1}pos++}while((void 0===maxLength||pos<maxLength)&&(!0!==test.static||""!==test.def)||pos<minimalPos);return""===maskTemplate[maskTemplate.length-1]&&maskTemplate.pop(),!1===includeMode&&void 0!==maskset.maskLength||(maskset.maskLength=pos-1),opts.greedy=greedy,maskTemplate}function resetMaskSet(soft){maskset.buffer=void 0,!0!==soft&&(maskset.validPositions={},maskset.p=0)}function getLastValidPosition(closestTo,strict,validPositions){var before=-1,after=-1,valids=validPositions||maskset.validPositions;for(var posNdx in void 0===closestTo&&(closestTo=-1),valids){var psNdx=parseInt(posNdx);valids[psNdx]&&(strict||!0!==valids[psNdx].generatedInput)&&(psNdx<=closestTo&&(before=psNdx),closestTo<=psNdx&&(after=psNdx))}return-1===before||before==closestTo?after:-1==after?before:closestTo-before<after-closestTo?before:after}function getDecisionTaker(tst){var decisionTaker=tst.locator[tst.alternation];return"string"==typeof decisionTaker&&0<decisionTaker.length&&(decisionTaker=decisionTaker.split(",")[0]),void 0!==decisionTaker?decisionTaker.toString():""}function getLocator(tst,align){var locator=(null!=tst.alternation?tst.mloc[getDecisionTaker(tst)]:tst.locator).join("");if(""!==locator)for(;locator.length<align;)locator+="0";return locator}function determineTestTemplate(pos,tests){pos=0<pos?pos-1:0;for(var altTest=getTest(pos),targetLocator=getLocator(altTest),tstLocator,closest,bestMatch,ndx=0;ndx<tests.length;ndx++){var tst=tests[ndx];tstLocator=getLocator(tst,targetLocator.length);var distance=Math.abs(tstLocator-targetLocator);(void 0===closest||""!==tstLocator&&distance<closest||bestMatch&&!opts.greedy&&bestMatch.match.optionality&&"master"===bestMatch.match.newBlockMarker&&(!tst.match.optionality||!tst.match.newBlockMarker)||bestMatch&&bestMatch.match.optionalQuantifier&&!tst.match.optionalQuantifier)&&(closest=distance,bestMatch=tst)}return bestMatch}function getTestTemplate(pos,ndxIntlzr,tstPs){return maskset.validPositions[pos]||determineTestTemplate(pos,getTests(pos,ndxIntlzr?ndxIntlzr.slice():ndxIntlzr,tstPs))}function getTest(pos,tests){return maskset.validPositions[pos]?maskset.validPositions[pos]:(tests||getTests(pos))[0]}function positionCanMatchDefinition(pos,testDefinition,opts){for(var valid=!1,tests=getTests(pos),tndx=0;tndx<tests.length;tndx++){if(tests[tndx].match&&(!(tests[tndx].match.nativeDef!==testDefinition.match[opts.shiftPositions?"def":"nativeDef"]||opts.shiftPositions&&testDefinition.match.static)||tests[tndx].match.nativeDef===testDefinition.match.nativeDef)){valid=!0;break}if(tests[tndx].match&&tests[tndx].match.def===testDefinition.match.nativeDef){valid=void 0;break}}return!1===valid&&void 0!==maskset.jitOffset[pos]&&(valid=positionCanMatchDefinition(pos+maskset.jitOffset[pos],testDefinition,opts)),valid}function getTests(pos,ndxIntlzr,tstPs){var maskTokens=maskset.maskToken,testPos=ndxIntlzr?tstPs:0,ndxInitializer=ndxIntlzr?ndxIntlzr.slice():[0],matches=[],insertStop=!1,latestMatch,cacheDependency=ndxIntlzr?ndxIntlzr.join(""):"";function resolveTestFromToken(maskToken,ndxInitializer,loopNdx,quantifierRecurse){function handleMatch(match,loopNdx,quantifierRecurse){function isFirstMatch(latestMatch,tokenGroup){var firstMatch=0===$.inArray(latestMatch,tokenGroup.matches);return firstMatch||$.each(tokenGroup.matches,function(ndx,match){if(!0===match.isQuantifier?firstMatch=isFirstMatch(latestMatch,tokenGroup.matches[ndx-1]):Object.prototype.hasOwnProperty.call(match,"matches")&&(firstMatch=isFirstMatch(latestMatch,match)),firstMatch)return!1}),firstMatch}function resolveNdxInitializer(pos,alternateNdx,targetAlternation){var bestMatch,indexPos;if((maskset.tests[pos]||maskset.validPositions[pos])&&$.each(maskset.tests[pos]||[maskset.validPositions[pos]],function(ndx,lmnt){if(lmnt.mloc[alternateNdx])return bestMatch=lmnt,!1;var alternation=void 0!==targetAlternation?targetAlternation:lmnt.alternation,ndxPos=void 0!==lmnt.locator[alternation]?lmnt.locator[alternation].toString().indexOf(alternateNdx):-1;(void 0===indexPos||ndxPos<indexPos)&&-1!==ndxPos&&(bestMatch=lmnt,indexPos=ndxPos)}),bestMatch){var bestMatchAltIndex=bestMatch.locator[bestMatch.alternation],locator=bestMatch.mloc[alternateNdx]||bestMatch.mloc[bestMatchAltIndex]||bestMatch.locator;return locator.slice((void 0!==targetAlternation?targetAlternation:bestMatch.alternation)+1)}return void 0!==targetAlternation?resolveNdxInitializer(pos,alternateNdx):void 0}function isSubsetOf(source,target){function expand(pattern){for(var expanded=[],start=-1,end,i=0,l=pattern.length;i<l;i++)if("-"===pattern.charAt(i))for(end=pattern.charCodeAt(i+1);++start<end;)expanded.push(String.fromCharCode(start));else start=pattern.charCodeAt(i),expanded.push(pattern.charAt(i));return expanded.join("")}return source.match.def===target.match.nativeDef||!(!(opts.regex||source.match.fn instanceof RegExp&&target.match.fn instanceof RegExp)||!0===source.match.static||!0===target.match.static)&&-1!==expand(target.match.fn.toString().replace(/[[\]/]/g,"")).indexOf(expand(source.match.fn.toString().replace(/[[\]/]/g,"")))}function staticCanMatchDefinition(source,target){return!0===source.match.static&&!0!==target.match.static&&target.match.fn.test(source.match.def,maskset,pos,!1,opts,!1)}function setMergeLocators(targetMatch,altMatch){var alternationNdx=targetMatch.alternation,shouldMerge=void 0===altMatch||alternationNdx===altMatch.alternation&&-1===targetMatch.locator[alternationNdx].toString().indexOf(altMatch.locator[alternationNdx]);if(!shouldMerge&&alternationNdx>altMatch.alternation)for(var i=altMatch.alternation;i<alternationNdx;i++)if(targetMatch.locator[i]!==altMatch.locator[i]){alternationNdx=i,shouldMerge=!0;break}if(shouldMerge){targetMatch.mloc=targetMatch.mloc||{};var locNdx=targetMatch.locator[alternationNdx];if(void 0!==locNdx){if("string"==typeof locNdx&&(locNdx=locNdx.split(",")[0]),void 0===targetMatch.mloc[locNdx]&&(targetMatch.mloc[locNdx]=targetMatch.locator.slice()),void 0!==altMatch){for(var ndx in altMatch.mloc)"string"==typeof ndx&&(ndx=ndx.split(",")[0]),void 0===targetMatch.mloc[ndx]&&(targetMatch.mloc[ndx]=altMatch.mloc[ndx]);targetMatch.locator[alternationNdx]=Object.keys(targetMatch.mloc).join(",")}return!0}targetMatch.alternation=void 0}return!1}function isSameLevel(targetMatch,altMatch){if(targetMatch.locator.length!==altMatch.locator.length)return!1;for(var locNdx=targetMatch.alternation+1;locNdx<targetMatch.locator.length;locNdx++)if(targetMatch.locator[locNdx]!==altMatch.locator[locNdx])return!1;return!0}if(testPos>opts._maxTestPos&&void 0!==quantifierRecurse)throw"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+maskset.mask;if(testPos===pos&&void 0===match.matches)return matches.push({match:match,locator:loopNdx.reverse(),cd:cacheDependency,mloc:{}}),!0;if(void 0!==match.matches){if(match.isGroup&&quantifierRecurse!==match){if(match=handleMatch(maskToken.matches[$.inArray(match,maskToken.matches)+1],loopNdx,quantifierRecurse),match)return!0}else if(match.isOptional){var optionalToken=match,mtchsNdx=matches.length;if(match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse),match){if($.each(matches,function(ndx,mtch){mtchsNdx<=ndx&&(mtch.match.optionality=!0)}),latestMatch=matches[matches.length-1].match,void 0!==quantifierRecurse||!isFirstMatch(latestMatch,optionalToken))return!0;insertStop=!0,testPos=pos}}else if(match.isAlternator){var alternateToken=match,malternateMatches=[],maltMatches,currentMatches=matches.slice(),loopNdxCnt=loopNdx.length,altIndex=0<ndxInitializer.length?ndxInitializer.shift():-1;if(-1===altIndex||"string"==typeof altIndex){var currentPos=testPos,ndxInitializerClone=ndxInitializer.slice(),altIndexArr=[],amndx;if("string"==typeof altIndex)altIndexArr=altIndex.split(",");else for(amndx=0;amndx<alternateToken.matches.length;amndx++)altIndexArr.push(amndx.toString());if(void 0!==maskset.excludes[pos]){for(var altIndexArrClone=altIndexArr.slice(),i=0,exl=maskset.excludes[pos].length;i<exl;i++){var excludeSet=maskset.excludes[pos][i].toString().split(":");loopNdx.length==excludeSet[1]&&altIndexArr.splice(altIndexArr.indexOf(excludeSet[0]),1)}0===altIndexArr.length&&(delete maskset.excludes[pos],altIndexArr=altIndexArrClone)}(!0===opts.keepStatic||isFinite(parseInt(opts.keepStatic))&&currentPos>=opts.keepStatic)&&(altIndexArr=altIndexArr.slice(0,1));for(var unMatchedAlternation=!1,ndx=0;ndx<altIndexArr.length;ndx++){amndx=parseInt(altIndexArr[ndx]),matches=[],ndxInitializer="string"==typeof altIndex&&resolveNdxInitializer(testPos,amndx,loopNdxCnt)||ndxInitializerClone.slice(),alternateToken.matches[amndx]&&handleMatch(alternateToken.matches[amndx],[amndx].concat(loopNdx),quantifierRecurse)?match=!0:0===ndx&&(unMatchedAlternation=!0),maltMatches=matches.slice(),testPos=currentPos,matches=[];for(var ndx1=0;ndx1<maltMatches.length;ndx1++){var altMatch=maltMatches[ndx1],dropMatch=!1;altMatch.match.jit=altMatch.match.jit||unMatchedAlternation,altMatch.alternation=altMatch.alternation||loopNdxCnt,setMergeLocators(altMatch);for(var ndx2=0;ndx2<malternateMatches.length;ndx2++){var altMatch2=malternateMatches[ndx2];if("string"!=typeof altIndex||void 0!==altMatch.alternation&&-1!==$.inArray(altMatch.locator[altMatch.alternation].toString(),altIndexArr)){if(altMatch.match.nativeDef===altMatch2.match.nativeDef){dropMatch=!0,setMergeLocators(altMatch2,altMatch);break}if(isSubsetOf(altMatch,altMatch2)){setMergeLocators(altMatch,altMatch2)&&(dropMatch=!0,malternateMatches.splice(malternateMatches.indexOf(altMatch2),0,altMatch));break}if(isSubsetOf(altMatch2,altMatch)){setMergeLocators(altMatch2,altMatch);break}if(staticCanMatchDefinition(altMatch,altMatch2)){isSameLevel(altMatch,altMatch2)||void 0!==el.inputmask.userOptions.keepStatic?setMergeLocators(altMatch,altMatch2)&&(dropMatch=!0,malternateMatches.splice(malternateMatches.indexOf(altMatch2),0,altMatch)):opts.keepStatic=!0;break}}}dropMatch||malternateMatches.push(altMatch)}}matches=currentMatches.concat(malternateMatches),testPos=pos,insertStop=0<matches.length,match=0<malternateMatches.length,ndxInitializer=ndxInitializerClone.slice()}else match=handleMatch(alternateToken.matches[altIndex]||maskToken.matches[altIndex],[altIndex].concat(loopNdx),quantifierRecurse);if(match)return!0}else if(match.isQuantifier&&quantifierRecurse!==maskToken.matches[$.inArray(match,maskToken.matches)-1])for(var qt=match,qndx=0<ndxInitializer.length?ndxInitializer.shift():0;qndx<(isNaN(qt.quantifier.max)?qndx+1:qt.quantifier.max)&&testPos<=pos;qndx++){var tokenGroup=maskToken.matches[$.inArray(qt,maskToken.matches)-1];if(match=handleMatch(tokenGroup,[qndx].concat(loopNdx),tokenGroup),match){if(latestMatch=matches[matches.length-1].match,latestMatch.optionalQuantifier=qndx>=qt.quantifier.min,latestMatch.jit=(qndx||1)*tokenGroup.matches.indexOf(latestMatch)>=qt.quantifier.jit,latestMatch.optionalQuantifier&&isFirstMatch(latestMatch,tokenGroup)){insertStop=!0,testPos=pos;break}return latestMatch.jit&&(maskset.jitOffset[pos]=tokenGroup.matches.length-tokenGroup.matches.indexOf(latestMatch)),!0}}else if(match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse),match)return!0}else testPos++}for(var tndx=0<ndxInitializer.length?ndxInitializer.shift():0;tndx<maskToken.matches.length;tndx++)if(!0!==maskToken.matches[tndx].isQuantifier){var match=handleMatch(maskToken.matches[tndx],[tndx].concat(loopNdx),quantifierRecurse);if(match&&testPos===pos)return match;if(pos<testPos)break}}function mergeLocators(pos,tests){var locator=[];return $.isArray(tests)||(tests=[tests]),0<tests.length&&(void 0===tests[0].alternation||!0===opts.keepStatic?(locator=determineTestTemplate(pos,tests.slice()).locator.slice(),0===locator.length&&(locator=tests[0].locator.slice())):$.each(tests,function(ndx,tst){if(""!==tst.def)if(0===locator.length)locator=tst.locator.slice();else for(var i=0;i<locator.length;i++)tst.locator[i]&&-1===locator[i].toString().indexOf(tst.locator[i])&&(locator[i]+=","+tst.locator[i])})),locator}if(-1<pos&&(void 0===maxLength||pos<maxLength)){if(void 0===ndxIntlzr){for(var previousPos=pos-1,test;void 0===(test=maskset.validPositions[previousPos]||maskset.tests[previousPos])&&-1<previousPos;)previousPos--;void 0!==test&&-1<previousPos&&(ndxInitializer=mergeLocators(previousPos,test),cacheDependency=ndxInitializer.join(""),testPos=previousPos)}if(maskset.tests[pos]&&maskset.tests[pos][0].cd===cacheDependency)return maskset.tests[pos];for(var mtndx=ndxInitializer.shift();mtndx<maskTokens.length;mtndx++){var match=resolveTestFromToken(maskTokens[mtndx],ndxInitializer,[mtndx]);if(match&&testPos===pos||pos<testPos)break}}return 0!==matches.length&&!insertStop||matches.push({match:{fn:null,static:!0,optionality:!1,casing:null,def:"",placeholder:""},locator:[],mloc:{},cd:cacheDependency}),void 0!==ndxIntlzr&&maskset.tests[pos]?$.extend(!0,[],matches):(maskset.tests[pos]=$.extend(!0,[],matches),maskset.tests[pos])}function getBufferTemplate(){return void 0===maskset._buffer&&(maskset._buffer=getMaskTemplate(!1,1),void 0===maskset.buffer&&(maskset.buffer=maskset._buffer.slice())),maskset._buffer}function getBuffer(noCache){return void 0!==maskset.buffer&&!0!==noCache||(maskset.buffer=getMaskTemplate(!0,getLastValidPosition(),!0),void 0===maskset._buffer&&(maskset._buffer=maskset.buffer.slice())),maskset.buffer}function refreshFromBuffer(start,end,buffer){var i,p,skipOptionalPartCharacter=opts.skipOptionalPartCharacter,bffr=isRTL?buffer.slice().reverse():buffer;if(opts.skipOptionalPartCharacter="",!0===start)resetMaskSet(),maskset.tests={},start=0,end=buffer.length,p=determineNewCaretPosition({begin:0,end:0},!1).begin;else{for(i=start;i<end;i++)delete maskset.validPositions[i];p=start}var keypress=new $.Event("keypress");for(i=start;i<end;i++){keypress.which=bffr[i].toString().charCodeAt(0),ignorable=!1;var valResult=EventHandlers.keypressEvent.call(el,keypress,!0,!1,!1,p);!1!==valResult&&(p=valResult.forwardPosition)}opts.skipOptionalPartCharacter=skipOptionalPartCharacter}function casing(elem,test,pos){switch(opts.casing||test.casing){case"upper":elem=elem.toUpperCase();break;case"lower":elem=elem.toLowerCase();break;case"title":var posBefore=maskset.validPositions[pos-1];elem=0===pos||posBefore&&posBefore.input===String.fromCharCode(keyCode.SPACE)?elem.toUpperCase():elem.toLowerCase();break;default:if($.isFunction(opts.casing)){var args=Array.prototype.slice.call(arguments);args.push(maskset.validPositions),elem=opts.casing.apply(this,args)}}return elem}function checkAlternationMatch(altArr1,altArr2,na){for(var altArrC=opts.greedy?altArr2:altArr2.slice(0,1),isMatch=!1,naArr=void 0!==na?na.split(","):[],naNdx,i=0;i<naArr.length;i++)-1!==(naNdx=altArr1.indexOf(naArr[i]))&&altArr1.splice(naNdx,1);for(var alndx=0;alndx<altArr1.length;alndx++)if(-1!==$.inArray(altArr1[alndx],altArrC)){isMatch=!0;break}return isMatch}function alternate(maskPos,c,strict,fromIsValid,rAltPos,selection){var validPsClone=$.extend(!0,{},maskset.validPositions),tstClone=$.extend(!0,{},maskset.tests),lastAlt,alternation,isValidRslt=!1,returnRslt=!1,altPos,prevAltPos,i,validPos,decisionPos,lAltPos=void 0!==rAltPos?rAltPos:getLastValidPosition(),nextPos,input,begin,end;if(selection&&(begin=selection.begin,end=selection.end,selection.begin>selection.end&&(begin=selection.end,end=selection.begin)),-1===lAltPos&&void 0===rAltPos)lastAlt=0,prevAltPos=getTest(lastAlt),alternation=prevAltPos.alternation;else for(;0<=lAltPos;lAltPos--)if(altPos=maskset.validPositions[lAltPos],altPos&&void 0!==altPos.alternation){if(prevAltPos&&prevAltPos.locator[altPos.alternation]!==altPos.locator[altPos.alternation])break;lastAlt=lAltPos,alternation=maskset.validPositions[lastAlt].alternation,prevAltPos=altPos}if(void 0!==alternation){decisionPos=parseInt(lastAlt),maskset.excludes[decisionPos]=maskset.excludes[decisionPos]||[],!0!==maskPos&&maskset.excludes[decisionPos].push(getDecisionTaker(prevAltPos)+":"+prevAltPos.alternation);var validInputs=[],resultPos=-1;for(i=decisionPos;i<getLastValidPosition(void 0,!0)+1;i++)-1===resultPos&&maskPos<=i&&void 0!==c&&(validInputs.push(c),resultPos=validInputs.length-1),validPos=maskset.validPositions[i],validPos&&!0!==validPos.generatedInput&&(void 0===selection||i<begin||end<=i)&&validInputs.push(validPos.input),delete maskset.validPositions[i];for(-1===resultPos&&void 0!==c&&(validInputs.push(c),resultPos=validInputs.length-1);void 0!==maskset.excludes[decisionPos]&&maskset.excludes[decisionPos].length<10;){for(maskset.tests={},resetMaskSet(!0),isValidRslt=!0,i=0;i<validInputs.length&&(nextPos=isValidRslt.caret||getLastValidPosition(void 0,!0)+1,input=validInputs[i],isValidRslt=isValid(nextPos,input,!1,fromIsValid,!0));i++)i===resultPos&&(returnRslt=isValidRslt),1==maskPos&&isValidRslt&&(returnRslt={caretPos:i});if(isValidRslt)break;if(resetMaskSet(),prevAltPos=getTest(decisionPos),maskset.validPositions=$.extend(!0,{},validPsClone),maskset.tests=$.extend(!0,{},tstClone),!maskset.excludes[decisionPos]){returnRslt=alternate(maskPos,c,strict,fromIsValid,decisionPos-1,selection);break}var decisionTaker=getDecisionTaker(prevAltPos);if(-1!==maskset.excludes[decisionPos].indexOf(decisionTaker+":"+prevAltPos.alternation)){returnRslt=alternate(maskPos,c,strict,fromIsValid,decisionPos-1,selection);break}for(maskset.excludes[decisionPos].push(decisionTaker+":"+prevAltPos.alternation),i=decisionPos;i<getLastValidPosition(void 0,!0)+1;i++)delete maskset.validPositions[i]}}return returnRslt&&!1===opts.keepStatic||delete maskset.excludes[decisionPos],returnRslt}function isValid(pos,c,strict,fromIsValid,fromAlternate,validateOnly){function isSelection(posObj){return isRTL?1<posObj.begin-posObj.end||posObj.begin-posObj.end==1:1<posObj.end-posObj.begin||posObj.end-posObj.begin==1}strict=!0===strict;var maskPos=pos;function processCommandObject(commandObj){if(void 0!==commandObj){if(void 0!==commandObj.remove&&($.isArray(commandObj.remove)||(commandObj.remove=[commandObj.remove]),$.each(commandObj.remove.sort(function(a,b){return b.pos-a.pos}),function(ndx,lmnt){revalidateMask({begin:lmnt,end:lmnt+1})}),commandObj.remove=void 0),void 0!==commandObj.insert&&($.isArray(commandObj.insert)||(commandObj.insert=[commandObj.insert]),$.each(commandObj.insert.sort(function(a,b){return a.pos-b.pos}),function(ndx,lmnt){""!==lmnt.c&&isValid(lmnt.pos,lmnt.c,void 0===lmnt.strict||lmnt.strict,void 0!==lmnt.fromIsValid?lmnt.fromIsValid:fromIsValid)}),commandObj.insert=void 0),commandObj.refreshFromBuffer&&commandObj.buffer){var refresh=commandObj.refreshFromBuffer;refreshFromBuffer(!0===refresh?refresh:refresh.start,refresh.end,commandObj.buffer),commandObj.refreshFromBuffer=void 0}void 0!==commandObj.rewritePosition&&(maskPos=commandObj.rewritePosition,commandObj=!0)}return commandObj}function _isValid(position,c,strict){var rslt=!1;return $.each(getTests(position),function(ndx,tst){var test=tst.match;if(getBuffer(!0),rslt=null!=test.fn?test.fn.test(c,maskset,position,strict,opts,isSelection(pos)):(c===test.def||c===opts.skipOptionalPartCharacter)&&""!==test.def&&{c:getPlaceholder(position,test,!0)||test.def,pos:position},!1!==rslt){var elem=void 0!==rslt.c?rslt.c:c,validatedPos=position;return elem=elem===opts.skipOptionalPartCharacter&&!0===test.static?getPlaceholder(position,test,!0)||test.def:elem,rslt=processCommandObject(rslt),!0!==rslt&&void 0!==rslt.pos&&rslt.pos!==position&&(validatedPos=rslt.pos),!0!==rslt&&void 0===rslt.pos&&void 0===rslt.c?!1:(!1===revalidateMask(pos,$.extend({},tst,{input:casing(elem,test,validatedPos)}),fromIsValid,validatedPos)&&(rslt=!1),!1)}}),rslt}void 0!==pos.begin&&(maskPos=isRTL?pos.end:pos.begin);var result=!0,positionsClone=$.extend(!0,{},maskset.validPositions);if(!1===opts.keepStatic&&void 0!==maskset.excludes[maskPos]&&!0!==fromAlternate&&!0!==fromIsValid)for(var i=maskPos;i<(isRTL?pos.begin:pos.end);i++)void 0!==maskset.excludes[i]&&(maskset.excludes[i]=void 0,delete maskset.tests[i]);if($.isFunction(opts.preValidation)&&!0!==fromIsValid&&!0!==validateOnly&&(result=opts.preValidation.call(el,getBuffer(),maskPos,c,isSelection(pos),opts,maskset,pos,strict||fromAlternate),result=processCommandObject(result)),!0===result){if(void 0===maxLength||maskPos<maxLength){if(result=_isValid(maskPos,c,strict),(!strict||!0===fromIsValid)&&!1===result&&!0!==validateOnly){var currentPosValid=maskset.validPositions[maskPos];if(!currentPosValid||!0!==currentPosValid.match.static||currentPosValid.match.def!==c&&c!==opts.skipOptionalPartCharacter){if(opts.insertMode||void 0===maskset.validPositions[seekNext(maskPos)]||pos.end>maskPos){var skip=!1;if(maskset.jitOffset[maskPos]&&void 0===maskset.validPositions[seekNext(maskPos)]&&(result=isValid(maskPos+maskset.jitOffset[maskPos],c,!0),!1!==result&&(!0!==fromAlternate&&(result.caret=maskPos),skip=!0)),pos.end>maskPos&&(maskset.validPositions[maskPos]=void 0),!skip&&!isMask(maskPos,opts.keepStatic))for(var nPos=maskPos+1,snPos=seekNext(maskPos);nPos<=snPos;nPos++)if(result=_isValid(nPos,c,strict),!1!==result){result=trackbackPositions(maskPos,void 0!==result.pos?result.pos:nPos)||result,maskPos=nPos;break}}}else result={caret:seekNext(maskPos)}}}else result=!1;!1!==result||!opts.keepStatic||!isComplete(getBuffer())&&0!==maskPos||strict||!0===fromAlternate?isSelection(pos)&&maskset.tests[maskPos]&&1<maskset.tests[maskPos].length&&opts.keepStatic&&!strict&&!0!==fromAlternate&&(result=alternate(!0)):result=alternate(maskPos,c,strict,fromIsValid,void 0,pos),!0===result&&(result={pos:maskPos})}if($.isFunction(opts.postValidation)&&!0!==fromIsValid&&!0!==validateOnly){var postResult=opts.postValidation.call(el,getBuffer(!0),void 0!==pos.begin?isRTL?pos.end:pos.begin:pos,c,result,opts,maskset,strict);void 0!==postResult&&(result=!0===postResult?result:postResult)}result&&void 0===result.pos&&(result.pos=maskPos),!1===result||!0===validateOnly?(resetMaskSet(!0),maskset.validPositions=$.extend(!0,{},positionsClone)):trackbackPositions(void 0,maskPos,!0);var endResult=processCommandObject(result);return endResult}function trackbackPositions(originalPos,newPos,fillOnly){if(void 0===originalPos)for(originalPos=newPos-1;0<originalPos&&!maskset.validPositions[originalPos];originalPos--);for(var ps=originalPos;ps<newPos;ps++)if(void 0===maskset.validPositions[ps]&&!isMask(ps,!0)){var vp=0==ps?getTest(ps):maskset.validPositions[ps-1];if(vp){var tests=getTests(ps).slice();""===tests[tests.length-1].match.def&&tests.pop();var bestMatch=determineTestTemplate(ps,tests),np;if(bestMatch&&(!0!==bestMatch.match.jit||"master"===bestMatch.match.newBlockMarker&&(np=maskset.validPositions[ps+1])&&!0===np.match.optionalQuantifier)&&(bestMatch=$.extend({},bestMatch,{input:getPlaceholder(ps,bestMatch.match,!0)||bestMatch.match.def}),bestMatch.generatedInput=!0,revalidateMask(ps,bestMatch,!0),!0!==fillOnly)){var cvpInput=maskset.validPositions[newPos].input;return maskset.validPositions[newPos]=void 0,isValid(newPos,cvpInput,!0,!0)}}}}function revalidateMask(pos,validTest,fromIsValid,validatedPos){function IsEnclosedStatic(pos,valids,selection){var posMatch=valids[pos];if(void 0===posMatch||!0!==posMatch.match.static||!0===posMatch.match.optionality||void 0!==valids[0]&&void 0!==valids[0].alternation)return!1;var prevMatch=selection.begin<=pos-1?valids[pos-1]&&!0===valids[pos-1].match.static&&valids[pos-1]:valids[pos-1],nextMatch=selection.end>pos+1?valids[pos+1]&&!0===valids[pos+1].match.static&&valids[pos+1]:valids[pos+1];return prevMatch&&nextMatch}var offset=0,begin=void 0!==pos.begin?pos.begin:pos,end=void 0!==pos.end?pos.end:pos;if(pos.begin>pos.end&&(begin=pos.end,end=pos.begin),validatedPos=void 0!==validatedPos?validatedPos:begin,begin!==end||opts.insertMode&&void 0!==maskset.validPositions[validatedPos]&&void 0===fromIsValid||void 0===validTest){var positionsClone=$.extend(!0,{},maskset.validPositions),lvp=getLastValidPosition(void 0,!0),i;for(maskset.p=begin,i=lvp;begin<=i;i--)delete maskset.validPositions[i],void 0===validTest&&delete maskset.tests[i+1];var valid=!0,j=validatedPos,posMatch=j,t,canMatch;for(validTest&&(maskset.validPositions[validatedPos]=$.extend(!0,{},validTest),posMatch++,j++),i=validTest?end:end-1;i<=lvp;i++){if(void 0!==(t=positionsClone[i])&&!0!==t.generatedInput&&(end<=i||begin<=i&&IsEnclosedStatic(i,positionsClone,{begin:begin,end:end}))){for(;""!==getTest(posMatch).match.def;){if(!1!==(canMatch=positionCanMatchDefinition(posMatch,t,opts))||"+"===t.match.def){"+"===t.match.def&&getBuffer(!0);var result=isValid(posMatch,t.input,"+"!==t.match.def,"+"!==t.match.def);if(valid=!1!==result,j=(result.pos||posMatch)+1,!valid&&canMatch)break}else valid=!1;if(valid){void 0===validTest&&t.match.static&&i===pos.begin&&offset++;break}if(!valid&&posMatch>maskset.maskLength)break;posMatch++}""==getTest(posMatch).match.def&&(valid=!1),posMatch=j}if(!valid)break}if(!valid)return maskset.validPositions=$.extend(!0,{},positionsClone),resetMaskSet(!0),!1}else validTest&&getTest(validatedPos).match.cd===validTest.match.cd&&(maskset.validPositions[validatedPos]=$.extend(!0,{},validTest));return resetMaskSet(!0),offset}function isMask(pos,strict,fuzzy){var test=getTestTemplate(pos).match;if(""===test.def&&(test=getTest(pos).match),!0!==test.static)return test.fn;if(!0===fuzzy&&void 0!==maskset.validPositions[pos]&&!0!==maskset.validPositions[pos].generatedInput)return!0;if(!0!==strict&&-1<pos){if(fuzzy){var tests=getTests(pos);return tests.length>1+(""===tests[tests.length-1].match.def?1:0)}var testTemplate=determineTestTemplate(pos,getTests(pos)),testPlaceHolder=getPlaceholder(pos,testTemplate.match);return testTemplate.match.def!==testPlaceHolder}return!1}function seekNext(pos,newBlock,fuzzy){void 0===fuzzy&&(fuzzy=!0);for(var position=pos+1;""!==getTest(position).match.def&&(!0===newBlock&&(!0!==getTest(position).match.newBlockMarker||!isMask(position,void 0,!0))||!0!==newBlock&&!isMask(position,void 0,fuzzy));)position++;return position}function seekPrevious(pos,newBlock){var position=pos,tests;if(position<=0)return 0;for(;0<--position&&(!0===newBlock&&!0!==getTest(position).match.newBlockMarker||!0!==newBlock&&!isMask(position,void 0,!0)&&(tests=getTests(position),tests.length<2||2===tests.length&&""===tests[1].match.def)););return position}function writeBuffer(input,buffer,caretPos,event,triggerEvents){if(event&&$.isFunction(opts.onBeforeWrite)){var result=opts.onBeforeWrite.call(inputmask,event,buffer,caretPos,opts);if(result){if(result.refreshFromBuffer){var refresh=result.refreshFromBuffer;refreshFromBuffer(!0===refresh?refresh:refresh.start,refresh.end,result.buffer||buffer),buffer=getBuffer(!0)}void 0!==caretPos&&(caretPos=void 0!==result.caret?result.caret:caretPos)}}if(void 0!==input&&(input.inputmask._valueSet(buffer.join("")),void 0===caretPos||void 0!==event&&"blur"===event.type||caret(input,caretPos,void 0,void 0,void 0!==event&&"keydown"===event.type&&(event.keyCode===keyCode.DELETE||event.keyCode===keyCode.BACKSPACE)),!0===triggerEvents)){var $input=$(input),nptVal=input.inputmask._valueGet();skipInputEvent=!0,$input.trigger("input"),setTimeout(function(){nptVal===getBufferTemplate().join("")?$input.trigger("cleared"):!0===isComplete(buffer)&&$input.trigger("complete")},0)}}function getPlaceholder(pos,test,returnPL){if(test=test||getTest(pos).match,void 0!==test.placeholder||!0===returnPL)return $.isFunction(test.placeholder)?test.placeholder(opts):test.placeholder;if(!0!==test.static)return opts.placeholder.charAt(pos%opts.placeholder.length);if(-1<pos&&void 0===maskset.validPositions[pos]){var tests=getTests(pos),staticAlternations=[],prevTest;if(tests.length>1+(""===tests[tests.length-1].match.def?1:0))for(var i=0;i<tests.length;i++)if(""!==tests[i].match.def&&!0!==tests[i].match.optionality&&!0!==tests[i].match.optionalQuantifier&&(!0===tests[i].match.static||void 0===prevTest||!1!==tests[i].match.fn.test(prevTest.match.def,maskset,pos,!0,opts))&&(staticAlternations.push(tests[i]),!0===tests[i].match.static&&(prevTest=tests[i]),1<staticAlternations.length&&/[0-9a-bA-Z]/.test(staticAlternations[0].match.def)))return opts.placeholder.charAt(pos%opts.placeholder.length)}return test.def}function HandleNativePlaceholder(npt,value){if(ie){if(npt.inputmask._valueGet()!==value&&(npt.placeholder!==value||""===npt.placeholder)){var buffer=getBuffer().slice(),nptValue=npt.inputmask._valueGet();if(nptValue!==value){var lvp=getLastValidPosition();-1===lvp&&nptValue===getBufferTemplate().join("")?buffer=[]:-1!==lvp&&clearOptionalTail(buffer),writeBuffer(npt,buffer)}}}else npt.placeholder!==value&&(npt.placeholder=value,""===npt.placeholder&&npt.removeAttribute("placeholder"))}function determineNewCaretPosition(selectedCaret,tabbed){function doRadixFocus(clickPos){if(""!==opts.radixPoint&&0!==opts.digits){var vps=maskset.validPositions;if(void 0===vps[clickPos]||vps[clickPos].input===getPlaceholder(clickPos)){if(clickPos<seekNext(-1))return!0;var radixPos=$.inArray(opts.radixPoint,getBuffer());if(-1!==radixPos){for(var vp in vps)if(vps[vp]&&radixPos<vp&&vps[vp].input!==getPlaceholder(vp))return!1;return!0}}}return!1}if(tabbed&&(isRTL?selectedCaret.end=selectedCaret.begin:selectedCaret.begin=selectedCaret.end),selectedCaret.begin===selectedCaret.end){switch(opts.positionCaretOnClick){case"none":break;case"select":selectedCaret={begin:0,end:getBuffer().length};break;case"ignore":selectedCaret.end=selectedCaret.begin=seekNext(getLastValidPosition());break;case"radixFocus":if(doRadixFocus(selectedCaret.begin)){var radixPos=getBuffer().join("").indexOf(opts.radixPoint);selectedCaret.end=selectedCaret.begin=opts.numericInput?seekNext(radixPos):radixPos;break}default:var clickPosition=selectedCaret.begin,lvclickPosition=getLastValidPosition(clickPosition,!0),lastPosition=seekNext(-1!==lvclickPosition||isMask(0)?lvclickPosition:0);if(clickPosition<lastPosition)selectedCaret.end=selectedCaret.begin=isMask(clickPosition,!0)||isMask(clickPosition-1,!0)?clickPosition:seekNext(clickPosition);else{var lvp=maskset.validPositions[lvclickPosition],tt=getTestTemplate(lastPosition,lvp?lvp.match.locator:void 0,lvp),placeholder=getPlaceholder(lastPosition,tt.match);if(""!==placeholder&&getBuffer()[lastPosition]!==placeholder&&!0!==tt.match.optionalQuantifier&&!0!==tt.match.newBlockMarker||!isMask(lastPosition,opts.keepStatic)&&tt.match.def===placeholder){var newPos=seekNext(lastPosition);(newPos<=clickPosition||clickPosition===lastPosition)&&(lastPosition=newPos)}selectedCaret.end=selectedCaret.begin=lastPosition}}return selectedCaret}}var EventRuler={on:function on(input,eventName,eventHandler){var ev=function ev(e){e.originalEvent&&(e=e.originalEvent||e,arguments[0]=e);var that=this,args;if(void 0===that.inputmask&&"FORM"!==this.nodeName){var imOpts=$.data(that,"_inputmask_opts");imOpts?new Inputmask(imOpts).mask(that):EventRuler.off(that)}else{if("setvalue"===e.type||"FORM"===this.nodeName||!(that.disabled||that.readOnly&&!("keydown"===e.type&&e.ctrlKey&&67===e.keyCode||!1===opts.tabThrough&&e.keyCode===keyCode.TAB))){switch(e.type){case"input":if(!0===skipInputEvent||e.inputType&&"insertCompositionText"===e.inputType)return skipInputEvent=!1,e.preventDefault();break;case"keydown":skipKeyPressEvent=!1,skipInputEvent=!1;break;case"keypress":if(!0===skipKeyPressEvent)return e.preventDefault();skipKeyPressEvent=!0;break;case"click":case"focus":return validationEvent?(validationEvent=!1,input.blur(),HandleNativePlaceholder(input,(isRTL?getBufferTemplate().slice().reverse():getBufferTemplate()).join("")),setTimeout(function(){input.focus()},3e3)):(args=arguments,setTimeout(function(){input.inputmask&&eventHandler.apply(that,args)},0)),!1}var returnVal=eventHandler.apply(that,arguments);return!1===returnVal&&(e.preventDefault(),e.stopPropagation()),returnVal}e.preventDefault()}};input.inputmask.events[eventName]=input.inputmask.events[eventName]||[],input.inputmask.events[eventName].push(ev),-1!==$.inArray(eventName,["submit","reset"])?null!==input.form&&$(input.form).on(eventName,ev):$(input).on(eventName,ev)},off:function off(input,event){var events;input.inputmask&&input.inputmask.events&&(event?(events=[],events[event]=input.inputmask.events[event]):events=input.inputmask.events,$.each(events,function(eventName,evArr){for(;0<evArr.length;){var ev=evArr.pop();-1!==$.inArray(eventName,["submit","reset"])?null!==input.form&&$(input.form).off(eventName,ev):$(input).off(eventName,ev)}delete input.inputmask.events[eventName]}))}},EventHandlers={keydownEvent:function keydownEvent(e){var input=this,$input=$(input),k=e.keyCode,pos=caret(input),kdResult=opts.onKeyDown.call(this,e,getBuffer(),pos,opts);if(void 0!==kdResult)return kdResult;if(k===keyCode.BACKSPACE||k===keyCode.DELETE||iphone&&k===keyCode.BACKSPACE_SAFARI||e.ctrlKey&&k===keyCode.X&&!("oncut"in input))e.preventDefault(),handleRemove(input,k,pos),writeBuffer(input,getBuffer(!0),maskset.p,e,input.inputmask._valueGet()!==getBuffer().join(""));else if(k===keyCode.END||k===keyCode.PAGE_DOWN){e.preventDefault();var caretPos=seekNext(getLastValidPosition());caret(input,e.shiftKey?pos.begin:caretPos,caretPos,!0)}else k===keyCode.HOME&&!e.shiftKey||k===keyCode.PAGE_UP?(e.preventDefault(),caret(input,0,e.shiftKey?pos.begin:0,!0)):(opts.undoOnEscape&&k===keyCode.ESCAPE||90===k&&e.ctrlKey)&&!0!==e.altKey?(checkVal(input,!0,!1,undoValue.split("")),$input.trigger("click")):!0===opts.tabThrough&&k===keyCode.TAB?(!0===e.shiftKey?(!0===getTest(pos.begin).match.static&&(pos.begin=seekNext(pos.begin)),pos.end=seekPrevious(pos.begin,!0),pos.begin=seekPrevious(pos.end,!0)):(pos.begin=seekNext(pos.begin,!0),pos.end=seekNext(pos.begin,!0),pos.end<maskset.maskLength&&pos.end--),pos.begin<maskset.maskLength&&(e.preventDefault(),caret(input,pos.begin,pos.end))):e.shiftKey||opts.insertModeVisual&&!1===opts.insertMode&&(k===keyCode.RIGHT?setTimeout(function(){var caretPos=caret(input);caret(input,caretPos.begin)},0):k===keyCode.LEFT&&setTimeout(function(){var caretPos_begin=translatePosition(input.inputmask.caretPos.begin),caretPos_end=translatePosition(input.inputmask.caretPos.end);caret(input,isRTL?caretPos_begin+(caretPos_begin===maskset.maskLength?0:1):caretPos_begin-(0===caretPos_begin?0:1))},0));ignorable=-1!==$.inArray(k,opts.ignorables)},keypressEvent:function keypressEvent(e,checkval,writeOut,strict,ndx){var input=this,$input=$(input),k=e.which||e.charCode||e.keyCode;if(!(!0===checkval||e.ctrlKey&&e.altKey)&&(e.ctrlKey||e.metaKey||ignorable))return k===keyCode.ENTER&&undoValue!==getBuffer().join("")&&(undoValue=getBuffer().join(""),setTimeout(function(){$input.trigger("change")},0)),skipInputEvent=!0,!0;if(k){44!==k&&46!==k||3!==e.location||""===opts.radixPoint||(k=opts.radixPoint.charCodeAt(0));var pos=checkval?{begin:ndx,end:ndx}:caret(input),forwardPosition,c=String.fromCharCode(k);maskset.writeOutBuffer=!0;var valResult=isValid(pos,c,strict);if(!1!==valResult&&(resetMaskSet(!0),forwardPosition=void 0!==valResult.caret?valResult.caret:seekNext(valResult.pos.begin?valResult.pos.begin:valResult.pos),maskset.p=forwardPosition),forwardPosition=opts.numericInput&&void 0===valResult.caret?seekPrevious(forwardPosition):forwardPosition,!1!==writeOut&&(setTimeout(function(){opts.onKeyValidation.call(input,k,valResult)},0),maskset.writeOutBuffer&&!1!==valResult)){var buffer=getBuffer();writeBuffer(input,buffer,forwardPosition,e,!0!==checkval)}if(e.preventDefault(),checkval)return!1!==valResult&&(valResult.forwardPosition=forwardPosition),valResult}},pasteEvent:function pasteEvent(e){var input=this,inputValue=this.inputmask._valueGet(!0),caretPos=caret(this),tempValue;isRTL&&(tempValue=caretPos.end,caretPos.end=caretPos.begin,caretPos.begin=tempValue);var valueBeforeCaret=inputValue.substr(0,caretPos.begin),valueAfterCaret=inputValue.substr(caretPos.end,inputValue.length);if(valueBeforeCaret==(isRTL?getBufferTemplate().slice().reverse():getBufferTemplate()).slice(0,caretPos.begin).join("")&&(valueBeforeCaret=""),valueAfterCaret==(isRTL?getBufferTemplate().slice().reverse():getBufferTemplate()).slice(caretPos.end).join("")&&(valueAfterCaret=""),window.clipboardData&&window.clipboardData.getData)inputValue=valueBeforeCaret+window.clipboardData.getData("Text")+valueAfterCaret;else{if(!e.clipboardData||!e.clipboardData.getData)return!0;inputValue=valueBeforeCaret+e.clipboardData.getData("text/plain")+valueAfterCaret}var pasteValue=inputValue;if($.isFunction(opts.onBeforePaste)){if(pasteValue=opts.onBeforePaste.call(inputmask,inputValue,opts),!1===pasteValue)return e.preventDefault();pasteValue=pasteValue||inputValue}return checkVal(this,!1,!1,pasteValue.toString().split("")),writeBuffer(this,getBuffer(),seekNext(getLastValidPosition()),e,undoValue!==getBuffer().join("")),e.preventDefault()},inputFallBackEvent:function inputFallBackEvent(e){function ieMobileHandler(input,inputValue,caretPos){if(iemobile){var inputChar=inputValue.replace(getBuffer().join(""),"");if(1===inputChar.length){var iv=inputValue.split("");iv.splice(caretPos.begin,0,inputChar),inputValue=iv.join("")}}return inputValue}function analyseChanges(inputValue,buffer,caretPos){for(var frontPart=inputValue.substr(0,caretPos.begin).split(""),backPart=inputValue.substr(caretPos.begin).split(""),frontBufferPart=buffer.substr(0,caretPos.begin).split(""),backBufferPart=buffer.substr(caretPos.begin).split(""),fpl=frontPart.length>=frontBufferPart.length?frontPart.length:frontBufferPart.length,bpl=backPart.length>=backBufferPart.length?backPart.length:backBufferPart.length,bl,i,action="",data=[],marker="~",placeholder;frontPart.length<fpl;)frontPart.push("~");for(;frontBufferPart.length<fpl;)frontBufferPart.push("~");for(;backPart.length<bpl;)backPart.unshift("~");for(;backBufferPart.length<bpl;)backBufferPart.unshift("~");var newBuffer=frontPart.concat(backPart),oldBuffer=frontBufferPart.concat(backBufferPart);for(i=0,bl=newBuffer.length;i<bl;i++)switch(placeholder=getPlaceholder(translatePosition(i)),action){case"insertText":oldBuffer[i-1]===newBuffer[i]&&caretPos.begin==newBuffer.length-1&&data.push(newBuffer[i]),i=bl;break;case"insertReplacementText":"~"===newBuffer[i]?caretPos.end++:i=bl;break;case"deleteContentBackward":"~"===newBuffer[i]?caretPos.end++:i=bl;break;default:newBuffer[i]!==oldBuffer[i]&&("~"!==newBuffer[i+1]&&newBuffer[i+1]!==placeholder&&void 0!==newBuffer[i+1]||(oldBuffer[i]!==placeholder||"~"!==oldBuffer[i+1])&&"~"!==oldBuffer[i]?"~"===oldBuffer[i+1]&&oldBuffer[i]===newBuffer[i+1]?(action="insertText",data.push(newBuffer[i]),caretPos.begin--,caretPos.end--):newBuffer[i]!==placeholder&&"~"!==newBuffer[i]&&("~"===newBuffer[i+1]||oldBuffer[i]!==newBuffer[i]&&oldBuffer[i+1]===newBuffer[i+1])?(action="insertReplacementText",data.push(newBuffer[i]),caretPos.begin--):"~"===newBuffer[i]?(action="deleteContentBackward",!isMask(translatePosition(i),!0)&&oldBuffer[i]!==opts.radixPoint||caretPos.end++):i=bl:(action="insertText",data.push(newBuffer[i]),caretPos.begin--,caretPos.end--));break}return{action:action,data:data,caret:caretPos}}var input=this,inputValue=input.inputmask._valueGet(!0),buffer=(isRTL?getBuffer().slice().reverse():getBuffer()).join(""),caretPos=caret(input,void 0,void 0,!0);if(buffer!==inputValue){inputValue=ieMobileHandler(input,inputValue,caretPos);var changes=analyseChanges(inputValue,buffer,caretPos);switch((input.inputmask.shadowRoot||document).activeElement!==input&&input.focus(),writeBuffer(input,getBuffer()),caret(input,caretPos.begin,caretPos.end,!0),changes.action){case"insertText":case"insertReplacementText":$.each(changes.data,function(ndx,entry){var keypress=new $.Event("keypress");keypress.which=entry.charCodeAt(0),ignorable=!1,EventHandlers.keypressEvent.call(input,keypress)}),setTimeout(function(){$el.trigger("keyup")},0);break;case"deleteContentBackward":var keydown=new $.Event("keydown");keydown.keyCode=keyCode.BACKSPACE,EventHandlers.keydownEvent.call(input,keydown);break;default:applyInputValue(input,inputValue);break}e.preventDefault()}},compositionendEvent:function compositionendEvent(e){$el.trigger("input")},setValueEvent:function setValueEvent(e,argument_1,argument_2){var input=this,value=e&&e.detail?e.detail[0]:argument_1;void 0===value&&(value=this.inputmask._valueGet(!0)),applyInputValue(this,value),(e.detail&&void 0!==e.detail[1]||void 0!==argument_2)&&caret(this,e.detail?e.detail[1]:argument_2)},focusEvent:function focusEvent(e){var input=this,nptValue=this.inputmask._valueGet();opts.showMaskOnFocus&&nptValue!==getBuffer().join("")&&writeBuffer(this,getBuffer(),seekNext(getLastValidPosition())),!0!==opts.positionCaretOnTab||!1!==mouseEnter||isComplete(getBuffer())&&-1!==getLastValidPosition()||EventHandlers.clickEvent.apply(this,[e,!0]),undoValue=getBuffer().join("")},invalidEvent:function invalidEvent(e){validationEvent=!0},mouseleaveEvent:function mouseleaveEvent(){var input=this;mouseEnter=!1,opts.clearMaskOnLostFocus&&(this.inputmask.shadowRoot||document).activeElement!==this&&HandleNativePlaceholder(this,originalPlaceholder)},clickEvent:function clickEvent(e,tabbed){var input=this;if((this.inputmask.shadowRoot||document).activeElement===this){var newCaretPosition=determineNewCaretPosition(caret(this),tabbed);void 0!==newCaretPosition&&caret(this,newCaretPosition)}},cutEvent:function cutEvent(e){var input=this,pos=caret(this),clipboardData=window.clipboardData||e.clipboardData,clipData=isRTL?getBuffer().slice(pos.end,pos.begin):getBuffer().slice(pos.begin,pos.end);clipboardData.setData("text",isRTL?clipData.reverse().join(""):clipData.join("")),document.execCommand&&document.execCommand("copy"),handleRemove(this,keyCode.DELETE,pos),writeBuffer(this,getBuffer(),maskset.p,e,undoValue!==getBuffer().join(""))},blurEvent:function blurEvent(e){var $input=$(this),input=this;if(this.inputmask){HandleNativePlaceholder(this,originalPlaceholder);var nptValue=this.inputmask._valueGet(),buffer=getBuffer().slice();""!==nptValue&&(opts.clearMaskOnLostFocus&&(-1===getLastValidPosition()&&nptValue===getBufferTemplate().join("")?buffer=[]:clearOptionalTail(buffer)),!1===isComplete(buffer)&&(setTimeout(function(){$input.trigger("incomplete")},0),opts.clearIncomplete&&(resetMaskSet(),buffer=opts.clearMaskOnLostFocus?[]:getBufferTemplate().slice())),writeBuffer(this,buffer,void 0,e)),undoValue!==getBuffer().join("")&&(undoValue=getBuffer().join(""),$input.trigger("change"))}},mouseenterEvent:function mouseenterEvent(){var input=this;mouseEnter=!0,(this.inputmask.shadowRoot||document).activeElement!==this&&(null==originalPlaceholder&&this.placeholder!==originalPlaceholder&&(originalPlaceholder=this.placeholder),opts.showMaskOnHover&&HandleNativePlaceholder(this,(isRTL?getBufferTemplate().slice().reverse():getBufferTemplate()).join("")))},submitEvent:function submitEvent(){undoValue!==getBuffer().join("")&&$el.trigger("change"),opts.clearMaskOnLostFocus&&-1===getLastValidPosition()&&el.inputmask._valueGet&&el.inputmask._valueGet()===getBufferTemplate().join("")&&el.inputmask._valueSet(""),opts.clearIncomplete&&!1===isComplete(getBuffer())&&el.inputmask._valueSet(""),opts.removeMaskOnSubmit&&(el.inputmask._valueSet(el.inputmask.unmaskedvalue(),!0),setTimeout(function(){writeBuffer(el,getBuffer())},0))},resetEvent:function resetEvent(){el.inputmask.refreshValue=!0,setTimeout(function(){applyInputValue(el,el.inputmask._valueGet(!0))},0)}},valueBuffer;function checkVal(input,writeOut,strict,nptvl,initiatingEvent){var inputmask=this||input.inputmask,inputValue=nptvl.slice(),charCodes="",initialNdx=-1,result=void 0;function isTemplateMatch(ndx,charCodes){for(var targetTemplate=getMaskTemplate(!0,0).slice(ndx,seekNext(ndx)).join("").replace(/'/g,""),charCodeNdx=targetTemplate.indexOf(charCodes);0<charCodeNdx&&" "===targetTemplate[charCodeNdx-1];)charCodeNdx--;var match=0===charCodeNdx&&!isMask(ndx)&&(getTest(ndx).match.nativeDef===charCodes.charAt(0)||!0===getTest(ndx).match.static&&getTest(ndx).match.nativeDef==="'"+charCodes.charAt(0)||" "===getTest(ndx).match.nativeDef&&(getTest(ndx+1).match.nativeDef===charCodes.charAt(0)||!0===getTest(ndx+1).match.static&&getTest(ndx+1).match.nativeDef==="'"+charCodes.charAt(0)));if(!match&&0<charCodeNdx&&!isMask(ndx,!1,!0)){var nextPos=seekNext(ndx);inputmask.caretPos.begin<nextPos&&(inputmask.caretPos={begin:nextPos})}return match}resetMaskSet(),maskset.tests={},initialNdx=opts.radixPoint?determineNewCaretPosition({begin:0,end:0}).begin:0,maskset.p=initialNdx,inputmask.caretPos={begin:initialNdx};var staticMatches=[],prevCaretPos=inputmask.caretPos;if($.each(inputValue,function(ndx,charCode){if(void 0!==charCode)if(void 0===maskset.validPositions[ndx]&&inputValue[ndx]===getPlaceholder(ndx)&&isMask(ndx,!0)&&!1===isValid(ndx,inputValue[ndx],!0,void 0,void 0,!0))maskset.p++;else{var keypress=new $.Event("_checkval");keypress.which=charCode.toString().charCodeAt(0),charCodes+=charCode;var lvp=getLastValidPosition(void 0,!0);isTemplateMatch(initialNdx,charCodes)?result=EventHandlers.keypressEvent.call(input,keypress,!0,!1,strict,lvp+1):(result=EventHandlers.keypressEvent.call(input,keypress,!0,!1,strict,inputmask.caretPos.begin),result&&(initialNdx=inputmask.caretPos.begin+1,charCodes="")),result?(void 0!==result.pos&&maskset.validPositions[result.pos]&&!0===maskset.validPositions[result.pos].match.static&&void 0===maskset.validPositions[result.pos].alternation&&(staticMatches.push(result.pos),isRTL||(result.forwardPosition=result.pos+1)),writeBuffer(void 0,getBuffer(),result.forwardPosition,keypress,!1),inputmask.caretPos={begin:result.forwardPosition,end:result.forwardPosition},prevCaretPos=inputmask.caretPos):inputmask.caretPos=prevCaretPos}}),0<staticMatches.length){var sndx,validPos,nextValid=seekNext(-1,void 0,!1);if(!isComplete(getBuffer())&&staticMatches.length<=nextValid||isComplete(getBuffer())&&0<staticMatches.length&&staticMatches.length!==nextValid&&0===staticMatches[0])for(var nextSndx=nextValid;void 0!==(sndx=staticMatches.shift());){var keypress=new $.Event("_checkval");if(validPos=maskset.validPositions[sndx],validPos.generatedInput=!0,keypress.which=validPos.input.charCodeAt(0),result=EventHandlers.keypressEvent.call(input,keypress,!0,!1,strict,nextSndx),result&&void 0!==result.pos&&result.pos!==sndx&&maskset.validPositions[result.pos]&&!0===maskset.validPositions[result.pos].match.static)staticMatches.push(result.pos);else if(!result)break;nextSndx++}else for(;sndx=staticMatches.pop();)validPos=maskset.validPositions[sndx],validPos&&(validPos.generatedInput=!0)}if(writeOut)for(var vndx in writeBuffer(input,getBuffer(),result?result.forwardPosition:void 0,initiatingEvent||new $.Event("checkval"),initiatingEvent&&"input"===initiatingEvent.type),maskset.validPositions)!0!==maskset.validPositions[vndx].match.generated&&delete maskset.validPositions[vndx].generatedInput}function unmaskedvalue(input){if(input){if(void 0===input.inputmask)return input.value;input.inputmask&&input.inputmask.refreshValue&&applyInputValue(input,input.inputmask._valueGet(!0))}var umValue=[],vps=maskset.validPositions;for(var pndx in vps)vps[pndx]&&vps[pndx].match&&(1!=vps[pndx].match.static||!0!==vps[pndx].generatedInput)&&umValue.push(vps[pndx].input);var unmaskedValue=0===umValue.length?"":(isRTL?umValue.reverse():umValue).join("");if($.isFunction(opts.onUnMask)){var bufferValue=(isRTL?getBuffer().slice().reverse():getBuffer()).join("");unmaskedValue=opts.onUnMask.call(inputmask,bufferValue,unmaskedValue,opts)}return unmaskedValue}function translatePosition(pos){return!isRTL||"number"!=typeof pos||opts.greedy&&""===opts.placeholder||!el||(pos=el.inputmask._valueGet().length-pos),pos}function caret(input,begin,end,notranslate,isDelete){var range;if(void 0===begin)return"selectionStart"in input&&"selectionEnd"in input?(begin=input.selectionStart,end=input.selectionEnd):window.getSelection?(range=window.getSelection().getRangeAt(0),range.commonAncestorContainer.parentNode!==input&&range.commonAncestorContainer!==input||(begin=range.startOffset,end=range.endOffset)):document.selection&&document.selection.createRange&&(range=document.selection.createRange(),begin=0-range.duplicate().moveStart("character",-input.inputmask._valueGet().length),end=begin+range.text.length),{begin:notranslate?begin:translatePosition(begin),end:notranslate?end:translatePosition(end)};if($.isArray(begin)&&(end=isRTL?begin[0]:begin[1],begin=isRTL?begin[1]:begin[0]),void 0!==begin.begin&&(end=isRTL?begin.begin:begin.end,begin=isRTL?begin.end:begin.begin),"number"==typeof begin){begin=notranslate?begin:translatePosition(begin),end=notranslate?end:translatePosition(end),end="number"==typeof end?end:begin;var scrollCalc=parseInt(((input.ownerDocument.defaultView||window).getComputedStyle?(input.ownerDocument.defaultView||window).getComputedStyle(input,null):input.currentStyle).fontSize)*end;if(input.scrollLeft=scrollCalc>input.scrollWidth?scrollCalc:0,input.inputmask.caretPos={begin:begin,end:end},opts.insertModeVisual&&!1===opts.insertMode&&begin===end&&(isDelete||end++),input===(input.inputmask.shadowRoot||document).activeElement)if("setSelectionRange"in input)input.setSelectionRange(begin,end);else if(window.getSelection){if(range=document.createRange(),void 0===input.firstChild||null===input.firstChild){var textNode=document.createTextNode("");input.appendChild(textNode)}range.setStart(input.firstChild,begin<input.inputmask._valueGet().length?begin:input.inputmask._valueGet().length),range.setEnd(input.firstChild,end<input.inputmask._valueGet().length?end:input.inputmask._valueGet().length),range.collapse(!0);var sel=window.getSelection();sel.removeAllRanges(),sel.addRange(range)}else input.createTextRange&&(range=input.createTextRange(),range.collapse(!0),range.moveEnd("character",end),range.moveStart("character",begin),range.select())}}function determineLastRequiredPosition(returnDefinition){var buffer=getMaskTemplate(!0,getLastValidPosition(),!0,!0),bl=buffer.length,pos,lvp=getLastValidPosition(),positions={},lvTest=maskset.validPositions[lvp],ndxIntlzr=void 0!==lvTest?lvTest.locator.slice():void 0,testPos;for(pos=lvp+1;pos<buffer.length;pos++)testPos=getTestTemplate(pos,ndxIntlzr,pos-1),ndxIntlzr=testPos.locator.slice(),positions[pos]=$.extend(!0,{},testPos);var lvTestAlt=lvTest&&void 0!==lvTest.alternation?lvTest.locator[lvTest.alternation]:void 0;for(pos=bl-1;lvp<pos&&(testPos=positions[pos],(testPos.match.optionality||testPos.match.optionalQuantifier&&testPos.match.newBlockMarker||lvTestAlt&&(lvTestAlt!==positions[pos].locator[lvTest.alternation]&&1!=testPos.match.static||!0===testPos.match.static&&testPos.locator[lvTest.alternation]&&checkAlternationMatch(testPos.locator[lvTest.alternation].toString().split(","),lvTestAlt.toString().split(","))&&""!==getTests(pos)[0].def))&&buffer[pos]===getPlaceholder(pos,testPos.match));pos--)bl--;return returnDefinition?{l:bl,def:positions[bl]?positions[bl].match:void 0}:bl}function clearOptionalTail(buffer){buffer.length=0;for(var template=getMaskTemplate(!0,0,!0,void 0,!0),lmnt;void 0!==(lmnt=template.shift());)buffer.push(lmnt);return buffer}function isComplete(buffer){if($.isFunction(opts.isComplete))return opts.isComplete(buffer,opts);if("*"!==opts.repeat){var complete=!1,lrp=determineLastRequiredPosition(!0),aml=seekPrevious(lrp.l);if(void 0===lrp.def||lrp.def.newBlockMarker||lrp.def.optionality||lrp.def.optionalQuantifier){complete=!0;for(var i=0;i<=aml;i++){var test=getTestTemplate(i).match;if(!0!==test.static&&void 0===maskset.validPositions[i]&&!0!==test.optionality&&!0!==test.optionalQuantifier||!0===test.static&&buffer[i]!==getPlaceholder(i,test)){complete=!1;break}}}return complete}}function handleRemove(input,k,pos,strict,fromIsValid){if((opts.numericInput||isRTL)&&(k===keyCode.BACKSPACE?k=keyCode.DELETE:k===keyCode.DELETE&&(k=keyCode.BACKSPACE),isRTL)){var pend=pos.end;pos.end=pos.begin,pos.begin=pend}var lvp=getLastValidPosition(void 0,!0),offset;if(pos.end>=getBuffer().length&&lvp>=pos.end&&(pos.end=lvp+1),k===keyCode.BACKSPACE?pos.end-pos.begin<1&&(pos.begin=seekPrevious(pos.begin)):k===keyCode.DELETE&&pos.begin===pos.end&&(pos.end=isMask(pos.end,!0,!0)?pos.end+1:seekNext(pos.end)+1),!1!==(offset=revalidateMask(pos))){if(!0!==strict&&!1!==opts.keepStatic||null!==opts.regex&&-1!==getTest(pos.begin).match.def.indexOf("|")){var result=alternate(!0);if(result){var newPos=void 0!==result.caret?result.caret:result.pos?seekNext(result.pos.begin?result.pos.begin:result.pos):getLastValidPosition(-1,!0);(k!==keyCode.DELETE||pos.begin>newPos)&&pos.begin}}!0!==strict&&(maskset.p=k===keyCode.DELETE?pos.begin+offset:pos.begin)}}function applyInputValue(input,value){input.inputmask.refreshValue=!1,$.isFunction(opts.onBeforeMask)&&(value=opts.onBeforeMask.call(inputmask,value,opts)||value),value=value.toString().split(""),checkVal(input,!0,!1,value),undoValue=getBuffer().join(""),(opts.clearMaskOnLostFocus||opts.clearIncomplete)&&input.inputmask._valueGet()===getBufferTemplate().join("")&&-1===getLastValidPosition()&&input.inputmask._valueSet("")}function mask(elem){function isElementTypeSupported(input,opts){function patchValueProperty(npt){var valueGet,valueSet;function patchValhook(type){if($.valHooks&&(void 0===$.valHooks[type]||!0!==$.valHooks[type].inputmaskpatch)){var valhookGet=$.valHooks[type]&&$.valHooks[type].get?$.valHooks[type].get:function(elem){return elem.value},valhookSet=$.valHooks[type]&&$.valHooks[type].set?$.valHooks[type].set:function(elem,value){return elem.value=value,elem};$.valHooks[type]={get:function get(elem){if(elem.inputmask){if(elem.inputmask.opts.autoUnmask)return elem.inputmask.unmaskedvalue();var result=valhookGet(elem);return-1!==getLastValidPosition(void 0,void 0,elem.inputmask.maskset.validPositions)||!0!==opts.nullable?result:""}return valhookGet(elem)},set:function set(elem,value){var result=valhookSet(elem,value);return elem.inputmask&&applyInputValue(elem,value),result},inputmaskpatch:!0}}}function getter(){return this.inputmask?this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():-1!==getLastValidPosition()||!0!==opts.nullable?(this.inputmask.shadowRoot||document.activeElement)===this&&opts.clearMaskOnLostFocus?(isRTL?clearOptionalTail(getBuffer().slice()).reverse():clearOptionalTail(getBuffer().slice())).join(""):valueGet.call(this):"":valueGet.call(this)}function setter(value){valueSet.call(this,value),this.inputmask&&applyInputValue(this,value)}function installNativeValueSetFallback(npt){EventRuler.on(npt,"mouseenter",function(){var input=this,value=this.inputmask._valueGet(!0);value!==(isRTL?getBuffer().reverse():getBuffer()).join("")&&applyInputValue(this,value)})}if(!npt.inputmask.__valueGet){if(!0!==opts.noValuePatching){if(Object.getOwnPropertyDescriptor){"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"===_typeof("test".__proto__)?function(object){return object.__proto__}:function(object){return object.constructor.prototype});var valueProperty=Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(npt),"value"):void 0;valueProperty&&valueProperty.get&&valueProperty.set?(valueGet=valueProperty.get,valueSet=valueProperty.set,Object.defineProperty(npt,"value",{get:getter,set:setter,configurable:!0})):"input"!==npt.tagName.toLowerCase()&&(valueGet=function valueGet(){return this.textContent},valueSet=function valueSet(value){this.textContent=value},Object.defineProperty(npt,"value",{get:getter,set:setter,configurable:!0}))}else document.__lookupGetter__&&npt.__lookupGetter__("value")&&(valueGet=npt.__lookupGetter__("value"),valueSet=npt.__lookupSetter__("value"),npt.__defineGetter__("value",getter),npt.__defineSetter__("value",setter));npt.inputmask.__valueGet=valueGet,npt.inputmask.__valueSet=valueSet}npt.inputmask._valueGet=function(overruleRTL){return isRTL&&!0!==overruleRTL?valueGet.call(this.el).split("").reverse().join(""):valueGet.call(this.el)},npt.inputmask._valueSet=function(value,overruleRTL){valueSet.call(this.el,null==value?"":!0!==overruleRTL&&isRTL?value.split("").reverse().join(""):value)},void 0===valueGet&&(valueGet=function valueGet(){return this.value},valueSet=function valueSet(value){this.value=value},patchValhook(npt.type),installNativeValueSetFallback(npt))}}"textarea"!==input.tagName.toLowerCase()&&opts.ignorables.push(keyCode.ENTER);var elementType=input.getAttribute("type"),isSupported="input"===input.tagName.toLowerCase()&&-1!==$.inArray(elementType,opts.supportsInputType)||input.isContentEditable||"textarea"===input.tagName.toLowerCase();if(!isSupported)if("input"===input.tagName.toLowerCase()){var el=document.createElement("input");el.setAttribute("type",elementType),isSupported="text"===el.type,el=null}else isSupported="partial";return!1!==isSupported?patchValueProperty(input):input.inputmask=void 0,isSupported}EventRuler.off(elem);var isSupported=isElementTypeSupported(elem,opts);if(!1!==isSupported){el=elem,$el=$(el),originalPlaceholder=el.placeholder,maxLength=void 0!==el?el.maxLength:void 0,-1===maxLength&&(maxLength=void 0),"inputMode"in el&&null===el.getAttribute("inputmode")&&(el.inputMode=opts.inputmode,el.setAttribute("inputmode",opts.inputmode)),!0===isSupported&&(opts.showMaskOnFocus=opts.showMaskOnFocus&&-1===["cc-number","cc-exp"].indexOf(el.autocomplete),iphone&&(opts.insertModeVisual=!1),EventRuler.on(el,"submit",EventHandlers.submitEvent),EventRuler.on(el,"reset",EventHandlers.resetEvent),EventRuler.on(el,"blur",EventHandlers.blurEvent),EventRuler.on(el,"focus",EventHandlers.focusEvent),EventRuler.on(el,"invalid",EventHandlers.invalidEvent),EventRuler.on(el,"click",EventHandlers.clickEvent),EventRuler.on(el,"mouseleave",EventHandlers.mouseleaveEvent),EventRuler.on(el,"mouseenter",EventHandlers.mouseenterEvent),EventRuler.on(el,"paste",EventHandlers.pasteEvent),EventRuler.on(el,"cut",EventHandlers.cutEvent),EventRuler.on(el,"complete",opts.oncomplete),EventRuler.on(el,"incomplete",opts.onincomplete),EventRuler.on(el,"cleared",opts.oncleared),mobile||!0===opts.inputEventOnly?el.removeAttribute("maxLength"):(EventRuler.on(el,"keydown",EventHandlers.keydownEvent),EventRuler.on(el,"keypress",EventHandlers.keypressEvent)),EventRuler.on(el,"input",EventHandlers.inputFallBackEvent),EventRuler.on(el,"compositionend",EventHandlers.compositionendEvent)),EventRuler.on(el,"setvalue",EventHandlers.setValueEvent),undoValue=getBufferTemplate().join("");var activeElement=(el.inputmask.shadowRoot||document).activeElement;if(""!==el.inputmask._valueGet(!0)||!1===opts.clearMaskOnLostFocus||activeElement===el){applyInputValue(el,el.inputmask._valueGet(!0),opts);var buffer=getBuffer().slice();!1===isComplete(buffer)&&opts.clearIncomplete&&resetMaskSet(),opts.clearMaskOnLostFocus&&activeElement!==el&&(-1===getLastValidPosition()?buffer=[]:clearOptionalTail(buffer)),(!1===opts.clearMaskOnLostFocus||opts.showMaskOnFocus&&activeElement===el||""!==el.inputmask._valueGet(!0))&&writeBuffer(el,buffer),activeElement===el&&caret(el,seekNext(getLastValidPosition()))}}}if(void 0!==actionObj)switch(actionObj.action){case"isComplete":return el=actionObj.el,isComplete(getBuffer());case"unmaskedvalue":return void 0!==el&&void 0===actionObj.value||(valueBuffer=actionObj.value,valueBuffer=($.isFunction(opts.onBeforeMask)&&opts.onBeforeMask.call(inputmask,valueBuffer,opts)||valueBuffer).split(""),checkVal.call(this,void 0,!1,!1,valueBuffer),$.isFunction(opts.onBeforeWrite)&&opts.onBeforeWrite.call(inputmask,void 0,getBuffer(),0,opts)),unmaskedvalue(el);case"mask":mask(el);break;case"format":return valueBuffer=($.isFunction(opts.onBeforeMask)&&opts.onBeforeMask.call(inputmask,actionObj.value,opts)||actionObj.value).split(""),checkVal.call(this,void 0,!0,!1,valueBuffer),actionObj.metadata?{value:isRTL?getBuffer().slice().reverse().join(""):getBuffer().join(""),metadata:maskScope.call(this,{action:"getmetadata"},maskset,opts)}:isRTL?getBuffer().slice().reverse().join(""):getBuffer().join("");case"isValid":actionObj.value?(valueBuffer=($.isFunction(opts.onBeforeMask)&&opts.onBeforeMask.call(inputmask,actionObj.value,opts)||actionObj.value).split(""),checkVal.call(this,void 0,!0,!1,valueBuffer)):actionObj.value=isRTL?getBuffer().slice().reverse().join(""):getBuffer().join("");for(var buffer=getBuffer(),rl=determineLastRequiredPosition(),lmib=buffer.length-1;rl<lmib&&!isMask(lmib);lmib--);return buffer.splice(rl,lmib+1-rl),isComplete(buffer)&&actionObj.value===(isRTL?getBuffer().slice().reverse().join(""):getBuffer().join(""));case"getemptymask":return getBufferTemplate().join("");case"remove":if(el&&el.inputmask){$.data(el,"_inputmask_opts",null),$el=$(el);var cv=opts.autoUnmask?unmaskedvalue(el):el.inputmask._valueGet(opts.autoUnmask),valueProperty;cv!==getBufferTemplate().join("")?el.inputmask._valueSet(cv,opts.autoUnmask):el.inputmask._valueSet(""),EventRuler.off(el),Object.getOwnPropertyDescriptor&&Object.getPrototypeOf?(valueProperty=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(el),"value"),valueProperty&&el.inputmask.__valueGet&&Object.defineProperty(el,"value",{get:el.inputmask.__valueGet,set:el.inputmask.__valueSet,configurable:!0})):document.__lookupGetter__&&el.__lookupGetter__("value")&&el.inputmask.__valueGet&&(el.__defineGetter__("value",el.inputmask.__valueGet),el.__defineSetter__("value",el.inputmask.__valueSet)),el.inputmask=void 0}return el;case"getmetadata":if($.isArray(maskset.metadata)){var maskTarget=getMaskTemplate(!0,0,!1).join("");return $.each(maskset.metadata,function(ndx,mtdt){if(mtdt.mask===maskTarget)return maskTarget=mtdt,!1}),maskTarget}return maskset.metadata}}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var Inputmask=__webpack_require__(1),$=Inputmask.dependencyLib,keyCode=__webpack_require__(0),formatCode={d:["[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",Date.prototype.getDate],dd:["0[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",function(){return pad(Date.prototype.getDate.call(this),2)}],ddd:[""],dddd:[""],m:["[1-9]|1[012]",Date.prototype.setMonth,"month",function(){return Date.prototype.getMonth.call(this)+1}],mm:["0[1-9]|1[012]",Date.prototype.setMonth,"month",function(){return pad(Date.prototype.getMonth.call(this)+1,2)}],mmm:[""],mmmm:[""],yy:["[0-9]{2}",Date.prototype.setFullYear,"year",function(){return pad(Date.prototype.getFullYear.call(this),2)}],yyyy:["[0-9]{4}",Date.prototype.setFullYear,"year",function(){return pad(Date.prototype.getFullYear.call(this),4)}],h:["[1-9]|1[0-2]",Date.prototype.setHours,"hours",Date.prototype.getHours],hh:["0[1-9]|1[0-2]",Date.prototype.setHours,"hours",function(){return pad(Date.prototype.getHours.call(this),2)}],hx:[function(x){return"[0-9]{".concat(x,"}")},Date.prototype.setHours,"hours",function(x){return Date.prototype.getHours}],H:["1?[0-9]|2[0-3]",Date.prototype.setHours,"hours",Date.prototype.getHours],HH:["0[0-9]|1[0-9]|2[0-3]",Date.prototype.setHours,"hours",function(){return pad(Date.prototype.getHours.call(this),2)}],Hx:[function(x){return"[0-9]{".concat(x,"}")},Date.prototype.setHours,"hours",function(x){return function(){return pad(Date.prototype.getHours.call(this),x)}}],M:["[1-5]?[0-9]",Date.prototype.setMinutes,"minutes",Date.prototype.getMinutes],MM:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setMinutes,"minutes",function(){return pad(Date.prototype.getMinutes.call(this),2)}],s:["[1-5]?[0-9]",Date.prototype.setSeconds,"seconds",Date.prototype.getSeconds],ss:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setSeconds,"seconds",function(){return pad(Date.prototype.getSeconds.call(this),2)}],l:["[0-9]{3}",Date.prototype.setMilliseconds,"milliseconds",function(){return pad(Date.prototype.getMilliseconds.call(this),3)}],L:["[0-9]{2}",Date.prototype.setMilliseconds,"milliseconds",function(){return pad(Date.prototype.getMilliseconds.call(this),2)}],t:["[ap]"],tt:["[ap]m"],T:["[AP]"],TT:["[AP]M"],Z:[""],o:[""],S:[""]},formatAlias={isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};function formatcode(match){var dynMatches=new RegExp("\\d+$").exec(match[0]);if(dynMatches&&void 0!==dynMatches[0]){var fcode=formatCode[match[0][0]+"x"].slice("");return fcode[0]=fcode[0](dynMatches[0]),fcode[3]=fcode[3](dynMatches[0]),fcode}if(formatCode[match[0]])return formatCode[match[0]]}function getTokenizer(opts){if(!opts.tokenizer){var tokens=[],dyntokens=[];for(var ndx in formatCode)if(/\.*x$/.test(ndx)){var dynToken=ndx[0]+"\\d+";-1===dyntokens.indexOf(dynToken)&&dyntokens.push(dynToken)}else-1===tokens.indexOf(ndx[0])&&tokens.push(ndx[0]);opts.tokenizer="("+(0<dyntokens.length?dyntokens.join("|")+"|":"")+tokens.join("+|")+")+?|.",opts.tokenizer=new RegExp(opts.tokenizer,"g")}return opts.tokenizer}function isValidDate(dateParts,currentResult){return(!isFinite(dateParts.rawday)||"29"==dateParts.day&&!isFinite(dateParts.rawyear)||new Date(dateParts.date.getFullYear(),isFinite(dateParts.rawmonth)?dateParts.month:dateParts.date.getMonth()+1,0).getDate()>=dateParts.day)&&currentResult}function isDateInRange(dateParts,opts){var result=!0;if(opts.min){if(dateParts.rawyear){var rawYear=dateParts.rawyear.replace(/[^0-9]/g,""),minYear=opts.min.year.substr(0,rawYear.length);result=minYear<=rawYear}dateParts.year===dateParts.rawyear&&opts.min.date.getTime()==opts.min.date.getTime()&&(result=opts.min.date.getTime()<=dateParts.date.getTime())}return result&&opts.max&&opts.max.date.getTime()==opts.max.date.getTime()&&(result=opts.max.date.getTime()>=dateParts.date.getTime()),result}function parse(format,dateObjValue,opts,raw){var mask="",match,fcode;for(getTokenizer(opts).lastIndex=0;match=getTokenizer(opts).exec(format);)if(void 0===dateObjValue)if(fcode=formatcode(match))mask+="("+fcode[0]+")";else switch(match[0]){case"[":mask+="(";break;case"]":mask+=")?";break;default:mask+=Inputmask.escapeRegex(match[0])}else if(fcode=formatcode(match))if(!0!==raw&&fcode[3]){var getFn=fcode[3];mask+=getFn.call(dateObjValue.date)}else fcode[2]?mask+=dateObjValue["raw"+fcode[2]]:mask+=match[0];else mask+=match[0];return mask}function pad(val,len){for(val=String(val),len=len||2;val.length<len;)val="0"+val;return val}function analyseMask(maskString,format,opts){var dateObj={date:new Date(1,0,1)},targetProp,mask=maskString,match,dateOperation;function extendProperty(value){var correctedValue=value.replace(/[^0-9]/g,"0");return correctedValue}function setValue(dateObj,value,opts){dateObj[targetProp]=extendProperty(value),dateObj["raw"+targetProp]=value,void 0!==dateOperation&&dateOperation.call(dateObj.date,"month"==targetProp?parseInt(dateObj[targetProp])-1:dateObj[targetProp])}if("string"==typeof mask){for(getTokenizer(opts).lastIndex=0;match=getTokenizer(opts).exec(format);){var value=mask.slice(0,match[0].length);formatCode.hasOwnProperty(match[0])&&(targetProp=formatCode[match[0]][2],dateOperation=formatCode[match[0]][1],setValue(dateObj,value,opts)),mask=mask.slice(value.length)}return dateObj}if(mask&&"object"===_typeof(mask)&&mask.hasOwnProperty("date"))return mask}function importDate(dateObj,opts){var match,date="";for(getTokenizer(opts).lastIndex=0;match=getTokenizer(opts).exec(opts.inputFormat);)"d"===match[0].charAt(0)?date+=pad(dateObj.getDate(),match[0].length):"m"===match[0].charAt(0)?date+=pad(dateObj.getMonth()+1,match[0].length):"yyyy"===match[0]?date+=dateObj.getFullYear().toString():"y"===match[0].charAt(0)&&(date+=pad(dateObj.getYear(),match[0].length));return date}function getTokenMatch(pos,opts){var calcPos=0,targetMatch,match,matchLength=0;for(getTokenizer(opts).lastIndex=0;match=getTokenizer(opts).exec(opts.inputFormat);){var dynMatches=new RegExp("\\d+$").exec(match[0]);if(matchLength=dynMatches?parseInt(dynMatches[0]):match[0].length,calcPos+=matchLength,pos<=calcPos){targetMatch=match,match=getTokenizer(opts).exec(opts.inputFormat);break}}return{targetMatchIndex:calcPos-matchLength,nextMatch:match,targetMatch:targetMatch}}Inputmask.extendAliases({datetime:{mask:function mask(opts){return opts.numericInput=!1,formatCode.S=opts.i18n.ordinalSuffix.join("|"),opts.inputFormat=formatAlias[opts.inputFormat]||opts.inputFormat,opts.displayFormat=formatAlias[opts.displayFormat]||opts.displayFormat||opts.inputFormat,opts.outputFormat=formatAlias[opts.outputFormat]||opts.outputFormat||opts.inputFormat,opts.placeholder=""!==opts.placeholder?opts.placeholder:opts.inputFormat.replace(/[[\]]/,""),opts.regex=parse(opts.inputFormat,void 0,opts),opts.min=analyseMask(opts.min,opts.inputFormat,opts),opts.max=analyseMask(opts.max,opts.inputFormat,opts),null},placeholder:"",inputFormat:"isoDateTime",displayFormat:void 0,outputFormat:void 0,min:null,max:null,skipOptionalPartCharacter:"",i18n:{dayNames:["Mon","Tue","Wed","Thu","Fri","Sat","Sun","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],ordinalSuffix:["st","nd","rd","th"]},preValidation:function preValidation(buffer,pos,c,isSelection,opts,maskset,caretPos,strict){if(strict)return!0;if(isNaN(c)&&buffer[pos]!==c){var tokenMatch=getTokenMatch(pos,opts);if(tokenMatch.nextMatch&&tokenMatch.nextMatch[0]===c&&1<tokenMatch.targetMatch[0].length){var validator=formatCode[tokenMatch.targetMatch[0]][0];if(new RegExp(validator).test("0"+buffer[pos-1]))return buffer[pos]=buffer[pos-1],buffer[pos-1]="0",{fuzzy:!0,buffer:buffer,refreshFromBuffer:{start:pos-1,end:pos+1},pos:pos+1}}}return!0},postValidation:function postValidation(buffer,pos,c,currentResult,opts,maskset,strict){if(strict)return!0;var tokenMatch,validator;if(!1===currentResult)return tokenMatch=getTokenMatch(pos+1,opts),tokenMatch.targetMatch&&tokenMatch.targetMatchIndex===pos&&1<tokenMatch.targetMatch[0].length&&void 0!==formatCode[tokenMatch.targetMatch[0]]&&(validator=formatCode[tokenMatch.targetMatch[0]][0],new RegExp(validator).test("0"+c))?{insert:[{pos:pos,c:"0"},{pos:pos+1,c:c}],pos:pos+1}:currentResult;if(currentResult.fuzzy&&(buffer=currentResult.buffer,pos=currentResult.pos),tokenMatch=getTokenMatch(pos,opts),tokenMatch.targetMatch&&tokenMatch.targetMatch[0]&&void 0!==formatCode[tokenMatch.targetMatch[0]]){validator=formatCode[tokenMatch.targetMatch[0]][0];var part=buffer.slice(tokenMatch.targetMatchIndex,tokenMatch.targetMatchIndex+tokenMatch.targetMatch[0].length);!1===new RegExp(validator).test(part.join(""))&&2===tokenMatch.targetMatch[0].length&&maskset.validPositions[tokenMatch.targetMatchIndex]&&maskset.validPositions[tokenMatch.targetMatchIndex+1]&&(maskset.validPositions[tokenMatch.targetMatchIndex+1].input="0")}var result=currentResult,dateParts=analyseMask(buffer.join(""),opts.inputFormat,opts);return result&&dateParts.date.getTime()==dateParts.date.getTime()&&(result=isValidDate(dateParts,result),result=result&&isDateInRange(dateParts,opts)),pos&&result&&currentResult.pos!==pos?{buffer:parse(opts.inputFormat,dateParts,opts).split(""),refreshFromBuffer:{start:pos,end:currentResult.pos}}:result},onKeyDown:function onKeyDown(e,buffer,caretPos,opts){var input=this;e.ctrlKey&&e.keyCode===keyCode.RIGHT&&(this.inputmask._valueSet(importDate(new Date,opts)),$(this).trigger("setvalue"))},onUnMask:function onUnMask(maskedValue,unmaskedValue,opts){return unmaskedValue?parse(opts.outputFormat,analyseMask(maskedValue,opts.inputFormat,opts),opts,!0):unmaskedValue},casing:function casing(elem,test,pos,validPositions){return 0==test.nativeDef.indexOf("[ap]")?elem.toLowerCase():0==test.nativeDef.indexOf("[AP]")?elem.toUpperCase():elem},onBeforeMask:function onBeforeMask(initialValue,opts){return"[object Date]"===Object.prototype.toString.call(initialValue)&&(initialValue=importDate(initialValue,opts)),initialValue},insertMode:!1,shiftPositions:!1,keepStatic:!1,inputmode:"numeric"}}),module.exports=Inputmask},function(module,exports,__webpack_require__){"use strict";var Inputmask=__webpack_require__(1),$=Inputmask.dependencyLib,keyCode=__webpack_require__(0);function autoEscape(txt,opts){for(var escapedTxt="",i=0;i<txt.length;i++)Inputmask.prototype.definitions[txt.charAt(i)]||opts.definitions[txt.charAt(i)]||opts.optionalmarker[0]===txt.charAt(i)||opts.optionalmarker[1]===txt.charAt(i)||opts.quantifiermarker[0]===txt.charAt(i)||opts.quantifiermarker[1]===txt.charAt(i)||opts.groupmarker[0]===txt.charAt(i)||opts.groupmarker[1]===txt.charAt(i)||opts.alternatormarker===txt.charAt(i)?escapedTxt+="\\"+txt.charAt(i):escapedTxt+=txt.charAt(i);return escapedTxt}function alignDigits(buffer,digits,opts,force){if(0<buffer.length&&0<digits&&(!opts.digitsOptional||force)){var radixPosition=$.inArray(opts.radixPoint,buffer);-1===radixPosition&&(buffer.push(opts.radixPoint),radixPosition=buffer.length-1);for(var i=1;i<=digits;i++)isFinite(buffer[radixPosition+i])||(buffer[radixPosition+i]="0")}return buffer}function findValidator(symbol,maskset){var posNdx=0;if("+"===symbol){for(posNdx in maskset.validPositions);posNdx=parseInt(posNdx)}for(var tstNdx in maskset.tests)if(tstNdx=parseInt(tstNdx),posNdx<=tstNdx)for(var ndx=0,ndxl=maskset.tests[tstNdx].length;ndx<ndxl;ndx++)if((void 0===maskset.validPositions[tstNdx]||"-"===symbol)&&maskset.tests[tstNdx][ndx].match.def===symbol)return tstNdx+(void 0!==maskset.validPositions[tstNdx]&&"-"!==symbol?1:0);return posNdx}function findValid(symbol,maskset){var ret=-1;return $.each(maskset.validPositions,function(ndx,tst){if(tst&&tst.match.def===symbol)return ret=parseInt(ndx),!1}),ret}function parseMinMaxOptions(opts){void 0===opts.parseMinMaxOptions&&(null!==opts.min&&(opts.min=opts.min.toString().replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),""),","===opts.radixPoint&&(opts.min=opts.min.replace(opts.radixPoint,".")),opts.min=isFinite(opts.min)?parseFloat(opts.min):NaN,isNaN(opts.min)&&(opts.min=Number.MIN_VALUE)),null!==opts.max&&(opts.max=opts.max.toString().replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),""),","===opts.radixPoint&&(opts.max=opts.max.replace(opts.radixPoint,".")),opts.max=isFinite(opts.max)?parseFloat(opts.max):NaN,isNaN(opts.max)&&(opts.max=Number.MAX_VALUE)),opts.parseMinMaxOptions="done")}function genMask(opts){opts.repeat=0,opts.groupSeparator===opts.radixPoint&&opts.digits&&"0"!==opts.digits&&("."===opts.radixPoint?opts.groupSeparator=",":","===opts.radixPoint?opts.groupSeparator=".":opts.groupSeparator="")," "===opts.groupSeparator&&(opts.skipOptionalPartCharacter=void 0),1<opts.placeholder.length&&(opts.placeholder=opts.placeholder.charAt(0)),"radixFocus"===opts.positionCaretOnClick&&""===opts.placeholder&&(opts.positionCaretOnClick="lvp");var decimalDef="0",radixPointDef=opts.radixPoint;!0===opts.numericInput&&void 0===opts.__financeInput?(decimalDef="1",opts.positionCaretOnClick="radixFocus"===opts.positionCaretOnClick?"lvp":opts.positionCaretOnClick,opts.digitsOptional=!1,isNaN(opts.digits)&&(opts.digits=2),opts._radixDance=!1,radixPointDef=","===opts.radixPoint?"?":"!",""!==opts.radixPoint&&void 0===opts.definitions[radixPointDef]&&(opts.definitions[radixPointDef]={},opts.definitions[radixPointDef].validator="["+opts.radixPoint+"]",opts.definitions[radixPointDef].placeholder=opts.radixPoint,opts.definitions[radixPointDef].static=!0,opts.definitions[radixPointDef].generated=!0)):(opts.__financeInput=!1,opts.numericInput=!0);var mask="[+]",altMask;if(mask+=autoEscape(opts.prefix,opts),""!==opts.groupSeparator?(void 0===opts.definitions[opts.groupSeparator]&&(opts.definitions[opts.groupSeparator]={},opts.definitions[opts.groupSeparator].validator="["+opts.groupSeparator+"]",opts.definitions[opts.groupSeparator].placeholder=opts.groupSeparator,opts.definitions[opts.groupSeparator].static=!0,opts.definitions[opts.groupSeparator].generated=!0),mask+=opts._mask(opts)):mask+="9{+}",void 0!==opts.digits&&0!==opts.digits){var dq=opts.digits.toString().split(",");isFinite(dq[0])&&dq[1]&&isFinite(dq[1])?mask+=radixPointDef+decimalDef+"{"+opts.digits+"}":(isNaN(opts.digits)||0<parseInt(opts.digits))&&(opts.digitsOptional?(altMask=mask+radixPointDef+decimalDef+"{0,"+opts.digits+"}",opts.keepStatic=!0):mask+=radixPointDef+decimalDef+"{"+opts.digits+"}")}return mask+=autoEscape(opts.suffix,opts),mask+="[-]",altMask&&(mask=[altMask+autoEscape(opts.suffix,opts)+"[-]",mask]),opts.greedy=!1,parseMinMaxOptions(opts),mask}function hanndleRadixDance(pos,c,radixPos,maskset,opts){return opts._radixDance&&opts.numericInput&&c!==opts.negationSymbol.back&&pos<=radixPos&&(0<radixPos||c==opts.radixPoint)&&(void 0===maskset.validPositions[pos-1]||maskset.validPositions[pos-1].input!==opts.negationSymbol.back)&&(pos-=1),pos}function decimalValidator(chrs,maskset,pos,strict,opts){var radixPos=maskset.buffer?maskset.buffer.indexOf(opts.radixPoint):-1,result=-1!==radixPos&&new RegExp("[0-9\uff11-\uff19]").test(chrs);return opts._radixDance&&result&&null==maskset.validPositions[radixPos]?{insert:{pos:radixPos===pos?radixPos+1:radixPos,c:opts.radixPoint},pos:pos}:result}function checkForLeadingZeroes(buffer,opts){var numberMatches=new RegExp("(^"+(""!==opts.negationSymbol.front?Inputmask.escapeRegex(opts.negationSymbol.front)+"?":"")+Inputmask.escapeRegex(opts.prefix)+")(.*)("+Inputmask.escapeRegex(opts.suffix)+(""!=opts.negationSymbol.back?Inputmask.escapeRegex(opts.negationSymbol.back)+"?":"")+"$)").exec(buffer.slice().reverse().join("")),number=numberMatches?numberMatches[2]:"",leadingzeroes=!1;return number&&(number=number.split(opts.radixPoint.charAt(0))[0],leadingzeroes=new RegExp("^[0"+opts.groupSeparator+"]*").exec(number)),!(!leadingzeroes||!(1<leadingzeroes[0].length||0<leadingzeroes[0].length&&leadingzeroes[0].length<number.length))&&leadingzeroes}Inputmask.extendAliases({numeric:{mask:genMask,_mask:function _mask(opts){return"("+opts.groupSeparator+"999){+|1}"},digits:"*",digitsOptional:!0,enforceDigitsOnBlur:!1,radixPoint:".",positionCaretOnClick:"radixFocus",_radixDance:!0,groupSeparator:"",allowMinus:!0,negationSymbol:{front:"-",back:""},prefix:"",suffix:"",min:null,max:null,step:1,unmaskAsNumber:!1,roundingFN:Math.round,inputmode:"numeric",shortcuts:{k:"000",m:"000000"},placeholder:"0",greedy:!1,rightAlign:!0,insertMode:!0,autoUnmask:!1,skipOptionalPartCharacter:"",definitions:{0:{validator:decimalValidator},1:{validator:decimalValidator,definitionSymbol:"9"},"+":{validator:function validator(chrs,maskset,pos,strict,opts){return opts.allowMinus&&("-"===chrs||chrs===opts.negationSymbol.front)}},"-":{validator:function validator(chrs,maskset,pos,strict,opts){return opts.allowMinus&&chrs===opts.negationSymbol.back}}},preValidation:function preValidation(buffer,pos,c,isSelection,opts,maskset,caretPos,strict){if(!1!==opts.__financeInput&&c===opts.radixPoint)return!1;var pattern;if(pattern=opts.shortcuts&&opts.shortcuts[c]){if(1<pattern.length)for(var inserts=[],i=0;i<pattern.length;i++)inserts.push({pos:pos+i,c:pattern[i],strict:!1});return{insert:inserts}}var radixPos=$.inArray(opts.radixPoint,buffer),initPos=pos;if(pos=hanndleRadixDance(pos,c,radixPos,maskset,opts),"-"===c||c===opts.negationSymbol.front){if(!0!==opts.allowMinus)return!1;var isNegative=!1,front=findValid("+",maskset),back=findValid("-",maskset);return-1!==front&&(isNegative=[front,back]),!1!==isNegative?{remove:isNegative,caret:initPos}:{insert:[{pos:findValidator("+",maskset),c:opts.negationSymbol.front,fromIsValid:!0},{pos:findValidator("-",maskset),c:opts.negationSymbol.back,fromIsValid:void 0}],caret:initPos+opts.negationSymbol.back.length}}if(strict)return!0;if(-1!==radixPos&&!0===opts._radixDance&&!1===isSelection&&c===opts.radixPoint&&void 0!==opts.digits&&(isNaN(opts.digits)||0<parseInt(opts.digits))&&radixPos!==pos)return{caret:opts._radixDance&&pos===radixPos-1?radixPos+1:radixPos};if(!1===opts.__financeInput)if(isSelection){if(opts.digitsOptional)return{rewritePosition:caretPos.end};if(!opts.digitsOptional){if(caretPos.begin>radixPos&&caretPos.end<=radixPos)return c===opts.radixPoint?{insert:{pos:radixPos+1,c:"0",fromIsValid:!0},rewritePosition:radixPos}:{rewritePosition:radixPos+1};if(caretPos.begin<radixPos)return{rewritePosition:caretPos.begin-1}}}else if(!opts.showMaskOnHover&&!opts.showMaskOnFocus&&!opts.digitsOptional&&0<opts.digits&&""===this.inputmask.__valueGet.call(this))return{rewritePosition:radixPos};return{rewritePosition:pos}},postValidation:function postValidation(buffer,pos,c,currentResult,opts,maskset,strict){if(!1===currentResult)return currentResult;if(strict)return!0;if(null!==opts.min||null!==opts.max){var unmasked=opts.onUnMask(buffer.slice().reverse().join(""),void 0,$.extend({},opts,{unmaskAsNumber:!0}));if(null!==opts.min&&unmasked<opts.min&&(unmasked.toString().length>=opts.min.toString().length||unmasked<0))return!1;if(null!==opts.max&&unmasked>opts.max)return!1}return currentResult},onUnMask:function onUnMask(maskedValue,unmaskedValue,opts){if(""===unmaskedValue&&!0===opts.nullable)return unmaskedValue;var processValue=maskedValue.replace(opts.prefix,"");return processValue=processValue.replace(opts.suffix,""),processValue=processValue.replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator),"g"),""),""!==opts.placeholder.charAt(0)&&(processValue=processValue.replace(new RegExp(opts.placeholder.charAt(0),"g"),"0")),opts.unmaskAsNumber?(""!==opts.radixPoint&&-1!==processValue.indexOf(opts.radixPoint)&&(processValue=processValue.replace(Inputmask.escapeRegex.call(this,opts.radixPoint),".")),processValue=processValue.replace(new RegExp("^"+Inputmask.escapeRegex(opts.negationSymbol.front)),"-"),processValue=processValue.replace(new RegExp(Inputmask.escapeRegex(opts.negationSymbol.back)+"$"),""),Number(processValue)):processValue},isComplete:function isComplete(buffer,opts){var maskedValue=(opts.numericInput?buffer.slice().reverse():buffer).join("");return maskedValue=maskedValue.replace(new RegExp("^"+Inputmask.escapeRegex(opts.negationSymbol.front)),"-"),maskedValue=maskedValue.replace(new RegExp(Inputmask.escapeRegex(opts.negationSymbol.back)+"$"),""),maskedValue=maskedValue.replace(opts.prefix,""),maskedValue=maskedValue.replace(opts.suffix,""),maskedValue=maskedValue.replace(new RegExp(Inputmask.escapeRegex(opts.groupSeparator)+"([0-9]{3})","g"),"$1"),","===opts.radixPoint&&(maskedValue=maskedValue.replace(Inputmask.escapeRegex(opts.radixPoint),".")),isFinite(maskedValue)},onBeforeMask:function onBeforeMask(initialValue,opts){var radixPoint=opts.radixPoint||",";isFinite(opts.digits)&&(opts.digits=parseInt(opts.digits)),"number"!=typeof initialValue&&"number"!==opts.inputType||""===radixPoint||(initialValue=initialValue.toString().replace(".",radixPoint));var valueParts=initialValue.split(radixPoint),integerPart=valueParts[0].replace(/[^\-0-9]/g,""),decimalPart=1<valueParts.length?valueParts[1].replace(/[^0-9]/g,""):"",forceDigits=1<valueParts.length;initialValue=integerPart+(""!==decimalPart?radixPoint+decimalPart:decimalPart);var digits=0;if(""!==radixPoint&&(digits=opts.digitsOptional?opts.digits<decimalPart.length?opts.digits:decimalPart.length:opts.digits,""!==decimalPart||!opts.digitsOptional)){var digitsFactor=Math.pow(10,digits||1);initialValue=initialValue.replace(Inputmask.escapeRegex(radixPoint),"."),isNaN(parseFloat(initialValue))||(initialValue=(opts.roundingFN(parseFloat(initialValue)*digitsFactor)/digitsFactor).toFixed(digits)),initialValue=initialValue.toString().replace(".",radixPoint)}if(0===opts.digits&&-1!==initialValue.indexOf(radixPoint)&&(initialValue=initialValue.substring(0,initialValue.indexOf(radixPoint))),null!==opts.min||null!==opts.max){var numberValue=initialValue.toString().replace(radixPoint,".");null!==opts.min&&numberValue<opts.min?initialValue=opts.min.toString().replace(".",radixPoint):null!==opts.max&&numberValue>opts.max&&(initialValue=opts.max.toString().replace(".",radixPoint))}return alignDigits(initialValue.toString().split(""),digits,opts,forceDigits).join("")},onBeforeWrite:function onBeforeWrite(e,buffer,caretPos,opts){function stripBuffer(buffer,stripRadix){if(!1!==opts.__financeInput||stripRadix){var position=$.inArray(opts.radixPoint,buffer);-1!==position&&buffer.splice(position,1)}if(""!==opts.groupSeparator)for(;-1!==(position=buffer.indexOf(opts.groupSeparator));)buffer.splice(position,1);return buffer}var result,leadingzeroes=checkForLeadingZeroes(buffer,opts);if(leadingzeroes){var buf=buffer.slice().reverse(),caretNdx=buf.join("").indexOf(leadingzeroes[0]);buf.splice(caretNdx,leadingzeroes[0].length);var newCaretPos=buf.length-caretNdx;stripBuffer(buf),result={refreshFromBuffer:!0,buffer:buf.reverse(),caret:caretPos<newCaretPos?caretPos:newCaretPos}}if(e)switch(e.type){case"blur":case"checkval":if(null!==opts.min){var unmasked=opts.onUnMask(buffer.slice().reverse().join(""),void 0,$.extend({},opts,{unmaskAsNumber:!0}));if(null!==opts.min&&unmasked<opts.min)return{refreshFromBuffer:!0,buffer:alignDigits(opts.min.toString().replace(".",opts.radixPoint).split(""),opts.digits,opts).reverse()}}if(buffer[buffer.length-1]===opts.negationSymbol.front){var nmbrMtchs=new RegExp("(^"+(""!=opts.negationSymbol.front?Inputmask.escapeRegex(opts.negationSymbol.front)+"?":"")+Inputmask.escapeRegex(opts.prefix)+")(.*)("+Inputmask.escapeRegex(opts.suffix)+(""!=opts.negationSymbol.back?Inputmask.escapeRegex(opts.negationSymbol.back)+"?":"")+"$)").exec(stripBuffer(buffer.slice(),!0).reverse().join("")),number=nmbrMtchs?nmbrMtchs[2]:"";0==number&&(result={refreshFromBuffer:!0,buffer:[0]})}else""!==opts.radixPoint&&buffer[0]===opts.radixPoint&&(result&&result.buffer?result.buffer.shift():(buffer.shift(),result={refreshFromBuffer:!0,buffer:stripBuffer(buffer)}));if(opts.enforceDigitsOnBlur){result=result||{};var bffr=result&&result.buffer||buffer.slice().reverse();result.refreshFromBuffer=!0,result.buffer=alignDigits(bffr,opts.digits,opts,!0).reverse()}}return result},onKeyDown:function onKeyDown(e,buffer,caretPos,opts){var $input=$(this),bffr;if(e.ctrlKey)switch(e.keyCode){case keyCode.UP:return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())+parseInt(opts.step)),$input.trigger("setvalue"),!1;case keyCode.DOWN:return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())-parseInt(opts.step)),$input.trigger("setvalue"),!1}if(!e.shiftKey&&(e.keyCode===keyCode.DELETE||e.keyCode===keyCode.BACKSPACE||e.keyCode===keyCode.BACKSPACE_SAFARI)&&caretPos.begin!==buffer.length){if(buffer[e.keyCode===keyCode.DELETE?caretPos.begin-1:caretPos.end]===opts.negationSymbol.front)return bffr=buffer.slice().reverse(),""!==opts.negationSymbol.front&&bffr.shift(),""!==opts.negationSymbol.back&&bffr.pop(),$input.trigger("setvalue",[bffr.join(""),caretPos.begin]),!1;if(!0===opts._radixDance){var radixPos=$.inArray(opts.radixPoint,buffer);if(opts.digitsOptional){if(0===radixPos)return bffr=buffer.slice().reverse(),bffr.pop(),$input.trigger("setvalue",[bffr.join(""),caretPos.begin>=bffr.length?bffr.length:caretPos.begin]),!1}else if(-1!==radixPos&&(caretPos.begin<radixPos||caretPos.end<radixPos||e.keyCode===keyCode.DELETE&&caretPos.begin===radixPos))return caretPos.begin!==caretPos.end||e.keyCode!==keyCode.BACKSPACE&&e.keyCode!==keyCode.BACKSPACE_SAFARI||caretPos.begin++,bffr=buffer.slice().reverse(),bffr.splice(bffr.length-caretPos.begin,caretPos.begin-caretPos.end+1),bffr=alignDigits(bffr,opts.digits,opts).join(""),$input.trigger("setvalue",[bffr,caretPos.begin>=bffr.length?radixPos+1:caretPos.begin]),!1}}}},currency:{prefix:"",groupSeparator:",",alias:"numeric",digits:2,digitsOptional:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:0},percentage:{alias:"numeric",min:0,max:100,suffix:" %",digits:0,allowMinus:!1},indianns:{alias:"numeric",_mask:function _mask(opts){return"("+opts.groupSeparator+"99){*|1}("+opts.groupSeparator+"999){1|1}"},groupSeparator:",",radixPoint:".",placeholder:"0",digits:2,digitsOptional:!1}}),module.exports=Inputmask},function(module,exports,__webpack_require__){"use strict";var _inputmask=_interopRequireDefault(__webpack_require__(1));function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!_isNativeFunction(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof _cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _construct(Parent,args,Class){return _construct=isNativeReflectConstruct()?Reflect.construct:function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a),instance=new Constructor;return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}if(document.head.createShadowRoot||document.head.attachShadow){var InputmaskElement=function(_HTMLElement){function InputmaskElement(){var _this;_classCallCheck(this,InputmaskElement),_this=_possibleConstructorReturn(this,_getPrototypeOf(InputmaskElement).call(this));var attributeNames=_this.getAttributeNames(),shadow=_this.attachShadow({mode:"closed"}),input=document.createElement("input");for(var attr in input.type="text",shadow.appendChild(input),attributeNames)Object.prototype.hasOwnProperty.call(attributeNames,attr)&&input.setAttribute("data-inputmask-"+attributeNames[attr],_this.getAttribute(attributeNames[attr]));return(new _inputmask.default).mask(input),input.inputmask.shadowRoot=shadow,_this}return _inherits(InputmaskElement,_HTMLElement),InputmaskElement}(_wrapNativeSuper(HTMLElement));customElements.define("input-mask",InputmaskElement)}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var $=__webpack_require__(3),Inputmask=__webpack_require__(1);void 0===$.fn.inputmask&&($.fn.inputmask=function(fn,options){var nptmask,input=this[0];if(void 0===options&&(options={}),"string"==typeof fn)switch(fn){case"unmaskedvalue":return input&&input.inputmask?input.inputmask.unmaskedvalue():$(input).val();case"remove":return this.each(function(){this.inputmask&&this.inputmask.remove()});case"getemptymask":return input&&input.inputmask?input.inputmask.getemptymask():"";case"hasMaskedValue":return!(!input||!input.inputmask)&&input.inputmask.hasMaskedValue();case"isComplete":return!input||!input.inputmask||input.inputmask.isComplete();case"getmetadata":return input&&input.inputmask?input.inputmask.getmetadata():void 0;case"setvalue":Inputmask.setValue(input,options);break;case"option":if("string"!=typeof options)return this.each(function(){if(void 0!==this.inputmask)return this.inputmask.option(options)});if(input&&void 0!==input.inputmask)return input.inputmask.option(options);break;default:return options.alias=fn,nptmask=new Inputmask(options),this.each(function(){nptmask.mask(this)})}else{if(Array.isArray(fn))return options.alias=fn,nptmask=new Inputmask(options),this.each(function(){nptmask.mask(this)});if("object"==_typeof(fn))return nptmask=new Inputmask(fn),void 0===fn.mask&&void 0===fn.alias?this.each(function(){if(void 0!==this.inputmask)return this.inputmask.option(fn);nptmask.mask(this)}):this.each(function(){nptmask.mask(this)});if(void 0===fn)return this.each(function(){nptmask=new Inputmask(options),nptmask.mask(this)})}})},function(module,exports,__webpack_require__){"use strict";var im=__webpack_require__(6),jQuery=__webpack_require__(3);im.dependencyLib===jQuery&&__webpack_require__(12),module.exports=im}],installedModules={},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=13);function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var modules,installedModules});
/* Copyright  2015-2018 Apple Inc. All rights reserved. */

!function(){function t(e,i,n){function o(a,r){if(!i[a]){if(!e[a]){var l="function"==typeof require&&require;if(!r&&l)return l(a,!0);if(s)return s(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var c=i[a]={exports:{}};e[a][0].call(c.exports,function(t){return o(e[a][1][t]||t)},c,c.exports,t,e,i,n)}return i[a].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}return t}()({1:[function(t,e,i){(function(i){var n=t("@maps/localizer"),o=t("@maps/js-utils"),s=t("@maps/dom-events"),a=t("@maps/loaders").XHRLoader,r=t("@maps/loaders").Priority,l=o.isIE10()?window.location.protocol:"https:",h={url:l+"//cdn.apple-mapkit.com/ma/bootstrap",apiVersion:"2",accessKeyExpirationBiasMS:3e4},c={OK:200,MULTIPLE_CHOICES:300,UNAUTHORIZED:401,TOO_MANY_REQUESTS:429},u=["l10n","languageSupport","mkjsVersion","messagePrefix","poi"],d=["language","countryCode","origin","madabaBaseUrl","authorizationCallback"],p={READY:0,PENDING:1,ERROR:2},m={Initialized:"Initialized",Refreshed:"Refreshed"},g={Unauthorized:"Unauthorized",TooManyRequests:"Too Many Requests"},_={Apple:"Apple",AutoNavi:"AutoNavi"},f={HTTP:c,ErrorStatus:g,TILE_SOURCES:{TOMTOM:"TomTom",AUTONAVI:"AutoNavi"},Events:{Changed:"bootstrap-load",Error:"bootstrap-error"},States:p,StorageKeys:null,state:p.PENDING,authorizationCallback:null,tileProvider:_.Apple,_countryCode:null,_madabaBaseUrl:null,_customMadabaUrl:!1,_madabaDomains:null,_accessKey:null,_accessToken:null,apiBaseUrl:null,apiBaseUrlOverride:null,types:{},_acceptLanguage:null,_optionsLanguage:null,_bootstrapRequestParams:null,_messagePrefix:"Bootstrap.init(): ",withParameters:function(t){return u.forEach(function(e){e in t&&(this["_"+e]=t[e])},this),this},init:function(t,e){if(o.required(t,e+"`options` object is required.",{checkNull:!0}).checkType(t,"object",e+"`options` object is invalid."),Object.keys(t).forEach(function(t){-1===d.indexOf(t)&&console.warn(e+"ignoring invalid option: `"+t+"`.")}),null===this.authorizationCallback){var i=t.authorizationCallback;o.required(i,e+"`options` is missing `authorizationCallback`.",{checkNull:!0}).checkType(i,"function",e+"`authorizationCallback` in `options` must be a function."),this.authorizationCallback=i,t.language&&(o.checkType(t.language,"string",e+"`language` in `options` must be a string."),this._optionsLanguage=t.language),o.isNode()&&t.origin&&(this.origin=t.origin),this.language=this._optionsLanguage,"countryCode"in t&&(this._countryCode=t.countryCode),t.madabaBaseUrl&&(this._madabaBaseUrl=t.madabaBaseUrl,this._customMadabaUrl=!0),this._loadFromServer()}else console.warn(e+"already initialized; ignoring.")},reloadFromServer:function(){this._clearLocalStorage(),this._loadFromServer()},get accessKey(){return this._accessKey},get accessToken(){return this._accessToken},accessKeyHasExpired:function(){this._clearLocalStorage(),this._loadFromServer(r.Highest)},get ready(){return this.state===p.READY},get language(){return this._language},set language(t){t!==this._language&&(t?o.checkType(t,"string","[MapKit] `language` must be a string or `null`."):t=this._acceptLanguage||this._getClientLanguage(),this._language=this._languageSupport.bestMatch(t,"en"),this._l10n.localeId=this._l10n.bestMatch(t,"en-US"))},get countryCode(){return this._countryCode},set countryCode(t){t!==this._countryCode&&(t&&(o.checkType(t,"string","[MapKit] `countryCode` must be a string or `null`."),t=t.toUpperCase()),this._countryCode=t,this._clearLocalStorage(),this._loadFromServer())},get isAutoNavi(){return this.tileProvider===_.AutoNavi},syrupRequestedFallback:function(){this._syrupRequestedFallback=!0,setTimeout(function(){var t=new s.Event(this.Events.Changed);t.status=m.Refreshed,this.dispatchEvent(t)}.bind(this),0)},get canRunCSR(){return this.ready&&(!this._disableCsr||!!this.previewLoCSR)&&!this._syrupRequestedFallback},get madabaDomains(){return this._customMadabaUrl||!this._madabaDomains&&this._madabaBaseUrl?[this._madabaBaseUrl]:this._madabaDomains?this._madabaDomains:null},appendAuthOptions:function(t,e){return this.origin&&(t.origin=this.origin),this.authorizationCallback&&(t.headers={Authorization:o.fillTemplate("Bearer {{token}}",{token:e||this.accessToken})}),t},appendServiceAuthOptions:function(t){return this.isAutoNavi?t:this.appendAuthOptions(t)},loaderWillStart:function(t){this.state=p.PENDING},loaderDidSucceed:function(t,e){this._requestDidLoad(e)},loaderDidFail:function(t,e){this._parseError(t._xhr)},_clearLocalStorage:function(){this.StorageKeys&&o.supportsLocalStorage&&Object.keys(this.StorageKeys).forEach(function(t){window.localStorage.removeItem(this.StorageKeys[t])},this)},_storeInLocalStorage:function(t,e,i){if(this.StorageKeys&&o.supportsLocalStorage)try{var n=Date.now()+1e3*i;window.localStorage.setItem(this.StorageKeys.BootstrapDataExpirationTimeMS,n),window.localStorage.setItem(this.StorageKeys.BootstrapRequestParams,JSON.stringify(e)),window.localStorage.setItem(this.StorageKeys.BootstrapData,t)}catch(t){return}},_isBootstrapRequestParamsDifferentFromLocalStorage:function(){if(this.StorageKeys&&o.supportsLocalStorage){var t=JSON.parse(window.localStorage.getItem(this.StorageKeys.BootstrapRequestParams));return null===t||null===this._bootstrapRequestParams||Object.keys(this._bootstrapRequestParams).some(function(e){return this._bootstrapRequestParams[e]!==t[e]},this)}},_loadFromLocalStorage:function(){if(this.StorageKeys&&o.supportsLocalStorage){var t=parseInt(window.localStorage.getItem(this.StorageKeys.BootstrapDataExpirationTimeMS),10)||0;if(!(t<=Date.now()||this._isBootstrapRequestParamsDifferentFromLocalStorage())){var e=JSON.parse(window.localStorage.getItem(this.StorageKeys.BootstrapData));if(e&&(!this.authorizationCallback||e.accessToken))return e.expiresInSeconds=Math.floor((t-Date.now())/1e3),this._processLoadedData(e),e}}},_loadFromServer:function(t){if(this._bootstrapRequestParams={apiVersion:h.apiVersion,countryCode:this._countryCode,mkjsVersion:this._mkjsVersion,poi:this._poi},!this._loadFromLocalStorage()){var e=h.url+"?"+o.toQueryString(this._bootstrapRequestParams),i={retry:!0,delay:0,priority:t};this.authorizationCallback(function(t){this.appendAuthOptions(i,t),this.accessToken&&(i.headers["X-Maps-Access-Token"]=o.fillTemplate("Bearer {{token}}",{token:this.accessToken})),new a(e,this,i).schedule()}.bind(this))}},_requestDidLoad:function(t){if(!this._parseError(t))try{var e=JSON.parse(t.responseText);this._storeInLocalStorage(t.responseText,this._bootstrapRequestParams,e.expiresInSeconds),this._processLoadedData(e)}catch(t){console.error(this._messagePrefix+"parse error.",t),this._loadFailed()}},_resetReloadTimer:function(t){clearTimeout(this._reloadTimerId),this._reloadTimerId=setTimeout(function(){delete this._reloadTimerId,this.accessKeyHasExpired()}.bind(this),t),o.isNode()&&this._reloadTimerId.unref()},_loadSucceeded:function(t){setTimeout(function(){this.state=p.READY;var e=new s.Event(this.Events.Changed);e.status=t?m.Refreshed:m.Initialized,this.dispatchEvent(e)}.bind(this),0)},_loadFailed:function(t){setTimeout(function(){this.state=p.ERROR;var e=new s.Event(this.Events.Error);e.status=t,this.dispatchEvent(e)}.bind(this),0)},_processLoadedData:function(t){var e=!!this._accessToken;try{this._parseData(t),this.expiresInSeconds&&this._resetReloadTimer(this._adjustedExpirationInSeconds(this.expiresInSeconds))}catch(t){return console.error(this._messagePrefix+"parse error.",t),void this._loadFailed()}this.language=this._optionsLanguage,this._loadSucceeded(e)},_parseData:function(t){t.apiBaseUrl||console.warn(this._messagePrefix+"apiBaseUrl not found. Using default."),this._countryCode="unknown"!==t.countryCode?t.countryCode:null,this.environment=t.environment,this.apiBaseUrl=this.apiBaseUrlOverride||t.apiBaseUrl,t.analytics&&(this.analytics=t.analytics),t.authInfo&&t.authInfo.team_id&&(this.teamId=t.authInfo.team_id),t.locationShiftUrl&&(this.locationShiftUrl=t.locationShiftUrl),this.expiresInSeconds=t.expiresInSeconds,this.ipLocation=t.ipLocation,this._customMadabaUrl||!t.madabaBaseUrl&&!t.madabaDomains||(this._madabaBaseUrl=t.madabaBaseUrl,this._madabaDomains=t.madabaDomains&&t.madabaDomains.length&&t.madabaDomains.map(function(t){return t.match(/^(https?:)?\/\//)?t:l+"//"+t})),this._disableCsr=!!t.disableCsr,t.accessKey&&(this._accessKey=t.accessKey),t.authInfo&&t.authInfo.access_token&&(this._accessToken=t.authInfo.access_token),this._acceptLanguage=this._parseAcceptLanguage(t.acceptLanguage),this.tileProvider=_.Apple;var e={};t.attributions&&t.attributions.forEach(function(t){e[t.attributionId]=t,this.tileGroup=t.attributionId},this);var i={};t.tileSources.forEach(function(t){var n=t.tileSource;i[n]={name:n,path:t.path,domains:t.domains,protocol:t.protocol||"https:",attribution:e[t.attributionId],minZoomLevel:t.minZoomLevel,maxZoomLevel:t.maxZoomLevel,supportedResolutions:t.supportedResolutions,showPrivacyLink:t.showPrivacyLink,showTermsOfUseLink:t.showTermsOfUseLink},t.needsLocationShift&&(this.tileProvider=_.AutoNavi),i[n].attribution&&i[n].attribution.global&&(i[n].attribution.name=i[n].attribution.global[0].name,i[n].attribution.url=i[n].attribution.global[0].url)}.bind(this)),this.types={};for(var n in t.modes){var o=t.modes[n].layers;this.types[n]={name:n,provider:this.tileProvider,lowResolutionTileSource:i[o[0].lowResTileSource],tileSources:o.map(function(t){return i[t.tileSource]})}}},_parseError:function(t){var e,i,n=t.status;return!(n>=c.OK&&n<c.MULTIPLE_CHOICES)&&(n===c.UNAUTHORIZED?(i=g.Unauthorized,e="initialization failed because the authorization token is invalid."):n===c.TOO_MANY_REQUESTS?(i=g.TooManyRequests,e="initialization failed because the daily usage limit has exceeded."):e="initialization failed because the server returned error "+n+" ("+t.statusText+").",console.error(this._messagePrefix+e),this._loadFailed(i),!0)},_getClientLanguage:function(){return o.isNode()?i.env.LANG?i.env.LANG.split(".")[0].replace("_","-"):"en-US":window.navigator.languages?window.navigator.languages[0]:window.navigator.language},_parseAcceptLanguage:function(t){var e=n.LanguageSupport.parseAcceptLanguage(t);return e?e[0].langTag.tag:null},_adjustedExpirationInSeconds:function(t){return 1e3*t-h.accessKeyExpirationBiasMS},_restore:function(){this._authorizationCallback=null,this._acceptLanguage=null,this._optionsLanguage=null,this.apiBaseUrl=null,this.apiBaseUrlOverride=null,this.state=p.PENDING,delete this._language,this._listeners={},clearTimeout(this._reloadTimerId),delete this._reloadTimerId},_debugInfo:function(){var t={};return["ready","state","_countryCode","tileProvider","apiBaseUrl","language","_acceptLanguage","_optionsLanguage","_getClientLanguage","types"].forEach(function(e){t[e]="function"==typeof this[e]?this[e]():this[e]},this),t}};s.EventTarget(f),o.isNode()&&(f.MapsWS=h),e.exports=f}).call(this,t("_process"))},{"@maps/dom-events":62,"@maps/js-utils":84,"@maps/loaders":85,"@maps/localizer":94,_process:110}],2:[function(t,e,i){function n(t){var e=g.clamp(t,1e-8-90,90-1e-8)*_;return.5+Math.log(Math.tan(f-e/2))/y}function o(t){var e=Math.pow(Math.E,2*Math.PI*(t-.5));return-2*(Math.atan(e)-Math.PI/4)/Math.PI*180}function s(t){return g.mod(t/360+.5,1)}function a(t){return 360*(g.mod(t,1)-.5)}function r(t){return g.mod(180+t,360)-180}function l(t,e){void 0===t&&(t=new c),void 0===e&&(e=new h),g.checkInstance(t,c,"[MapKit] `center` is not a Coordinate."),g.checkInstance(e,h,"[MapKit] `span` is not a CoordinateSpan."),this.center=new c(t.latitude,t.longitude),this.span=new h(e.latitudeDelta,e.longitudeDelta)}function h(t,e){void 0===t&&(t=0),void 0===e&&(e=0),g.checkType(t,"number","[MapKit] `latitudeDelta` is not a number."),g.checkType(e,"number","[MapKit] `longitudeDelta` is not a number."),this.latitudeDelta=Math.max(t,0),this.longitudeDelta=Math.max(e,0)}function c(t,e){void 0===t&&(t=0),void 0===e&&(e=0),g.checkType(t,"number","[MapKit] `latitude` is not a number."),g.checkType(e,"number","[MapKit] `longitude` is not a number."),this.latitude=t,this.longitude=e}function u(t,e,i,n){arguments.length<4&&(n=0,arguments.length<3&&(i=0,arguments.length<2&&(e=0,arguments.length<1&&(t=0)))),g.checkType(t,"number","[MapKit] Expected a number for `northLatitude` in BoundingRegion constructor but got `"+t+"` instead."),g.checkType(e,"number","[MapKit] Expected a number for `eastLongitude` in BoundingRegion constructor but got `"+e+"` instead."),g.checkType(i,"number","[MapKit] Expected a number for `southLatitude` in BoundingRegion constructor but got `"+i+"` instead."),g.checkType(n,"number","[MapKit] Expected a number for `westLongitude` in BoundingRegion constructor but got `"+n+"` instead."),this.northLatitude=t,this.eastLongitude=e,this.southLatitude=i,this.westLongitude=n}function d(t,e){arguments.length<2&&(e=0,arguments.length<1&&(t=0)),g.checkType(t,"number","[MapKit] Expected a number for `x` in MapPoint constructor but got `"+t+"` instead."),g.checkType(e,"number","[MapKit] Expected a number for `y` in MapPoint constructor but got `"+e+"` instead."),this.x=t,this.y=e}function p(t,e){arguments.length<2&&(e=0,arguments.length<1&&(t=0)),g.checkType(t,"number","[MapKit] Expected a number for `width` in MapSize constructor but got `"+t+"` instead."),g.checkType(e,"number","[MapKit] Expected a number for `height` in MapSize constructor but got `"+e+"` instead."),this.width=t,this.height=e}function m(t,e,i,n){arguments.length<4&&(n=0,arguments.length<3&&(i=0,arguments.length<2&&(e=0,arguments.length<1&&(t=0)))),g.checkType(t,"number","[MapKit] Expected a number for `x` in MapRect constructor but got `"+t+"` instead."),g.checkType(e,"number","[MapKit] Expected a number for `y` in MapRect constructor but got `"+e+"` instead."),g.checkType(i,"number","[MapKit] Expected a number for `width` in MapRect constructor but got `"+i+"` instead."),g.checkType(n,"number","[MapKit] Expected a number for `height` in MapRect constructor but got `"+n+"` instead."),this.origin=new d(t,e),this.size=new p(i,n)}var g=t("@maps/js-utils"),_=Math.PI/180,f=Math.PI/4,y=2*Math.PI,v=256,w=o(0),b=o(1);l.prototype={constructor:l,copy:function(){return new l(this.center.copy(),this.span.copy())},toString:function(){return["CoordinateRegion(","\tlatitude: "+this.center.latitude,"\tlongitude: "+this.center.longitude,"\tlatitudeDelta: "+this.span.latitudeDelta,"\tlongitudeDelta: "+this.span.longitudeDelta,")"].join("\n")},equals:function(t){return this.center.equals(t.center)&&this.span.equals(t.span)},toBoundingRegion:function(){var t=this.span.latitudeDelta/2,e=this.span.longitudeDelta/2;return new u(this.center.latitude+t,r(this.center.longitude+e),this.center.latitude-t,r(this.center.longitude-e))},toMapRect:function(){if(this.span.latitudeDelta<0)this.span.latitudeDelta=0;else{var t=n(Math.abs(this.center.latitude)),e=w-o(2*t);this.span.latitudeDelta>e&&(this.span.latitudeDelta=e)}var i=this.center.longitude-this.span.longitudeDelta/2,s=this.center.longitude+this.span.longitudeDelta/2,a=!1;i<-180&&(i+=360,a=!0);var r=!1;s>180&&(s-=360,r=!0);var l=new c(this.center.latitude,i),h=new c(this.center.latitude,s),u=l.toMapPoint(),p=h.toMapPoint();a&&(u.x-=1),r&&(p.x+=1);var g=new m;if(0===this.center.latitude){var _=new c(this.center.latitude+this.span.latitudeDelta/2,this.center.longitude),f=new c(this.center.latitude-this.span.latitudeDelta/2,this.center.longitude);return g.origin.x=u.x,g.size.width=p.x-g.origin.x,g.origin.y=_.toMapPoint().y,g.size.height=f.toMapPoint().y-g.origin.y,g}var y=this.copy();y.center.latitude=b+this.span.latitudeDelta/2;var v=10,C=new c,S=new d;_=new c,f=new c,_.longitude=this.center.longitude,f.longitude=this.center.longitude;var L=0;do{if(y.center.latitude>w&&y.center.latitude>this.center.latitude||y.center.latitude<b&&y.center.latitude<this.center.latitude)y.center.latitude-=v,v*=.1;else if(y.center.latitude>w||y.center.latitude<b)return new m(0,0,1,1);if(L>500)return new m(0,0,1,1);_.latitude=y.center.latitude+y.span.latitudeDelta/2,f.latitude=y.center.latitude-y.span.latitudeDelta/2,g.origin.x=u.x,g.size.width=p.x-g.origin.x,g.origin.y=_.toMapPoint().y,g.size.height=f.toMapPoint().y-g.origin.y,S.x=g.midX(),S.y=g.midY(),C=S.toCoordinate(),(v>0&&C.latitude>this.center.latitude||v<0&&C.latitude<this.center.latitude)&&(v*=-.1),y.center.latitude+=v,L++}while(Math.abs(C.latitude-this.center.latitude)>=1e-8);return g}},h.prototype={constructor:h,copy:function(){return new h(this.latitudeDelta,this.longitudeDelta)},equals:function(t){return Math.abs(this.latitudeDelta-t.latitudeDelta)<1e-8&&Math.abs(this.longitudeDelta-t.longitudeDelta)<1e-8},toString:function(){return["CoordinateSpan(","\tlatitudeDelta: "+this.latitudeDelta,"\tlongitudeDelta: "+this.longitudeDelta,")"].join("\n")}},c.prototype={constructor:c,copy:function(){return new c(this.latitude,this.longitude)},equals:function(t){return Math.abs(this.latitude-t.latitude)<1e-8&&Math.abs(this.longitude-t.longitude)<1e-8},toMapPoint:function(){return new d(s(this.longitude),n(this.latitude))},toUnwrappedMapPoint:function(){return new d(this.longitude/360+.5,n(this.latitude))},toString:function(){return["Coordinate(","latitude:"+this.latitude.toFixed(12),",longitude:"+this.longitude.toFixed(12),")"].join("")}},u.prototype={constructor:u,copy:function(){return new u(this.northLatitude,this.eastLongitude,this.southLatitude,this.westLongitude)},toString:function(){return["BoundingRegion(","\tnorthLatitude: "+this.northLatitude,"\teastLongitude: "+this.eastLongitude,"\tsouthLatitude: "+this.southLatitude,"\twestLongitude: "+this.westLongitude,")"].join("\n")},toCoordinateRegion:function(){var t=r(this.eastLongitude),e=r(this.westLongitude);t<e&&(t+=360);var i=this.northLatitude-this.southLatitude,n=t-e;return new l(new c(this.southLatitude+i/2,r(e+n/2)),new h(i,n))}},d.prototype={constructor:d,z:0,w:1,toString:function(){return"MapPoint("+this.x+", "+this.y+")"},copy:function(){return new d(this.x,this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},toCoordinate:function(){return new c(o(this.y),r(a(this.x)))}},p.prototype={constructor:p,toString:function(){return"MapSize("+this.width+", "+this.height+")"},copy:function(){return new p(this.width,this.height)},equals:function(t){return this.width===t.width&&this.height===t.height}},m.prototype={constructor:m,toString:function(){return"MapRect("+[this.origin.x.toFixed(12),this.origin.y.toFixed(12),this.size.width.toFixed(12),this.size.height.toFixed(12)].join(", ")+")"},copy:function(){return new m(this.origin.x,this.origin.y,this.size.width,this.size.height)},equals:function(t){return this.origin.equals(t.origin)&&this.size.equals(t.size)},minX:function(){return this.origin.x},minY:function(){return this.origin.y},midX:function(){return this.origin.x+this.size.width/2},midY:function(){return this.origin.y+this.size.height/2},maxX:function(){return this.origin.x+this.size.width},maxY:function(){return this.origin.y+this.size.height},scale:function(t,e){if(g.required(t,"[MapKit] Missing `scaleFactor` parameter in call to `MapRect.scale()`."),"number"!=typeof t||isNaN(t))throw new TypeError("[MapKit] The `scaleFactor` parameter passed to `MapRect.scale()` is not a number.");var i=this.size.width*t,n=this.size.height*t;return e?(g.checkInstance(e,d,"[MapKit] The `scaleCenter` parameter passed to `MapRect.scale()` is not a MapPoint."),new m(e.x-t*(e.x-this.origin.x),e.y-t*(e.y-this.origin.y),i,n)):new m(this.midX()-i/2,this.midY()-n/2,i,n)},toCoordinateRegion:function(){var t=this.origin.toCoordinate(),e=new d(this.maxX(),this.maxY()).toCoordinate(),i=Math.abs(e.latitude-t.latitude),n=e.longitude-t.longitude;return e.longitude<t.longitude&&(n+=360),new l(new d(this.midX(),this.midY()).toCoordinate(),new h(i,n))}},e.exports={tileSize:v,convertLatitudeToY:n,convertYToLatitude:o,convertLongitudeToX:s,convertXToLongitude:a,wrapLongitude:r,zoomLevelForMapRectInViewport:function(t,e,i){var n=e.width/(i*t.size.width),o=e.height/(i*t.size.height);return g.log2(Math.min(n,o))},mapUnitsPerMeterAtLatitude:function(t){var e=t*_,i=111132.92+-559.82*Math.cos(2*e)+1.175*Math.cos(4*e)+-.0023*Math.cos(6*e),o=n(t-.5),s=n(t+.5);return Math.abs(o-s)/i},pointsPerAxis:function(t){return Math.pow(2,t)*v},CoordinateRegion:l,CoordinateSpan:h,Coordinate:c,BoundingRegion:u,MapPoint:d,MapRect:m,MapSize:p}},{"@maps/js-utils":84}],3:[function(t,e,i){"use strict";e.exports={Feature:"Feature",FeatureCollection:"FeatureCollection",MultiPoint:"MultiPoint",MultiLineString:"MultiLineString",MultiPolygon:"MultiPolygon",Point:"Point",LineString:"LineString",Polygon:"Polygon",Position:"Position"}},{}],4:[function(t,e,i){"use strict";function n(t,e){return u.isPosition(t)?new c(t[1],t[0]):(l("[MapKit] Expected a GeoJSON Position type, instead got "+t,e),!1)}function o(t,e,i){switch(e){case d.MultiPoint:case d.LineString:return t.map(function(t){return n(t,i)});case d.Polygon:return t.map(function(t){return t.map(function(t){return n(t,i)})});default:return n(t,i)}}function s(t,e){var i,n=g.indexOf(t.type)>-1,a="GeometryCollection"===t.type;if(n||a){var r=n?t.coordinates:t.geometries;if(n)switch(t.type){case d.MultiPoint:i=e.itemForMultiPoint;break;case d.MultiLineString:i=e.itemForMultiLineString;break;case d.MultiPolygon:i=e.itemForMultiPolygon}a&&(i=e.itemForPoint);var c=new h(r.map(function(i){var o=i;return n&&(o={type:m[t.type],coordinates:i}),s(o,e)}),t),u=i?i(c,t):c;return u}var _=p[t.type];if(!_)return l("[MapKit] Expected a GeoJSON "+t.type+" type, instead got "+t,e),!1;var f,y,v=o(t.coordinates,t.type,e),w=new _(v,{data:t});switch(t.type){case d.Point:i=e.itemForPoint,f=v;break;case d.LineString:i=e.itemForLineString,y=e.styleForOverlay;break;case d.Polygon:i=e.itemForPolygon,y=e.styleForOverlay}return u=i?i(f||w,t):w,y&&(u.style=y(w,t)),u}function a(t,e){if(null!==!t.geometry){if(!u.isValid(t))return l("[MapKit] Expected a GeoJSON "+t.type+" type, instead got "+t,e),!1;var i=s(t.geometry,e,t);return i||(l("[MapKit] "+t+" is an unknown GeoJSON type",e),!1)}}function r(t,e){var i;switch(t.type){case d.Feature:return i=t.geometry&&a(t,e),e.itemForFeature&&(i=e.itemForFeature(i,t)),i;case d.FeatureCollection:return i=new h(t.features.map(function(t){return r(t,e)}).filter(function(t){return t}),t),e.itemForFeatureCollection&&(i=e.itemForFeatureCollection(i,t)),i;default:return s(t,e)}}function l(t,e){var i=new Error(t);"function"==typeof e.geoJSONDidError?e.geoJSONDidError(i,e._input):console.error(i)}var h=t("../../src/js/collections/item-collection"),c=t("../../lib/geo").Coordinate,u=t("./validate"),d=t("./constants"),p={Point:t("../../src/js/annotations/marker-annotation"),LineString:t("../../src/js/overlays/polyline-overlay"),Polygon:t("../../src/js/overlays/polygon-overlay")},m={MultiPoint:d.Point,MultiLineString:d.LineString,MultiPolygon:d.Polygon},g=[d.MultiPoint,d.MultiLineString,d.MultiPolygon];e.exports=function(t,e){if(e=e||{},e._input=t,!t instanceof Object||Array.isArray(t))return l("[MapKit] importGeoJSON expects an Object and was passed "+t,e),!1;var i=r(t,e);return!i instanceof h&&(i=new h(i,t)),e.geoJSONDidComplete&&(i=e.geoJSONDidComplete(i,t)),i}},{"../../lib/geo":2,"../../src/js/annotations/marker-annotation":146,"../../src/js/collections/item-collection":158,"../../src/js/overlays/polygon-overlay":199,"../../src/js/overlays/polyline-overlay":202,"./constants":3,"./validate":6}],5:[function(t,e,i){"use strict";var n={importGeoJSON:t("./import"),constants:t("./constants"),validate:t("./validate")};e.exports=n},{"./constants":3,"./import":4,"./validate":6}],6:[function(t,e,i){"use strict";function n(t,e){return!(!t instanceof Object)&&(t.type===r.Feature&&!!o(t.geometry,e))}function o(t,e){return!(!t instanceof Object)&&((!e||t.type===e)&&(!(!t.type instanceof String)&&(t.type===r.MultiLineString||t.type===r.MultiPolygon||t.type===r.MultiPoint?a(t.coordinates):t.coordinates instanceof Array)))}function s(t){if(!Array.isArray(t)||t.length<2)return!1;for(var e=0;e<2;++e)if("number"!=typeof t[e]||isNaN(t[e]))return!1;return!0}function a(t){for(var e in t)if(!t[e].coordinates instanceof Array)return!1;return!0}var r=t("./constants"),l={Feature:function(t){return n(t,t.geometry&&t.geometry.type)},FeatureCollection:function(t){if(!t instanceof Object||!t.features instanceof Array)return!1;for(var e in t.features){var i=t.features[e];if(i.geometry&&!n(i,i.geometry.type))return!1}return!0},Position:function(t){return s(t)},Point:function(t){return o(t,r.Point)},MultiPoint:function(t){return o(t,r.MultiPoint)},LineString:function(t){return o(t,r.LineString)},MultiLineString:function(t){return o(t,r.MultiLineString)},Polygon:function(t){return o(t,r.Polygon)},MultiPolygon:function(t){return o(t,r.MultiPolygon)},GeometryCollection:function(t){if(!t instanceof Object||!t.geometries instanceof Array)return!1;for(var e in t.features)if(!o(t,t.geometries[e].type))return!1;return!0}};e.exports={isValid:function(t){return!!l[t.type]&&l[t.type](t)},isPosition:function(t){return l.Position(t)}}},{"./constants":3}],7:[function(t,e,i){e.exports={BackgroundGridThemes:t("./src/background-grid-node").Themes,SceneGraphMapNode:t("./src/scene-graph-map-node"),SyrupMapNode:t("./src/syrup-map-node"),TileOverlay:t("./src/tile-overlay")}},{"./src/background-grid-node":8,"./src/scene-graph-map-node":22,"./src/syrup-map-node":25,"./src/tile-overlay":33}],8:[function(t,e,i){function n(){o.BaseNode.call(this),this._renderer=new(t("./render-background-grid"))(this),this._theme=n.Themes.Light}var o=t("../../scene-graph"),s=t("@maps/js-utils");n.Themes={Light:{fillColor:[249,245,237],lineColor:[152,151,147]},Dark:{fillColor:[64,64,64],lineColor:[214,214,214]}},n.prototype=s.inheritPrototype(o.BaseNode,n,{get size(){return this.parent.size},get zoom(){return this.parent.zoomLevel},get origin(){return this.parent.visibleMapRect.origin},get theme(){return this._theme},set theme(t){t!==this._theme&&(this._theme=t,this.needsDisplay=!0)},stringInfo:function(){return"BackgroundGridNode"}}),e.exports=n},{"../../scene-graph":47,"./render-background-grid":17,"@maps/js-utils":84}],9:[function(t,e,i){function n(t){this.node=t,this._configuration=null,this._debug=!1,this._language=null,this._showsPointsOfInterest=!0,this._showsDefaultTiles=!0,this._tileOverlays=[],this.camera=new h,this._element=document.createElement("div")}var o=t("@maps/js-utils"),s=t("../../scene-graph"),a=t("../../geo"),r=t("@maps/device-pixel-ratio"),l=t("@maps/js-utils"),h=t("./camera"),c=t("./camera-animation"),u=t("./initial-interaction-controller"),d=t("./zoom-controller"),p=t("./pan-controller"),m=t("./tile-data"),g=t("./tile-overlay"),_=t("./tile-overlay-internal"),f=1-Math.pow(2,-52);n.prototype={constructor:n,get element(){return this._element},deactivate:function(){this.delegate=null},destroy:function(t){!t&&this.cameraAnimation&&this.cameraAnimation.cancel(),this._tileOverlays.forEach(function(t){t.removeEventListener(_.RELOAD_EVENT,this)},this),this._initialInteractionController&&(this._initialInteractionController.destroy(),this._initialInteractionController=null),this._panController&&(this._panController.destroy(),this._panController=null),this._zoomController&&(this._zoomController.destroy(),this._zoomController=null),this._rotationController&&(this._rotationController.destroy(),this._rotationController=null),delete this.node.delegate},minZoomLevel:3,maxZoomLevel:20,staysCenteredDuringZoom:!1,get configuration(){return this._configuration},set configuration(t){this._configuration!==t&&this.updateConfiguration(t)},get language(){return this._language},set language(t){this._language!==t&&(this._language=t,this.refresh())},get showsPointsOfInterest(){return this._showsPointsOfInterest},set showsPointsOfInterest(t){this._showsPointsOfInterest!==t&&(this._showsPointsOfInterest=t,this.updateShowsPointsOfInterest())},get size(){return this.camera.viewportSize.copy()},set size(t){this.adjustForSize(t.copy())},adjustForSize:function(t){if(this._visibleMapRect&&this._visibleMapRect.size.width>0&&this._visibleMapRect.size.height>0&&t.width>0&&t.height>0){var e=this._visibleMapRect;delete this._visibleMapRect,this.setCameraAnimated(this.camera.withNewMapRect(e,this.snapsToIntegralZoomLevels,t))}else{var i=this.camera;this.setCameraAnimated(new h(i.center,i.zoom,t,i.rotation))}},get cameraIsPanning(){return!!this._panning},get pannable(){return!!this._panController},set pannable(t){!t&&this._panController?(this._panController.destroy(),delete this._panController):t&&!this._panController&&(this._initialInteractionController||(this._initialInteractionController=new u(this)),this._panController=new p(this))},get cameraIsZooming(){return!!this._zooming||!!this._suspendedZoom},get zoomable(){return!!this._zoomController},set zoomable(t){!t&&this._zoomController?(this._zoomController.destroy(),delete this._zoomController):t&&!this._zoomController&&(this._initialInteractionController||(this._initialInteractionController=new u(this)),this._zoomController=new d(this))},get cameraIsRotating(){return!!this._rotating},get visibleMapRect(){return this._visibleMapRect||this.camera.toMapRect()},set visibleMapRect(t){this.setVisibleMapRectAnimated(t)},setVisibleMapRectAnimated:function(t,e){if(this.camera.viewportSize.equals(s.Size.Zero))this._visibleMapRect=t.copy();else{var i=this.camera.withNewMapRect(t,this.snapsToIntegralZoomLevels);i.rotation=0,this.setCameraAnimated(i,!!e)}},setCenterAnimated:function(t,e){var i=t.toMapPoint();if(this._visibleMapRect)this._visibleMapRect=new a.MapRect(i.x-this._visibleMapRect.size.width/2,i.y-this._visibleMapRect.size.height/2,this._visibleMapRect.size.width,this._visibleMapRect.size.height);else{var n=this.camera.copy();n.center=i,this.setCameraAnimated(n,e)}},get transformCenter(){var t=this.node.delegate;return t&&"function"==typeof t.mapTransformCenter?t.mapTransformCenter(this.node):this.camera.center},get zoomLevel(){return this.camera.zoom},set zoomLevel(t){this.setZoomLevelAnimated(t)},setZoomLevelAnimated:function(t,e){if(this._suspendedZoom)return this._suspendedZoom.animated=this._suspendedZoom.animated||this._suspendedZoom.level!==t,void(this._suspendedZoom.level=t);if(!this.cameraAnimation||e){var i=this.zoomLevel,n=l.clamp(t,this.minZoomLevel,this.maxZoomLevel);if(i!==n){var o=this.transformCenter,s=this.camera;o.equals(s.center)?this.setCameraAnimated(new h(s.center,n,s.viewportSize,s.rotation),e):this.scaleCameraAroundMapPoint(Math.pow(2,n-i),this.transformCenter,e)}}else this.cameraAnimation.additiveZoom=t},adjustMapItemPoint:function(t){if(this.cameraIsZooming||this._pendingCameraDrawingReadiness)return t;if(!this._pointAdjustmentReference){var e=this.camera.zoom,i=this.visibleMapRect.origin,n=new m(this.camera),o=n.zoom,l=n.mapRect.origin,h=Math.pow(2,e-o),c=a.pointsPerAxis(o)*h;this._pointAdjustmentReference=new s.Point((l.x-i.x)*c,(l.y-i.y)*c)}return t.x=r.roundToDevicePixel(this._pointAdjustmentReference.x)+r.roundToDevicePixel(t.x-this._pointAdjustmentReference.x),t.y=r.roundToDevicePixel(this._pointAdjustmentReference.y)+r.roundToDevicePixel(t.y-this._pointAdjustmentReference.y),t},scaleCameraAroundMapPoint:function(t,e,i){var n=a.pointsPerAxis(this.minZoomLevel),o=this.camera.viewportSize.width/(this.visibleMapRect.size.width*n),s=this.camera.viewportSize.height/(this.visibleMapRect.size.height*n),r=Math.min(1/t,o,s),l=e.x+(e.x<1?1:-1),h=this.visibleMapRect;l>=h.origin.x&&l<=h.maxX()&&(e=new a.MapPoint(l,e.y));var c=this.camera.withNewMapRect(h.scale(r,e),!1);this.setCameraAnimated(c,i)},setCameraAnimated:function(t,e){if(0===t.viewportSize.width||0===t.viewportSize.height)return this._pendingCameraDrawingReadiness=!0,void(this.camera=t);var i=this.camera;t.viewportSize.equals(i.viewportSize)||this._updateMinAndMaxZoomLevels(t.viewportSize),t.zoom=l.clamp(t.zoom,this.minZoomLevel,this.maxZoomLevel);var n=t.toMapRect().size,o=n.width/2,s=n.height/2;t.center.x=l.mod(t.center.x-o,1)+o,t.center.y=l.clamp(t.center.y,s,f-s),!this._pendingCameraDrawingReadiness&&t.equals(i)||(delete this._pendingCameraDrawingReadiness,this._cameraWillChange(!!e),e&&!this.cameraAnimation?(this._cameraChangesMayHaveStarted(),this.cameraAnimation=new c(this,i,t),this.cameraAnimation.zooming&&this.cameraZoomWasSet(t)):(delete this._pointAdjustmentReference,this.camera=t,this.cameraZoomWasSet(),this._cameraDidChange()))},cameraWillStartZooming:function(t,e){var i=this.node.delegate,n=function(){return i&&"function"==typeof i.mapCanStartZooming&&!i.mapCanStartZooming(this.node)}.bind(this);return this.cameraAnimation?!(this._zoomController.active||this.cameraAnimation.zooming||n())&&(this._suspendedZoom={animated:!!t,offCenter:!!e,level:this.zoomLevel,completed:!1},!0):n()?(this._zoomController.interrupt(),!1):(this._cameraWillStartZooming(i,t,e),!0)},_cameraWillStartZooming:function(t,e,i){t&&"function"==typeof t.mapWillStartZooming&&t.mapWillStartZooming(this.node,e,i),this._cameraChangesMayHaveStarted(),this._zooming=!0,this.beforeCameraZoomChange(!0),this._cameraWillChange(!!e)},cameraDidStopZooming:function(){if(this.snapsToIntegralZoomLevels&&(this.camera.zoom=Math.round(this.camera.zoom)),this._suspendedZoom)this._suspendedZoom.complete=!0;else{delete this._zooming,this.beforeCameraZoomChange(!1),this._cameraDidChange(),this._cameraChangesMayHaveEnded();var t=this.node.delegate;t&&"function"==typeof t.mapDidStopZooming&&t.mapDidStopZooming(this.node)}},cameraWillStartRotating:function(){this._rotating=!0;var t=this.node.delegate;t&&"function"==typeof t.mapRotationWillStart&&t.mapRotationWillStart(this.node),this._cameraWillChange()},cameraDidStopRotating:function(){delete this._rotating;var t=this.node.delegate;t&&"function"==typeof t.mapRotationDidEnd&&t.mapRotationDidEnd(this.node),this._cameraDidChange()},migrateStateTo:function(t){t.backgroundGridTheme=this.node.backgroundGridTheme,t.configuration=this.node.configuration,t.language=this.node.language,t.pannable=this.node.pannable,t.showsPointsOfInterest=this.node.showsPointsOfInterest,t.showsDefaultTiles=this.node.showsDefaultTiles,t.tileOverlays=this.node.tileOverlays,t.size=this.node.size,t.staysCenteredDuringZoom=this.node.staysCenteredDuringZoom;var e=this.node.visibleMapRect;e.size.width>0&&e.size.height>0&&(t.visibleMapRect=e),t.zoomable=this.node.zoomable,t.isRotationEnabled=this.isRotationEnabled,t.rotation=this.rotation,t._impl.debug=this.debug,this.cameraAnimation&&(this.cameraAnimation.map=t._impl,t._impl.cameraAnimation=this.cameraAnimation,this.cameraChangesHaveStarted&&(t._impl.cameraChangesHaveStarted=!0))},createLabelRegion:o.noop,updatedLabelRegion:o.noop,unregisterLabelRegion:o.noop,get debug(){return this._debug},set debug(t){this._debug!==!!t&&(this._debug=!!t,this.refresh())},updateConfiguration:function(t){this._configuration=t,this._updateMinAndMaxZoomLevels(this.camera.viewportSize),this.setCameraAnimated(this.camera),this.refresh()},updateShowsPointsOfInterest:function(){this.refresh()},refresh:function(){},beforeCameraZoomChange:function(){},cameraZoomWasSet:function(){},get showsDefaultTiles(){return this._showsDefaultTiles},set showsDefaultTiles(t){this._showsDefaultTiles!==t&&(this._showsDefaultTiles=t,this._tileOverlaysDidChange())},get tileOverlays(){return this._tileOverlays},set tileOverlays(t){if(0!==this._tileOverlays.length||0!==t.length){var e="[MapKit] Map.tileOverlays should be an array, got `"+t+"` instead.";l.checkArray(t,e),t.forEach(function(t){var e="[MapKit] Map.tileOverlays can only contain TileOverlays, but got `"+t+"` instead.";l.checkInstance(t,g,e)}),this._tileOverlays.forEach(function(t){t.removeEventListener(_.RELOAD_EVENT,this)},this),this._tileOverlays=t,this._tileOverlays.forEach(function(t){t.addEventListener(_.RELOAD_EVENT,this)},this),this._tileOverlaysDidChange()}},addTileOverlay:function(t){var e="[MapKit] Map.addTileOverlay expected a TileOverlay, but got `"+t+"` instead.";return l.checkInstance(t,g,e),this.addTileOverlays([t]),t},addTileOverlays:function(t){var e="[MapKit] Map.addTileOverlays expected an array, but got `"+t+"` instead.";return l.checkArray(t,e),t.forEach(function(t){var e="[MapKit] Map.addTileOverlays expected only TileOverlays, but got `"+t+"` instead.";l.checkInstance(t,g,e),"number"==typeof t.minimumZ&&t.minimumZ<this.minZoomLevel&&console.warn("[MapKit] This TileOverlay has a minimumZ of "+t.minimumZ+"but the map won't go as low.")},this),this.tileOverlays=this.tileOverlays.concat(t),t},removeTileOverlay:function(t){var e="[MapKit] Map.removeTileOverlay expected a TileOverlay, but got `"+t+"` instead.";return l.checkInstance(t,g,e),this.tileOverlays=this.tileOverlays.filter(function(e){return e!==t}),t},removeTileOverlays:function(t){var e="[MapKit] Map.removeTileOverlays expected an array, but got `"+t+"` instead.";return l.checkArray(t,e),t.forEach(function(t){var e="[MapKit] Map.removeTileOverlays expected only TileOverlays, but got `"+t+"` instead.";l.checkInstance(t,g,e),this.removeTileOverlay(t)},this),t},handleEvent:function(){},cameraWillStartPanning:function(){var t=this.node.delegate;this.cameraAnimation||t&&"function"==typeof t.mapCanStartPanning&&!t.mapCanStartPanning(this.node)?this._panController.interrupt():(t&&"function"==typeof t.mapWillStartPanning&&t.mapWillStartPanning(this.node),this.refresh(),this._cameraChangesMayHaveStarted(),this._panning=!0,this._cameraWillChange())},cameraWillStopPanning:function(){var t=this.node.delegate;t&&"function"==typeof t.mapWillStopPanning&&t.mapWillStopPanning(this.node)},cameraDidStopPanning:function(){delete this._panning,this._cameraDidChange(),this._cameraChangesMayHaveEnded();var t=this.node.delegate;t&&"function"==typeof t.mapDidStopPanning&&t.mapDidStopPanning(this.node)},cameraAnimationDidProgress:function(t){this.setCameraAnimated(t)},cameraAnimationDidEnd:function(){var t=!1;if(this.cameraAnimation.zooming&&!this.cameraAnimation.zoomIsAdditive&&(this.cameraDidStopZooming(),t=!0),this.cameraAnimation.rotating&&(this.cameraDidStopRotating(),t=!0),t||this._cameraDidChange(),delete this.cameraAnimation,this._cameraChangesMayHaveEnded(),this._suspendedZoom){var e=this._suspendedZoom;delete this._suspendedZoom,this._cameraWillStartZooming(this.node.delegate,e.animated),e.complete&&(this.setZoomLevelAnimated(e.level,e.animated),e.animated||this.cameraDidStopZooming())}},interactionDidStart:function(){this._panController&&this._panController.stopDecelerating(),this._zoomController&&this._zoomController.stopDecelerating(),this._rotationController&&this._rotationController.stopDecelerating()},beganRecognizingRotation:function(){this._zoomController&&(this._zoomController._singleTapWithTwoFingersRecognizer.enabled=!1)},finishedRecognizingRotation:function(){this._zoomController&&(this._zoomController._singleTapWithTwoFingersRecognizer.enabled=!0)},tileGridDidFinishRendering:function(){var t=this.node.delegate;t&&"function"==typeof t.mapDidFinishRendering&&t.mapDidFinishRendering(this.node)},updateMinAndMaxZoomLevelsWhenConfigurationChanges:function(){this.minZoomLevel=0,this.maxZoomLevel=Number.MAX_VALUE,this._configuration.tileSources.forEach(function(t){this.minZoomLevel=Math.max(this.minZoomLevel,t.minZoomLevel),this.maxZoomLevel=Math.min(this.maxZoomLevel,t.maxZoomLevel)},this)},_updateMinAndMaxZoomLevels:function(t){if(t.width<=0||t.height<=0)return!1;this._configuration&&this.updateMinAndMaxZoomLevelsWhenConfigurationChanges(),this.minZoomLevel=Math.max(this.minZoomLevel,this.minZoomLevelForViewportSize(t,a.tileSize)),this.snapsToIntegralZoomLevels&&(this.minZoomLevel=Math.ceil(this.minZoomLevel)),this.adjustForSize(this.size)},_cameraChangesMayHaveStarted:function(t){if(!(this.cameraChangesHaveStarted||this._panning||this._zooming||this.cameraAnimation)){this.cameraChangesHaveStarted=!0;var e=this.node.delegate;e&&"function"==typeof e.mapCameraChangesWillStart&&e.mapCameraChangesWillStart(this.node,t)}},_cameraWillChange:function(t){this._cameraChangesMayHaveStarted(),this._cameraWillChangeAnimated=!!t;var e=this.node.delegate;e&&"function"==typeof e.mapCameraWillChange&&e.mapCameraWillChange(this.node,!!t)},_cameraDidChange:function(){var t=this.node.delegate;t&&"function"==typeof t.mapCameraDidChange&&t.mapCameraDidChange(this.node,!!this._cameraWillChangeAnimated),delete this._cameraWillChangeAnimated,this._cameraChangesMayHaveEnded()},_cameraChangesMayHaveEnded:function(t){if(this.cameraChangesHaveStarted&&!this._panning&&!this._zooming&&!this.cameraAnimation){delete this.cameraChangesHaveStarted;var e=this.node.delegate;return e&&"function"==typeof e.mapCameraChangesDidEnd&&e.mapCameraChangesDidEnd(this.node),!0}}},e.exports=n},{"../../geo":2,"../../scene-graph":47,"./camera":12,"./camera-animation":11,"./initial-interaction-controller":15,"./pan-controller":16,"./tile-data":26,"./tile-overlay":33,"./tile-overlay-internal":32,"./zoom-controller":36,"@maps/device-pixel-ratio":61,"@maps/js-utils":84}],10:[function(t,e,i){function n(){o.GroupNode.call(this)}var o=t("../../scene-graph"),s=t("@maps/js-utils");n.prototype=s.inheritPrototype(o.GroupNode,n,{delegate:null,deactivate:function(){this._impl.deactivate()},destroy:function(t){this._impl.destroy(t)},get element(){return this._impl.element},get camera(){return this._impl.camera},get minZoomLevel(){return this._impl.minZoomLevel},get maxZoomLevel(){return this._impl.maxZoomLevel},get staysCenteredDuringZoom(){return this._impl.staysCenteredDuringZoom},set staysCenteredDuringZoom(t){this._impl.staysCenteredDuringZoom=t},get configuration(){return this._impl.configuration},set configuration(t){this._impl.configuration=t},get language(){return this._impl.language},set language(t){this._impl.language=t},get showsPointsOfInterest(){return this._impl.showsPointsOfInterest},set showsPointsOfInterest(t){this._impl.showsPointsOfInterest=t},get backgroundGridTheme(){return this._impl.backgroundGridTheme},set backgroundGridTheme(t){this._impl.backgroundGridTheme=t},get size(){return this._impl.size},set size(t){this._impl.size=t},get rotation(){return this._impl.rotation},set rotation(t){this._impl.rotation=t},get isRotationEnabled(){return this._impl.isRotationEnabled},set isRotationEnabled(t){this._impl.isRotationEnabled=t},get cameraIsPanning(){return this._impl.cameraIsPanning},get pannable(){return this._impl.pannable},set pannable(t){this._impl.pannable=t},get cameraIsZooming(){return this._impl.cameraIsZooming},get zoomable(){return this._impl.zoomable},set zoomable(t){this._impl.zoomable=t},get zoomLevel(){return this._impl.zoomLevel},set zoomLevel(t){this._impl.setZoomLevelAnimated(t)},setZoomLevelAnimated:function(t,e){this._impl.setZoomLevelAnimated(t,e)},get visibleMapRect(){return this._impl.visibleMapRect},set visibleMapRect(t){return this._impl.setVisibleMapRectAnimated(t)},setVisibleMapRectAnimated:function(t,e){this._impl.setVisibleMapRectAnimated(t,e)},setCenterAnimated:function(t,e){this._impl.setCenterAnimated(t,e)},get showsDefaultTiles(){return this._impl.showsDefaultTiles},set showsDefaultTiles(t){this._impl.showsDefaultTiles=t},get tileOverlays(){return this._impl.tileOverlays},set tileOverlays(t){this._impl.tileOverlays=t},addTileOverlay:function(t){return this._impl.addTileOverlay(t)},addTileOverlays:function(t){return this._impl.addTileOverlays(t)},removeTileOverlay:function(t){return this._impl.removeTileOverlay(t)},removeTileOverlays:function(t){return this._impl.removeTileOverlays(t)},adjustMapItemPoint:function(t){return this._impl.adjustMapItemPoint(t)},cameraWillStartZooming:function(t){return this._impl.cameraWillStartZooming(t)},cameraDidStopZooming:function(){this._impl.cameraDidStopZooming()},get fullyRendered(){return this._impl.fullyRendered},devicePixelRatioDidChange:function(){return this._impl.devicePixelRatioDidChange()},stringInfo:function(){return this._impl.stringInfo()},get snapsToIntegralZoomLevels(){return this._impl.snapsToIntegralZoomLevels},migrateStateTo:function(t){return this._impl.migrateStateTo(t)},needsReplacing:function(t){return this._impl.needsReplacing(t)},createLabelRegion:function(){return this._impl.createLabelRegion()},updatedLabelRegion:function(){this._impl.updatedLabelRegion()},unregisterLabelRegion:function(t){this._impl.unregisterLabelRegion(t)},setCameraAnimated:function(t,e){this._impl.setCameraAnimated(t,e)}}),e.exports=n},{"../../scene-graph":47,"@maps/js-utils":84}],11:[function(t,e,i){function n(t,e,i){this.map=t,this._startCamera=e,this._endCamera=i,this._duration=a,t.snapsToIntegralZoomLevels&&(i.zoom=Math.round(i.zoom)),this._updateAnimationRects(),this._startTime=Date.now(),this._schedule()}var o=t("../../geo"),s=t("@maps/scheduler"),a=250;n.prototype={constructor:n,cancel:function(){this._canceled=!0},get zooming(){return this._startCamera.zoom!==this._endCamera.zoom},set additiveZoom(t){this._zoomIsAdditive=!0,this._endCamera.zoom=t,this._updateAnimationRects()},get zoomIsAdditive(){return this._zoomIsAdditive},get rotating(){return this._startCamera.rotation!==this._endCamera.rotation},adjustRotation:function(t,e){this._startCamera.rotateAroundCenter(t,e),this._endCamera.rotateAroundCenter(t,e),this._updateAnimationRects()},performScheduledUpdate:function(){this._canceled||this._animationDidProgress(Math.min((Date.now()-this._startTime)/this._duration,1))},_zoomIsAdditive:!1,_updateAnimationRects:function(){this._startRect=this._startCamera.toMapRect(),this._animatedEndRect=this._endCamera.toMapRect();var t=this._startCamera.center.x-this._endCamera.center.x;Math.abs(t)>.5&&(t<0?this._startRect.origin.x+=1:this._animatedEndRect.origin.x+=1)},_schedule:function(){s.scheduleOnNextFrame(this)},_animationDidProgress:function(t){if(1===t)return this.map.snapsToIntegralZoomLevels&&(this._endCamera.zoom=Math.round(this._endCamera.zoom)),this.map.cameraAnimationDidProgress(this._endCamera),void this.map.cameraAnimationDidEnd();var e=this._startRect,i=this._animatedEndRect,n=e.origin.x,s=e.origin.y,a=e.size.width,r=e.size.height,l=i.origin.x-e.origin.x,h=i.origin.y-e.origin.y,c=i.size.width-e.size.width,u=i.size.height-e.size.height,d=this._endCamera.rotation-this._startCamera.rotation;Math.abs(d)>180&&(d=this._endCamera.rotation+360-this._startCamera.rotation);var p=new o.MapRect(n+l*t,s+h*t,a+c*t,r+u*t),m=this._startCamera.withNewMapRect(p);this.map.cameraAnimationDidProgress(m),this.map.rotation=this._startCamera.rotation+d*t,this._schedule()}},e.exports=n},{"../../geo":2,"@maps/scheduler":106}],12:[function(t,e,i){function n(t,e,i,n){this.center=t||new o.MapPoint(.5,.5),this.zoom=e||3,this.viewportSize=i||new s,this.rotation=n||0}var o=t("../../geo"),s=t("@maps/geometry/size"),a=t("@maps/js-utils"),r=t("@maps/geometry/point"),l=t("@maps/css-matrix");n.prototype={constructor:n,get zoom(){return this._zoom},set zoom(t){this._zoom=t||3,this._pointsPerAxis=o.pointsPerAxis(this._zoom)},get worldSize(){return this._pointsPerAxis},get rotation(){return this._rotation},set rotation(t){var e=a.mod(t,360);this._rotation=e},minX:function(){var t=this.viewportSize.width/this._pointsPerAxis;return this.center.x-t/2},minY:function(){var t=this.viewportSize.height/this._pointsPerAxis;return this.center.y-t/2},maxX:function(){var t=this.viewportSize.width/this._pointsPerAxis;return this.center.x+t/2},maxY:function(){var t=this.viewportSize.height/this._pointsPerAxis;return this.center.y+t/2},equals:function(t){return this.zoom===t.zoom&&this.center.equals(t.center)&&this.viewportSize.equals(t.viewportSize)&&this.rotation===t.rotation},copy:function(){return new n(this.center,this.zoom,this.viewportSize,this.rotation)},toString:function(){return"Camera("+["center: ["+this.center.x+", "+this.center.y+"]","zoom: "+this.zoom,"viewportSize: "+this.viewportSize.toString(),"rotation: "+this.rotation].join(", ")+")"},toMapRect:function(){var t=this.viewportSize.width/this._pointsPerAxis,e=this.viewportSize.height/this._pointsPerAxis;return new o.MapRect(this.center.x-t/2,this.center.y-e/2,t,e)},toRenderingMapRect:function(){var t=[new r(this.minX(),this.minY()),new r(this.maxX(),this.minY()),new r(this.maxX(),this.maxY()),new r(this.minX(),this.maxY())];if(0!==this.rotation){var e=(new l).rotate(this.rotation);t=t.map(function(t){return e.transformPoint(t)})}for(var i=t[0].x,n=t[0].y,s=t[0].x,a=t[0].y,h=1;h<t.length;++h){var c=t[h];c.x<i&&(i=c.x),c.x>s&&(s=c.x),c.y<n&&(n=c.y),c.y>a&&(a=c.y)}var u=s-i,d=a-n;return new o.MapRect(this.center.x-u/2,this.center.y-d/2,u,d)},translate:function(t){return 0!==this.rotation&&(t=(new l).rotate(-this.rotation).transformPoint(t)),new n(new o.MapPoint(a.mod(this.center.x-t.x/this._pointsPerAxis,1),a.mod(this.center.y-t.y/this._pointsPerAxis,1)),this.zoom,this.viewportSize,this.rotation)},transformMapPoint:function(t){var e=this.viewportSize.width,i=this.viewportSize.height,n=this.toScreenSpace(t);return(new l).translate(e/2,i/2).rotate(this.rotation).translate(e/-2,i/-2).transformPoint(n)},transformGestureCenter:function(t){if(0===this.rotation)return t;var e=this.viewportSize.width,i=this.viewportSize.height;return(new l).translate(e/2,i/2).rotate(-this.rotation).translate(-e/2,-i/2).transformPoint(t)},toScreenSpace:function(t){var e=this._pointsPerAxis;return(new l).translate(-this.minX()*e,-this.minY()*e).scale(e).transformPoint(t)},rotateAroundCenter:function(t,e){var i=(new l).translate(t.x,t.y).rotate(-e).translate(-t.x,-t.y).transformPoint(new r(this.center.x,this.center.y));this.center=new o.MapPoint(i.x,i.y),this.rotation+=e},withNewMapRect:function(t,e,i){i=i||this.viewportSize;var s=o.zoomLevelForMapRectInViewport(t,i,o.tileSize);return new n(new o.MapPoint(t.midX(),t.midY()),e?Math.floor(s):s,i,this.rotation)}},e.exports=n},{"../../geo":2,"@maps/css-matrix":58,"@maps/geometry/point":69,"@maps/geometry/size":71,"@maps/js-utils":84}],13:[function(t,e,i){function n(t){o.BaseNode.call(this),this._tile=t,this._renderer=new a(this)}var o=t("../../scene-graph"),s=t("@maps/js-utils"),a=t("./render-debug");n.prototype=s.inheritPrototype(o.BaseNode,n,{get tile(){return this._tile},stringInfo:function(){return"DebugNode<x:"+this.tile.x+",y:"+this.tile.y+",z:"+this.tile.z+">"}}),e.exports=n},{"../../scene-graph":47,"./render-debug":18,"@maps/js-utils":84}],14:[function(t,e,i){function n(t){this._map=t,this._recognizers=[]}var o=t("../../../src/js/utils");n.prototype={constructor:n,get map(){return this._map},canTrustGestureCenter:function(t){return 1===t.numberOfTouchesRequired||!(o.supportsGestureEvents&&!o.supportsTouches&&o.insideIframe)},addRecognizer:function(t){return this._recognizers.push(t),t.target=this.map.node.element,t.addEventListener("statechange",this),t},interrupt:function(){this._recognizers.forEach(function(t){t.enabled=!1,t.enabled=!0})},centerForGesture:function(t){var e=this.map;return e.staysCenteredDuringZoom||!this.canTrustGestureCenter(t)?e.transformCenter:this._centerWithRecognizer(t)},destroy:function(){for(;this._recognizers.length;){var t=this._recognizers.pop();t.enabled=!1,t.target=null,t.removeEventListener("statechange",this)}}},e.exports=n},{"../../../src/js/utils":225}],15:[function(t,e,i){function n(t,e){this._map=t,this._map.element.addEventListener(o.SupportsTouches?"touchstart":"mousedown",this)}var o=t("@maps/gesture-recognizers");n.prototype={constructor:n,handleEvent:function(t){"touchstart"===t.type&&1!==t.touches.length||this._map.interactionDidStart()},destroy:function(){this._map.element.removeEventListener(o.SupportsTouches?"touchstart":"mousedown",this)}},e.exports=n},{"@maps/gesture-recognizers":72}],16:[function(t,e,i){function n(t){r.call(this,t),this.addRecognizer(new o.Pan).maximumNumberOfTouches=2}var o=t("@maps/gesture-recognizers"),s=t("@maps/geometry/point"),a=t("@maps/scheduler"),r=t("./gesture-controller"),l=t("@maps/js-utils");n.prototype=l.inheritPrototype(r,n,{decelerating:!1,stopDecelerating:function(){this.decelerating&&this._decelerationEnded()},destroy:function(){r.prototype.destroy.call(this),this.stopDecelerating()},handleEvent:function(t){var e=t.target,i=this.map;i.staysCenteredDuringZoom&&i.cameraIsZooming||(e.state===o.States.Began?i.cameraWillStartPanning():e.state!==o.States.Ended&&e.state!==o.States.Changed||(this._panMapCameraBy(e.translation),e.translation=new s),e.state===o.States.Ended&&(this._startDeceleratingWithVelocity(e.velocity),this.decelerating||i.cameraDidStopPanning()))},performScheduledUpdate:function(){if(this.decelerating){var t=Date.now(),e=t-this._timeAtPreviousFrame,i=Math.exp(Math.log(.995)*e),n=(1-i)/(1-.995)*.995;this._panMapCameraBy(new s(this._velocity.x/1e3*n,this._velocity.y/1e3*n)),this._velocity.x*=i,this._velocity.y*=i,Math.abs(this._velocity.x)<=10&&Math.abs(this._velocity.y)<=10?this._decelerationEnded():(this._timeAtPreviousFrame=t,this._schedule())}},_panMapCameraBy:function(t){var e=this.map;e.setCameraAnimated(e.camera.translate(t))},_startDeceleratingWithVelocity:function(t){this._velocity=t,this.map.cameraWillStopPanning(),Math.pow(t.x,2)+Math.pow(t.y,2)<62500||(this.decelerating=!0,this._timeAtPreviousFrame=Date.now(),this._schedule())},_schedule:function(){a.scheduleOnNextFrame(this)},_decelerationEnded:function(){this.decelerating=!1,this.map.cameraDidStopPanning()}}),e.exports=n},{"./gesture-controller":14,"@maps/geometry/point":69,"@maps/gesture-recognizers":72,"@maps/js-utils":84,"@maps/scheduler":106}],17:[function(t,e,i){function n(t){l.RenderItem.call(this,t)}function o(t,e,i,n,o,s){i=c.mod(i,e),n=c.mod(n,e),o=Math.ceil(o),s=Math.ceil(s);for(var a=Math.ceil(o/e),r=Math.ceil(s/e),l=0;l<a;++l)t.fillRect(i+l*e,0,1,s);for(l=0;l<r;++l)t.fillRect(0,n+l*e,o,1)}function s(t){return"rgb("+t.join(",")+")"}function a(t,e,i){return 0===i?t:1===i?e:[r(t[0],e[0],i),r(t[1],e[1],i),r(t[2],e[2],i)]}function r(t,e,i){return Math.round(e*i+t*(1-i))}var l=t("../../scene-graph"),h=t("../../geo"),c=t("@maps/js-utils"),u=Math.log(10)/Math.log(2);n.prototype=c.inheritPrototype(l.RenderItem,n,{draw:function(t,e){var i=this.node,n=i.zoom,r=100*Math.pow(2,n%u),d=r/10,p=Math.min(d,100),m=d<10?0:(p-10)/90,g=i.origin,_=Math.pow(2,n)*h.tileSize,f=new l.Point(-g.x*_,-g.y*_),y=c.mod(f.x,r)-r,v=c.mod(f.y,r)-r,w=this.node.theme;t.fillStyle=s(w.fillColor),t.fillRect(0,0,i.size.width,i.size.height);var b=1-Math.pow(1-m,2);b>0&&(t.fillStyle=s(a(w.fillColor,w.lineColor,b)),o(t,d,y,v,i.size.width,i.size.height)),t.fillStyle=s(w.lineColor),o(t,r,y,v,i.size.width,i.size.height)}}),e.exports=n},{"../../geo":2,"../../scene-graph":47,"@maps/js-utils":84}],18:[function(t,e,i){function n(t){o.RenderItem.call(this,t)}var o=t("../../scene-graph"),s=t("@maps/js-utils"),a={background:"rgba(0, 0, 0, 0.5)",text:"white"},r={background:"rgba(255, 255, 255, 0.75)",text:"black"};n.prototype=s.inheritPrototype(o.RenderItem,n,{draw:function(t){var e=this._node.size.width,i="standard"===this._node.tile.settings.configuration.name;t.fillStyle=i?a.background:r.background,t.fillRect(0,0,e,1),t.fillRect(0,1,1,e-1);var n=["x","y","z"].map(function(t){return t+" = "+this._node.tile[t]},this);t.font="12px -apple-system-font",t.beginPath(),t.moveTo(1,1);var o=1,s=1;n.forEach(function(e,i){var n=t.measureText(e).width;o=1+n+16,t.lineTo(o,s),s+=20,0===i&&(s+=8),t.lineTo(o,s)}),t.lineTo(1,s),t.closePath(),t.fill(),t.fillStyle=i?a.text:r.text,t.textBaseline="hanging",n.forEach(function(i,n){t.fillText(i,9,9+20*n,e)})}}),e.exports=n},{"../../scene-graph":47,"@maps/js-utils":84}],19:[function(t,e,i){function n(t){this.node=t,this._readyToDraw=!1,this._unregisteredLabelRegions=[]}function o(t){return t*a*-1}var s=t("@maps/device-pixel-ratio");n.prototype={constructor:n,init:function(t,e,i,n,o){this.Camera=i,this.initRenderer(e,t,n).then(this.syrupInitHandler.bind(this,o)).catch(o.bind(null,!0))},initRenderer:function(t,e,i){var n=this._syrupRenderer=new t({startInLoCSR:i});return n.on("invalid-access-key",function(){e.accessKeyHasExpired()},"mapkit-re-bootstrap-notification"),n.on("fallback",function(){e.syrupRequestedFallback()},"mapkit-csr-fallback-notification"),n.init(e)},syrupInitHandler:function(t){var e=this._syrupRenderer;e.setDeterministicCollisions(!0),e.setLanguage(this.node.language),e.setDeterministicCollisions(!1),e.setPixelRatio(s()),this._canvas=e.element(),this.updateConfiguration(this.node.configuration,!0),this._readyToDraw=!0,this.performScheduledDraw(),this._unregisteredLabelRegions.forEach(function(t){this._syrupRenderer.registerLabelRegion(t)},this),delete this._unregisteredLabelRegions,t()},deactivate:function(){this._readyToDraw=!1},destroy:function(){this._readyToDraw=!1,this._syrupRenderer&&(this._syrupRenderer.off("invalid-access-key",null,"mapkit-re-bootstrap-notification"),this._syrupRenderer.off("fallback",null,"mapkit-csr-fallback-notification"),"function"==typeof this._syrupRenderer.destroy&&this._syrupRenderer.destroy(),this._syrupRenderer=null)},get snapsToIntegralZoomLevels(){return!!this._syrupRenderer&&!this._syrupRenderer.supportsNonIntegralZoomLevels()},performScheduledDraw:function(){if(this._readyToDraw){var t=[this.node.size.width,this.node.size.height],e=new this.Camera(t[0]/t[1]),i=this.node.zoomLevel,n=[this.node.camera.center.x,1-this.node.camera.center.y,0];e.setTarget(n),e.setZoomLevel(i),e.setRotation(o(this.node.camera.rotation)),this._syrupRenderer.update(e,t),this._syrupRenderer.mapFullyRendered()?this.node._impl.tileGridDidFinishRendering():this.node.needsDisplay=!0}},forceRerender:function(){this._readyToDraw&&this._syrupRenderer.forceRerender()},devicePixelRatioDidChange:function(){this._syrupRenderer&&this._syrupRenderer.setPixelRatio(s())},frozen:!1,get element(){return this.canvas},get canvas(){return this._canvas},get fullyRendered(){return this._syrupRenderer&&this._syrupRenderer.mapFullyRendered()},set language(t){this._syrupRenderer&&this._syrupRenderer.setLanguage(t)},updateNetworkConfiguration:function(t){this._syrupRenderer&&this._syrupRenderer.updateNetworkConfiguration(t)},updateConfiguration:function(t,e){if(this._syrupRenderer){var i=e,n=t.name;this._syrupRenderer.setMapMode(n,i)}},updateShowsPointsOfInterest:function(t,e){this.updateConfiguration(t,e)},createLabelRegion:function(){if(this._syrupRenderer){var t=this._syrupRenderer.createLabelRegion();return this._unregisteredLabelRegions?this._unregisteredLabelRegions.push(t):this._syrupRenderer.registerLabelRegion(t),t}},unregisterLabelRegion:function(t){this._unregisteredLabelRegions?this._unregisteredLabelRegions.splice(this._unregisteredLabelRegions.indexOf(t),1):this._syrupRenderer&&this._syrupRenderer.unregisterLabelRegion(t)}};var a=Math.PI/180;e.exports=n},{"@maps/device-pixel-ratio":61}],20:[function(t,e,i){function n(t){l.call(this,t),this._recognizer=this.addRecognizer(new s.Rotation)}var o=t("../../geo"),s=t("@maps/gesture-recognizers"),a=t("@maps/scheduler"),r=t("@maps/js-utils"),l=t("./gesture-controller"),h=180/Math.PI,c=3*h,u=1e-4*h*1e3;n.prototype=r.inheritPrototype(l,n,{decelerating:!1,stopDecelerating:function(){this.decelerating&&this._decelerationEnded()},destroy:function(){l.prototype.destroy.call(this),this.stopDecelerating(),delete this._recognizer},handleEvent:function(t){var e=t.target;e===this._recognizer&&(e.state===s.States.Began&&(this._rotatedMinimumAmount=!1,this.map.cameraWillStartRotating()),e.state===s.States.Ended&&(this.map.finishedRecognizingRotation(),this._startDeceleratingWithVelocity(e.velocity)),this._handleRotationChange(t.target))},_handleRotationChange:function(t){if(!this._rotatedMinimumAmount){if(Math.abs(t.rotation)<5)return;this.map.beganRecognizingRotation(),this._rotatedMinimumAmount=!0}this._lastRotationCenter=this.centerForGesture(t),t.state===s.States.Changed&&(this.map.rotateCameraAroundMapPoint(this._lastRotationCenter,t.rotation),t.rotation=0)},_centerWithRecognizer:function(t){var e=this.map,i=t.locationInElement(),n=this.map.node.convertPointFromPage(i);n=e.camera.transformGestureCenter(n);var s=e.visibleMapRect,a=e.camera.viewportSize;return new o.MapPoint(s.minX()+n.x/a.width*s.size.width,s.minY()+n.y/a.height*s.size.height)},performScheduledUpdate:function(){if(this.decelerating){var t=Date.now(),e=t-this._timeAtPreviousFrame,i=this._velocity/1e3,n=Math.pow(.995,e),o=.995*i*(n-1)/(.995-1);i*=n,this.map.cameraAnimation?this.map.cameraAnimation.adjustRotation(this._lastRotationCenter,o):this.map.rotateCameraAroundMapPoint(this._lastRotationCenter,o),this._velocity*=n,Math.abs(this._velocity)<=u?this._decelerationEnded():(this._timeAtPreviousFrame=t,this._schedule())}},_startDeceleratingWithVelocity:function(t){if(Math.abs(t)>1440||isNaN(t)||!this._rotatedMinimumAmount)this.map.cameraDidStopRotating();else{if(Math.abs(t)<c)return this.decelerating=!1,void this.map.cameraDidStopRotating();this._velocity=t,this.decelerating=!0,this._timeAtPreviousFrame=Date.now(),this._schedule()}},_schedule:function(){a.scheduleOnNextFrame(this)},_decelerationEnded:function(){this.decelerating=!1,this.map.cameraDidStopRotating()}}),e.exports=n},{"../../geo":2,"./gesture-controller":14,"@maps/gesture-recognizers":72,"@maps/js-utils":84,"@maps/scheduler":106}],21:[function(t,e,i){function n(t){o.call(this,t),this._backgroundGrid=this.node.addChild(new s),this._tileGridsGroup=this.node.addChild(new a(this)),this._tileGridsGroup.opacity=0,setTimeout(function(){this._tileGridsGroup.opacity=1}.bind(this),0)}var o=t("./base-map-node-internal"),s=t("./background-grid-node"),a=t("./tile-grids-group-node"),r=t("@maps/js-utils");n.prototype=r.inheritPrototype(o,n,{stringInfo:function(){return"MapNode<camera:"+this.camera.toString()+">"},get tileSettings(){return{configuration:this._configuration,language:this._language,showsPOI:this._showsPointsOfInterest,showsDefaultTiles:this._showsDefaultTiles,showsTileInfo:this._debug,tileOverlays:this._tileOverlays}},get backgroundGridTheme(){return this._backgroundGrid.theme},set backgroundGridTheme(t){this._backgroundGrid.theme=t},get fullyRendered(){return this._tileGridsGroup.fullyRendered},get cssBackgroundProperty(){return this._tileGridsGroup.cssBackgroundProperty},snapsToIntegralZoomLevels:!0,destroy:function(t){o.prototype.destroy.call(this,t),this._tileGridsGroup.destroy()},refresh:function(){this._tileGridsGroup.scheduleRefresh()},cameraZoomWasSet:function(t){t?this._tileGridsGroup.cameraWillStartZooming(t):this._tileGridsGroup.invalidate()},tileGridDidFinishRendering:function(){this._tileOverlays.forEach(function(t){t._impl.reloadComplete()},this),o.prototype.tileGridDidFinishRendering.call(this)},handleEvent:function(){this._tileGridsGroup.scheduleRefresh()},beforeCameraZoomChange:function(t){t?this._tileGridsGroup.cameraWillStartZooming():this._tileGridsGroup.cameraDidStopZooming()},devicePixelRatioDidChange:function(){return this._tileGridsGroup.scheduleRefresh(),!0},minZoomLevelForViewportSize:function(t,e){var i=Math.max(t.width,t.height),n=Math.ceil(i/e)+1;return r.log2(n)},updateMinAndMaxZoomLevelsWhenConfigurationChanges:function(){o.prototype.updateMinAndMaxZoomLevelsWhenConfigurationChanges.call(this),this.tileOverlays.forEach(function(t){"number"!=typeof t.minimumZ||isNaN(t.minimumZ)||(this.minZoomLevel=Math.min(this.minZoomLevel,t.minimumZ)),"number"!=typeof t.maximumZ||isNaN(t.maximumZ)||(this.maxZoomLevel=Math.max(this.maxZoomLevel,t.maximumZ))},this)},_tileOverlaysDidChange:function(){this._updateMinAndMaxZoomLevels(this.camera.viewportSize),this._tileGridsGroup.scheduleRefresh()},needsReplacing:function(t){return t}}),e.exports=n},{"./background-grid-node":8,"./base-map-node-internal":9,"./tile-grids-group-node":28,"@maps/js-utils":84}],22:[function(t,e,i){function n(){o.call(this),Object.defineProperty(this,"_impl",{value:new s(this)})}var o=t("./base-map-node"),s=t("./scene-graph-map-node-internal"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(o,n,{get cssBackgroundProperty(){return this._impl.cssBackgroundProperty},get rotation(){return 0},set rotation(t){this._impl.rotation=t}}),e.exports=n},{"./base-map-node":10,"./scene-graph-map-node-internal":21,"@maps/js-utils":84}],23:[function(t,e,i){function n(t,e){this._element=o(document.createElement("div"),r);var i=o(this._element.appendChild(document.createElement("ul")),l);this._items=[function(t){var e=t.center.toCoordinate();return"Center: "+e.latitude.toFixed(6)+", "+e.longitude.toFixed(6)},function(t){return"Zoom level: "+t.zoom.toFixed(6)},function(t){var e=Math.floor(t.zoom),i=Math.pow(2,e);return"Center tile: x="+Math.floor(a.mod(t.center.x,1)*i)+", y="+Math.floor(t.center.y*i)+", z="+e},function(t){return"Viewport: "+t.viewportSize.width+""+t.viewportSize.height}].map(function(t){var e=i.appendChild(document.createElement("li"));return function(i){e.textContent=t(i)}});var n=s.svgElement("svg",{viewBox:"-16 -16 32 32"},s.svgElement("circle",{r:16,fill:"#ccc"}),s.svgElement("g",{"stroke-width":4,stroke:"#222"},s.svgElement("line",{x1:-8,y1:-8,x2:8,y2:8}),s.svgElement("line",{x1:8,y1:-8,x2:-8,y2:8})));this._element.appendChild(o(n,h)),n.addEventListener("click",t),this.update(e)}function o(t,e){for(var i in e)t.style[i]=e[i];return t}var s=t("../../../src/js/utils"),a=t("@maps/js-utils"),r={fontFamily:"-apple-system-font, sans-serif",margin:"2em auto",width:"18em",borderRadius:"0.5em",color:"#f8f9f0",backgroundColor:"rgba(0, 0, 0, 0.7)",padding:"1em",textAlign:"center",position:"relative"},l={listStyleType:"none",margin:0,paddingLeft:0},h={width:"1em",height:"1em",position:"absolute",top:"0.5em",left:"0.5em"};n.prototype={constructor:n,attachTo:function(t){t.appendChild(this._element)},detach:function(){this._element.remove()},update:function(t){this._items.forEach(function(e){e(t)})}},e.exports=n},{"../../../src/js/utils":225,"@maps/js-utils":84}],24:[function(t,e,i){function n(t){o.call(this,t),this._renderer=t._renderer,this._backgroundGridTheme=a.Themes.Light,this._requiresFallback=!1,this._fallback=function(){this._requiresFallback=!0}.bind(this)}var o=t("./base-map-node-internal"),s=t("./syrup-debug-panel"),a=t("./background-grid-node"),r=t("@maps/js-utils"),l=t("@maps/device-pixel-ratio"),h=t("./rotation-controller"),c=t("./initial-interaction-controller");n.prototype=r.inheritPrototype(o,n,{init:function(t,e,i,n,o){this._requiresFallback?t.syrupRequestedFallback():(this._fallback=t.syrupRequestedFallback.bind(t),this._renderer.init(this.networkConfigurationFor(t),e,i,n,function(t){this._updateMinAndMaxZoomLevels(this.camera.viewportSize),o(t,this._renderer)}.bind(this)))},get isRotationEnabled(){return this._isRotationEnabled},set isRotationEnabled(t){!t&&this._rotationController?(this._rotationController.destroy(),delete this._rotationController):t&&!this._rotationController&&(this._initialInteractionController||(this._initialInteractionController=new c(this)),this._rotationController=new h(this),this.camera._initialRotation=0),this._isRotationEnabled=t},get rotation(){return this.camera.rotation},set rotation(t){if(this.camera.rotation=t,this._updateDisplay(),!this.cameraAnimation||!this.cameraAnimation.rotating){var e=this.node.delegate;e&&"function"==typeof e.mapRotationDidChange&&e.mapRotationDidChange(this.node)}},updateNetworkConfiguration:function(t){this._renderer.updateNetworkConfiguration(this.networkConfigurationFor(t))},forceRerender:function(){this._renderer.forceRerender()},adjustForSize:function(t){o.prototype.adjustForSize.call(this,t),this.forceRerender()},adjustMapItemPoint:function(t){return this.cameraIsZooming||this.cameraIsPanning||this.cameraIsRotating?t:(t.x=l.roundToDevicePixel(t.x),t.y=l.roundToDevicePixel(t.y),t)},networkConfigurationFor:function(t){return t?{madabaDomains:t.madabaDomains,rasterTiles:t.types,tileGroup:t.tileGroup,accessKey:t.accessKey,accessKeyHasExpired:t.accessKeyHasExpired.bind(t),syrupRequestedFallback:t.syrupRequestedFallback.bind(t)}:{}},rotateCameraAroundMapPoint:function(t,e){this.camera.rotateAroundCenter(t,e),this._updateDisplay();var i=this.node.delegate;i&&"function"==typeof i.mapRotationDidChange&&i.mapRotationDidChange(this.node)},deactivate:function(){o.prototype.deactivate.call(this),this._renderer.deactivate()},destroy:function(t){o.prototype.destroy.call(this,t),this.customCanvas&&this.customCanvas.remove(),this._renderer.destroy(),this._renderer=null},stringInfo:function(){return"SyrupNode<camera:"+this.camera.toString()+">"},get backgroundGridTheme(){return this._backgroundGridTheme},set backgroundGridTheme(t){this._backgroundGridTheme=t},get fullyRendered(){return this._renderer.fullyRendered},get customCanvas(){return this._renderer&&this._renderer.canvas},get camera(){return this._camera},set camera(t){this._camera=t,this.node.needsDisplay=!0},get language(){return this._language},set language(t){this._language!==t&&(this._language=t,this._renderer&&(this._renderer.language=t,this.node.needsDisplay=!0))},updateConfiguration:function(t){var e=this._configuration&&t.name!==this._configuration.name;o.prototype.updateConfiguration.call(this,t),e&&this._renderer&&(this._renderer.updateConfiguration(t,this._showsPointsOfInterest),this.node.needsDisplay=!0)},updateShowsPointsOfInterest:function(){this._renderer&&this._configuration&&(this._renderer.updateShowsPointsOfInterest(this._configuration,this._showsPointsOfInterest),this.node.needsDisplay=!0)},devicePixelRatioDidChange:function(){return!this._renderer},get snapsToIntegralZoomLevels(){return this._renderer.snapsToIntegralZoomLevels},get debug(){return this._debug},set debug(t){this._debug!==!!t&&(this._debug=!!t,this._debug?this._showDebugPanel():this._hideDebugPanel())},minZoomLevelForViewportSize:function(t,e){return this._renderer&&this._renderer.Camera?this._renderer.Camera.getMinZoomLevel([t.width,t.height],e):this.minZoomLevel},needsReplacing:function(t){return!t},createLabelRegion:function(){return this._renderer.createLabelRegion()},updatedLabelRegion:function(){this.forceRerender(),this.node.needsDisplay=!0},unregisterLabelRegion:function(t){return this._renderer.unregisterLabelRegion(t)},_tileOverlaysDidChange:function(){this._fallback()},_showDebugPanel:function(){this._debugPanel=new s(function(){this.debug=!1}.bind(this),this.camera),this._debugPanel.attachTo(this._element),this._cameraChangesMayHaveEnded=function(t){o.prototype._cameraChangesMayHaveEnded.call(this,t)&&this._debugPanel&&this._debugPanel.update(this.camera)}},_hideDebugPanel:function(){this._debugPanel.detach(),delete this._debugPanel,delete this._cameraChangesMayHaveEnded},_updateDisplay:function(){this.forceRerender(),this.node.needsDisplay=!0,this._cameraDidChange()}}),e.exports=n},{"./background-grid-node":8,"./base-map-node-internal":9,"./initial-interaction-controller":15,"./rotation-controller":20,"./syrup-debug-panel":23,"@maps/device-pixel-ratio":61,"@maps/js-utils":84}],25:[function(t,e,i){function n(){o.call(this),this._renderer=new s(this),Object.defineProperty(this,"_impl",{value:new a(this)})}var o=t("./base-map-node"),s=t("./render-syrup-map"),a=t("./syrup-map-node-internal"),r=t("@maps/js-utils"),l=t("@maps/scheduler");n.prototype=r.inheritPrototype(o,n,{get isRotationEnabled(){return this._impl.isRotationEnabled},set isRotationEnabled(t){this._impl.isRotationEnabled=t},get customCanvas(){return this._impl.customCanvas},set needsDisplay(t){t&&l.scheduleDraw(this._renderer)},init:function(t,e,i,n,o){this._impl.init(t,e,i,n,o)},updateNetworkConfiguration:function(t){this._impl.updateNetworkConfiguration(t)},forceRerender:function(){this._impl.forceRerender()},rotateCameraAroundMapPoint:function(t,e){this._impl.rotateCameraAroundMapPoint(t,e)}}),e.exports=n},{"./base-map-node":10,"./render-syrup-map":19,"./syrup-map-node-internal":24,"@maps/js-utils":84,"@maps/scheduler":106}],26:[function(t,e,i){function n(t,e){var i=Math.pow(2,t.zoom),n=i*o.tileSize,r=t.viewportSize.width/n/2,c=t.viewportSize.height/n/2,u=new o.MapPoint(t.center.x-r,t.center.y-c),d=new o.MapPoint(t.center.x+r,t.center.y+c),p=i-1,m=Math.floor(s.mod(u.x,1)*i),g=Math.floor(s.mod(d.x,1)*i),_=s.clamp(Math.floor(u.y*i),0,p),f=s.clamp(Math.floor(d.y*i),0,p);this.range=new l(new h(m,_,t.zoom),new h(g,f,t.zoom)),this.settings=e,this.resolution=a(),this.zoom=t.zoom,this.mapRect=new o.MapRect(m/i,_/i,(g-m)/i,(f-_)/i),this.mapRect.size.width<0&&this.mapRect.size.width++}var o=t("../../geo"),s=t("@maps/js-utils"),a=t("@maps/device-pixel-ratio"),r=t("./tile-manager"),l=t("./tile-range"),h=t("@maps/geometry/point");n.prototype={constructor:n,equals:function(t){return this.sameSettings(t)&&this.resolution===t.resolution&&this.range.equals(t.range)},sameSettings:function(t){var e=this.settings,i=t.settings;return e.configuration===i.configuration&&e.showsPOI===i.showsPOI&&e.language===i.language&&e.showsDefaultTiles===i.showsDefaultTiles&&e.showsTileInfo===i.showsTileInfo&&this.sameTileOverlays(t)},sameTileOverlays:function(t){return this.settings.tileOverlays.length===t.settings.tileOverlays.length&&this.settings.tileOverlays.every(function(e,i){return e===t.settings.tileOverlays[i]&!e._impl.stale},this)},sharesTileSourcesWithTileData:function(t){var e=this.settings.configuration.tileSources,i=t.settings.configuration.tileSources;return!("AutoNavi"!==this.settings.configuration.provider||"AutoNavi"!==t.settings.configuration.provider||1!==e.length||1!==i.length||"satellite"!==e[0].name&&"hybrid"!==e[0].name||"satellite"!==i[0].name&&"hybrid"!==i[0].name)||i.some(function(t){return-1!==e.indexOf(t)})},load:function(){this._tiles||(this._tiles=r.tilesForTileData(this))},cancel:function(){if(!this._canceled&&(this._canceled=!0,this._tiles))for(var t=0,e=this._tiles,i=e.length;t<i;++t)e[t].unschedule()},releaseTiles:function(){if(this._tiles)for(var t=0,e=this._tiles,i=e.length;t<i;++t)r.releaseTile(e[t],this)},get tiles(){return this.load(),this._tiles}},e.exports=n},{"../../geo":2,"./tile-manager":31,"./tile-range":34,"@maps/device-pixel-ratio":61,"@maps/geometry/point":69,"@maps/js-utils":84}],27:[function(t,e,i){function n(t){a.GroupNode.call(this),this._scale=1,this._nodesByTileKey={},this._fadingNodes=[],this._debug=!!t}function o(t){var e=new u(t.tileSource);return e.size=m,t.loaderState===d.Succeeded&&(e.image=t.image,e.opacity=t.preferredOpacity),e}var s=t("../../geo"),a=t("../../scene-graph"),r=t("@maps/js-utils"),l=t("@maps/scheduler"),h=t("./debug-node"),c=t("./tile"),u=t("./tile-image-node"),d=t("@maps/loaders").State,p=new a.Matrix,m=new a.Size(s.tileSize,s.tileSize);n.prototype=r.inheritPrototype(a.GroupNode,n,{stale:!1,fullyRendered:!1,_pendingTileCount:0,_tileData:null,get locked(){return this.wantsLayerBacking},set locked(t){t!==this.wantsLayerBacking&&(t&&this._fadingNodes.length>0?this.wantsLayerBacking=!0:!t&&this._wantsLayerBacking?this.wantsLayerBacking=!1:this.frozen=t)},get tileData(){return this._tileData},setTileDataAnimated:function(t,e){this._fadingNodes=[],delete this._failedTileAndImage;var i=t.tiles,n=t.range.min,o=Math.pow(2,n.z);this._tileData&&this._tileData.tiles.forEach(function(t){if(t.removeEventListener(c.Events.LoadSuccess,this),t.removeEventListener(c.Events.LoadFail,this),-1===i.indexOf(t)){var e=t.key,n=this._nodesByTileKey[e];n&&(n.remove(),delete this._nodesByTileKey[e])}},this),this._tileData=t,this.fullyRendered=!1,this._pendingTileCount=i.length;var l=this.childCount;i.forEach(function(t){var i=new a.Point(r.mod(t.x-n.x,o)*s.tileSize,(t.y-n.y)*s.tileSize),h=this._ensureNodeForTile(t);h.position=i,h.opacity=0,this.addChild(h),t.loaded?((l>0||!e)&&(h.opacity=1),this._tileDidLoad(t)):(t.addEventListener(c.Events.LoadSuccess,this),t.addEventListener(c.Events.LoadFail,this))},this)},get pendingTileCount(){return this._pendingTileCount},set scale(t){t!==this._scale&&(this._scale=t,this.transform=1===t?p:(new a.Matrix).scale(t))},get debug(){return this._debug},stringInfo:function(){return"TileGridNode"+(this.tileData?"<range:("+this.tileData.range.toString()+")>":"")},get cssBackgroundProperty(){if(!this.fullyRendered)return"";var t=this.position;return Array.prototype.concat.apply([],this._tileData.tiles.map(function(e){var i=this._nodesByTileKey[e.key];return e.tileImages.reduce(function(e,n,o){return"url("+n.image.src+") "+(t.x+i.position.x)+"px "+(t.y+i.position.y)+"px / "+s.tileSize+"px no-repeat"+(0===o?"":", ")+e},"")},this)).join(", ")},handleEvent:function(t){var e=t.target;switch(t.type){case c.Events.LoadSuccess:e.removeEventListener(c.Events.LoadSuccess,this),this._tileDidLoad(e);break;case c.Events.LoadFail:this._tileLoadFail(e,t.tileImage)}},performScheduledUpdate:function(){this._updateFadingNodes(),0===this._pendingTileCount&&0===this._fadingNodes.length&&this._allTilesDidDraw()},_tileDidLoad:function(t){0===--this._pendingTileCount&&this._failedTileAndImage&&(this._failedTileAndImage.tile._requestTileImageLoadStatus(this._failedTileAndImage.tileImage,this._handleTileImageLoadStatus.bind(this)),delete this._failedTileAndImage);var e=this._nodesByTileKey[t.key];if(0===e.childCount){var i=t.tileImages;if(e.children=i.map(o),this.debug){var n=new h(t);n.size=m,e.addChild(n)}}e.opacity<1?(this._fadingNodes.push(e),l.scheduleASAP(this)):0===this._pendingTileCount&&this._allTilesDidDraw()},_tileLoadFail:function(t,e){this._failedTileAndImage={tile:t,tileImage:e}},_handleTileImageLoadStatus:function(t){if(403===t.target.status){var e=this.parent._map.node.delegate;e&&e.tileAccessForbidden()}},_updateFadingNodes:function(){var t=Date.now();this._fadingNodes=this._fadingNodes.filter(function(e){return e._startTime?e.opacity=Math.min(1,(t-e._startTime)/300):0===e.opacity&&(e._startTime=t),1!==e.opacity||(delete e._startTime,!1)}),this._fadingNodes.length>0?l.scheduleOnNextFrame(this):this._wantsLayerBacking&&(this.wantsLayerBacking=!1,this.frozen=!0)},_allTilesDidDraw:function(){this.fullyRendered=!0,this.parent&&this.parent.tileGridDidFinishRendering(this)},_ensureNodeForTile:function(t){var e=t.key,i=this._nodesByTileKey[e];return i||(i=this._nodesByTileKey[e]=new a.GroupNode),i}}),e.exports=n},{"../../geo":2,"../../scene-graph":47,"./debug-node":13,"./tile":35,"./tile-image-node":29,"@maps/js-utils":84,"@maps/loaders":85,"@maps/scheduler":106}],28:[function(t,e,i){function n(t){a.GroupNode.call(this),this._map=t}var o=t("../../geo"),s=t("@maps/scheduler"),a=t("../../scene-graph"),r=t("@maps/device-pixel-ratio"),l=t("./tile-grid-node"),h=t("./tile-data"),c=t("@maps/js-utils");n.prototype=c.inheritPrototype(a.GroupNode,n,{fullyRendered:!1,scheduleRefresh:function(){this.children.forEach(function(t){t.stale=!0}),this.invalidate()},destroy:function(){this._releaseChildren(!0)},invalidate:function(){this.fullyRendered=!1,s.scheduleASAP(this)},stringInfo:function(){return"TileGridsGroupNode"},get cssBackgroundProperty(){return this.fullyRendered?this.lastChild.cssBackgroundProperty:""},handleEvent:function(t){this.scheduleRefresh()},performScheduledUpdate:function(){if(this._canDraw()){var t=this._map,e=t.camera,i=this.lastChild,n=!!i&&i.debug!==this._map.debug,s=!!i&&i.tileData.settings.showsDefaultTiles!==this._map.showsDefaultTiles;if(!this._tileDataAtZoomCompletion){var l;if(Math.round(e.zoom)===e.zoom)l=new h(e,t.tileSettings);else{if(!i)return;l=i.tileData}if(i){if((i.stale||!i.locked)&&(!l.equals(i.tileData)||n||s)){var c=i.tileData;c.tiles.forEach(function(t){l.tiles.indexOf(t)<0&&t.unschedule()});var u=l.settings.configuration===c.settings.configuration,d=l.sameSettings(c)&&l.resolution===c.resolution&&!n;if(u?!d:l.sharesTileSourcesWithTileData(c))i.locked=!0,this._addNewTileGridAnimated(l,!0);else if(!i.locked){delete i.stale,i.setTileDataAnimated(l,u);var p=this._children[this._children.length-2];p&&!l.sharesTileSourcesWithTileData(p.tileData)&&(this._releaseChildren(!1),this._children=[i])}}}else this._addNewTileGridAnimated(l,!1)}for(var m=e.zoom,g=t.visibleMapRect,_=g.origin,f=g.size,y=0,v=this.children,w=v.length;y<w;++y){var b=v[y],C=b.tileData,S=C.zoom,L=C.mapRect.origin,T=Math.pow(2,m-S),E=Math.pow(2,S)*(o.tileSize*T),x=L.x-_.x;if(x>f.width)x--;else{var M=C.mapRect.size.width;M>0&&x+M<0&&x++}b.scale=T,b.position=new a.Point(r.roundToDevicePixel(x*E),r.roundToDevicePixel((L.y-_.y)*E)),y<w-1&&C.cancel()}this.fullyRendered=w>0&&this.children[w-1].fullyRendered}},cameraWillStartZooming:function(t){if(this._canDraw()){var e=this._map;t&&(this._tileDataAtZoomCompletion=new h(t,e.tileSettings),this._tileDataAtZoomCompletion.load()),this.children.forEach(function(t){t.locked=!0})}},cameraDidStopZooming:function(){if(this._canDraw())if(this._tileDataAtZoomCompletion)this._addNewTileGridAnimated(this._tileDataAtZoomCompletion,!0,!0),delete this._tileDataAtZoomCompletion;else{var t=this._map,e=this.lastChild;if(e&&t.camera.zoom===e.tileData.zoom)e.locked=!1;else{var i=new h(t.camera,t.tileSettings);this._addNewTileGridAnimated(i,!0,!0)}}},tileGridDidFinishRendering:function(t){var e=this.children,i=e.length,n=e[i-1];if(n.fullyRendered&&!n.locked){for(var o=0;o<i-1;++o)e[o].tileData.releaseTiles();i>1&&(this.children=[n]),this.fullyRendered=!0,this._map.tileGridDidFinishRendering()}},_canDraw:function(){var t=this._map;return t&&!!t.configuration&&!!t.language},_addNewTileGridAnimated:function(t,e,i){var n=new l(this._map.debug),o=this.lastChild;o&&!t.sharesTileSourcesWithTileData(o.tileData)?(this._releaseChildren(!0),this.children=[n]):this.addChild(n),n.setTileDataAnimated(t,e),i&&s.scheduleASAP(this)},_releaseChildren:function(t){for(var e=this.childCount-(t?1:2);e>=0;--e){var i=this.children[e].tileData;i.cancel(),i.releaseTiles()}}}),e.exports=n},{"../../geo":2,"../../scene-graph":47,"./tile-data":26,"./tile-grid-node":27,"@maps/device-pixel-ratio":61,"@maps/js-utils":84,"@maps/scheduler":106}],29:[function(t,e,i){function n(t){o.ImageNode.call(this),this._tileSource=t._public,this._tileSource&&"function"==typeof this._tileSource.addEventListener&&this._tileSource.addEventListener(s.OPACITY_EVENT,this)}var o=t("../../scene-graph"),s=t("./tile-overlay-internal"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(o.ImageNode,n,{handleEvent:function(){this._tileSource&&(this.opacity=this._tileSource.opacity)},wasRemoved:function(){setTimeout(function(){this.parent&&this.parent.scene||this._tileSource&&"function"==typeof this._tileSource.removeEventListener&&this._tileSource.removeEventListener(s.OPACITY_EVENT,this)}.bind(this),0)}}),e.exports=n},{"../../scene-graph":47,"./tile-overlay-internal":32,"@maps/js-utils":84}],30:[function(t,e,i){function n(t,e,i,n,s,a,r,l){this.x=t,this.y=e,this.z=i,this.tileSource=n,this.language=s,this.showsPOI=a,this.resolution=r,this._priority=l,this._loader=o(l,this)}function o(t,e){var i;return l.length>0?(i=l.shift()).reuse(t,e):i=new s.ImageLoader(t,e),i}var s=t("@maps/loaders"),a=t("@maps/js-utils"),r={},l=[];n.prototype={constructor:n,get preferredOpacity(){return"number"==typeof this.tileSource.opacity?this.tileSource.opacity:1},get loaderState(){return this._loader?this._loader.state:s.State.Unscheduled},schedule:function(){this._loader||(this._loader=o(this._priority,this)),this._loader.state>s.State.Unscheduled||this._loader.schedule()},unschedule:function(){this._loader&&this._loader.unschedule()&&(l.push(this._loader),this._loader=null)},whenDoneLoading:function(t){this._loader&&this._loader.state>s.State.Loading?t(this):this._doneLoadingCallback=t},get urlForImageLoader(){var t=this.tileSource;if("function"==typeof t.urlForImageLoader)return t.urlForImageLoader(this.x,this.y,this.z,this.resolution);var e=t.domains,i=t.protocol,n=t.supportedResolutions[0],o=t.supportedResolutions[t.supportedResolutions.length-1],s=a.clamp(this.resolution,n,o),l=a.fillTemplate(t.path,{tileSizeIndex:1,x:this.x,y:this.y,z:this.z,resolution:s,lang:this.language,poi:this.showsPOI?1:0}),h=r[l];return h||(h=i+"//"+e[(this.x+this.y)%e.length]+l,r[l]=h,h)},loaderDidSucceed:function(t){this._loaderDidComplete()},loaderDidFail:function(t){this._loaderDidComplete()},_loaderDidComplete:function(){this.image=this._loader.image,"function"==typeof this._doneLoadingCallback&&(this._doneLoadingCallback(this),delete this._doneLoadingCallback)}},e.exports=n},{"@maps/js-utils":84,"@maps/loaders":85}],31:[function(t,e,i){function n(t,e,i,n){return n.settings.configuration.provider+n.settings.configuration.name+t+"-"+e+"-"+i+n.settings.language+n.settings.showsPOI+n.settings.showsDefaultTiles+n.settings.showsTileInfo+n.resolution+n.settings.tileOverlays.map(function(n){return n._impl.keyForTile(t,e,i)}).join("-")}function o(t,e,i,o,r){var l=n(t,e,i,o),h=u[l];return h?h.schedule():((h=new c(l,t,e,i,o.settings,o.resolution,r)).addEventListener(c.Events.LoadSuccess,s),h.addEventListener(c.Events.LoadFail,a),u[l]=h,h._refCount=0,h._loadTileImages()),h._refCount++,h}function s(t){var e=t.target;e.removeEventListener(c.Events.LoadSuccess,s),e.removeEventListener(c.Events.LoadFail,a)}function a(t){var e=t.target;delete u[e.key],e.removeEventListener(c.Events.LoadSuccess,s),e.removeEventListener(c.Events.LoadFail,a)}var r=t("@maps/loaders"),l=t("@maps/geometry/point"),h=t("@maps/js-utils"),c=t("./tile"),u={};e.exports={tilesForTileData:function(t){for(var e=t.range,i=e.min.z,n=Math.pow(2,i),s=e.min,a=e.denormalize().max,c=new l((s.x+a.x)/2,(s.y+a.y)/2),u=[],d=Math.min(a.x,s.x+n-1),p=s.x;p<=d;++p)for(var m=s.y;m<=a.y;++m)u.push(new l(p,m));return u.sort(function(t,e){var i=t.distanceToPoint(c)-e.distanceToPoint(c);return 0===i?t.x-e.x==0?t.y-e.y:t.x-e.x:i}),u.map(function(e){return o(h.mod(e.x,n),e.y,i,t,r.Priority.High)})},releaseTile:function(t,e){if(t._refCount--,0===t._refCount){t.unschedule();var i=n(t.x,t.y,t.z,e);delete u[i]}}}},{"./tile":35,"@maps/geometry/point":69,"@maps/js-utils":84,"@maps/loaders":85}],32:[function(t,e,i){function n(t,e,i){s.EventTarget(t),this._public=t,i=a.checkOptions(i),r.forEach(function(t){t in i&&(this[t]=i[t])},this),Object.keys(i).forEach(function(t){r.indexOf(t)<0&&console.warn("[MapKit] Unknown option: "+t+". Use the data property to store custom data.")}),this.urlTemplate=e,void 0===this.opacity&&(this.opacity=l),this.stale=!1}function o(t){return t.replace(/\{/g,"{{").replace(/\}/g,"}}")}var s=t("@maps/dom-events"),a=t("@maps/js-utils"),r=["minimumZ","maximumZ","opacity","data"],l=1;n.RELOAD_EVENT="tile-overlay-reload",n.OPACITY_EVENT="tile-overlay-opacity-changed",n.prototype={constructor:n,_minimumZ:null,_maximumZ:null,get urlTemplate(){return this._urlTemplate},set urlTemplate(t){var e=typeof t;if("function"!==e&&"string"!==e){var i="[MapKit] TileOverlay.urlTemplate expected a function or a string, but got `"+t+"` instead.";throw new TypeError(i)}this._urlTemplate=t},keyForTile:function(t,e,i){return this._minimumZ+"-"+this._maximumZ+"-"+this.urlForImageLoader(t,e,i,1)},get minimumZ(){return this._minimumZ},get minZoomLevel(){return this._minimumZ},set minimumZ(t){var e="[MapKit] TileOverlay.minimumZ expected a number, but got `"+t+"` instead.";a.checkType(t,"number",e),this._minimumZ=Math.floor(t)},get maximumZ(){return this._maximumZ},get maxZoomLevel(){return this._maximumZ},set maximumZ(t){var e="[MapKit] TileOverlay.maximumZ expected a number, but got `"+t+"` instead.";a.checkType(t,"number",e),this._maximumZ=Math.ceil(t)},get opacity(){return this._opacity},set opacity(t){var e="[MapKit] TileOverlay.opacity expected a number, but got `"+t+"` instead.";a.checkType(t,"number",e),this._opacity=a.clamp(t,0,1);var i=new s.Event(n.OPACITY_EVENT);i.tileOverlay=this,i.opacity=this._opacity,this._public.dispatchEvent(i)},get data(){return this.hasOwnProperty("_data")||(this._data={}),this._data},set data(t){var e="[MapKit] TileOverlay.data expected an Object, but got `"+t+"` instead.";a.checkType(t,"object",e),this._data=t},reload:function(){this.stale=!0;var t=new s.Event(n.RELOAD_EVENT);t.tileOverlay=this,this._public.dispatchEvent(t)},reloadComplete:function(){this.stale=!1},urlForImageLoader:function(t,e,i,n){if(this._urlTemplate){if("function"==typeof this._urlTemplate)return this._urlTemplate(t,e,i,n,this._data);var s=o(this._urlTemplate),r={};return this._data&&Object.keys(this._data).forEach(function(t){r[t]=this._data[t]},this),r.x=t,r.y=e,r.z=i,r.scale=n,a.fillTemplate(s,r)}},dispatchErrorForURL:function(t){var e=new s.Event("tile-error");e.tileOverlay=this._public,e.tileUrl=t,this._public.dispatchEvent(e)}},e.exports=n},{"@maps/dom-events":62,"@maps/js-utils":84}],33:[function(t,e,i){function n(t,e){Object.defineProperty(this,"_impl",{value:new o(this,t,e)})}var o=t("./tile-overlay-internal");n.prototype={constructor:n,get urlTemplate(){return this._impl.urlTemplate},set urlTemplate(t){this._impl.urlTemplate=t},get minimumZ(){return this._impl.minimumZ},set minimumZ(t){this._impl.minimumZ=t},get maximumZ(){return this._impl.maximumZ},set maximumZ(t){this._impl.maximumZ=t},get opacity(){return this._impl.opacity},set opacity(t){this._impl.opacity=t},get data(){return this._impl.data},set data(t){this._impl.data=t},reload:function(){this._impl.reload()}},e.exports=n},{"./tile-overlay-internal":32}],34:[function(t,e,i){function n(t,e){this.min=t,this.max=e}n.prototype={constructor:n,denormalize:function(){var t=this.min.copy(),e=this.max.copy();return e.x<t.x&&(e.x+=Math.pow(2,t.z)),new n(t,e)},toString:function(){return this.min.toString()+" -> "+this.max.toString()},equals:function(t){var e=this.denormalize(),i=t.denormalize();return i.min.x===e.min.x&&i.min.y===e.min.y&&i.max.x===e.max.x&&i.max.y===e.max.y&&i.min.z===e.min.z&&i.max.z===e.max.z}},e.exports=n},{}],35:[function(t,e,i){function n(t,e,i,n,s,a,r){o.EventTarget(this),this.key=t,this.x=e,this.y=i,this.z=n,this.settings=s,this.resolution=a,this.priority=r,this.tileImages=[]}var o=t("@maps/dom-events"),s=t("@maps/loaders"),a=t("@maps/js-utils"),r=t("./tile-image");n.Events={LoadSuccess:"tile-load-success",LoadFail:"tile-load-fail"},n.prototype={constructor:n,loading:!1,loaded:!1,get tileSources(){return(this.settings.showsDefaultTiles?this.settings.configuration.tileSources:[]).concat(this.settings.tileOverlays.map(function(t){return t._impl}).filter(function(t){return!!t.urlForImageLoader(this.x,this.y,this.z,this.resolution)},this)).filter(function(t){return(this.z>=t.minZoomLevel||"number"!=typeof t.minZoomLevel)&&(this.z<=t.maxZoomLevel||"number"!=typeof t.maxZoomLevel)},this)},schedule:function(){this.loaded||(this.tileImages.forEach(function(t){t.schedule()}),this.loading=!0)},unschedule:function(){this.tileImages.forEach(function(t){t.unschedule()}),this.loading=!1},_loadTileImages:function(){if(!this.loading){if(this.loaded){if(!this._containsCanceledTileImages())return;this.tileImages=[],this.loaded=!1}this.loading=!0;var t=this.tileSources;0!==t.length?(this._pendingTileImageLoads=t.length,t.forEach(this._loadTileImage,this)):this._allTileImagesDoneLoading()}},_loadTileImage:function(t){var e=this.settings,i=new r(this.x,this.y,this.z,t,e.language,e.showsPOI,this.resolution,this.priority);i.schedule(),this.tileImages.push(i),i.whenDoneLoading(this._tileImageDoneLoading.bind(this,t))},_requestTileImageLoadStatus:function(t,e){var i=a.xhr(e,t.image.src);i.open("GET",t.image.src,!0),i.send()},_tileImageDoneLoading:function(t,e){if(e._loader.state===s.State.Failed)if("function"==typeof t.dispatchErrorForURL)t.dispatchErrorForURL(e._loader.url);else{var i=new o.Event(n.Events.LoadFail);i.tileImage=e,this.dispatchEvent(i)}0===--this._pendingTileImageLoads&&this._allTileImagesDoneLoading()},_allTileImagesDoneLoading:function(){delete this._pendingTileImageLoads,this.loading=!1,this.loaded=!0,this._containsCanceledTileImages()||this.dispatchEvent(new o.Event(n.Events.LoadSuccess))},_containsCanceledTileImages:function(){return this.tileImages.some(function(t){return t.loaderState===s.State.Canceled})}},e.exports=n},{"./tile-image":30,"@maps/dom-events":62,"@maps/js-utils":84,"@maps/loaders":85}],36:[function(t,e,i){function n(t){c.call(this,t),this._pinchRecognizer=this.addRecognizer(new a.Pinch),this._pinchRecognizer.scaleThreshold=.1,this._doubleTapWithOneFingerRecognizer=this.addRecognizer(new a.Tap),this._doubleTapWithOneFingerRecognizer.numberOfTouchesRequired=1,this._doubleTapWithOneFingerRecognizer.numberOfTapsRequired=2,this._singleTapWithTwoFingersRecognizer=this.addRecognizer(new a.Tap),this._singleTapWithTwoFingersRecognizer.numberOfTouchesRequired=2,this._singleTapWithTwoFingersRecognizer.numberOfTapsRequired=1,this.map.node.element.addEventListener("wheel",this)}function o(t){return t.state===a.States.Began||t.state===a.States.Changed}var s=t("../../geo"),a=t("@maps/gesture-recognizers"),r=t("@maps/js-utils"),l=t("@maps/scheduler"),h=t("@maps/geometry/point"),c=t("./gesture-controller"),u=t("./camera"),d=Math.pow(1e-4,2.5);n.prototype=r.inheritPrototype(c,n,{decelerating:!1,stopDecelerating:function(){this.decelerating&&this._decelerationEnded()},destroy:function(){c.prototype.destroy.call(this),delete this._pinchRecognizer,delete this._doubleTapWithOneFingerRecognizer,delete this._singleTapWithTwoFingersRecognizer,this.map.node.element.removeEventListener("wheel",this),this.stopDecelerating()},get active(){return o(this._pinchRecognizer)||o(this._doubleTapWithOneFingerRecognizer)||o(this._singleTapWithTwoFingersRecognizer)},handleEvent:function(t){if("wheel"!==t.type){var e=t.target;switch(e){case this._pinchRecognizer:this._handlePinchChange(e);break;case this._doubleTapWithOneFingerRecognizer:this._handleDoubleTapWithOneFingerChange(e);break;case this._singleTapWithTwoFingersRecognizer:this._handleSingleTapWithTwoFingersChange(e)}}else this._handleWheelEvent(t)},performScheduledUpdate:function(){if(this._snapping,this.decelerating){var t=this.map,e=Date.now()-this._startTime;if(e>=this._decelerationDuration)return t.scaleCameraAroundMapPoint(this._adjustedScaleAtDecelerationEnd/this._scale,this._lastScaleCenter),void this._decelerationEnded();var i=this._scaleAtTime(e),n=(i-this._initialScale)/(this._scaleAtDecelerationEnd-this._initialScale);i+=this._scaleAdjustment*n,t.scaleCameraAroundMapPoint(i/this._scale,this._lastScaleCenter);var o=t.camera.zoom;o===t.minZoomLevel||o===this.maxZoomLevel?this.stopDecelerating():(this._scale=i,this._schedule())}},_centerWithRecognizer:function(t){return this._mapPointFromCentroid(t.locationInElement())},_mapPointFromCentroid:function(t){var e=this.map,i=e.node.convertPointFromPage(t);i=e.camera.transformGestureCenter(i);var n=e.visibleMapRect,o=e.camera.viewportSize;return new s.MapPoint(n.minX()+i.x/o.width*n.size.width,n.minY()+i.y/o.height*n.size.height)},_handlePinchChange:function(t){var e=this.map,i=e.camera,n=i.zoom;if(t.state===a.States.Began)this._singleTapWithTwoFingersRecognizer.enabled=!1,e.cameraWillStartZooming();else if(t.state===a.States.Ended||t.state===a.States.Changed){var o=t.scale;this._lastScaleCenter=this.centerForGesture(t),(o>1&&e.camera.zoom!==e.maxZoomLevel||o<1&&n!==e.minZoomLevel)&&(e.scaleCameraAroundMapPoint(o,this._lastScaleCenter),t.scale=1)}if((t.state===a.States.Ended||t.state===a.States.Failed)&&(this._singleTapWithTwoFingersRecognizer.enabled=!0,this._startDeceleratingWithVelocity(t.velocity),!this.decelerating)){var s=e.snapsToIntegralZoomLevels?Math.round(n):n,l=r.clamp(s,e.minZoomLevel,e.maxZoomLevel);n===l?e.cameraDidStopZooming():this._lastScaleCenter?e.scaleCameraAroundMapPoint(Math.pow(2,l-n),this._lastScaleCenter,!0):e.setCameraAnimated(new u(i.center,l,i.viewportSize,i.rotation),!0)}},_handleDoubleTapWithOneFingerChange:function(t){t.state===a.States.Recognized&&this._zoomWithTapRecognizer(t,t.modifierKeys.alt)},_handleSingleTapWithTwoFingersChange:function(t){t.state===a.States.Recognized&&this._zoomWithTapRecognizer(t,!0)},_handleWheelEvent:function(t){if(t.shiftKey&&!t.ctrlKey){t.preventDefault();var e=0,i=1+.0075*(e=t.deltaY>0?Math.sqrt(t.deltaY):-Math.sqrt(-t.deltaY)),n=this.map;this._wheelZooming||(n.cameraWillStartZooming(),this._wheelZooming=!0);var o=new h(t.clientX,t.clientY);this._lastScaleCenter=n.staysCenteredDuringZoom?n.transformCenter:this._mapPointFromCentroid(o);var s=n.camera.zoom;(i>1&&n.camera.zoom!==n.maxZoomLevel||i<1&&s!==n.minZoomLevel)&&n.scaleCameraAroundMapPoint(i,this._lastScaleCenter),this._wheelEndTimeout&&(clearTimeout(this._wheelEndTimeout),this._wheelEndTimeout=null),this._wheelEndTimeout=setTimeout(function(){this._wheelEndTimeout=!1,this._wheelZooming=!1;var t=n.camera.zoom,e=t;n.snapsToIntegralZoomLevels&&(e=Math.round(t));var i=r.clamp(e,n.minZoomLevel,n.maxZoomLevel);t===i?n.cameraDidStopZooming():n.scaleCameraAroundMapPoint(Math.pow(2,i-t),this._lastScaleCenter,!0)}.bind(this),100)}},_zoomWithTapRecognizer:function(t,e){var i=this.map,n=i.camera.zoom,o=e?-1:1,s=(e?Math.floor(n+.5):Math.ceil(n-.5))+o,a=n-r.clamp(s,i.minZoomLevel,i.maxZoomLevel);Math.abs(a)<.5||!i.cameraWillStartZooming(!0,!0)||i.setCameraAnimated(i.camera.withNewMapRect(i.visibleMapRect.scale(Math.pow(2,a),this.centerForGesture(t))),!0)},_startDeceleratingWithVelocity:function(t){Math.abs(t)<1||(this.decelerating=!0,this._startTime=Date.now(),this._initialScale=this._scale=1,this._initialVelocity=t/1e3,this._decelerationFactor=.98875,this._decelerationDuration=Math.log(d/Math.pow(this._initialVelocity,2))/(2*Math.log(this._decelerationFactor)),this._scaleAtDecelerationEnd=this._scaleAtTime(this._decelerationDuration),this._adjustedScaleAtDecelerationEnd=this._adjustScaleAtDecelerationEnd(this._scaleAtDecelerationEnd/this._scale),this._scaleAdjustment=this._adjustedScaleAtDecelerationEnd-this._scaleAtDecelerationEnd,this._schedule())},_adjustScaleAtDecelerationEnd:function(t){var e=this.map,i=e.camera.zoom,n=i+r.log2(t);if(e.snapsToIntegralZoomLevels){var o=Math.round(n);n>i&&o<=i?o=Math.ceil(n):n<i&&o>=i&&(o=Math.floor(n)),n=o}var s=r.clamp(n,e.minZoomLevel,e.maxZoomLevel);return Math.pow(2,s-i)},_schedule:function(){l.scheduleOnNextFrame(this)},_scaleAtTime:function(t){return Math.max(this._initialScale+this._decelerationFactor*this._initialVelocity*(Math.pow(this._decelerationFactor,t)-1)/(this._decelerationFactor-1),0)},_decelerationEnded:function(){this.decelerating=!1;var t=this.map;if(t.snapsToIntegralZoomLevels){var e=t.camera,i=t.snapsToIntegralZoomLevels?Math.round(e.zoom):e.zoom;t.setCameraAnimated(new u(e.center,i,e.viewportSize,e.rotation))}t.cameraDidStopZooming()}}),e.exports=n},{"../../geo":2,"./camera":12,"./gesture-controller":14,"@maps/geometry/point":69,"@maps/gesture-recognizers":72,"@maps/js-utils":84,"@maps/scheduler":106}],37:[function(t,e,i){e.exports=t("./src/scale-node")},{"./src/scale-node":45}],38:[function(t,e,i){"use strict";function n(t,e){if(!e)return this._targetOpacity=t,void(this.opacity=t);t!==this._targetOpacity&&(t!==this.opacity?(this._targetOpacity=t,this._startTime=Date.now(),this._startOpacity=this._opacity,s.scheduleOnNextFrame(this)):this._targetOpacity=t)}function o(){if("function"==typeof this.constructor.prototype.performScheduledUpdate&&this.constructor.prototype.performScheduledUpdate.call(this),null!==this._targetOpacity){if(this._targetOpacity===this.opacity)return this._startTime=null,this._startOpacity=null,void(this._targetOpacity=null);var t=Date.now()-this._startTime,e=this._targetOpacity-this._startOpacity,i=Math.abs(e*this._totalDurationMs),n=Math.min(t/i,1),o=a.easeInOut(n)*e+this._startOpacity;this.opacity=r.clamp(o,0,1),s.scheduleOnNextFrame(this)}}var s=t("@maps/scheduler"),a=t("../../../src/js/utils"),r=t("@maps/js-utils");e.exports=function(t,e){return t._targetOpacity=null,t._startOpacity=null,t._startTime=null,t._totalDurationMs=e||300,t.setOpacityAnimated=n,t.performScheduledUpdate=o,t}},{"../../../src/js/utils":225,"@maps/js-utils":84,"@maps/scheduler":106}],39:[function(t,e,i){"use strict";function n(){s.BaseNode.call(this),this._legend=null,this._segmentWidth=0,this._segmentStart=0,this._numberOfSegments=0,this._fillColor=null,this._strokeColor=null,this._renderer=new o(this)}var o=t("./render-legend"),s=t("../../scene-graph"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(s.BaseNode,n,{get legend(){return this._legend},set legend(t){this._legend=t,this.needsDisplay=!0},get segmentStart(){return this._segmentStart},set segmentStart(t){this._segmentStart=t,this.needsDisplay=!0},get segmentWidth(){return this._segmentWidth},set segmentWidth(t){this._segmentWidth=t,this.needsDisplay=!0},get numberOfSegments(){return this._numberOfSegments},set numberOfSegments(t){this._numberOfSegments=t,this.needsDisplay=!0},get fillColor(){return this._fillColor},set fillColor(t){this._fillColor=t,this.needsDisplay=!0},get strokeColor(){return this._strokeColor},set strokeColor(t){this._strokeColor=t,this.needsDisplay=!0},stringInfo:function(){var t="~"+this.fillColor+"/"+this.strokeColor+"~ ";return this._legend?"LegendNode<labels:["+this._legend.labels.slice(0,this.numberOfSegments+1).join(", ")+"], unit:"+this._legend.unit+")> "+t:"LegendNode "+t},measureTextOverflow:function(t,e){return this._renderer.measureTextOverflow(t,e)}}),e.exports=n},{"../../scene-graph":47,"./render-legend":42,"@maps/js-utils":84}],40:[function(t,e,i){"use strict";function n(){a.call(this),o(this,s.InnerTransitionDuration),this.lineWidth=s.OutlineWidth}var o=t("./animatable-opacity-mixin"),s=t("./scale-constants"),a=t("./rect-node"),r=t("@maps/js-utils");n.prototype=r.inheritPrototype(a,n,{stringInfo:function(){return"OutlineNode "+("~"+this.strokeColor+"~ ")}}),e.exports=n},{"./animatable-opacity-mixin":38,"./rect-node":41,"./scale-constants":44,"@maps/js-utils":84}],41:[function(t,e,i){"use strict";function n(){s.BaseNode.call(this),this._fillColor=null,this._strokeColor=null,this._lineWidth=null,this._innerStroke=!1,this._renderer=new o(this)}var o=t("./render-rect"),s=t("../../scene-graph"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(s.BaseNode,n,{get fillColor(){return this._fillColor},set fillColor(t){this._fillColor=t,this.needsDisplay=!0},get strokeColor(){return this._strokeColor},set strokeColor(t){this._strokeColor=t,this.needsDisplay=!0},get innerStroke(){return this._innerStroke},set innerStroke(t){this._innerStroke=t,this.needsDisplay=!0},get lineWidth(){return this._lineWidth},set lineWidth(t){this._lineWidth=t,this.needsDisplay=!0}}),e.exports=n},{"../../scene-graph":47,"./render-rect":43,"@maps/js-utils":84}],42:[function(t,e,i){"use strict";function n(t){s.RenderItem.call(this,t)}var o=t("./scale-constants"),s=t("../../scene-graph"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(s.RenderItem,n,{measureTextOverflow:function(t,e){var i=this._node;if(!i.legend)return 0;t.font=o.LegendFont;var n;n=e?i.legend.labels[0]:i.legend.labels[i.numberOfSegments];var s,a=t.measureText(n).width/2;return s=e?0:t.measureText(" "+i.legend.unit).width,a+s},draw:function(t){var e=this._node;if(e.legend){t.font=o.LegendFont,t.textAlign="center",t.textBaseline="bottom",t.lineWidth=o.LegendOuterStrokeWidth,t.fillStyle=e.fillColor,t.strokeStyle=e.strokeColor;for(var i=e.size.height-o.LegendMarginBottom-o.LegendSpacing,n=e.segmentStart,s=0;s<=e.numberOfSegments;s++){var a=e.legend.labels[s];t.strokeText(a,n,i),t.fillText(a,n,i),s===e.numberOfSegments?n+=t.measureText(a).width/2:n+=e.segmentWidth}var r=" "+e.legend.unit;t.textAlign="left",t.strokeText(r,n,i),t.fillText(r,n,i)}}}),e.exports=n},{"../../scene-graph":47,"./scale-constants":44,"@maps/js-utils":84}],43:[function(t,e,i){"use strict";function n(t){s.RenderItem.call(this,t)}var o=t("@maps/device-pixel-ratio"),s=t("../../scene-graph"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(s.RenderItem,n,{draw:function(t){var e=this._node,i=e.fillColor,n=e.strokeColor,s=e.lineWidth;i&&(t.fillStyle=i,t.fillRect(0,0,e.size.width,e.size.height)),n&&s&&(s>=1||o()>1)&&(t.lineWidth=s,t.strokeStyle=n,e.innerStroke?t.strokeRect(s/2,s/2,e.size.width-s,e.size.height-s):t.strokeRect(-s/2,-s/2,e.size.width+s,e.size.height+s))}}),e.exports=n},{"../../scene-graph":47,"@maps/device-pixel-ratio":61,"@maps/js-utils":84}],44:[function(t,e,i){"use strict";e.exports={GlobalFadeDuration:700,InnerTransitionDuration:200,MinimumNumberOfSegments:2,MaximumNumberOfSegments:5,MagicNumbers:[1.25,2.5,5],FirstMagicExponent:-3,LastMagicExponent:7,MaximumNumberOfDisplayedSegments:3,SegmentThickness:3,LegendHorizontalMargin:6,LegendMarginBottom:8,LegendSpacing:1,OutlineWidth:1,LightSegmentColorRegular:"rgba(255, 255, 255, 0.7)",DarkSegmentColorRegular:"rgba(0, 0, 0, 0.73)",OutlineColorRegular:"rgba(255, 255, 255, 0.5)",LightSegmentColorSatellite:"rgba(255, 255, 255, 0.8)",DarkSegmentColorSatellite:"rgba(178, 178, 178, 0.8)",OutlineColorSatellite:"rgba(0, 0, 0, 1)",SegmentInnerStrokeColor:"rgba(0, 0, 0, 0.2)",SegmentInnerStrokeWidth:.5,LegendFont:"9px '-apple-system-font', 'Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif'",LegendColorRegular:"rgba(72, 69, 65, 1)",LegendOuterStrokeColorRegular:"rgba(255, 255, 255, 0.5)",LegendColorSatellite:"rgba(255, 255, 255, 1)",LegentOuterStrokeColorSatellite:"rgba(0, 0, 0, 1)",LegendOuterStrokeWidth:1,MetersThreshold:500,FeetThreshold:.25,MilesToMeters:1609.344,MetersToMiles:1/1609.344,MilesToFeet:5280}},{}],45:[function(t,e,i){"use strict";function n(){c.GroupNode.call(this),this._needsLayout=!1,this._layoutCanvas=document.createElement("canvas"),this._layoutContext=this._layoutCanvas.getContext("2d"),this._distance=0,this._mapWidth=0,this._theme=n.Themes.Light,this._leftAligned=!1,this._l10n=null,this._segmentWidth=0,this._oldNumberOfSegments=0,this._legend={labels:[],unit:""},this._legendNode=this.addChild(new a),this._outlineNodes=[0,1].map(function(){return this.addChild(new r)},this),this._activeOutlineNode=this._outlineNodes[0],this._outlineNodes[1].opacity=0,this._segmentNodes=[0,1,2].map(function(t){return this.addChild(new u)},this),this._updateColors(),o(this,s.GlobalFadeDuration)}var o=t("./animatable-opacity-mixin"),s=t("./scale-constants"),a=t("./legend-node"),r=t("./outline-node"),l=t("@maps/geometry/rect"),h=t("@maps/scheduler"),c=t("../../scene-graph"),u=t("./segment-node"),d=t("@maps/js-utils"),p=.01;n.Themes={Light:"Light",Dark:"Dark"},n.prototype=d.inheritPrototype(c.GroupNode,n,{get layerBounds(){return new l(0,0,this.size.width,Math.max(this.size.height,48))},get distance(){return this._distance},set distance(t){Math.abs(t-this._distance)/this._distance<p||(this._distance=t,this._computeSegments(),this.needsLayout=!0)},get mapWidth(){return this._mapWidth},set mapWidth(t){t!==this._mapWidth&&(this._mapWidth=t,this._computeSegments(),this.needsLayout=!0)},get theme(){return this._theme},set theme(t){this._theme=t,this._updateColors()},get l10n(){return this._l10n},set l10n(t){this._l10n&&this._l10n.removeEventListener(this._l10n.Events.LocaleChanged,this),this._l10n=t,t&&t.addEventListener(t.Events.LocaleChanged,this)},get leftAligned(){return this._leftAligned},set leftAligned(t){this._leftAligned=t,this.needsLayout=!0},stringInfo:function(){return"ScaleNode<distance:"+Math.round(100*this.distance)/100+"m>"},get needsLayout(){return this._needsLayout},set needsLayout(t){this._needsLayout!==t&&(this._needsLayout=t,t&&h.scheduleASAP(this))},performScheduledUpdate:function(){this.needsLayout&&(this.layoutSubNodes(),this.needsLayout=!1)},layoutSubNodes:function(){for(var t=this._computeSegmentsRects(),e=0;e<s.MaximumNumberOfDisplayedSegments;e++){var i=t[this.leftAligned?e:t.length-1-e],n=this._segmentNodes[e];i?(n.position=i.origin,n.size=i.size,n.setOpacityAnimated(1,!0)):n.setOpacityAnimated(0,!0)}var o=l.unionOfRects(t).round();if(t.length!==this._oldNumberOfSegments){this._activeOutlineNode.setOpacityAnimated(0,!0);var a=0===this._outlineNodes.indexOf(this._activeOutlineNode)?1:0;this._activeOutlineNode=this._outlineNodes[a],this._activeOutlineNode.setOpacityAnimated(1,!0)}this._activeOutlineNode.position=o.origin,this._activeOutlineNode.size=o.size;var r=t[0];this._legendNode.segmentStart=r.origin.x,this._legendNode.segmentWidth=r.size.width,this._legendNode.size.width=this.size.width,this._legendNode.size.height=this.size.height,this._oldNumberOfSegments=t.length},handleEvent:function(t){this._computeSegments(),this.needsLayout=!0},_updateColors:function(t){var e=this.theme===n.Themes.Dark;this._legendNode.fillColor=e?s.LegendColorSatellite:s.LegendColorRegular,this._legendNode.strokeColor=e?s.LegentOuterStrokeColorSatellite:s.LegendOuterStrokeColorRegular;var i=e?[s.LightSegmentColorSatellite,s.DarkSegmentColorSatellite]:[s.DarkSegmentColorRegular,s.LightSegmentColorRegular];this._segmentNodes.forEach(function(t,n){t.fillColor=i[n%2],t.strokeColor=e?null:s.SegmentInnerStrokeColor},this);var o=e?s.OutlineColorSatellite:s.OutlineColorRegular;this._outlineNodes.forEach(function(t){t.strokeColor=o})},_computeSegments:function(){if(0!==this.size.width&&0!==this.mapWidth&&this._l10n){var t,e=this.size.width,i=this.mapWidth,n=this.distance*e/i,o=!this._l10n.useMetric(),a=!1,r=1;o&&(n*=s.MetersToMiles)<s.FeetThreshold&&(a=!0,n*=s.MilesToFeet);for(var l=s.FirstMagicExponent,h=!1;!h&&l<s.LastMagicExponent;l++)h=s.MagicNumbers.some(function(e){return t=e*Math.pow(10,l),(r=n/t)>=s.MinimumNumberOfSegments&&r<s.MaximumNumberOfSegments});this._segmentWidth=r?e/r:0;var c=t;o&&(a&&(t/=s.MilesToFeet),t*=s.MilesToMeters),this._computeLegend(t,c,a)}},_computeLegend:function(t,e,i){var n=0;this._l10n.useMetric()?t>s.MetersThreshold?(this._legend.unit=this._l10n.get("Scale.Kilometer.Short"),n=t/1e3):(this._legend.unit=this._l10n.get("Scale.Meter.Short"),n=t):(this._legend.unit=i?this._l10n.get("Scale.Feet.Short"):this._l10n.get("Scale.Mile.Short"),n=e);for(var o=[],a=0;a<s.MaximumNumberOfSegments;a++){var r=a*n;o.push(r.toString())}this._legend.labels=o,this._legendNode.legend=this._legend},_computeSegmentsRects:function(){for(var t=this._layoutContext,e=0,i=s.LegendHorizontalMargin+this._legendNode.measureTextOverflow(t,!0),n=this.size.height-s.LegendMarginBottom+s.LegendSpacing,o=this._segmentWidth,a=[],r=0;r<s.MaximumNumberOfDisplayedSegments;r++){var h=new l(i,n,o,s.SegmentThickness).round();if(a.push(h),i=h.origin.x+h.size.width,this._legendNode.numberOfSegments=a.length,e=this._legendNode.measureTextOverflow(t),i+o+e+s.LegendHorizontalMargin>this.size.width)break}0===this._oldNumberOfSegments&&(this._oldNumberOfSegments=a.length);var c=0;return this.leftAligned||(c=Math.round(this.size.width-i-e-s.LegendHorizontalMargin),a.forEach(function(t){t.origin.x+=c})),a}}),e.exports=n},{"../../scene-graph":47,"./animatable-opacity-mixin":38,"./legend-node":39,"./outline-node":40,"./scale-constants":44,"./segment-node":46,"@maps/geometry/rect":70,"@maps/js-utils":84,"@maps/scheduler":106}],46:[function(t,e,i){"use strict";function n(){a.call(this),o(this,s.InnerTransitionDuration),this.lineWidth=s.SegmentInnerStrokeWidth,this.innerStroke=!0}var o=t("./animatable-opacity-mixin"),s=t("./scale-constants"),a=t("./rect-node"),r=t("@maps/js-utils");n.prototype=r.inheritPrototype(a,n,{stringInfo:function(){return"SegmentNode "+("~"+this.fillColor+"~ ")}}),e.exports=n},{"./animatable-opacity-mixin":38,"./rect-node":41,"./scale-constants":44,"@maps/js-utils":84}],47:[function(t,e,i){e.exports={Scene:t("./src/model/scene"),BaseNode:t("./src/model/base-node"),GroupNode:t("./src/model/group-node"),ImageNode:t("./src/model/image-node"),RenderItem:t("./src/render/c2d/render-item"),NodeAnimator:t("./src/node-animator"),Size:t("@maps/geometry/size"),Point:t("@maps/geometry/point"),Matrix:t("@maps/css-matrix")}},{"./src/model/base-node":49,"./src/model/group-node":50,"./src/model/image-node":51,"./src/model/scene":52,"./src/node-animator":53,"./src/render/c2d/render-item":55,"@maps/css-matrix":58,"@maps/geometry/point":69,"@maps/geometry/size":71}],48:[function(t,e,i){function n(){var t=a;a=[];for(var e=[],i=0,n=t.length;i<n;++i){var s=t[i].scene;s&&o(e,s)&&s.renderer.update()}}function o(t,e){return-1===t.indexOf(e)&&(t.push(e),!0)}var s=t("@maps/scheduler"),a=[];e.exports={scheduleNode:function(t){o(a,t)&&1===a.length&&s.scheduleDraw(n)}}},{"@maps/scheduler":106}],49:[function(t,e,i){function n(){this._parent=null,this._children=[],this._renderer=null,this._opacity=1,this._size=new h,this._position=new c,this._transform=new d,this._frozen=!1,this._wantsLayerBacking=!1}function o(t){t._parent=null;for(var e=[t];e.length>0;){var i=e.pop();i.wasRemoved(),i._renderer&&"function"==typeof i._renderer.nodeWasRemoved&&i._renderer.nodeWasRemoved(),Array.prototype.push.apply(e,i.children)}}function s(t){for(var e=null,i=0,n=0;t&&!e;){var o=t.transform.transformPoint(t.position);i-=o.x,n-=o.y,e=(t=t.parent).element}return{element:e,offsetX:i,offsetY:n}}function a(t){return t<0?"":t+":"}function r(t){return t.childCount<1?"":"  "+t.childCount}function l(t,e,i,n,o){var s="";if(s+=e,o&&(s+=a(i)),s+=t.toString(),s+=r(t),0===n)return s;for(var h=t.children,c=0,u=h.length;c<u;++c){var d=t.childCount<1?-1:c;s+="\n",s+=l(h[c],e+"    ",d,n-1,o)}return s}var h=t("@maps/geometry/size"),c=t("@maps/geometry/point"),u=t("@maps/geometry/rect"),d=t("@maps/css-matrix"),p=t("@maps/web-point-converter"),m=t("../display-scheduler"),g=(new d).toString();n.prototype={constructor:n,get scene(){for(var e=t("./scene"),i=this;i;i=i._parent)if(i instanceof e)return i},get renderer(){return this._renderer},get wantsLayerBacking(){return this._frozen||this._wantsLayerBacking||this._needsLayerBacking()},set wantsLayerBacking(t){t!==this._wantsLayerBacking&&(this._wantsLayerBacking=t,this.needsDisplay=!0)},get frozen(){return this._frozen},set frozen(t){t!==this._frozen&&(this._frozen=t,this.needsDisplay=!0)},get opacity(){return this._opacity},set opacity(t){(t=Math.min(Math.max(0,t),1))!==this._opacity&&(this._opacity=t,this.needsDisplay=!0)},get position(){return this._position},set position(t){t.equals(this._position)||(this._position=t.copy(),this.needsDisplay=!0)},get transform(){return this._transform},set transform(t){this._transform=t,this.needsDisplay=!0},get size(){return this._size},set size(t){this._size=t||new h,this.needsDisplay=!0},get bounds(){return new u(this._position.x,this._position.y,this.size.width,this.size.height)},get layerBounds(){for(var t=new u(0,0,this.size.width,this.size.height),e=this._children,i=0,n=e.length;i<n;++i){var o=e[i],s=o.layerBounds;s.origin.x+=o._position.x,s.origin.y+=o._position.y;for(var a=o.transform,r=[a.transformPoint(new c(s.minX(),s.minY())),a.transformPoint(new c(s.maxX(),s.minY())),a.transformPoint(new c(s.maxX(),s.maxY())),a.transformPoint(new c(s.minX(),s.maxY()))],l=r[0].x,h=r[0].y,d=r[0].x,p=r[0].y,m=1;m<r.length;++m){var g=r[m];g.x<l&&(l=g.x),g.x>d&&(d=g.x),g.y<h&&(h=g.y),g.y>p&&(p=g.y)}t=t.unionWithRect(new u(l,h,d-l,p-h))}return t},set needsDisplay(t){t&&m.scheduleNode(this)},get parent(){return this._parent},get children(){return this._children},set children(t){for(var e=this._children;e.length;)this.removeChild(e[0]);for(var i=0,n=t.length;i<n;++i)this.addChild(t[i])},get childCount(){return this._children.length},get firstChild(){return this._children[0]||null},get lastChild(){return this._children[this._children.length-1]||null},get previousSibling(){if(!this._parent)return null;var t=this._parent._children,e=t.indexOf(this);return e>0?t[e-1]:null},get nextSibling(){if(!this._parent)return null;var t=this._parent._children,e=t.indexOf(this);return-1!==e&&e<t.length-1?t[e+1]:null},toString:function(){var t="";return this.element&&(t+=" "),this.wantsLayerBacking&&(t+=" "),this.frozen&&(t+=" "),this.stringInfo&&"function"==typeof this.stringInfo?t+=this.stringInfo():t+="UnknownNode",0===this.position.x&&0===this.position.y||(t+=" ("+this.position.x+", "+this.position.y+")"),0===this.size.width&&0===this.size.height||(t+=" "+this.size.width+"x"+this.size.height),1!==this.opacity&&(t+=" [opacity:"+this.opacity+"]"),this.transform.toString()!==g&&(t+=" ["+this.transform.toString()+"]"),this.animators&&this.animators.forEach(function(e){t+=" "+e.stringInfo()}),t},dump:function(t,e){return void 0===t&&(t=1/0),l(this,"",-1,t,!!e)},addChild:function(t,e){return t.remove(),(void 0===e||e<0||e>this._children.length)&&(e=this._children.length),this._children.splice(e,0,t),t._parent=this,this.needsDisplay=!0,t},insertBefore:function(t,e){return this.addChild(t,this._children.indexOf(e))},insertAfter:function(t,e){return this.addChild(t,this._children.indexOf(e)+1)},removeChild:function(t){if(t._parent===this){var e=this._children.indexOf(t);if(-1!==e)return this._children.splice(e,1),o(t),this.needsDisplay=!0,t}},remove:function(){if(this._parent instanceof n)return this._parent.removeChild(this)},wasRemoved:function(){},convertPointFromPage:function(t){if(this.element)return p.fromPageToElement(this.element,t);var e=s(this),i=p.fromPageToElement(e.element,t);return new c(i.x+e.offsetX,i.y+e.offsetY)},convertPointToPage:function(t){if(this.element)return p.fromElementToPage(this.element,t);var e=s(this),i=p.fromElementToPage(e.element,t);return new c(i.x-e.offsetX,i.y-e.offsetY)},_needsLayerBacking:function(){return this.opacity<1&&(this._children.length>1||1===this._children.length&&this._children[0]._children.length>0)}},e.exports=n},{"../display-scheduler":48,"./scene":52,"@maps/css-matrix":58,"@maps/geometry/point":69,"@maps/geometry/rect":70,"@maps/geometry/size":71,"@maps/web-point-converter":107}],50:[function(t,e,i){function n(){o.call(this),this._renderer=new s(this)}var o=t("./base-node"),s=t("../render/c2d/render-item"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(o,n,{stringInfo:function(){return"GroupNode"}}),e.exports=n},{"../render/c2d/render-item":55,"./base-node":49,"@maps/js-utils":84}],51:[function(t,e,i){function n(){a.call(this),this._image=null,this._renderer=new r(this)}var o=t("@maps/geometry/size"),s=t("@maps/js-utils"),a=t("./base-node"),r=t("../render/c2d/render-image");n.prototype=s.inheritPrototype(a,n,{get image(){return this._image},set image(t){this._image!==t&&(this._image&&this._image.removeEventListener("load",this),this._image=t,this._imageDidLoad(),!t||t.src&&t.complete||t.addEventListener("load",this))},stringInfo:function(){return"ImageNode"+(this._image?"<src:"+this._image.src+">":"")},handleEvent:function(t){t.target===this._image&&this._image.complete&&(this._image.removeEventListener("load",this),this._imageDidLoad(),this.needsDisplay=!0)},_imageDidLoad:function(){this.size.equals(o.Zero)&&(this.size=new o(this._image.width,this._image.height)),this.needsDisplay=!0}}),e.exports=n},{"../render/c2d/render-image":54,"./base-node":49,"@maps/geometry/size":71,"@maps/js-utils":84}],52:[function(t,e,i){function n(){o.call(this),this._renderer=new s(this),r.addEventListener("device-pixel-ratio-change",this)}var o=t("./base-node"),s=t("../render/c2d/render-scene"),a=t("@maps/js-utils"),r=t("@maps/device-pixel-ratio");n.prototype=a.inheritPrototype(o,n,{get element(){return this._renderer.element},destroy:function(){this.children=[],this._renderer._ctx=null,this._renderer._canvas.width=this._renderer._canvas.height=0,r.removeEventListener("device-pixel-ratio-change",this)},stringInfo:function(){return"Scene"},handleEvent:function(t){this.needsDisplay=!0}}),e.exports=n},{"../render/c2d/render-scene":56,"./base-node":49,"@maps/device-pixel-ratio":61,"@maps/js-utils":84}],53:[function(t,e,i){function n(t){this.node=t.node,this.node.animators||(this.node.animators=[]),this.node.animators.push(this),this.duration=t.duration,["from","to","done"].forEach(function(e){e in t&&null!=t[e]&&(this[e]=t[e])},this)}function o(t){n.call(this,t)}function s(t){n.call(this,t)}function a(t){n.call(this,t),["center","mass","stiffness","damping","initialVelocity"].forEach(function(e){e in t&&(this[e]=t[e])},this),this.mass>0&&(this.springSolver=new r(this.mass,this.stiffness,this.damping,this.initialVelocity))}function r(t,e,i,n){this.w0=Math.sqrt(e/t),this.zeta=i/(2*Math.sqrt(e*t)),this.zeta<1?(this.wd=this.w0*Math.sqrt(1-this.zeta*this.zeta),this.A=1,this.B=(this.zeta*this.w0-n)/this.wd):(this.wd=0,this.A=1,this.B=-n+this.w0)}var l=t("@maps/geometry/point"),h=t("@maps/css-matrix"),c=t("@maps/scheduler"),u=t("@maps/js-utils");n.prototype={from:0,to:1,done:u.noop,begin:function(){return this.beginDate=Date.now(),c.scheduleASAP(this),this},end:function(){this.node.animators.splice(this.node.animators.indexOf(this),1),0===this.node.animators.length&&delete this.node.animators,delete this.beginDate},performScheduledUpdate:function(){this.beginDate&&(this._p=Math.min((Date.now()-this.beginDate)/this.duration,1),this.update(this._p),this._p<1?c.scheduleOnNextFrame(this):this.ended())},ended:function(){this.end(),this.done(this)},valueAt:function(t){return this.from+t*(this.to-this.from)},stringInfo:function(t,e){var i=""+t+"<"+this.duration+"ms; "+this.from+""+this.to;return this._p>=0&&(i+="/"+Math.round(100*this._p)+"%"),this.hasOwnProperty("done")&&(i+="*"),i+(e||"")+">"}},o.prototype=u.inheritPrototype(n,o,{update:function(t){this.node.opacity=this.valueAt(t)},stringInfo:function(){return n.prototype.stringInfo.call(this,"opacity")}}),s.prototype=u.inheritPrototype(n,s,{from:new l(0,0),to:new l(0,0),update:function(t){this.node.transform=(new h).translate(this.from.x+t*(this.to.x-this.from.x),this.from.y+t*(this.to.y-this.from.y))},stringInfo:function(){return n.prototype.stringInfo.call(this,"translation")}}),a.prototype=u.inheritPrototype(n,a,{center:new l(0,0),scale:function(t){var e=this.center.x,i=this.center.y;this.node.transform=(new h).translate(e,i).scale(t).translate(-e,-i)},update:function(t){this.scale(this.valueAt(this.springSolver?this.springSolver.solve(t):t))},ended:function(){this.mass>0&&this.scale(this.to),n.prototype.ended.call(this)},stringInfo:function(){var t="";return 0===this.center.x&&0===this.center.y||(t+=" ("+this.center.x+", "+this.center.y+")"),this.mass>0&&(t+=""),n.prototype.stringInfo.call(this,"scale",t)}}),r.prototype.solve=function(t){return 1-(t=this.zeta<1?Math.exp(-t*this.zeta*this.w0)*(this.A*Math.cos(this.wd*t)+this.B*Math.sin(this.wd*t)):(this.A+this.B*t)*Math.exp(-t*this.w0))},e.exports={Opacity:o,Translation:s,Scale:a}},{"@maps/css-matrix":58,"@maps/geometry/point":69,"@maps/js-utils":84,"@maps/scheduler":106}],54:[function(t,e,i){function n(t){o.call(this,t)}var o=t("./render-item"),s=t("@maps/js-utils");n.prototype=s.inheritPrototype(o,n,{_lastDrawnImage:null,draw:function(t){this._node.image&&(this._node.image.complete?(this._lastDrawnImage=this._node.image,t.drawImage(this._node.image,0,0,this._node.size.width,this._node.size.height)):this._node.image===this._lastDrawnImage&&(this._node.needsDisplay=!0))}}),e.exports=n},{"./render-item":55,"@maps/js-utils":84}],55:[function(t,e,i){function n(t){this._node=t,this._layer=null}function o(t){0===a.length&&window.setTimeout(function(){a.forEach(function(t){t._node.scene||(t.layer=null)}),a=[]},0),a.push(t)}var s=t("@maps/device-pixel-ratio");n.prototype={constructor:n,get node(){return this._node},get frozen(){return!!this._frozenLayer},get layer(){var t=this._node;if(t.frozen&&this._frozenLayer)return this._frozenLayer;delete this._frozenLayer,this._layer||(this._layer=document.createElement("canvas"));var e=s(),i=t.layerBounds;this._layer.width=Math.ceil(i.size.width*e),this._layer.height=Math.ceil(i.size.height*e);var n=this._layer.getContext("2d");return n&&n.scale(e,e),t.frozen&&(this._frozenLayer=this._layer),this._layer},set layer(t){this._layer&&(this._layer.width=0),this._layer=t,t||delete this._frozenLayer},nodeWasRemoved:function(){this._layer&&o(this)},draw:function(t){}};var a=[];e.exports=n},{"@maps/device-pixel-ratio":61}],56:[function(t,e,i){function n(t){l.call(this,t),this._canvas=document.createElement("canvas"),this._ctx=this._canvas.getContext("2d")}function o(t,e,i,n,s,a){var r=t.renderer;s&&(r.layer=null);var l=r.frozen,h=t.wantsLayerBacking?r.layer:null;if(h||t.frozen||(r.layer=null),e&&(!t.wantsLayerBacking||h)&&0!==t.opacity){e.save(),e.translate(t.position.x,t.position.y);var c=t.transform;if(e.transform(c.a,c.b,c.c,c.d,c.e,c.f),a*=t.opacity,e.globalAlpha=a,!l||!t.frozen){var u=h?h.getContext("2d"):e;t.renderer.draw(u);for(var d=t.children,p=0,m=d.length;p<m;++p)o(d[p],u,i,n,s,h?1:a)}h&&0!==h.width&&0!==h.height&&e.drawImage(h,0,0,h.width/n,h.height/n),e.restore()}}var s=t("@maps/device-pixel-ratio"),a=t("@maps/geometry/rect"),r=t("@maps/js-utils"),l=t("./render-item");n.prototype=r.inheritPrototype(l,n,{get element(){return this._canvas},update:function(){if(this._ctx){var t=this._node,e=t.size,i=s(),n=!this._previousScale||this._previousScale!==i;!n&&this._previousSize&&this._previousSize.equals(e)?this._ctx.clearRect(0,0,e.width*i,e.height*i):(this._canvas.style.width=e.width+"px",this._canvas.style.height=e.height+"px",this._canvas.width=e.width*i,this._canvas.height=e.height*i,this._previousSize=e.copy(),this._previousScale=i),this._ctx.scale(i,i),o(this.node,this._ctx,new a(-t.position.x,-t.position.y,e.width,e.height),i,n,1),this._ctx.scale(1/i,1/i)}}}),e.exports=n},{"./render-item":55,"@maps/device-pixel-ratio":61,"@maps/geometry/rect":70,"@maps/js-utils":84}],57:[function(t,e,i){function n(){return/Trident/i.test(navigator.userAgent)}e.exports={add:function(t,e){if(t.classList)t.classList.add(e);else if(Boolean(e)&&"string"==typeof e){var i=this._classNames(t);i.indexOf(e)>=0||(i.push(e),this._classNames(t,i))}},remove:function(t,e){if(t.classList)t.classList.remove(e);else{var i=this._classNames(t),n=i.indexOf(e);n<0||(i.splice(n,1),this._classNames(t,i))}},toggle:function(t,e,i){return!t.classList||n()&&3===arguments.length?(void 0===i&&(i=!this.contains(t,e)),i?this.add(t,e):this.remove(t,e),i):void 0===i?t.classList.toggle(e):t.classList.toggle(e,i)},contains:function(t,e){return this._classNames(t).indexOf(e)>=0},_classNames:function(t,e){if(t&&e)t.className=e.join(" ");else if(t){var i=(t.className||"").trim();return i.length>0?i.split(" "):[]}}}},{}],58:[function(t,e,i){function n(){if(this._=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],6===arguments.length)this._setValues(["a","b","c","d","e","f"],arguments);else if(16===arguments.length)this._setValues(["m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44"],arguments);else if(1==arguments.length){var t=arguments[0];if("string"==typeof t){if("none"===t)return;t=t.match(/\bmatrix(?:3d)?\(([^)]+)\)/)[1].split(",").map(parseFloat)}6===t.length?this._setValues(["a","b","c","d","e","f"],t):16===t.length&&this._setValues(["m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44"],t)}}function o(t){return t/180*Math.PI}function s(t,e,i,n){return t*n-e*i}function a(t,e,i,n,o,a,r,l,h){return t*s(o,a,l,h)-n*s(e,i,l,h)+r*s(e,i,o,a)}function r(t,e){l(t,e);var i=t._determinant();if(Math.abs(i)<c)return!1;for(var n=0;n<4;n++)for(var o=0;o<4;o++)e._[n][o]=e._[n][o]/i;return!0}function l(t,e){var i=t._[0][0],n=t._[0][1],o=t._[0][2],s=t._[0][3],r=t._[1][0],l=t._[1][1],h=t._[1][2],c=t._[1][3],u=t._[2][0],d=t._[2][1],p=t._[2][2],m=t._[2][3],g=t._[3][0],_=t._[3][1],f=t._[3][2],y=t._[3][3];e._[0][0]=a(l,d,_,h,p,f,c,m,y),e._[1][0]=-a(r,u,g,h,p,f,c,m,y),e._[2][0]=a(r,u,g,l,d,_,c,m,y),e._[3][0]=-a(r,u,g,l,d,_,h,p,f),e._[0][1]=-a(n,d,_,o,p,f,s,m,y),e._[1][1]=a(i,u,g,o,p,f,s,m,y),e._[2][1]=-a(i,u,g,n,d,_,s,m,y),e._[3][1]=a(i,u,g,n,d,_,o,p,f),e._[0][2]=a(n,l,_,o,h,f,s,c,y),e._[1][2]=-a(i,r,g,o,h,f,s,c,y),e._[2][2]=a(i,r,g,n,l,_,s,c,y),e._[3][2]=-a(i,r,g,n,l,_,o,h,f),e._[0][3]=-a(n,l,d,o,h,p,s,c,m),e._[1][3]=a(i,r,u,o,h,p,s,c,m),e._[2][3]=-a(i,r,u,n,l,d,s,c,m),e._[3][3]=a(i,r,u,n,l,d,o,h,p)}var h=t("@maps/geometry/point"),c=1e-8;n.prototype={constructor:n,get a(){return this._[0][0]},get b(){return this._[0][1]},get c(){return this._[1][0]},get d(){return this._[1][1]},get e(){return this._[3][0]},get f(){return this._[3][1]},get m11(){return this._[0][0]},get m12(){return this._[0][1]},get m13(){return this._[0][2]},get m14(){return this._[0][3]},get m21(){return this._[1][0]},get m22(){return this._[1][1]},get m23(){return this._[1][2]},get m24(){return this._[1][3]},get m31(){return this._[2][0]},get m32(){return this._[2][1]},get m33(){return this._[2][2]},get m34(){return this._[2][3]},get m41(){return this._[3][0]},get m42(){return this._[3][1]},get m43(){return this._[3][2]},get m44(){return this._[3][3]},set a(t){this._[0][0]=t},set b(t){this._[0][1]=t},set c(t){this._[1][0]=t},set d(t){this._[1][1]=t},set e(t){this._[3][0]=t},set f(t){this._[3][1]=t},set m11(t){this._[0][0]=t},set m12(t){this._[0][1]=t},set m13(t){this._[0][2]=t},set m14(t){this._[0][3]=t},set m21(t){this._[1][0]=t},set m22(t){this._[1][1]=t},set m23(t){this._[1][2]=t},set m24(t){this._[1][3]=t},set m31(t){this._[2][0]=t},set m32(t){this._[2][1]=t},set m33(t){this._[2][2]=t},set m34(t){this._[2][3]=t},set m41(t){this._[3][0]=t},set m42(t){this._[3][1]=t},set m43(t){this._[3][2]=t},set m44(t){this._[3][3]=t},translate:function(t,e,i){return t=t||0,e=e||0,i=i||0,this._[3][0]+=t*this._[0][0]+e*this._[1][0]+i*this._[2][0],this._[3][1]+=t*this._[0][1]+e*this._[1][1]+i*this._[2][1],this._[3][2]+=t*this._[0][2]+e*this._[1][2]+i*this._[2][2],this._[3][3]+=t*this._[0][3]+e*this._[1][3]+i*this._[2][3],this},scale:function(t,e,i){return t=t||1,e=e||t,i=i||1,this._[0][0]*=t,this._[0][1]*=t,this._[0][2]*=t,this._[0][3]*=t,this._[1][0]*=e,this._[1][1]*=e,this._[1][2]*=e,this._[1][3]*=e,this._[2][0]*=i,this._[2][1]*=i,this._[2][2]*=i,this._[2][3]*=i,this},rotate:function(t){return this.rotateAxisAngle(0,0,1,t)},rotateAxisAngle:function(t,e,i,s){0===t&&0===e&&0===i&&(i=1);var a=Math.sqrt(t*t+e*e+i*i);1!=a&&(t/=a,e/=a,i/=a),s=o(s);var r=Math.sin(s),l=Math.cos(s),h=new n;if(1===t&&0===e&&0===i)h._[0][0]=1,h._[0][1]=0,h._[0][2]=0,h._[1][0]=0,h._[1][1]=l,h._[1][2]=r,h._[2][0]=0,h._[2][1]=-r,h._[2][2]=l,h._[0][3]=h._[1][3]=h._[2][3]=0,h._[3][0]=h._[3][1]=h._[3][2]=0,h._[3][3]=1;else if(0===t&&1===e&&0===i)h._[0][0]=l,h._[0][1]=0,h._[0][2]=-r,h._[1][0]=0,h._[1][1]=1,h._[1][2]=0,h._[2][0]=r,h._[2][1]=0,h._[2][2]=l,h._[0][3]=h._[1][3]=h._[2][3]=0,h._[3][0]=h._[3][1]=h._[3][2]=0,h._[3][3]=1;else if(0===t&&0===e&&1===i)h._[0][0]=l,h._[0][1]=r,h._[0][2]=0,h._[1][0]=-r,h._[1][1]=l,h._[1][2]=0,h._[2][0]=0,h._[2][1]=0,h._[2][2]=1,h._[0][3]=h._[1][3]=h._[2][3]=0,h._[3][0]=h._[3][1]=h._[3][2]=0,h._[3][3]=1;else{var c=1-l;h._[0][0]=l+t*t*c,h._[0][1]=e*t*c+i*r,h._[0][2]=i*t*c-e*r,h._[1][0]=t*e*c-i*r,h._[1][1]=l+e*e*c,h._[1][2]=i*e*c+t*r,h._[2][0]=t*i*c+e*r,h._[2][1]=e*i*c-t*r,h._[2][2]=l+i*i*c,h._[0][3]=h._[1][3]=h._[2][3]=0,h._[3][0]=h._[3][1]=h._[3][2]=0,h._[3][3]=1}return this.multiply(h)},multiply:function(t){var e=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];return e[0][0]=t._[0][0]*this._[0][0]+t._[0][1]*this._[1][0]+t._[0][2]*this._[2][0]+t._[0][3]*this._[3][0],e[0][1]=t._[0][0]*this._[0][1]+t._[0][1]*this._[1][1]+t._[0][2]*this._[2][1]+t._[0][3]*this._[3][1],e[0][2]=t._[0][0]*this._[0][2]+t._[0][1]*this._[1][2]+t._[0][2]*this._[2][2]+t._[0][3]*this._[3][2],e[0][3]=t._[0][0]*this._[0][3]+t._[0][1]*this._[1][3]+t._[0][2]*this._[2][3]+t._[0][3]*this._[3][3],e[1][0]=t._[1][0]*this._[0][0]+t._[1][1]*this._[1][0]+t._[1][2]*this._[2][0]+t._[1][3]*this._[3][0],e[1][1]=t._[1][0]*this._[0][1]+t._[1][1]*this._[1][1]+t._[1][2]*this._[2][1]+t._[1][3]*this._[3][1],e[1][2]=t._[1][0]*this._[0][2]+t._[1][1]*this._[1][2]+t._[1][2]*this._[2][2]+t._[1][3]*this._[3][2],e[1][3]=t._[1][0]*this._[0][3]+t._[1][1]*this._[1][3]+t._[1][2]*this._[2][3]+t._[1][3]*this._[3][3],e[2][0]=t._[2][0]*this._[0][0]+t._[2][1]*this._[1][0]+t._[2][2]*this._[2][0]+t._[2][3]*this._[3][0],e[2][1]=t._[2][0]*this._[0][1]+t._[2][1]*this._[1][1]+t._[2][2]*this._[2][1]+t._[2][3]*this._[3][1],e[2][2]=t._[2][0]*this._[0][2]+t._[2][1]*this._[1][2]+t._[2][2]*this._[2][2]+t._[2][3]*this._[3][2],e[2][3]=t._[2][0]*this._[0][3]+t._[2][1]*this._[1][3]+t._[2][2]*this._[2][3]+t._[2][3]*this._[3][3],e[3][0]=t._[3][0]*this._[0][0]+t._[3][1]*this._[1][0]+t._[3][2]*this._[2][0]+t._[3][3]*this._[3][0],e[3][1]=t._[3][0]*this._[0][1]+t._[3][1]*this._[1][1]+t._[3][2]*this._[2][1]+t._[3][3]*this._[3][1],e[3][2]=t._[3][0]*this._[0][2]+t._[3][1]*this._[1][2]+t._[3][2]*this._[2][2]+t._[3][3]*this._[3][2],e[3][3]=t._[3][0]*this._[0][3]+t._[3][1]*this._[1][3]+t._[3][2]*this._[2][3]+t._[3][3]*this._[3][3],this._=e,this},skewX:function(t){return this._skew(t,0)},skewY:function(t){return this._skew(0,t)},isAffine:function(){return 0==this._[0][2]&&0==this._[0][3]&&0==this._[1][2]&&0==this._[1][3]&&0==this._[2][0]&&0==this._[2][1]&&1==this._[2][2]&&0==this._[2][3]&&0==this._[3][2]&&1==this._[3][3]},inverse:function(){if(this._isIdentityOrTranslation())return 0==this._[3][0]&&0==this._[3][1]&&0==this._[3][2]?this:(this._[3][0]*=-1,this._[3][1]*=-1,this._[3][2]*=-1,this);var t=new n;return r(this,t)?t:new n},transformPoint:function(t){return new h(this._[0][0]*t.x+this._[1][0]*t.y+this._[2][0]*t.z+this._[3][0],this._[0][1]*t.x+this._[1][1]*t.y+this._[2][1]*t.z+this._[3][1],this._[0][2]*t.x+this._[1][2]*t.y+this._[2][2]*t.z+this._[3][2])},toString:function(){return this.isAffine()?"matrix("+[this._[0][0],this._[0][1],this._[1][0],this._[1][1],this._[3][0],this._[3][1]].join(", ")+")":"matrix3d("+this._.map(function(t){return t.join(", ")}).join(", ")+")"},_setValues:function(t,e){t.forEach(function(t,i){this[t]=e[i]},this)},_isIdentityOrTranslation:function(){return 1==this._[0][0]&&0==this._[0][1]&&0==this._[0][2]&&0==this._[0][3]&&0==this._[1][0]&&1==this._[1][1]&&0==this._[1][2]&&0==this._[1][3]&&0==this._[2][0]&&0==this._[2][1]&&1==this._[2][2]&&0==this._[2][3]&&1==this._[3][3]},_skew:function(t,e){var i=new n;return i._[0][1]=Math.tan(o(e)),i._[1][0]=Math.tan(o(t)),this.multiply(i)},_determinant:function(){var t=this._[0][0],e=this._[0][1],i=this._[0][2],n=this._[0][3],o=this._[1][0],s=this._[1][1],r=this._[1][2],l=this._[1][3],h=this._[2][0],c=this._[2][1],u=this._[2][2],d=this._[2][3],p=this._[3][0],m=this._[3][1],g=this._[3][2],_=this._[3][3];return t*a(s,c,m,r,u,g,l,d,_)-e*a(o,h,p,r,u,g,l,d,_)+i*a(o,h,p,s,c,m,l,d,_)-n*a(o,h,p,s,c,m,r,u,g)}},e.exports=n},{"@maps/geometry/point":59}],59:[function(t,e,i){function n(t,e,i){this.x=t||0,this.y=e||0,this.z=i||0}e.exports=n,n.Zero=new n,n.fromEvent=function(t){var e="undefined"!=typeof TouchEvent&&t instanceof TouchEvent?t.targetTouches[0]:t;return new n(e.pageX,e.pageY)},n.fromEventInElement=function(t,e){var i="undefined"!=typeof TouchEvent&&t instanceof TouchEvent?t.targetTouches[0]:t,o=window.webkitConvertPointFromPageToNode(e,new WebKitPoint(i.pageX,i.pageY));return new n(o.x,o.y)},n.prototype={constructor:n,toString:function(){return"Point["+[this.x,this.y,this.z].join(", ")+"]"},copy:function(){return new n(this.x,this.y,this.z)},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},distanceToPoint:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2)+Math.pow(this.z-t.z,2))}}},{}],60:[function(t,e,i){function n(){this._operations=[]}function o(t,e,i){this.x=c(t),this.y=c(e),this.z=c(i)}function s(t,e,i){this.x=c(t,1),this.y=c(e,this.x),this.z=c(i,1)}function a(t){this.angle=c(t)}function r(t,e){this.x=c(t),this.y=c(e)}function l(t,e,i,n){this.x=c(t),this.y=c(e),this.z=c(i),this.angle=c(n)}function h(){if(1===arguments.length)return arguments[0]+"px";for(var t=0,e=arguments.length,i=[];t<e;++t)i.push(h(arguments[t]));return i.join(", ")}function c(t,e){return null==t?e||0:t}function u(t,e){return t+"("+e+")"}n.prototype={constructor:n,translate:function(t,e,i){return this._operations.push(new o(t,e,i)),this},scale:function(t,e,i){return this._operations.push(new s(t,e,i)),this},rotate:function(t){return this._operations.push(new a(t)),this},rotate3d:function(t,e,i,n){return this._operations.push(new l(t,e,i,n)),this},skew:function(t,e){return this._operations.push(new r(t,e)),this},transform:function(t){return this._operations=this._operations.concat(t),this},toString:function(){return this._operations.map(function(t){return t.toString()}).join(" ")}},e.exports=n,o.prototype={constructor:o,toString:function(){return!this.x||this.y||this.z?!this.y||this.x||this.z?!this.z||this.x||this.y?this.z?u("translate3d",h(this.x,this.y,this.z)):u("translate",h(this.x,this.y)):u("translateZ",h(this.z)):u("translateY",h(this.y)):u("translateX",h(this.x))}},s.prototype={constructor:s,toString:function(){return 1!==this.x&&1===this.y&&1===this.z?u("scaleX",this.x):1!==this.y&&1===this.x&&1===this.z?u("scaleY",this.y):1!==this.z&&1===this.x&&1===this.y?u("scaleZ",this.z):1===this.z?this.x===this.y?u("scale",this.x):u("scale",[this.x,this.y].join(", ")):u("scale3d",[this.x,this.y,this.z].join(", "))}},a.prototype={constructor:a,toString:function(){return u("rotate",angle+"deg")}},r.prototype={constructor:r,toString:function(){return 0!==this.x&&0===this.y?u("skewX",this.x+"deg"):0!==this.y&&0===this.x?u("skewY",this.y+"deg"):u("skew",[this.x+"deg",this.y+"deg"].join(", "))}},l.prototype={constructor:a,toString:function(){return u("rotate3d",[this.x,this.y,this.z,this.angle].join(", ")+"deg")}}},{}],61:[function(t,e,i){function n(t,e){if(window.matchMedia){var i=window.matchMedia(t);"function"==typeof i.addListener&&(h=!0,i.addListener(e))}}function o(){return h?c:s()}function s(){return null!=r?r:"devicePixelRatio"in window?Math.max(Math.round(window.devicePixelRatio),1):"screen"in window&&"deviceXDPI"in window.screen&&"logicalXDPI"in window.screen?Math.max(Math.round(window.screen.deviceXDPI/window.screen.logicalXDPI),1):1}function a(){c=s();var t=new l.Event("device-pixel-ratio-change");t.value=o(),o.dispatchEvent(t)}var r,l=t("@maps/dom-events"),h=!1,c=s();n("(-webkit-device-pixel-ratio: 1)",a),n("(-moz-device-pixel-ratio: 1)",a),l.EventTarget(o),e.exports=o,e.exports.roundToDevicePixel=function(t){var e=o();return Math.round(t*e)/e},e.exports.simulateDevicePixelRatio=function(t){r=t,c=null==t?s():r,a()}},{"@maps/dom-events":62}],62:[function(t,e,i){function n(t){if(t)return t.addEventListener=n.prototype.addEventListener,t.removeEventListener=n.prototype.removeEventListener,t.dispatchEvent=n.prototype.dispatchEvent,t}function o(t){this.type=t,this.target=null,this.defaultPrevented=!1,this._stoppedPropagation=!1}e.exports={EventTarget:n,Event:o},n.prototype={constructor:n,addEventListener:function(t,e,i){if(i=i||null,console.assert(t,"Object.addEventListener: invalid event type ",t,"(listener: ",e,"thisObject: ",i,")"),!t)return!1;if(console.assert(e,"Object.addEventListener: invalid listener ",e,"(event type: ",t,"thisObject: ",i,")"),!e)return!1;this._listeners||(this._listeners={});var n=this._listeners[t];n||(n=this._listeners[t]=[]);for(var o=0;o<n.length;++o)if(n[o].listener===e&&n[o].thisObject===i)return!1;return n.push({thisObject:i,listener:e}),!0},removeEventListener:function(t,e,i){if(t=t||null,e=e||null,i=i||null,!this._listeners)return!1;if(!t){for(t in this._listeners)this.removeEventListener(t,e,i);return!1}var n=this._listeners[t];if(!n)return!1;for(var o=!1,s=n.length-1;s>=0;--s)if(e&&n[s].listener===e&&n[s].thisObject===i||!e&&i&&n[s].thisObject===i){n.splice(s,1),o=!0;break}return n.length||delete this._listeners[t],Object.keys(this._listeners).length||delete this._listeners,o},dispatchEvent:function(t){if(t.target=this,!this._listeners||!this._listeners[t.type]||t._stoppedPropagation)return!0;for(var e=this._listeners[t.type].slice(0),i=0;i<e.length;++i){var n=e[i].thisObject,o=e[i].listener;if(n||"function"==typeof o||"function"!=typeof o.handleEvent?o.call(n,t):o.handleEvent.call(o,t),t._stoppedPropagation)break}return!t.defaultPrevented}},o.prototype={constructor:o,stopPropagation:function(){this._stoppedPropagation=!0},preventDefault:function(){this.defaultPrevented=!0}}},{}],63:[function(t,e,i){var n=t("./src/types"),o=t("./src/functions"),s=t("./src/webgl");e.exports=function(t,e){t=t||0,e=e||0;var i={};return i.shouldTryCSR=[n,o,s].every(function(n){var o=n.fn(t,e);return i[n.name]=o,"object"==typeof o?o.capable:o}),i}},{"./src/functions":64,"./src/types":65,"./src/webgl":66}],64:[function(t,e,i){e.exports={name:"functions",fn:function(){return!!(Array.prototype.fill&&Uint8Array.from&&window.btoa)}}},{}],65:[function(t,e,i){e.exports={name:"types",fn:function(){return!!(Float32Array&&Float64Array&&Uint8Array&&Int32Array)}}},{}],66:[function(t,e,i){function n(t,e,i){return t.getParameter(t.MAX_TEXTURE_SIZE)>=4096&&t.getParameter(t.MAX_RENDERBUFFER_SIZE)>=2*e&&t.getParameter(t.MAX_RENDERBUFFER_SIZE)>=2*i&&t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>=8&&t.getParameter(t.MAX_VARYING_VECTORS)>=8&&t.getParameter(t.STENCIL_BITS)>=8}function o(t){return{VERSION:t.getParameter(t.VERSION),MAX_RENDERBUFFER_SIZE:t.getParameter(t.MAX_RENDERBUFFER_SIZE)}}e.exports={name:"webGL",fn:function(t,e){var i=document.createElement("canvas");i.width=i.height=0;var s=i.getContext("webgl",{antialias:!1,stencil:!0,failIfMajorPerformanceCaveat:!0});return!!s&&{capable:n(s,t,e),gpuInfo:o(s)}}}},{}],67:[function(t,e,i){"use strict";function n(t,e,i,n){1===arguments.length&&t&&"object"==typeof t?("x"in t&&(this.x=t.x),"y"in e&&(this.y=t.y),"z"in t&&(this.z=t.z),"w"in t&&(this.w=t.w)):arguments.length>0&&(this.x=t,arguments.length>1&&(this.y=e,arguments.length>2&&(this.z=i,arguments.length>3&&(this.w=n))))}n.prototype={_x:0,_y:0,_z:0,_w:1,get x(){return this._x},set x(t){if(null===t||isNaN(t))throw"[DOMPoint] `"+t+"` set for x is not a number";this._x=t},get y(){return this._y},set y(t){if(null===t||isNaN(t))throw"[DOMPoint] `"+t+"` set for y is not a number";this._y=t},get z(){return this._z},set z(t){if(null===t||isNaN(t))throw"[DOMPoint] `"+t+"` set for z is not a number";this._z=t},get w(){return this._w},set w(t){if(null===t||isNaN(t))throw"[DOMPoint] `"+t+"` set for w is not a number";this._w=t},matrixTransform:function(t){return console.warn("DOMPoint.matrixTransform is not implemented yet."),this}},e.exports=n},{}],68:[function(t,e,i){e.exports={Point:t("./point"),Size:t("./size"),Rect:t("./rect")}},{"./point":69,"./rect":70,"./size":71}],69:[function(t,e,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],70:[function(t,e,i){function n(t,e,i,n){this.origin=new o(t||0,e||0),this.size=new s(i||0,n||0)}e.exports=n;var o=t("./point"),s=t("./size");n.Zero=new n,n.rectFromClientRect=function(t){return new n(t.left,t.top,t.width,t.height)},n.unionOfRects=function(t){for(var e=t[0],i=1;i<t.length;++i)e=e.unionWithRect(t[i]);return e},n.prototype={constructor:n,toString:function(){return"Rect["+[this.origin.x,this.origin.y,this.size.width,this.size.height].join(", ")+"]"},copy:function(){return new n(this.origin.x,this.origin.y,this.size.width,this.size.height)},equals:function(t){return this.origin.equals(t.origin)&&this.size.equals(t.size)},inset:function(t,e,i,o){return new n(this.origin.x+t,this.origin.y+e,this.size.width-t-i,this.size.height-e-o)},pad:function(t){return new n(this.origin.x-t,this.origin.y-t,this.size.width+2*t,this.size.height+2*t)},minX:function(){return this.origin.x},minY:function(){return this.origin.y},midX:function(){return this.origin.x+this.size.width/2},midY:function(){return this.origin.y+this.size.height/2},maxX:function(){return this.origin.x+this.size.width},maxY:function(){return this.origin.y+this.size.height},intersectionWithRect:function(t){var e=new n,i=Math.max(this.minX(),t.minX()),o=Math.min(this.maxX(),t.maxX());if(i>o)return e;var s=Math.max(this.minY(),t.minY()),a=Math.min(this.maxY(),t.maxY());return s>a?e:(e.origin.x=i,e.origin.y=s,e.size.width=o-i,e.size.height=a-s,e)},unionWithRect:function(t){var e=Math.min(this.minX(),t.minX()),i=Math.min(this.minY(),t.minY());return new n(e,i,Math.max(this.maxX(),t.maxX())-e,Math.max(this.maxY(),t.maxY())-i)},round:function(){return new n(Math.floor(this.origin.x),Math.floor(this.origin.y),Math.ceil(this.size.width),Math.ceil(this.size.height))}}},{"./point":69,"./size":71}],71:[function(t,e,i){function n(t,e){this.width=t||0,this.height=e||0}e.exports=n,n.Zero=new n,n.prototype={constructor:n,toString:function(){return"Size["+this.width+", "+this.height+"]"},copy:function(){return new n(this.width,this.height)},equals:function(t){return this.width===t.width&&this.height===t.height}}},{}],72:[function(t,e,i){var n=t("./js/gesture-recognizer");e.exports={GestureRecognizer:n,SupportsTouches:n.SupportsTouches,States:n.States,LongPress:t("./js/long-press"),Pan:t("./js/pan"),Pinch:t("./js/pinch"),Rotation:t("./js/rotation"),Swipe:t("./js/swipe"),Tap:t("./js/tap"),View:t("./js/view")}},{"./js/gesture-recognizer":73,"./js/long-press":74,"./js/pan":75,"./js/pinch":76,"./js/rotation":77,"./js/swipe":78,"./js/tap":79,"./js/view":80}],73:[function(t,e,i){function n(){o.EventTarget.call(this),this._targetTouches=[],this._enabled=!0,this._target=null,this.view=null,this.state=n.States.Possible,this.delegate=null}var o=t("@maps/dom-events"),s=t("@maps/geometry/point"),a=t("@maps/web-point-converter");n.SupportsTouches="createTouch"in document,n.SupportsGestures=!!window.GestureEvent,n.States={Possible:"possible",Began:"began",Changed:"changed",Ended:"ended",Cancelled:"cancelled",Failed:"failed",Recognized:"ended"},n.Events={TouchStart:n.SupportsTouches?"touchstart":"mousedown",TouchMove:n.SupportsTouches?"touchmove":"mousemove",TouchEnd:n.SupportsTouches?"touchend":"mouseup",TouchCancel:"touchcancel",GestureStart:"gesturestart",GestureChange:"gesturechange",GestureEnd:"gestureend",StateChange:"statechange"},n.prototype=Object.create(o.EventTarget.prototype,{target:{get:function(){return this._target},set:function(t){t&&this._target!==t&&(this._target=t,this._initRecognizer())}},numberOfTouches:{get:function(){return this._targetTouches.length}},enabled:{get:function(){return this._enabled},set:function(t){this._enabled!==t&&(this._enabled=t,t||(0===this.numberOfTouches?(this._removeTrackingListeners(),this.reset()):this.enterCancelledState()),this._updateBaseListeners())}}}),n.prototype.constructor=n,n.prototype.modifierKeys={alt:!1,ctrl:!1,meta:!1,shift:!1},n.prototype.reset=function(){},n.prototype.locationInElement=function(t){for(var e=new s,i=this._targetTouches,n=0,o=i.length;n<o;++n){var r=i[n];e.x+=r.pageX,e.y+=r.pageY}return e.x/=o,e.y/=o,t?a.fromPageToElement(t,e):e},n.prototype.locationInClient=function(){for(var t=new s,e=this._targetTouches,i=0,n=e.length;i<n;++i){var o=e[i];t.x+=o.clientX,t.y+=o.clientY}return t.x/=n,t.y/=n,t},n.prototype.locationOfTouchInElement=function(t,e){var i=this._targetTouches[t];if(!i)return new s;var n=new s(i.pageX,i.pageY);return e?a.fromPageToElement(e,n):n},n.prototype.touchesBegan=function(t){t.currentTarget===this._target&&(window.addEventListener(n.Events.TouchMove,this,!0),window.addEventListener(n.Events.TouchEnd,this,!0),window.addEventListener(n.Events.TouchCancel,this,!0),this.enterPossibleState())},n.prototype.touchesMoved=function(t){},n.prototype.touchesEnded=function(t){},n.prototype.touchesCancelled=function(t){},n.prototype.gestureBegan=function(t){t.currentTarget===this._target&&(window.addEventListener(n.Events.GestureChange,this,!0),window.addEventListener(n.Events.GestureEnd,this,!0),this.enterPossibleState())},n.prototype.gestureChanged=function(t){},n.prototype.gestureEnded=function(t){},n.prototype.enterPossibleState=function(){this._setStateAndNotifyOfChange(n.States.Possible)},n.prototype.enterBeganState=function(){!this.delegate||"function"!=typeof this.delegate.gestureRecognizerShouldBegin||this.delegate.gestureRecognizerShouldBegin(this)?this._setStateAndNotifyOfChange(n.States.Began):this.enterFailedState()},n.prototype.enterEndedState=function(){this._setStateAndNotifyOfChange(n.States.Ended),this._removeTrackingListeners(),this.reset()},n.prototype.enterCancelledState=function(){this._setStateAndNotifyOfChange(n.States.Cancelled),this._removeTrackingListeners(),this.reset()},n.prototype.enterFailedState=function(){this._setStateAndNotifyOfChange(n.States.Failed),this._removeTrackingListeners(),this.reset()},n.prototype.enterChangedState=function(){this._setStateAndNotifyOfChange(n.States.Changed)},n.prototype.enterRecognizedState=function(){this._setStateAndNotifyOfChange(n.States.Recognized)},n.prototype.handleEvent=function(t){switch(this._updateTargetTouches(t),this._updateKeyboardModifiers(t),t.type){case n.Events.TouchStart:this.touchesBegan(t);break;case n.Events.TouchMove:this.touchesMoved(t);break;case n.Events.TouchEnd:this.touchesEnded(t);break;case n.Events.TouchCancel:this.touchesCancelled(t);break;case n.Events.GestureStart:this.gestureBegan(t);break;case n.Events.GestureChange:this.gestureChanged(t);break;case n.Events.GestureEnd:this.gestureEnded(t)}},n.prototype._initRecognizer=function(){this.reset(),this.state=n.States.Possible,this._updateBaseListeners()},n.prototype._updateBaseListeners=function(){this._target&&(this._enabled?(this._target.addEventListener(n.Events.TouchStart,this),n.SupportsGestures&&this._target.addEventListener(n.Events.GestureStart,this)):(this._target.removeEventListener(n.Events.TouchStart,this),n.SupportsGestures&&this._target.removeEventListener(n.Events.GestureStart,this)))},n.prototype._removeTrackingListeners=function(){window.removeEventListener(n.Events.TouchMove,this,!0),window.removeEventListener(n.Events.TouchEnd,this,!0),window.removeEventListener(n.Events.GestureChange,this,!0),window.removeEventListener(n.Events.GestureEnd,this,!0)},n.prototype._setStateAndNotifyOfChange=function(t){this.state=t,this.dispatchEvent(new o.Event(n.Events.StateChange))},n.prototype._updateTargetTouches=function(t){if(n.SupportsTouches){if(t instanceof TouchEvent)if(t.type!==n.Events.TouchStart)if(t.type!==n.Events.TouchMove){for(var e=t.touches,i=[],o=0,s=e.length;o<s;++o)i.push(e[o].identifier);this._targetTouches=this._targetTouches.filter(function(t){return-1!==i.indexOf(t.identifier)})}else{var a=this._targetTouches.map(function(t){return t.identifier});this._targetTouches=[];for(var r=t.touches,o=0,s=r.length;o<s;++o){var l=r[o];-1!==a.indexOf(l.identifier)&&this._targetTouches.push(l)}}else{this._targetTouches=[];for(var o=0,s=(r=t.targetTouches).length;o<s;++o)this._targetTouches.push(r[o])}}else t.type===n.Events.TouchEnd?this._targetTouches=[]:this._targetTouches=[t]},n.prototype._updateKeyboardModifiers=function(t){this.modifierKeys.alt=t.altKey,this.modifierKeys.ctrl=t.ctrlKey,this.modifierKeys.meta=t.metaKey,this.modifierKeys.shift=t.shiftKey},e.exports=n},{"@maps/dom-events":62,"@maps/geometry/point":82,"@maps/web-point-converter":83}],74:[function(t,e,i){function n(){this.allowableMovement=10,this.minimumPressDuration=500,this.numberOfTouchesRequired=1,this.allowsRightMouseButton=!1,o.call(this)}var o=t("./gesture-recognizer");n.prototype=Object.create(o.prototype),n.constructor=n,n.prototype.touchesBegan=function(t){t.currentTarget===this.target&&(2!==t.button||this.allowsRightMouseButton)&&(o.prototype.touchesBegan.call(this,t),this.numberOfTouches===this.numberOfTouchesRequired?(this._startPoint=this.locationInElement(),this._timerId=window.setTimeout(this.enterRecognizedState.bind(this),this.minimumPressDuration)):this.enterFailedState())},n.prototype.touchesMoved=function(t){t.preventDefault(),this._startPoint.distanceToPoint(this.locationInElement())>this.allowableMovement&&this.enterFailedState()},n.prototype.touchesEnded=function(t){this.state===o.States.Recognized?(t.preventDefault(),this.numberOfTouches!==this.numberOfTouchesRequired&&this.enterFailedState()):this.enterFailedState()},n.prototype.reset=function(){window.clearTimeout(this._timerId),delete this._timerId},e.exports=n},{"./gesture-recognizer":73}],75:[function(t,e,i){function n(){a.call(this)}function o(){return{start:new r,end:new r,dt:0}}function s(t){return t.dt<1?new r:new r((t.end.x-t.start.x)/t.dt*1e3,(t.end.y-t.start.y)/t.dt*1e3)}var a=t("./gesture-recognizer"),r=t("@maps/geometry/point");(n.prototype=Object.create(a.prototype,{velocity:{get:function(){if(Date.now()-this._lastTouchTime>100)return new r;var t=s(this._velocitySample);if(a.SupportsTouches&&this._previousVelocitySample.dt>0){var e=s(this._previousVelocitySample);t.x=.25*t.x+.75*e.x,t.y=.25*t.y+.75*e.y}return t}}})).constructor=n,n.prototype.minimumNumberOfTouches=1,n.prototype.maximumNumberOfTouches=1e5,n.prototype.translationThreshold=10,n.prototype.touchesBegan=function(t){t.currentTarget===this.target&&(t instanceof MouseEvent&&0!==t.button||(a.prototype.touchesBegan.call(this,t),this._numberOfTouchesIsAllowed()?(this._lastTouchTime=Date.now(),this._resetTrackedLocations(),1===this.numberOfTouches&&(this._travelledMinimumDistance=!1)):this.enterFailedState()))},n.prototype.touchesMoved=function(t){t.preventDefault();var e=Date.now(),i=this.locationInElement(),n=e-this._lastTouchTime;n>8&&(this._previousVelocitySample.start=this._velocitySample.start.copy(),this._previousVelocitySample.end=this._velocitySample.end.copy(),this._previousVelocitySample.dt=this._velocitySample.dt,this._velocitySample.start=this._lastTouchLocation.copy(),this._velocitySample.end=i,this._velocitySample.dt=n),this._travelledMinimumDistance?(this.translation.x+=i.x-this._lastTouchLocation.x,this.translation.y+=i.y-this._lastTouchLocation.y,this.enterChangedState()):this._canBeginWithTravelledDistance(new r(i.x-this._translationOrigin.x,i.y-this._translationOrigin.y))&&(this._travelledMinimumDistance=!0,this.enterBeganState()),this._lastTouchTime=e,this._lastTouchLocation=i},n.prototype.touchesEnded=function(t){this._numberOfTouchesIsAllowed()?this._resetTrackedLocations():this._travelledMinimumDistance?this.enterEndedState():this.enterFailedState()},n.prototype.reset=function(){this._velocitySample=o(),this._previousVelocitySample=o(),this._gestures=[],this.translation=new r,delete this._travelledMinimumDistance},n.prototype._travelledMinimumDistance=!1,n.prototype._previousVelocitySample=o(),n.prototype._velocitySample=o(),n.prototype._canBeginWithTravelledDistance=function(t){return Math.abs(t.x)>=this.translationThreshold||Math.abs(t.y)>=this.translationThreshold},n.prototype._numberOfTouchesIsAllowed=function(){return this.numberOfTouches>=this.minimumNumberOfTouches&&this.numberOfTouches<=this.maximumNumberOfTouches},n.prototype._resetTrackedLocations=function(){var t=this.locationInElement();this._lastTouchLocation=t,this._translationOrigin=t},e.exports=n},{"./gesture-recognizer":73,"@maps/geometry/point":82}],76:[function(t,e,i){function n(){o.call(this)}var o=t("./gesture-recognizer"),s=t("@maps/geometry/point"),a=!!window.GestureEvent;n.prototype=Object.create(o.prototype,{velocity:{get:function(){var t=this._gestures[this._gestures.length-1];if(!t)return this._velocity;var e=Date.now()-(t.timeStamp+100);if(e<=0)return this._velocity;var i=Math.max((500-e)/500,0);return this._velocity*i}}}),n.constructor=n,n.prototype.scaleThreshold=0,n.prototype.touchesBegan=function(t){if(t.currentTarget===this.target){if(a){if(2!==this.numberOfTouches)return}else{if(this.numberOfTouches>2)return void this.enterFailedState();if(2!==this.numberOfTouches)return;this._startDistance=this._distance(),this._recordGesture(1),this._scaledMinimumAmount=!1,this._updateStateWithEvent(t)}o.prototype.touchesBegan.call(this,t)}},n.prototype.touchesMoved=function(t){a||2===this.numberOfTouches&&this._updateStateWithEvent(t)},n.prototype.touchesEnded=function(t){a||this.numberOfTouches>=2||!this._startDistance||(this._scaledMinimumAmount?this.enterEndedState():this.enterFailedState())},n.prototype.gestureBegan=function(t){o.prototype.gestureBegan.call(this,t),this._recordGesture(t.scale),this._scaledMinimumAmount=!1,this._updateStateWithEvent(t),t.preventDefault()},n.prototype.gestureChanged=function(t){t.preventDefault(),this._updateStateWithEvent(t)},n.prototype.gestureEnded=function(t){this._scaledMinimumAmount?this.enterEndedState():this.enterFailedState()},n.prototype.reset=function(){this.scale=1,this._velocity=0,this._gestures=[],delete this._startDistance},n.prototype._scaledMinimumAmount=!1,n.prototype._recordGesture=function(t){var e=Date.now(),i=this._gestures.push({scale:t,timeStamp:e});if(!(i<=2)){for(var n=this._gestures[i-1].scale>=this._gestures[i-2].scale,o=i-3;o>=0;--o){var s=this._gestures[o];if(e-s.timeStamp>100||this._gestures[o+1].scale>=s.scale!==n)break}o>0&&(this._gestures=this._gestures.slice(o+1))}},n.prototype._updateStateWithEvent=function(t){var e=a?t.scale:this._distance()/this._startDistance;if(this._scaledMinimumAmount){this._recordGesture(e);var i=this._gestures[0],n=e-i.scale,o=Date.now()-i.timeStamp;this._velocity=0===o?0:n/o*1e3,this.scale*=e/this._gestures[this._gestures.length-2].scale,this.enterChangedState()}else Math.abs(1-e)>=this.scaleThreshold&&(this._scaledMinimumAmount=!0,this.scale=1,this.enterBeganState())},n.prototype._distance=function(){console.assert(2===this.numberOfTouches);var t=this._targetTouches[0],e=new s(t.pageX,t.pageY),i=this._targetTouches[1],n=new s(i.pageX,i.pageY);return e.distanceToPoint(n)},e.exports=n},{"./gesture-recognizer":73,"@maps/geometry/point":82}],77:[function(t,e,i){function n(){s.call(this)}function o(t,e){var i=t-e,n=t+180-e;return Math.abs(n)<Math.abs(i)?n:i}var s=t("./gesture-recognizer"),a=t("@maps/geometry/point"),r=!!window.GestureEvent;n.prototype=Object.create(s.prototype,{velocity:{get:function(){var t=this._gestures[this._gestures.length-1];if(!t)return this._velocity;var e=Date.now()-(t.timeStamp+100);if(e<=0)return this._velocity;var i=Math.max((500-e)/500,0);return this._velocity*i}}}),n.constructor=n,n.prototype.touchesBegan=function(t){if(t.currentTarget===this.target&&2===this.numberOfTouches&&(s.prototype.touchesBegan.call(this,t),!r))if(this.numberOfTouches>2)this.enterFailedState();else if(2===this.numberOfTouches){this._startAngle=this._angle();var t={rotation:0};this._recordGesture(t),this.enterBeganState()}},n.prototype.touchesMoved=function(t){r||2===this.numberOfTouches&&this._updateStateWithEvent(t)},n.prototype.touchesEnded=function(t){r||this.numberOfTouches>=2||null===this._startAngle||this.enterEndedState()},n.prototype.gestureBegan=function(t){s.prototype.gestureBegan.call(this,t),this._recordGesture(t),this.rotation=0,this.enterBeganState()},n.prototype.gestureChanged=function(t){t.preventDefault(),this.enterChangedState(),this._recordGesture(t);var e=this._gestures[0],i=o(t.rotation,e.rotation),n=Date.now()-e.timeStamp;this._velocity=i/n*1e3,this.rotation+=o(t.rotation,this._gestures[this._gestures.length-2].rotation)},n.prototype.gestureEnded=function(t){this.enterEndedState()},n.prototype.reset=function(){this.rotation=0,this._velocity=0,this._gestures=[],this._startAngle=null},n.prototype._recordGesture=function(t){var e=Date.now(),i=this._gestures.push({rotation:t.rotation,timeStamp:e});if(!(i<=2)){for(var n=this._gestures[i-1].rotation>=this._gestures[i-2].rotation,o=i-3;o>=0;--o){var s=this._gestures[o];if(e-s.timeStamp>100||this._gestures[o+1].rotation>=s.rotation!==n)break}o>0&&(this._gestures=this._gestures.slice(o+1))}},n.prototype._updateStateWithEvent=function(t){var e=r?t.rotation:this._angle()-this._startAngle;this._recordGesture({rotation:e});var i=this._gestures[0],n=e-i.rotation,o=Date.now()-i.timeStamp;this._velocity=0===o?0:n/o*1e3,this.rotation+=e-this._gestures[this._gestures.length-2].rotation,this.enterChangedState()},n.prototype._angle=function(){console.assert(2===this.numberOfTouches);var t=this._targetTouches[0],e=new a(t.pageX,t.pageY),i=this._targetTouches[1],n=new a(i.pageX,i.pageY);return 180*Math.atan2(e.y-n.y,e.x-n.x)/Math.PI},e.exports=n},{"./gesture-recognizer":73,"@maps/geometry/point":82}],78:[function(t,e,i){function n(){this.numberOfTouchesRequired=1,this.direction=n.Directions.Right,o.call(this)}var o=t("./gesture-recognizer"),s=t("@maps/geometry/point");n.Directions={Right:1,Left:2,Up:4,Down:8},n.prototype=Object.create(o.prototype),n.constructor=n,n.prototype.touchesBegan=function(t){t.currentTarget===this.target&&(this.numberOfTouchesRequired===this.numberOfTouches?(o.prototype.touchesBegan.call(this,t),this._translationOrigin=this.locationInElement()):this.enterFailedState())},n.prototype.touchesMoved=function(t){if(this.numberOfTouchesRequired===this.numberOfTouches){t.preventDefault();var e=this.locationInElement(),i=new s(e.x-this._translationOrigin.x,e.y-this._translationOrigin.y);this.state!==o.States.Recognized&&this.direction===n.Directions.Right&&i.x>100&&Math.abs(i.x)>Math.abs(i.y)&&this.enterRecognizedState(),this.state!==o.States.Recognized&&this.direction===n.Directions.Left&&i.x<-100&&Math.abs(i.x)>Math.abs(i.y)&&this.enterRecognizedState(),this.state!==o.States.Recognized&&this.direction===n.Directions.Up&&i.y<-100&&Math.abs(i.y)>Math.abs(i.x)&&this.enterRecognizedState(),this.state!==o.States.Recognized&&this.direction===n.Directions.Down&&i.y>100&&Math.abs(i.y)>Math.abs(i.x)&&this.enterRecognizedState()}else this.enterFailedState()},n.prototype.touchesEnded=function(t){this.enterFailedState()},e.exports=n},{"./gesture-recognizer":73,"@maps/geometry/point":82}],79:[function(t,e,i){function n(){this.numberOfTapsRequired=1,this.numberOfTouchesRequired=1,this.allowsRightMouseButton=!1,o.call(this)}var o=t("./gesture-recognizer"),s=t("@maps/web-point-converter"),a=t("@maps/geometry/point"),r=o.SupportsTouches?40:0;n.prototype=Object.create(o.prototype),n.constructor=n,n.prototype.touchesBegan=function(t){t.currentTarget===this.target&&(2!==t.button||this.allowsRightMouseButton)&&(o.prototype.touchesBegan.call(this,t),this.numberOfTouches===this.numberOfTouchesRequired?(this._startPoint=o.prototype.locationInElement.call(this),this._startClientPoint=o.prototype.locationInClient.call(this),this._rewindTimer(750)):this.enterFailedState())},n.prototype.touchesMoved=function(t){t.preventDefault(),this._startPoint.distanceToPoint(o.prototype.locationInElement.call(this))>r&&this.enterFailedState()},n.prototype.touchesEnded=function(t){++this._taps===this.numberOfTapsRequired&&(t.preventDefault(),this.enterRecognizedState(),this.reset()),this._rewindTimer(350)},n.prototype.reset=function(){this._taps=0,this._clearTimer()},n.prototype.locationInElement=function(t){var e=this._startPoint||new a;return t?s.fromPageToElement(t,e):e},n.prototype.locationInClient=function(){return this._startClientPoint||new a},n.prototype._clearTimer=function(){window.clearTimeout(this._timerId),delete this._timerId},n.prototype._rewindTimer=function(t){this._clearTimer(),this._timerId=window.setTimeout(this._timerFired.bind(this),t)},n.prototype._timerFired=function(){this.enterFailedState()},e.exports=n},{"./gesture-recognizer":73,"@maps/geometry/point":82,"@maps/web-point-converter":83}],80:[function(t,e,i){function n(t){this.element="string"==typeof t?document.getElementById(t):t,this.scale=1,this.rotation=this.x=this.y=this.z=0,this.transform={}}e.exports=n;t("./gesture-recognizer");n.prototype={constructor:n,set transform(t){this._x=this._getDefined(t.x,this._x,this.x),this._y=this._getDefined(t.y,this._y,this.y),this._z=this._getDefined(t.z,this._z,this.z),this._scale=this._getDefined(t.scale,this._scale,this.scale),this._rotation=this._getDefined(t.rotation,this._rotation,this.rotation),this.element.style.webkitTransform="translate3d("+this._x+"px, "+this._y+"px, "+this._z+") scale("+this._scale+") rotate("+this._rotation+"deg)"},addGestureRecognizer:function(t){t.target=this.element,t.view=this},_getDefined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t];return arguments[arguments.length-1]}}},{"./gesture-recognizer":73}],81:[function(t,e,i){arguments[4][58][0].apply(i,arguments)},{"@maps/geometry/point":82,dup:58}],82:[function(t,e,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],83:[function(t,e,i){function n(t){for(var e,i=t.getBoundingClientRect(),n=t.offsetWidth,a=t.offsetHeight,r=[new s(0,0),new s(n,0),new s(n,a),new s(0,a)],l=new o,h=t.ownerDocument.defaultView;t.nodeType===Node.ELEMENT_NODE;)e=h.getComputedStyle(t),l=new o(e.transform||e.MozTransform||e.msTransform||e.WebkitTransform).multiply(l),t=t.parentNode;var c=1/0,u=1/0;r.forEach(function(t){var e=l.transformPoint(t);c=Math.min(c,e.x),u=Math.min(u,e.y)});var d=window.pageXOffset+i.left-c,p=window.pageYOffset+i.top-u;return(new o).translate(d,p).multiply(l)}var o=t("@maps/css-matrix"),s=t("@maps/geometry/point");e.exports={fromPageToElement:function(t,e){if(window.webkitConvertPointFromPageToNode){var i=window.webkitConvertPointFromPageToNode(t,new WebKitPoint(e.x,e.y));return new s(i.x,i.y)}return n(t).inverse().transformPoint(e)},fromElementToPage:function(t,e){if(window.webkitConvertPointFromNodeToPage){var i=window.webkitConvertPointFromNodeToPage(t,new WebKitPoint(e.x,e.y));return new s(i.x,i.y)}return n(t).transformPoint(e)}}},{"@maps/css-matrix":81,"@maps/geometry/point":82}],84:[function(t,e,i){var n=Math.log(2),o=[/MSIE [5-9]\./,/Firefox\/[1-9]\./,/Firefox\/[1-2][0-9]\./,/Firefox\/3[0-1]\./,/Firefox\/[0-9]\./,/Firefox\/[1-2][0-9]\./,/Firefox\/3[0-6]\./,/Android [0-3]\./,/Android 4\.[0-3]\./],s=[/\(Macintosh; Intel Mac OS X 10.9*\)*/,/\(Macintosh; Intel Mac OS X 10_9*\)*/,/\(Macintosh; Intel Mac OS X 10_??;*\)*/,/\(Macintosh; Intel Mac OS X 10.??;*\)*/,/\(Macintosh; Intel Mac OS X 10_??_*\)*/,/\(Macintosh; Intel Mac OS X 10.??.*\)*/,/\(Macintosh; Intel Mac OS X 10_??\)*/,/\(Macintosh; Intel Mac OS X 10.??\)*/,/iP(hone|od|ad)/],a={KeyCodes:{Tab:9,Enter:13,Escape:27,SpaceBar:32,LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40},get iOSVersion(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]}},noop:function(){},isIE10:function(){return/MSIE 10/i.test(navigator.userAgent)},isEdge:function(){return/Edge\//i.test(navigator.userAgent)},isIEAndNotEdge:function(){return/MSIE|Trident\//i.test(navigator.userAgent)},isNode:function(){return"object"!=typeof window||window!==function(){return this}()},isUnsupportedBrowser:function(t){return o.some(function(e){return e.test(t)})},hasMapsApp:function(t){return s.some(function(e){return e.test(t)})},mod:function(t,e){return t-e*Math.floor(t/e)},log2:function(t){return Math.log(t)/n},clamp:function(t,e,i){return Math.max(e,Math.min(t,i))},inheritPrototype:function(t,e,i){var n={constructor:{enumerable:!0,value:e}};return Object.keys(i).forEach(function(t){var e=Object.getOwnPropertyDescriptor(i,t);e&&(n[t]=e)}),Object.create(t.prototype,n)},checkValueIsInEnum:function(t,e){return Object.keys(e).some(function(i){return e[i]===t})},required:function(t,e,i){if("checkNull"in(i=i||{})||(i.checkNull=!0),void 0===t||i.checkNull&&null===t)throw new Error(e||"Missing parameter");return this},checkType:function(t,e,i){if(typeof t!==e)throw new TypeError(i||"Expected `"+e+"` but got `"+typeof t+"`");if("number"===e&&isNaN(t))throw new TypeError(i||"Expected `"+e+"` but got `NaN`");if("object"===e&&t instanceof Array)throw new TypeError(i||"Expected a non-array object but got an array");return this},checkInstance:function(t,e,i){if(!(t instanceof e))throw new Error(i||"Unexpected object instance");return this},checkElement:function(t,e){if(!this.isElement(t))throw new Error(e||"Expected an Element");return this},checkArray:function(t,e){if(!Array.isArray(t))throw new Error(e||"Expected an array");return this},checkOptions:function(t,e){return null!==t&&void 0!==t?this.checkType(t,"object",e||"[MapKit] The `options` parameter is not a valid object."):t={},t},isElement:function(t){return t instanceof window.Node&&t.nodeType===window.Node.ELEMENT_NODE},get supportsLocalStorage(){if("_supportsLocalStorage"in this)return this._supportsLocalStorage;if(this._supportsLocalStorage=!1,a.isNode())return!1;try{if(!window.localStorage)return!1;if("function"!=typeof window.localStorage.setItem||"function"!=typeof window.localStorage.getItem||"function"!=typeof window.localStorage.removeItem)return!1;var t="storageTest";if(window.localStorage.setItem(t,t),window.localStorage.getItem(t)!==t)return!1;window.localStorage.removeItem(t),this._supportsLocalStorage=!0}catch(t){return!1}return this._supportsLocalStorage},fillTemplate:function(t,e,i){return t.replace(/{{(.*?)}}/g,function(t,n){var o=e[n];if(i&&!o)throw new Error("fillTemplate: Missing value for parameter: "+n);return o})},xhr:function(t){var e;return(e=new XMLHttpRequest).addEventListener("load",t),e.addEventListener("error",t),e.addEventListener("timeout",t),e},parseURL:function(t){var e=document.createElement("a");return e.href=t,e.protocol||(e.protocol=location.protocol),["href","protocol","hostname","port","pathname","search","hash"].reduce(function(t,i){return t[i]=e[i],t},{})},toQueryString:function(t,e){return null===t||"object"!=typeof t?"":(e||Object.keys(t)).reduce(function(e,i){var n=t[i];return n&&(console.assert("string"==typeof n,"toQueryString: only strings are allowed as values"),e.push(encodeURIComponent(i)+"="+encodeURIComponent(n))),e},[]).join("&")},splitStringAtSubStringAndReplace:function(t){var e=[],i=t.text.toLowerCase().indexOf(t.subString.toLowerCase());if(t.text&&!(i<0)&&t.replaceSubString){var n=t.text.substr(0,i);n&&e.push(t.replacePre?t.replacePre(n):n);var o=t.text.substr(i,t.subString.length);e.push(t.replaceSubString(t.subString,o));var s=t.text.substr(i+t.subString.length);return s&&e.push(t.replacePost?t.replacePost(s):s),e}},isSameOrigin:function(t,e){return t=this.parseURL(t),e=this.parseURL(e),t.hostname===e.hostname&&t.protocol===e.protocol},capitalize:function(t){return t?t[0].toUpperCase()+t.substr(1).toLowerCase():t},generateSessionIdValue:function(){return Math.floor(1e15*(9*Math.random()+1))},doNotTrack:function(){var t=window&&(window.navigator&&(navigator.doNotTrack||navigator.msDoNotTrack)||window.doNotTrack);return"1"===t||"yes"===t},supportsTouches:function(){return"createTouch"in document},isSpaceKey:function(t){return t.keyCode===this.KeyCodes.SpaceBar},isEnterKey:function(t){return t.keyCode===this.KeyCodes.Enter},isTabKey:function(t){return t.keyCode===this.KeyCodes.Tab}};a.noopConsole={log:a.noop,warn:a.noop,error:a.noop,assert:a.noop},a.isNode()&&(Object.defineProperty(a,"iOSVersion",{enumerable:!0,get:function(){}}),a.isIE10=a.isIEAndNotEdge=a.isElement=function(){return!1},a.xhr=function(t){function i(e){t.handleEvent({target:n,type:e})}var n=new(0,e.require("xmlhttprequest").XMLHttpRequest);return n.addEventListener("load",i.bind(null,"load")),n.addEventListener("error",i.bind(null,"error")),n.addEventListener("timeout",i.bind(null,"timeout")),n},a.parseURL=function(t){return e.require("url").parse(t)}),e.exports=a},{}],85:[function(t,e,i){e.exports={Priority:t("./lib/priority"),State:t("./lib/state"),Loader:t("./lib/loader"),ImageLoader:t("./lib/image-loader"),XHRLoader:t("./lib/xhr-loader")}},{"./lib/image-loader":86,"./lib/loader":87,"./lib/priority":89,"./lib/state":90,"./lib/xhr-loader":91}],86:[function(t,e,i){function n(t,e){s.call(this,t,e),this._image=null}var o=t("@maps/js-utils"),s=t("./loader");n.prototype=o.inheritPrototype(s,n,{get image(){return this._image},get url(){return this._image.src},reuse:function(t,e){console.assert(this._unscheduled,"Loader has not been unscheduled"),this.init(t,e)},loaderWillStart:function(){s.prototype.loaderWillStart.call(this),this._image||(this._image=document.createElement("img")),console.assert(this._delegate.urlForImageLoader,"ImageLoader._delegate.urlForImageLoader is not set"),this._image.src=this._delegate.urlForImageLoader,this._image.complete?this.loaderDidSucceed():(this._image.addEventListener("load",this),this._image.addEventListener("error",this))},handleEvent:function(t){switch(t.type){case"error":this.loaderDidFail(t.target);break;case"load":this.loaderDidSucceed()}},_reset:function(){this._image&&(this._image.removeEventListener("load",this),this._image.removeEventListener("error",this)),s.prototype._reset.call(this)}}),e.exports=n},{"./loader":87,"@maps/js-utils":92}],87:[function(t,e,i){function n(t,e){this.init(t,e)}var o=t("./manager"),s=t("./state");n.prototype={constructor:n,get state(){return this._state},schedule:function(){console.assert(!this._state,"Loader has already been scheduled"),this._state||(this._state=s.Waiting,o.schedule(this))},unschedule:function(){var t=!1;if(this._state===s.Waiting)t=o.unschedule(this);else{if(this._state!==s.Loading)return!1;o.loaderDidComplete(this),t=!0}return this._unscheduled=t,this._state=s.Canceled,"function"==typeof this._delegate.loaderDidCancel&&this._delegate.loaderDidCancel(this),this._reset(),t},loaderWillStart:function(){this._state=s.Loading,"function"==typeof this._delegate.loaderWillStart&&this._delegate.loaderWillStart(this)},loaderDidSucceed:function(t){this._state=s.Succeeded,o.loaderDidComplete(this),"function"==typeof this._delegate.loaderDidSucceed&&this._delegate.loaderDidSucceed(this,t),this._reset()},loaderDidFail:function(t){this._state=s.Failed,o.loaderDidComplete(this),"function"==typeof this._delegate.loaderDidFail&&this._delegate.loaderDidFail(this,t),this._reset()},init:function(t,e){this._delegate=e,this._state=s.Unscheduled,this._retries=0,this._timeoutID=-1,this.priority=t,this._unscheduled=!1},_reset:function(){clearTimeout(this._timeoutID)},_reload:function(){if(++this._retries<3){var t="number"==typeof this._delay?this._delay:1e4;this._timeoutID=setTimeout(this.loaderWillStart.bind(this),t)}else this.loaderDidFail()}},e.exports=n},{"./manager":88,"./state":90}],88:[function(t,e,i){function n(){for(var t in r){if(h[r[t]].length>0){if(c[r[t]]===l[r[t]])break;return h[r[t]][0]}if(c[r[t]]>0)break}return null}function o(){for(var t in r)if(h[r[t]].length>0)return h[r[t]].shift(),!0;return!1}function s(t){for(var e in r){var i=h[r[e]].indexOf(t);if(-1!==i)return h[r[e]].splice(i,1),!0}return!1}function a(){for(var t=n();t;)c[t.priority]++,o(),t.loaderWillStart(),t=n()}var r=t("./priority"),l=[];l[r.Highest]=12,l[r.High]=12,l[r.Medium]=4,l[r.Low]=1;var h=[],c=[];for(var u in r)h[r[u]]=[],c[r[u]]=0;e.exports={schedule:function(t){h[t.priority].push(t),a()},unschedule:function(t){return s(t)},loaderDidComplete:function(t){c[t.priority]--,a()}}},{"./priority":89}],89:[function(t,e,i){e.exports={Highest:0,High:1,Medium:2,Low:3}},{}],90:[function(t,e,i){e.exports={Unscheduled:0,Waiting:1,Loading:2,Canceled:3,Succeeded:4,Failed:5}},{}],91:[function(t,e,i){function n(t,e,i){var n=(i=i||{}).priority||a.Highest;s.call(this,n,e),this._url=t,this._method=i.method||"GET",this._retry=!0===i.retry,this._delay=i.delay,this._headers=i.headers,o.isNode()&&(this._origin=i.origin)}var o=t("@maps/js-utils"),s=t("./loader"),a=t("./priority");n.prototype=o.inheritPrototype(s,n,{get xhrData(){return this._xhrData},unschedule:function(){return this._xhr&&this._xhr.abort(),s.prototype.unschedule.call(this)},loaderWillStart:function(){if(s.prototype.loaderWillStart.call(this),this._xhr=o.xhr(this),this._xhr.open(this._method,this._url,!0),this._origin&&(this._xhr.setDisableHeaderCheck(!0),this._xhr.setRequestHeader("Origin",this._origin)),this._headers&&Object.keys(this._headers).forEach(function(t){this._xhr.setRequestHeader(t,this._headers[t])},this),"POST"===this._method&&!this._xhrData){if(this._xhrData=this._delegate.getDataToSend(this._xhr),!this._xhrData)return;console.assert("string"==typeof this._xhrData,"XHRLoader data has been set to a non-string value.")}this._xhr.send(this._xhrData)},handleEvent:function(t){"error"===t.type||"timeout"===t.type||200!==t.target.status?this._retry?s.prototype._reload.call(this):this.loaderDidFail(t.target):"load"===t.type?this.loaderDidSucceed(t.target):console.log("Unhandled XHR event type:",t.type," status:",t.target.status)}}),e.exports=n},{"./loader":87,"./priority":89,"@maps/js-utils":92}],92:[function(t,e,i){var n=Math.log(2),o=[/MSIE [5-8]\./,/Firefox\/[1-9]\./,/Firefox\/[1-2][0-9]\./,/Firefox\/3[0-1]\./,/Firefox\/[0-9]\./,/Firefox\/[1-2][0-9]\./,/Firefox\/3[0-6]\./,/Android [0-3]\./,/Android 4\.[0-3]\./],s=[/\(Macintosh; Intel Mac OS X 10.9*\)*/,/\(Macintosh; Intel Mac OS X 10_9*\)*/,/\(Macintosh; Intel Mac OS X 10_??;*\)*/,/\(Macintosh; Intel Mac OS X 10.??;*\)*/,/\(Macintosh; Intel Mac OS X 10_??_*\)*/,/\(Macintosh; Intel Mac OS X 10.??.*\)*/,/\(Macintosh; Intel Mac OS X 10_??\)*/,/\(Macintosh; Intel Mac OS X 10.??\)*/,/iP(hone|od|ad)/],a={KeyCodes:{Tab:9,Enter:13,Escape:27,SpaceBar:32,LeftArrow:37,UpArrow:38,RightArrow:39,DownArrow:40},get iOSVersion(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]}},noop:function(){},isIE9:function(){return/MSIE 9/i.test(navigator.userAgent)},isIE10:function(){return/MSIE 10/i.test(navigator.userAgent)},isEdge:function(){return/Edge\//i.test(navigator.userAgent)},isIEAndNotEdge:function(){return/MSIE|Trident\//i.test(navigator.userAgent)},isNode:function(){return"object"!=typeof window||window!==function(){return this}()},isUnsupportedBrowser:function(t){return o.some(function(e){return e.test(t)})},hasMapsApp:function(t){return s.some(function(e){return e.test(t)})},mod:function(t,e){return t-e*Math.floor(t/e)},log2:function(t){return Math.log(t)/n},clamp:function(t,e,i){return Math.max(e,Math.min(t,i))},inheritPrototype:function(t,e,i){var n={constructor:{enumerable:!0,value:e}};return Object.keys(i).forEach(function(t){var e=Object.getOwnPropertyDescriptor(i,t);e&&(n[t]=e)}),Object.create(t.prototype,n)},checkValueIsInEnum:function(t,e){return Object.keys(e).some(function(i){return e[i]===t})},required:function(t,e,i){if("checkNull"in(i=i||{})||(i.checkNull=!0),void 0===t||i.checkNull&&null===t)throw new Error(e||"Missing parameter");return this},checkType:function(t,e,i){if(typeof t!==e)throw new TypeError(i||"Expected `"+e+"` but got `"+typeof t+"`");if("number"===e&&isNaN(t))throw new TypeError(i||"Expected `"+e+"` but got `NaN`");if("object"===e&&t instanceof Array)throw new TypeError(i||"Expected a non-array object but got an array");return this},checkInstance:function(t,e,i){if(!(t instanceof e))throw new Error(i||"Unexpected object instance");return this},checkElement:function(t,e){if(!this.isElement(t))throw new Error(e||"Expected an Element");return this},checkArray:function(t,e){if(!Array.isArray(t))throw new Error(e||"Expected an array");return this},checkOptions:function(t,e){return null!==t&&void 0!==t?this.checkType(t,"object",e||"[MapKit] The `options` parameter is not a valid object."):t={},t},isElement:function(t){return t instanceof window.Node&&t.nodeType===window.Node.ELEMENT_NODE},get supportsLocalStorage(){if("_supportsLocalStorage"in this)return this._supportsLocalStorage;if(this._supportsLocalStorage=!1,a.isNode())return!1;try{if(!window.localStorage)return!1;if("function"!=typeof window.localStorage.setItem||"function"!=typeof window.localStorage.getItem||"function"!=typeof window.localStorage.removeItem)return!1;var t="storageTest";if(window.localStorage.setItem(t,t),window.localStorage.getItem(t)!==t)return!1;window.localStorage.removeItem(t),this._supportsLocalStorage=!0}catch(t){return!1}return this._supportsLocalStorage},fillTemplate:function(t,e,i){return t.replace(/{{(.*?)}}/g,function(t,n){var o=e[n];if(i&&!o)throw new Error("fillTemplate: Missing value for parameter: "+n);return o})},xhr:function(t){var e;return(e=new XMLHttpRequest).addEventListener("load",t),e.addEventListener("error",t),e.addEventListener("timeout",t),e},parseURL:function(t){var e=document.createElement("a");return e.href=t,e.protocol||(e.protocol=location.protocol),["href","protocol","hostname","port","pathname","search","hash"].reduce(function(t,i){return t[i]=e[i],t},{})},toQueryString:function(t,e){return null===t||"object"!=typeof t?"":(e||Object.keys(t)).reduce(function(e,i){var n=t[i];return n&&(console.assert("string"==typeof n,"toQueryString: only strings are allowed as values"),e.push(encodeURIComponent(i)+"="+encodeURIComponent(n))),e},[]).join("&")},splitStringAtSubStringAndReplace:function(t){var e=[],i=t.text.toLowerCase().indexOf(t.subString.toLowerCase());if(t.text&&!(i<0)&&t.replaceSubString){var n=t.text.substr(0,i);n&&e.push(t.replacePre?t.replacePre(n):n);var o=t.text.substr(i,t.subString.length);e.push(t.replaceSubString(t.subString,o));var s=t.text.substr(i+t.subString.length);return s&&e.push(t.replacePost?t.replacePost(s):s),e}},isSameOrigin:function(t,e){return t=this.parseURL(t),e=this.parseURL(e),t.hostname===e.hostname&&t.protocol===e.protocol},capitalize:function(t){return t?t[0].toUpperCase()+t.substr(1).toLowerCase():t},generateSessionIdValue:function(){return Math.floor(1e15*(9*Math.random()+1))},doNotTrack:function(){var t=window&&(window.navigator&&(navigator.doNotTrack||navigator.msDoNotTrack)||window.doNotTrack);return"1"===t||"yes"===t},supportsTouches:function(){return"createTouch"in document},isSpaceKey:function(t){return t.keyCode===this.KeyCodes.SpaceBar},isEnterKey:function(t){return t.keyCode===this.KeyCodes.Enter},isTabKey:function(t){return t.keyCode===this.KeyCodes.Tab}};a.noopConsole={log:a.noop,warn:a.noop,error:a.noop,assert:a.noop},a.isNode()&&(Object.defineProperty(a,"iOSVersion",{enumerable:!0,get:function(){}}),a.isIE9=a.isIE10=a.isIEAndNotEdge=a.isElement=function(){return!1},a.xhr=function(t){function i(e){t.handleEvent({target:n,type:e})}var n=new(0,e.require("xmlhttprequest").XMLHttpRequest);return n.addEventListener("load",i.bind(null,"load")),n.addEventListener("error",i.bind(null,"error")),n.addEventListener("timeout",i.bind(null,"timeout")),n},a.parseURL=function(t){return e.require("url").parse(t)}),e.exports=a},{}],93:[function(t,e,i){e.exports={"ar-SA":6,"ca-ES":1,"cs-CZ":1,"da-DK":1,"de-DE":1,"el-GR":1,"en-GB":1,"en-US":0,"en-ZA":0,"es-ES":1,"es-MX":1,"fi-FI":1,"fr-CA":0,"fr-FR":1,"hi-IN":0,"hr-HR":1,"hu-HU":1,"id-ID":1,"it-IT":1,"iw-IL":0,"ja-JP":0,"ko-KR":0,"ms-MY":1,"nb-NO":1,"nl-NL":1,"pl-PL":1,"pt-BR":0,"pt-PT":1,"ro-RO":1,"ru-RU":1,"sk-SK":1,"sv-SE":1,"th-TH":0,"tr-TR":1,"uk-UA":1,"vi-VN":1,"zh-CN":1,"zh-TW":0}},{}],94:[function(t,e,i){"use strict";e.exports={LangTag:t("./lib/lang-tag"),Locale:t("./lib/locale"),LanguageSupport:t("./lib/language-support"),L10n:t("./lib/l10n"),UseMetric:t("./lib/use-metric"),localizeDigits:t("./lib/localize-digits")}},{"./lib/l10n":95,"./lib/lang-tag":96,"./lib/language-support":97,"./lib/locale":98,"./lib/localize-digits":99,"./lib/use-metric":100}],95:[function(t,e,i){"use strict";function n(t){t.delegate.supportedLocales.forEach(function(e){var i=m.parse(e);s(t,i)})}function o(t){Object.keys(t.delegate.regionToScriptMap).forEach(function(e){t.scriptMap[e]=Object.create(null),Object.keys(t.delegate.regionToScriptMap[e]).forEach(function(i){var n=t.delegate.regionToScriptMap[e][i].toLowerCase();t.scriptMap[e][n]=i})})}function s(t,e){console.assert(e),console.assert(e.region);var i=e.language,n=e.region;t.supportMap[i]||(t.supportMap[i]=[]),-1!==t.delegate.primaryLocales.indexOf(e.tag)?t.supportMap[i].splice(0,0,n):t.supportMap[i].push(n)}function a(t,e){var i,n=e.language,o=e.region,s=e.script;console.assert(n,"L10n.delegate.bestMatch: required: `language`"),"he"===n&&(n="iw");var a=t.supportMap[n];if(!a)return null;if(o)(i=a.filter(function(t){return t.toUpperCase()===e.region.toUpperCase()})[0])||(i=a[0]);else if(s){var r=t.scriptMap[n];if(!r)return null;i=r[s.toLowerCase()]}else i=a[0];return new m(n,i)}function r(t,e,i){return console.assert(c(t,e)),console.assert(!(e in t.locales)),new p(e,i,t.delegate,t.dowForBestMatch(e))}function l(t,e){if(!t.activeLocale||t.activeLocale.localeId!==e){c(t,e)||(console.warn("Localizer: not a valid locale ID:",e),e=f);var i=t.locales[e];i||(i=r(t,e)).ready?h(t,i):i.load(function(e,i){if(e)return console.error(e.toString()),void h(t,t.locales[f]);h(t,i)})}}function h(t,e){t.locales[e.localeId]||(t.locales[e.localeId]=e),t.activeLocale=e;var i=new d.Event(u.Events.LocaleChanged);i.locale=e,t.dispatchEvent(i)}function c(t,e){return-1!==t.delegate.supportedLocales.indexOf(e)}function u(t){console.assert(!!t,"L10n constructor: delegate is `undefined`"),this.delegate=t,this.locales=t.localesCache||Object.create(null),this.supportMap=t.supportCache||Object.create(null),this.scriptMap=t.scriptCache||Object.create(null),h(this,this.locales[f]||r(this,f,this.delegate.enUSDictionary)),n(this),o(this)}var d=t("@maps/dom-events"),p=t("./locale"),m=t("./lang-tag"),g=t("../data/locale-to-dow.json"),_=t("./localize-digits"),f="en-US";u.Events={LocaleChanged:"locale-changed"},u.Days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},u.prototype={constructor:u,Events:u.Events,get:function(t,e){return console.assert(!!this.activeLocale,"L10n: no active locale"),this.activeLocale.get(t,e)},get localeId(){return this.activeLocale.localeId},set localeId(t){l(this,t)},get localeIds(){return Object.keys(locales)},get supportedLocaleIds(){return this.delegate.supportedLocales},bestMatch:function(t,e){var i=m.parse(t),n=null;return i&&this.delegate.localesMap&&this.delegate.localesMap[i.tag]&&(i=m.parse(this.delegate.localesMap[i.tag])),e=e||null,i&&(n=a(this,i)),n?n.tag:e},dowForBestMatch:function(t,e){return g[this.bestMatch(t,e)]},digits:function(t){return _(t,this.localeId)}},d.EventTarget(u.prototype),e.exports=u},{"../data/locale-to-dow.json":93,"./lang-tag":96,"./locale":98,"./localize-digits":99,"@maps/dom-events":62}],96:[function(t,e,i){"use strict";function n(t,e,i){this.language=t.toLowerCase(),e&&(this.region=e.toUpperCase(),console.assert(!this.script,"Can't have `region` and `script`.")),i&&(this.script=o.capitalize(i),console.assert(!this.region,"Can't have `region` and `script`."))}var o=t("@maps/js-utils");n.prototype={constructor:n,get tag(){var t=this.language;return this.region?t+"-"+this.region:this.script?t+"-"+this.script:t},toString:function(){var t="{ language: "+this.language;return this.region&&(t+=", region: "+this.region),this.script&&(t+=", script: "+this.script),t+" }"}},n.parse=function(t){var e,i,o;if(t&&"string"==typeof t){if(-1!==t.indexOf("_"))return console.warn("Invalid character: '_'"),null;var s=t.split("-");if(2!==(e=s[0]).length)return console.warn("Invalid language:",t),null;if(2===s.length){var a=s[1],r=a.length;if(4===r)o=a;else{if(!(r>1&&r<4))return console.warn("Don't know how to parse:",t),null;i=a}}else if(s.length>2)return console.warn("Don't know how to parse language tags with more than 2 parts:",t),null;return new n(e,i,o)}return null},e.exports=n},{"@maps/js-utils":101}],97:[function(t,e,i){"use strict";function n(t,e){console.assert(t,"LanguageSupport.add: `langTag` is null.");var i=t.language,n=t.region,o=t.script;e[i]||(e[i]={regions:[],scripts:[]}),n&&e[i].regions.push(n),o&&e[i].scripts.push(o)}function o(t,e,i){var n=t.language,o=t.region,s=t.script;console.assert(n,"LanguageSupport._bestMatch: required: `language`"),"iw"===n&&(n="he");var r=i[n];if(!r)return null;if(o){console.assert(!s,"LanguageSupport._bestMatch: can't match on `region` + `script`");var l=r.regions.filter(function(e){return e.toUpperCase()===t.region.toUpperCase()})[0];if(l)return new a(n,l);var h=e[n];if(!h)return new a(n);t.script=s=h[o.toUpperCase()],o=null}if(s){console.assert(!o,"LanguageSupport._bestMatch: can't match on `region` + `script`");var c=r.scripts.filter(function(e){return e.toUpperCase()===t.script.toUpperCase()})[0];return new a(n,null,c)}return new a(n)}function s(t){console.assert(!!t,"LanguageSupport constructor: delegate is `undefined`"),this.supportMap=Object.create(null),this.delegate=t,this.delegate.supportedLocales.forEach(function(t){n(a.parse(t),this.supportMap)},this)}var a=t("./lang-tag");s.prototype={constructor:s,bestMatch:function(t,e){var i=a.parse(t),n=null;return i&&this.delegate.localesMap&&this.delegate.localesMap[i.tag]&&(i=a.parse(this.delegate.localesMap[i.tag])),e=e||null,i&&(n=o(i,this.delegate.regionToScriptMap,this.supportMap)),n?n.tag:e}},s.parseAcceptLanguage=function(t){return t?t.split(",").map(function(t){if(!t)return null;var e=t.split(";");return{langTag:a.parse(e[0]),quality:e[1]?parseFloat(e[1].split("=")[1]):1}}).filter(function(t){return!!t}).sort(function(t,e){return e.quality-t.quality}):null},e.exports=s},{"./lang-tag":96}],98:[function(t,e,i){"use strict";function n(t,e,i,n){this.localeId=t,this._dict=e||{},this.ready=!!e,this.localeUrl=i.localeUrl,this.rtl=i.rtlLocales.indexOf(t)>-1,this.dow=n}var o=t("@maps/js-utils"),s=t("@maps/loaders").XHRLoader;n.prototype={constructor:n,get:function(t,e){var i=this._dict[t];return i?(e=e||{},o.fillTemplate(i,e,!0)):"["+t+"]"},load:function(t){console.assert("function"==typeof t);var e=this,i=this.localeUrl.replace(/{{(.*?)}}/,this.localeId);new s(i,{loaderDidSucceed:function(i,n){var o;if(n.status<200||n.status>=300)return o="HTTP error "+n.status+" loading strings for locale: "+e.localeId,void t(new Error(o));try{e._dict=JSON.parse(n.responseText)}catch(i){return o="Failed to parse response for locale: "+e.localeId,void t(new Error(o))}e.ready=!0,t(null,e)},loaderDidFail:function(i,n){var o="Network error loading strings for locale: "+e.localeId;t(new Error(o))}}).schedule()}},e.exports=n},{"@maps/js-utils":101,"@maps/loaders":85}],99:[function(t,e,i){var n=["0","1","2","3","4","5","6","7","8","9"],o={"ar-SA":["","","","","","","","","",""],"hi-IN":["","","","","","","","","",""]},s=".",a={"ca-ES":",","ca-CZ":",","da-DK":",","da-DE":",","el-GR":",","en-ZA":",","es-ES":",","fi-FI":",","fr-CA":",","fr-FR":",","hr-HR":",","hu-HU":",","it-IT":",","nb-NO":",","nl-NL":",","pl-PL":",","pt-BR":",","pt-PT":",","ro-RO":",","ru-RU":",","sk-SK":",","sv-SE":",","tr-TR":",","uk-UA":","};e.exports=function(t,e){for(var i=o[e]||n,r=a[e]||s,l="",h=t.toString(),c=0,u=h.length;c<u;++c){var d=h.charAt(c);l+=d===s?r:i[parseInt(d,10)]||d}return l}},{}],100:[function(t,e,i){"use strict";var n=["AS","BS","BZ","DM","FK","GB","GD","GU","KN","KY","LC","LR","MM","MP","SH","TC","US","VC","VG","VI","WS"];e.exports={forRegion:function(t){return!!t&&n.indexOf(t)<0},forLanguageTag:function(t){var e=t.region;return e?n.indexOf(e)<0:"en"!==t.language&&"my"!==t.language}}},{}],101:[function(t,e,i){arguments[4][92][0].apply(i,arguments)},{dup:92}],102:[function(t,e,i){function n(t){t?m(t)?this.element=t:"string"==typeof t||t instanceof String?this.element=c(t):"object"==typeof t&&(this.element=u(t)):this.element=document.createElement("div"),this._parent=null,this._children=[],this._opacity=1,this._color="",this._size=new w,this._position=new b,this._transform=new C,this._backgroundImages=[],this._classList=new y(this),this._wantsHardwareCompositing=!1,this._dirtyProperties=[],this._dirtyAttributes={},this._deferredUpdates=[],this._pendingDOMManipulation=M.None}function o(t,e){e?(d(E,t),S.scheduleDraw(s)):p(E,t)}function s(){E.forEach(a),E=[],x.forEach(r),x=[],n.updates++,O.dispatchEvent(new v.Event(A))}function a(t){if(t._pendingDOMManipulation===M.Removal){var e=t.element.parentNode;e&&e.removeChild(t.element)}t._dirtyProperties.forEach(function(e){l(t,e)}),t._dirtyProperties=[],Object.getOwnPropertyNames(t._dirtyAttributes).forEach(function(e){t.element.setAttribute(e,t._dirtyAttributes[e])}),t._dirtyAttributes={},t._pendingDOMManipulation===M.Addition&&d(x,t.parent)}function r(t){for(var e=null,i=t.element,n=t.children.length-1;n>=0;--n){var o=t.children[n],s=o.element;o._pendingDOMManipulation===M.Addition&&(i.insertBefore(s,e),o._pendingDOMManipulation=M.None),e=s}}function l(t,e){var i=t.element,n=i.style;switch(e){case"opacity":n.opacity=t._opacity;break;case"color":n.color=t._color;break;case"size":n.width=t._size.width+"px",n.height=t._size.height+"px";break;case"position":case"transform":var o=(new C).translate(T.roundToDevicePixel(t._position.x),T.roundToDevicePixel(t._position.y)).transform(t._transform);k&&t._wantsHardwareCompositing&&o.rotate3d(0,0,0,0),n.transform=n.webkitTransform=n.msTransform=o;break;case"backgroundImages":h(t);break;case"classList":i.className=t._classList,t._classList.reset();break;default:return}}function h(t){var e=t.element.style;if(!t._backgroundImages.length)return e.removeProperty("background-image"),e.removeProperty("background-position"),void e.removeProperty("background-size");for(var i=[],n=[],o=[],s=t._backgroundImages,a=s.length-1;a>=0;--a){var r=s[a];i.push("url("+r.url+")"),n.push(r.position.x+"px "+r.position.y+"px"),o.push(r.size.width+"px "+r.size.height+"px")}e.backgroundImage=i.join(","),e.backgroundPosition=n.join(","),e.backgroundSize=o.join(",")}function c(t){var e=document.createElement("div");return e.innerHTML=t,e.firstElementChild}function u(t){var e=t.name;if("#text"===e)return document.createTextNode(t.value);var i=document.createElement(e),n=t.attributes;for(var o in n)i.setAttribute(o,n[o]);return t.children instanceof Array&&t.children.forEach(function(t){i.appendChild(u(t))}),i}function d(t,e){return-1===t.indexOf(e)&&(t.push(e),!0)}function p(t,e){var i=t.indexOf(e);return-1!==i&&(t.splice(i,1),!0)}function m(t){return t instanceof window.Node&&t.nodeType===window.Node.ELEMENT_NODE}function g(t){return t<0?"":t+":"}function _(t){return t.childCount<1?"":"  "+t.childCount}function f(t,e,i,n){var o="";o+=e,n&&(o+=g(i)),o+=t.toString(),o+=_(t);for(var s=t.children,a=0,r=s.length;a<r;++a){var l=t.childCount<1?-1:a;o+="\n",o+=f(s[a],e+"    ",l,n)}return o}function y(t){this._node=t,this.reset()}var v=t("@maps/dom-events"),w=t("@maps/geometry/size"),b=t("@maps/geometry/point"),C=t("@maps/css-transform"),S=t("@maps/scheduler"),L=t("@maps/web-point-converter"),T=t("@maps/device-pixel-ratio"),E=[],x=[],M={None:0,Removal:1,Addition:2},A="update",k=function(){var t=document.createElement("div");return t.style.msTransform="translate3d(2px, 2px, 2px)","none"!==window.getComputedStyle(t).msTransform}();n.updates=0,n.prototype={constructor:n,get classList(){return this._classList},get wantsHardwareCompositing(){return this._wantsHardwareCompositing},set wantsHardwareCompositing(t){t!==this._wantsHardwareCompositing&&(this._wantsHardwareCompositing=t,this._markDirtyProperty("transform"))},get opacity(){return this._opacity},set opacity(t){(t=Math.min(Math.max(0,t),1))!==this._opacity&&(this._opacity=t,this._markDirtyProperty("opacity"))},get color(){return this._color},set color(t){t!==this._color&&(this._color=t,this._markDirtyProperty("color"))},get position(){return this._position},set position(t){this._position=t,this._markDirtyProperty("position")},get transform(){return this._transform},set transform(t){this._transform=t,this._markDirtyProperty("transform")},get backgroundImages(){return this._backgroundImages},set backgroundImages(t){this._backgroundImages=t||[],this._markDirtyProperty("backgroundImages")},get size(){return this._size},set size(t){this._size=t||new w,this._markDirtyProperty("size")},setAttribute:function(t,e){this._dirtyAttributes[t]=e,this._updateNodeDirtiness()},get parent(){return this._parent},get children(){return this._children},set children(t){for(var e=this._children;e.length;)this.removeChild(e[0]);t.forEach(function(t){this.addChild(t)},this)},get childCount(){return this._children.length},get firstChild(){return this._children[0]||null},get lastChild(){return this._children[this._children.length-1]||null},get previousSibling(){if(!this._parent)return null;var t=this._parent._children,e=t.indexOf(this);return e>0?t[e-1]:null},get nextSibling(){if(!this._parent)return null;var t=this._parent._children,e=t.indexOf(this);return-1!==e&&e<t.length-1?t[e+1]:null},addChild:function(t,e){return t.willMoveToParent(this),t._doNotNotifyParentChange=!0,t.remove(),delete t._doNotNotifyParentChange,(void 0===e||e<0||e>this._children.length)&&(e=this._children.length),this._children.splice(e,0,t),t._parent=this,t.didMoveToParent(this),this.didAddChild(t),t._markNodeManipulation(M.Addition),t},insertBefore:function(t,e){return this.addChild(t,this._children.indexOf(e))},insertAfter:function(t,e){var i=this._children.indexOf(e);return this.addChild(t,-1!==i?i+1:0)},removeChild:function(t){if(t._parent===this){var e=this._children.indexOf(t);if(-1!==e)return this.willRemoveChild(t),t._doNotNotifyParentChange||t.willMoveToParent(null),this._children.splice(e,1),t._parent=null,t._doNotNotifyParentChange||t.didMoveToParent(null),t._markNodeManipulation(M.Removal),t}},remove:function(){if(this._parent instanceof n)return this._parent.removeChild(this)},findNode:function(t,e){if("function"!=typeof t)throw new TypeError("RenderTree.RenderNode.findNode: callback must be a function");var i,n=this;return function o(s){s!==n&&t.call(e,s)?i=s:s.children.some(function(t){return o(t),i})}(n),i},convertPointFromPage:function(t){return L.fromPageToElement(this.element,t)},convertPointToPage:function(t){return L.fromElementToPage(this.element,t)},toString:function(){var t="";return this._wantsHardwareCompositing&&(t+=" "),t+=this.stringInfo(),this.classList.toString()&&(t+=this.classList._classes().map(function(t){return"."+t}).join(", ")),0===this.position.x&&0===this.position.y||(t+=" ("+this.position.x+", "+this.position.y+")"),0===this.size.width&&0===this.size.height||(t+=" "+this.size.width+"x"+this.size.height),1!==this.opacity&&(t+=" [opacity:"+this.opacity+"]"),this.transform.toString()&&(t+=" ["+this.transform.toString()+"]"),t},dump:function(t){return f(this,"",-1,t)},stringInfo:function(){return"<"+this.element.tagName.toLowerCase()+">"},willRemoveChild:function(t){},didAddChild:function(t){},willMoveToParent:function(t){},didMoveToParent:function(t){},_markDirtyProperty:function(t,e){(void 0===e||e?d(this._dirtyProperties,t):p(this._dirtyProperties,t))&&this._updateNodeDirtiness()},_markNodeManipulation:function(t){this._pendingDOMManipulation=t,this._updateNodeDirtiness()},_updateNodeDirtiness:function(){o(this,this._pendingDOMManipulation!==M.None||this._dirtyProperties.length>0||Object.getOwnPropertyNames(this._dirtyAttributes).length>0)}},y.prototype={constructor:y,add:function(t){this._add(t)},remove:function(t){this._remove(t)},contains:function(t){return-1!==this._classes().indexOf(t)},toggle:function(t,e){if("boolean"==typeof e||e instanceof Boolean)return e?this._add(t):this._remove(t),e;this._add(t)||this._remove(t)},toString:function(){return this._classes().join(" ")},_classes:function(){return this._populateClasses&&(this.__classes=this._node.element.className.split(/[ ]+/).filter(Boolean),delete this._populateClasses),this.__classes},reset:function(){this._additions=[],this._removals=[],this.__classes=[],this._populateClasses=!0},_add:function(t){if(!t)return!1;var e=d(this._classes(),t);return e&&(p(this._removals,t)||d(this._additions,t),this._updateNodeDirtiness()),e},_remove:function(t){if(!t)return!1;var e=p(this._classes(),t);return e&&(p(this._additions,t)||d(this._removals,t),this._updateNodeDirtiness()),e},_updateNodeDirtiness:function(){this._node._markDirtyProperty("classList",this._additions.length>0||this._removals.length>0)}};var O=new v.EventTarget;O.Node=n,O.Point=b,O.Transform=C,e.exports=O},{"@maps/css-transform":60,"@maps/device-pixel-ratio":61,"@maps/dom-events":62,"@maps/geometry/point":103,"@maps/geometry/size":104,"@maps/scheduler":106,"@maps/web-point-converter":107}],103:[function(t,e,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],104:[function(t,e,i){arguments[4][71][0].apply(i,arguments)},{dup:71}],105:[function(t,e,i){function n(){if(0!==a.length){var t=a.concat();a=[],o={},t.forEach(function(t){t()})}}var o={},s=0,a=[],r=1e3/60;"undefined"!=typeof window&&window.requestAnimationFrame?(e.exports.request=window.requestAnimationFrame.bind(window),e.exports.cancel=window.cancelAnimationFrame.bind(window)):"undefined"!=typeof window&&window.webkitRequestAnimationFrame?(e.exports.request=window.webkitRequestAnimationFrame.bind(window),e.exports.cancel=window.webkitCancelAnimationFrame.bind(window)):(e.exports.request=function(t){0===a.length&&setTimeout(n,r),a.push(t);var e=++s;return o[e]=t,e},e.exports.cancel=function(t){if(t in o){var e=o[t],i=a.indexOf(e);-1!==i&&(a.splice(i,1),delete o[t])}})},{}],106:[function(t,e,i){function n(){-1===h&&(c.length>0||d.length>0)&&(h=l.request(o))}function o(){m===p.Flushing&&-1!==h&&l.cancel(h),s(),a(),m=p.Idle,h=-1,n()}function s(){for(m=p.Updating;c.length>0;){var t=c;c=[];for(var e=0,i=t.length;e<i;++e){var n=t[e];"function"==typeof n?n():n&&"object"==typeof n&&"function"==typeof n.performScheduledUpdate&&n.performScheduledUpdate()}}c=u,u=[]}function a(){m=p.Drawing;var t=d;d=[];for(var e=0,i=t.length;e<i;++e){var n=t[e];"function"==typeof n?n():n&&"object"==typeof n&&"function"==typeof n.performScheduledDraw&&n.performScheduledDraw()}}function r(t,e){return-1===t.indexOf(e)&&(t.push(e),!0)}var l=t("@maps/request-animation-frame"),h=-1,c=[],u=[],d=[],p={Idle:0,Updating:1,Drawing:2,Flushing:3},m=p.Idle;e.exports={scheduleASAP:function(t){r(c,t)&&n()},scheduleOnNextFrame:function(t){r(m===p.Updating?u:c,t)&&n()},scheduleDraw:function(t){r(d,t)&&n()},flush:function(){m>p.Idle||(m=p.Flushing,o())}}},{"@maps/request-animation-frame":105}],107:[function(t,e,i){arguments[4][83][0].apply(i,arguments)},{"@maps/css-matrix":108,"@maps/geometry/point":109,dup:83}],108:[function(t,e,i){arguments[4][58][0].apply(i,arguments)},{"@maps/geometry/point":109,dup:58}],109:[function(t,e,i){arguments[4][59][0].apply(i,arguments)},{dup:59}],110:[function(t,e,i){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function a(t){if(d===clearTimeout)return clearTimeout(t);if((d===o||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(t);try{return d(t)}catch(e){try{return d.call(null,t)}catch(e){return d.call(this,t)}}}function r(){_&&m&&(_=!1,m.length?g=m.concat(g):f=-1,g.length&&l())}function l(){if(!_){var t=s(r);_=!0;for(var e=g.length;e;){for(m=g,g=[];++f<e;)m&&m[f].run();f=-1,e=g.length}m=null,_=!1,a(t)}}function h(t,e){this.fun=t,this.array=e}function c(){}var u,d,p=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{d="function"==typeof clearTimeout?clearTimeout:o}catch(t){d=o}}();var m,g=[],_=!1,f=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];g.push(new h(t,e)),1!==g.length||_||s(l)},h.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],111:[function(t,e,i){e.exports={version:"5.4.0",build:"18.29-9",cdnUrl:"//cdn.apple-mapkit.com/mk/5.4.0"}},{}],112:[function(t,e,i){function n(){this._doNotTrack=a.doNotTrack(),this._isInternalClient=o(),s.addEventListener(s.Events.Changed,this)}function o(){return/\.apple\.com$/.test(window.origin)||/\.icloud\.com$/.test(window.origin)||/\.filemaker\.com$/.test(window.origin)||/\.apple-mapkit\.com$/.test(window.origin)||/\.tryrating\.com$/.test(window.origin)||/localhost/.test(window.origin)}var s=t("../configuration"),a=t("@maps/js-utils"),r=t("./transforms"),l=t("@maps/loaders").XHRLoader,h=t("@maps/loaders").Priority,c={ScreenSize:"SCREEN_SIZE",BrowserInfo:"BROWSER_INFO",ApplicationIdentifier:"APPLICATION_IDENTIFIER",BrowserWindowSize:"BROWSER_WINDOW_SIZE",Url:"URL",MapView:"MAP_VIEW",UserSession:"USER_SESSION",Tile:"TILE"},u={Short:[c.ScreenSize,c.BrowserInfo,c.ApplicationIdentifier,c.BrowserWindowSize,c.Url,c.MapView,c.UserSession,c.Tile]},d={Zoom:{name:"ZOOM",states:u.Short},MapsLoad:{name:"MAPS_LOAD",states:u.Short},AnnotationClick:{name:"ANNOTATION_CLICK",states:u.Short},MapTypeChange:{name:"MAP_TYPE_CHANGE",states:u.Short},MapNodeReady:{name:"MAP_NODE_READY",states:u.Short}};n.prototype={_queuedMessages:[],_loader:null,_analyticsUrl:null,_errorUrl:null,_sessionId:null,_sessionTimerStart:null,_sessionTimeToExpire:null,_sequenceNumber:null,_doNotTrack:null,Events:d,log:function(t,e){!s.analytics||this._doNotTrack||a.isNode()||((!this._sessionId||(new Date).getTime()>this._sessionTimeToExpire)&&this._initSession(),this._queuedMessages.push(this._createMessage(t,e)),this._sequenceNumber++,this._loader||(console.assert(this._analyticsUrl,"analytics._analyticsUrl is not set"),this._loader=new l(this._analyticsUrl,this,{method:"POST",priority:h.Low,retry:!0}),this._loader.schedule()))},getDataToSend:function(t){if(0===this._queuedMessages.length)return this._loader.unschedule(),!1;var e=JSON.stringify({analytics_message_type:"SHORT_SESSION_USAGE",analytics_event:this._queuedMessages});return this._queuedMessages=[],t.setRequestHeader("Content-Type","text/plain"),t.responseType="text",e},loaderDidSucceed:function(t){delete this._loader},loaderDidFail:function(t){this._queuedMessages=this._queuedMessages.concat(JSON.parse(t.xhrData).analytics_event),delete this._loader},handleEvent:function(t){switch(t.type){case s.Events.Changed:this._configurationBecameAvailable()}},reduceHost:function(t){var e=t.match(/([^\.]+\.[^\.]+)$/);return e&&e.length>0?e[0]:t},_createMessage:function(t,e){var i={event_type:"USER_ACTION",user_action_event:{user_action_event_key:t.name}};return i.analytics_state=this._createStateMessages(t.states,e),i},_initSession:function(){this._sessionId={high:a.generateSessionIdValue(),low:a.generateSessionIdValue()},this._sessionTimerStart=(new Date).getTime(),this._sessionTimeToExpire=this._sessionTimerStart+9e5,this._sequenceNumber=0},_createStateMessages:function(t,e){return t.map(function(t){var i={state_type:t};return i[t.toLowerCase()]=r[t](this,e),i},this)},_configurationBecameAvailable:function(){s.analytics&&(this._analyticsUrl=s.analytics.analyticsUrl),s.teamId&&(this._teamId=s.teamId)}},e.exports=new n},{"../configuration":159,"./transforms":116,"@maps/js-utils":84,"@maps/loaders":85}],113:[function(t,e,i){var n=t("../../../build.json");e.exports=function(t){var e={host:location.host,mkjs_version:n.version};return t._teamId&&(e.team_id=t._teamId),t._isInternalClient||(e.host=t.reduceHost(location.host)),e}},{"../../../build.json":111}],114:[function(t,e,i){e.exports=function(t){var e={browser_user_agent:navigator.userAgent,browser_language:navigator.language};return t._isInternalClient?(e.browser_referer=document.referrer,e.browser_origin=location.protocol+"//"+location.host):e.browser_origin=t.reduceHost(location.host),e}},{}],115:[function(t,e,i){e.exports=function(t){if(t._isInternalClient)return{width:window.innerWidth,height:window.innerHeight}}},{}],116:[function(t,e,i){e.exports={SCREEN_SIZE:t("./screen-size-state"),BROWSER_INFO:t("./browser-info-state"),APPLICATION_IDENTIFIER:t("./application-identifier"),BROWSER_WINDOW_SIZE:t("./browser-window-size-state"),URL:t("./url-state"),MAP_VIEW:t("./map-view-state"),USER_SESSION:t("./user-session-state"),TILE:t("./tile-state")}},{"./application-identifier":113,"./browser-info-state":114,"./browser-window-size-state":115,"./map-view-state":117,"./screen-size-state":118,"./tile-state":119,"./url-state":120,"./user-session-state":121}],117:[function(t,e,i){e.exports=function(t,e){console.assert(e.map,"A `map` object must be provided to report map view analytics.");var i=e.map.region.toBoundingRegion(),n=e.map.ensureRenderingFrame().size;return{display_map_region:{eastLng:i.eastLongitude,northLat:i.northLatitude,southLat:i.southLatitude,westLng:i.westLongitude},zoom_level:e.map.zoomLevel,map_type:"MAP_TYPE_"+e.map.mapType.toUpperCase(),size:{width:n.width,height:n.height}}}},{}],118:[function(t,e,i){e.exports=function(e){var i={device_pixel_ratio:t("@maps/device-pixel-ratio")()};return e._isInternalClient?(i.width=screen.width,i.height=screen.height,i):i}},{"@maps/device-pixel-ratio":61}],119:[function(t,e,i){e.exports=function(t,e){return{rendering:e.map._mapNodeController&&e.map._mapNodeController.renderingMode}}},{}],120:[function(t,e,i){e.exports=function(t){var e={};return t._isInternalClient&&(e.query_string=location.search,e.path=location.pathname),e}},{}],121:[function(t,e,i){e.exports=function(t){var e=((new Date).getTime()-t._sessionTimerStart)/1e3;return{session_id:t._sessionId,sequence_number:t._sequenceNumber,relative_timestamp:e}}},{}],122:[function(t,e,i){function n(t){this._annotation=t}var o=t("@maps/geometry").Point,s=t("@maps/scheduler");n.prototype={liftDurationMs:200,liftOpacity:.5,animateLift:function(){var t=Math.min((Date.now()-this._liftAnimationStartDate)/this.liftDurationMs,1);this._annotation.translate(this.translation.x,this.translation.y-this.liftAmount*t),this._annotation.opacity=1-(1-this.liftOpacity)*t,t<1?(s.scheduleOnNextFrame(this),this._liftAnimationProgress=t):(delete this._liftAnimationStartDate,delete this._liftAnimationProgress)},animateDropAfterLift:function(){var t=Math.max(this._dropAnimationStartP-Math.min((Date.now()-this._dropAfterLiftAnimationStartDate)/this.liftDurationMs,1),0);this._dropAnimationRevert&&this._annotation.translate(0,-this.liftAmount*t),this._annotation.opacity=1-(1-this.liftOpacity)*t,t>0?s.scheduleOnNextFrame(this):this._annotation.droppedAfterLift()},dropAnnotationAfterDraggingAndRevertPosition:function(t){this._liftAnimationStartDate?(this._dropAnimationStartP=this._liftAnimationProgress,delete this._liftAnimationStartDate,delete this._liftAnimationProgress):this._dropAnimationStartP=1,t?this._annotation.resetNodeTransform():this._annotation.draggingDidEnd(),this._dropAfterLiftAnimationStartDate=Date.now(),this._dropAnimationRevert=t,s.scheduleOnNextFrame(this)},lift:function(t){this.liftAmount=t,this.translation=new o,this._liftAnimationStartDate=Date.now(),this._liftAnimationProgress=0,s.scheduleOnNextFrame(this)},getTranslation:function(){return new o(this.translation.x,this.translation.y-this.liftAmount)},setTranslation:function(t){this.translation=t,this._liftAnimationStartDate||this._annotation.translate(this.translation.x+this._annotation.dragOffset.x,this.translation.y-this.liftAmount+this._annotation.dragOffset.y)},performScheduledUpdate:function(){this._liftAnimationStartDate?this.animateLift():this._dropAfterLiftAnimationStartDate&&this.animateDropAfterLift()}},e.exports=n},{"@maps/geometry":68,"@maps/scheduler":106}],123:[function(t,e,i){function n(t){this._map=t,this.panning=!1}var o=t("@maps/geometry/point"),s=t("@maps/scheduler");n.prototype={constructor:n,update:function(t,e){if(this._map.isScrollEnabled){var i=t._impl.translatedPosition(),n=i.x,a=n+e.size.width,r=i.y,l=r+e.size.height,h=this._map.ensureVisibleFrame();this._direction=new o,n<=h.minX()?this._direction.x=1:a>=h.maxX()&&(this._direction.x=-1),r<=h.minY()+5?this._direction.y=1:l>=h.maxY()-5&&(this._direction.y=-1);var c=0!==this._direction.x||0!==this._direction.y;!this.panning&&c?(this.panning=!0,this._startTime=Date.now(),this._initialSpeed=Math.floor(1/104.1*(h.size.width+h.size.height)/2),s.scheduleOnNextFrame(this)):this.panning&&!c&&this.stop()}},stop:function(){this.panning&&(this.panning=!1,delete this._direction,delete this._startTime,delete this._initialSpeed)},performScheduledUpdate:function(){if(this.panning){console.assert(!!this._startTime&&!!this._initialSpeed);var t=this._initialSpeed,e=Date.now()-this._startTime;e>4e3?t*=3:e>1e3&&(t*=1.5),this._map.translateCameraAnimated(new o(this._direction.x*t,this._direction.y*t),!1),this._map.panningDuringAnnotationDrag(),s.scheduleOnNextFrame(this)}},mapWasDestroyed:function(){delete this._map}},e.exports=n},{"@maps/geometry/point":69,"@maps/scheduler":106}],124:[function(t,e,i){function n(t,e,i,n){o.call(this,t),m.EventTarget(t),p.checkType(i,"function"),p.checkOptions(n),this._setCoordinate(e);var a=i(e,n);p.checkElement(a,"[MapKit] Annotation element factory must return a DOM element, got `"+a+"` instead."),this._element=a,this._node=new g.Node(d.htmlElement("div",a)),this._node.wantsHardwareCompositing=!0,this._node.element._annotation=this,this._unsized=!0,this._public=t,this.occluded=!1,this._dragController||(this._dragController=new s(this)),n&&(y.forEach(function(t){t in n&&(this[t]=n[t])},this),v.forEach(function(t){t in n&&this["_set"+t.replace(/^\w/,function(t){return t.toUpperCase()})](n[t])},this),Object.keys(n).forEach(function(t){"map"===t||"element"===t?console.warn("[MapKit] `"+t+"` is read-only and can't be set on an Annotation."):this.isAKnownOption(t)||console.warn("[MapKit] Unknown option for annotation: "+t+" (use the `data` property instead)")},this)),f.addEventListener(f.Events.LocaleChanged,this),this.updateLocalizedText()}var o=t("./annotation-layer-item-internal"),s=t("./annotation-drag-controller"),a=t("../../../lib/geo"),r=a.Coordinate,l=t("@maps/geometry/size"),h=t("@maps/css-matrix"),c=t("@maps/css-transform"),u=t("@maps/geometry/point"),d=t("../utils"),p=t("@maps/js-utils"),m=t("@maps/dom-events"),g=t("@maps/render-tree"),_=t("../../../lib/scene-graph"),f=t("../localizer").l10n,y=["title","subtitle","data","accessibilityLabel","anchorOffset","calloutOffset","size","callout","visible","enabled","selected","calloutEnabled","animates","appearanceAnimation","collisionMode"],v=["draggable","displayPriority","clusteringIdentifier"],w=n.Events={DragStart:"drag-start",Dragging:"dragging",DragEnd:"drag-end"},b=n.DisplayPriority={Low:250,High:750,Required:1e3},C=n.CollisionMode={Rectangle:"rectangle",Circle:"circle"};n.prototype=p.inheritPrototype(o,n,{_calloutOffset:new window.DOMPoint(0,1),_enabled:!0,_selected:!1,_calloutEnabled:!0,_animates:!0,_draggable:!1,_title:"",_subtitle:"",_accessibilityLabel:null,_displayPriority:b.Required,_collisionMode:C.Rectangle,_clusteringIdentifier:null,_sceneGraphNode:null,shouldHideLabels:!1,_callout:null,get map(){return this.delegate&&this.delegate.mapForAnnotation(this._public)},set map(t){console.warn("[MapKit] The `map` property is read-only.")},get coordinate(){return this._coordinate},set coordinate(t){this.memberAnnotations||this._setCoordinate(t)},get title(){return this._title},set title(t){null!=t?(p.checkType(t,"string","[MapKit] Expected a string value for Annotation.title, but got `"+t+"` instead"),this._title=t):delete this._title,this.updateLocalizedText(),this._updatedProperty("title")},get subtitle(){return this._subtitle},set subtitle(t){null!=t?(p.checkType(t,"string","[MapKit] Expected a string value for Annotation.subtitle, but got `"+t+"` instead"),this._subtitle=t):delete this._subtitle,this.updateLocalizedText(),this._updatedProperty("subtitle")},get accessibilityLabel(){return this._accessibilityLabel},set accessibilityLabel(t){null!=t?(p.checkType(t,"string","[MapKit] Expected a string value for Annotation.accessibilityLabel, but got `"+t+"` instead"),this._accessibilityLabel=t):delete this._accessibilityLabel,this.updateLocalizedText()},get data(){return this.hasOwnProperty("_data")||(this._data={}),this._data},set data(t){this._data=t},get enabled(){return this._enabled},set enabled(t){this._enabled=!!t},get calloutEnabled(){return this._calloutEnabled},set calloutEnabled(t){this._calloutEnabled=!!t},get selected(){return this._selected},set selected(t){var e=!!t;e!==this._selected&&(this._selected=e,this._updatedProperty("selected"))},get animates(){return this._animates},set animates(t){this._animates=!!t},get calloutOffset(){return this._calloutOffset},set calloutOffset(t){p.checkInstance(t,window.DOMPoint,"[MapKit] Annotation.calloutOffset expected a DOMPoint, but got `"+t+"` instead."),this._calloutOffset=new window.DOMPoint(t.x,t.y),this._updatedProperty("calloutOffset")},get callout(){return this._callout},set callout(t){p.checkType(t,"object","[MapKit] Annotation.callout expected an object, but got `"+t+"` instead."),this._callout=t},get draggable(){return this._draggable},set draggable(t){this.memberAnnotations||this._setDraggable(t)},get size(){if(this._updateSize(),!this._unsized)return this._node.size.copy()},set size(t){var e="[MapKit] Annotation size expects a size object with width and height properties";p.checkType(t,"object",e).checkType(t.width,"number",e).checkType(t.height,"number",e),this.setSize(new l(t.width,t.height)),this._userSetSize=!0,this.updateSize()},get opacity(){return this.sceneGraphNode?this.sceneGraphNode.opacity:this.node.opacity},set opacity(t){this.sceneGraphNode?this.sceneGraphNode.opacity=t:this.node.opacity=t},get displayPriority(){return this._displayPriority},set displayPriority(t){this.memberAnnotations||this._setDisplayPriority(t)},isRequired:function(){return this.selected||this.displayPriority===b.Required},get collisionMode(){return this._collisionMode},set collisionMode(t){if(!p.checkValueIsInEnum(t,C))throw new Error("[MapKit] Unknown value for `collisionMode`. Choose from Annotation.CollisionMode.");t!==this._collisionMode&&(this._collisionMode=t,this._updatedProperty("collisionMode"))},get clusteringIdentifier(){return this._clusteringIdentifier},set clusteringIdentifier(t){this.memberAnnotations||this._setClusteringIdentifier(t)},get needsLayout(){return this._sceneGraphNode&&this._sceneGraphNode.needsLayout},removedFromMap:function(){this._removedFromMap=!0,f.removeEventListener(f.Events.LocaleChanged,this)},addedToMap:function(){this._removedFromMap&&(this._removedFromMap=!1,f.addEventListener(f.Events.LocaleChanged,this),this.updateLocalizedText())},delegate:null,setDelegate:function(t){this.delegate=t},updateLayout:function(){},doesAnimate:function(){return this._animates&&!!this._appearanceAnimationName},willMoveToMap:function(){this._isMoving=this.doesAnimate(),this._updateSize()},didMoveToMap:function(){this._isMoving&&this._appearanceAnimationName&&this._visible&&(this.element.style.animation=this.element.style.webkitAnimation=this._appearanceAnimation,(this.element.style.animationName||this.element.style.webkitAnimationName)&&(this._animating=!0,this.element.addEventListener("animationend",this),this.element.addEventListener("webkitAnimationEnd",this))),delete this._isMoving},canShowCallout:function(){return this._calloutEnabled&&!this.isWaiting&&!this._isMoving&&!this._isAnimating&&!this._isLifted},calloutWillAppear:function(){},calloutWillDisappear:function(){},canBePicked:function(){return this._shown&&this._visible&&!this._isMoving&&!this._isAnimating&&!this._isLifted&&!this.occluded},draggingDidStart:function(){this._public.dispatchEvent(new m.Event(w.DragStart))},isDraggable:function(){return this.draggable&&!this._isLifted},isLifted:function(){return this._isLifted},dispatchDraggingEvent:function(){var t=new m.Event(n.Events.Dragging);return t.coordinate=this._coordinateDuringDrag(),this._public.dispatchEvent(t),t},positionForCallout:function(){var t=this._calloutAnchorPoint;if(!t){var e=this._userSetSize?this._node.size:this.delegate.sizeForElement(this.element);t=new window.DOMPoint(-e.width/2,0)}return new u(this._node.position.x-t.x-this._calloutOffset.x,this._node.position.y-t.y-this._calloutOffset.y)},setDraggingTranslationForMapFrameSize:function(t,e){this._dragController.setTranslation(this.clampDraggingTranslationForMapFrameSize(t,e))},dropAfterDraggingAndRevertPosition:function(t){this._dragController.dropAnnotationAfterDraggingAndRevertPosition(t)},distanceToPoint:function(t){var e=this._node.position.x,i=e+this._node.size.width,n=e-t.x,o=i-t.x,s=n<=0&&o>=0?0:Math.min(Math.abs(n),Math.abs(o)),a=this._node.position.y,r=a+this._node.size.height,l=a-t.y,h=r-t.y,c=l<=0&&h>=0?0:Math.min(Math.abs(l),Math.abs(h));return s*s+c*c},lift:function(t){this._isLifted=!0,this._dragController.lift(t),this._updatedProperty("")},translate:function(t,e){this.sceneGraphNode?this.sceneGraphNode.transform=(new h).translate(t,e):this._node.transform=(new c).translate(t,e)},translatedPosition:function(){var t=this._dragController.getTranslation();return new u(this._position.x-this._anchorPoint.x-this._anchorOffset.x+t.x,this._position.y-this._anchorPoint.y-this._anchorOffset.y+t.y)},updatedPosition:function(){return this.coordinate?(this.x=a.convertLongitudeToX(a.wrapLongitude(this.coordinate.longitude)),this.y=a.convertLatitudeToY(this.coordinate.latitude),!0):(this.setShown(!1),this.sceneGraphNode&&this.sceneGraphNode.remove(),!1)},get sceneGraphNode(){return this._sceneGraphNode},mayBeDrawn:function(){return!!this.sceneGraphNode&&this._shown&&this.visible&&!this.isWaiting},isDrawn:function(){return(!this.occluded||this._occludedAnimation)&&this.mayBeDrawn()},animateOcclusion:function(){var t=this.occluded?0:1;this._sceneGraphNode&&(this._occludedAnimation&&this._occludedAnimation.end(),this._occludedAnimation=new _.NodeAnimator.Opacity({node:this._sceneGraphNode,from:1-t,to:t,duration:200,done:function(){delete this._occludedAnimation}.bind(this)}).begin());var e=this.occluded&&this.cluster&&this.cluster._impl,i=!this.occluded&&this.previousCluster;(e||i)&&this._animateClustering()},dragOffset:u.Zero,handleEvent:function(t){switch(t.type){case f.Events.LocaleChanged:this.updateLocalizedText();break;case"animationend":case"webkitAnimationEnd":if(t.animationName!==this._appearanceAnimationName)return;this.element.style.animation=this.element.style.webkitAnimation="",this.element.removeEventListener("animationend",this),this.element.removeEventListener("webkitAnimationEnd",this),this.finishedAnimating()}},updateLocalizedText:function(){this._element.setAttribute("aria-label",this.altText())},altText:function(){return this._accessibilityLabel||(this.title&&this.subtitle?f.get("Annotation.Generic.AccessibilityLabel",{title:this.title,subtitle:this.subtitle}):this.title||this.subtitle||"")},updateSize:function(){delete this._unsized,this._selected&&this.delegate&&this.delegate.selectedAnnotationDidMoveToMap(this._public)},clampDraggingTranslationForMapFrameSize:function(t,e){var i=this._anchorPoint.x+this._anchorOffset.x-this._position.x,n=e.width-this._node.size.width+i,o=this._anchorPoint.y+this._anchorOffset.y+this._dragController.liftAmount-this._position.y,s=e.height-this._node.size.height+o;return new u(p.clamp(t.x,i,n),p.clamp(t.y,o,s))},droppedAfterLift:function(){delete this._isLifted,this.selected&&this.delegate.selectedAnnotationDidMoveToMap(this._public),this._updatedProperty("")},draggingDidEnd:function(){this.coordinate=this._coordinateDuringDrag(),this.resetNodeTransform(),this._public.dispatchEvent(new m.Event(n.Events.DragEnd))},resetNodeTransform:function(){this.node.transform=new c},finishedAnimating:function(){delete this._isAnimating,this._selected&&this.delegate&&this.delegate.selectedAnnotationDidMoveToMap(this._public),this._visible||this._updateVisibility(),this.delegate&&this.delegate.annotationFinishedAnimating(this._public)},isAKnownOption:function(t){return y.indexOf(t)>=0||v.indexOf(t)>=0},_animateClustering:function(){if(this._sceneGraphNode){var t={node:this._sceneGraphNode,duration:200,done:function(){delete this._clusteringAnimation}.bind(this)},e=this.boundingBox;if(this.cluster){var i=this.cluster._impl.boundingBox;t.to=new u(i.x1-e.x1,i.y1-e.y1)}else{var n=this.previousCluster._impl.boundingBox;t.from=new u(n.x1-e.x1,n.y1-e.y1)}this._clusteringAnimation&&this._clusteringAnimation.end(),this._clusteringAnimation=new _.NodeAnimator.Translation(t).begin()}},_setCoordinate:function(t){p.checkInstance(t,r,"[MapKit] Annotation.coordinate expected a Coordinate value."),delete this._translation,this._coordinate=t.copy(),this._updatedProperty("coordinate")},_setDraggable:function(t){var e=!!t;e!==this._draggable&&(this._draggable=e,this._updatedProperty("draggable"))},_setDisplayPriority:function(t){var e="[MapKit] Annotation displayPriority expects a number between 0 and "+b.Required;p.checkType(t,"number",e);var i=p.clamp(t,0,b.Required);if(i!==t)console.warn(e+", value was normalized");else if(i===this._displayPriority)return;this._displayPriority=i,this._updatedProperty("displayPriority")},_setClusteringIdentifier:function(t){null!==t&&p.checkType(t,"string","[MapKit] Annotation clusteringIdentifier expects a string"),this._clusteringIdentifier!==t&&(this._clusteringIdentifier=t,this._updatedProperty("clusteringIdentifier"))},_coordinateDuringDrag:function(){var t=this.sceneGraphNode?this._dragController.translation.x:0,e=this.sceneGraphNode?this._dragController.translation.y-this._dragController.liftAmount:0,i=this.node.convertPointToPage(new u(t+this.dragOffset.x+this._anchorPoint.x+this.anchorOffset.x,e+this.dragOffset.y+this._anchorPoint.y+this.anchorOffset.y));return this.delegate._map.convertPointOnPageToCoordinate(new window.DOMPoint(i.x,i.y))},_updateSize:function(){if(this._unsized&&!this._userSetSize&&this.delegate){var t=this.delegate.sizeForElement(this.element);t&&(delete this._unsized,this.setSize(t))}},_updatedProperty:function(t){this.delegate&&this.delegate.annotationPropertyDidChange(this._public,t)}}),n.div=function(){return document.createElement("div")},e.exports=n},{"../../../lib/geo":2,"../../../lib/scene-graph":47,"../localizer":182,"../utils":225,"./annotation-drag-controller":122,"./annotation-layer-item-internal":125,"@maps/css-matrix":58,"@maps/css-transform":60,"@maps/dom-events":62,"@maps/geometry/point":69,"@maps/geometry/size":71,"@maps/js-utils":84,"@maps/render-tree":102}],125:[function(t,e,i){function n(t){t&&(this._public=t)}var o=t("../utils"),s=t("@maps/js-utils"),a=t("@maps/geometry/point"),r={HIDDEN:"mk-hidden",INVISIBLE:"mk-invisible"};n.CalloutTailSide={Left:"left",Right:"right",Bottom:"bottom"},n.prototype={_shown:!0,_visible:!0,_position:new a,_anchorPoint:new a,_anchorOffset:new window.DOMPoint,_appearanceAnimation:"",get node(){return this._node},get element(){return this._element},set element(t){console.warn("[MapKit] The `element` property is read-only.")},get anchorOffset(){return this._anchorOffset},set anchorOffset(t){s.checkInstance(t,window.DOMPoint,"[MapKit] Annotation.anchorOffset expected a DOMPoint, but got `"+t+"` instead."),this._anchorOffset=new window.DOMPoint(t.x,t.y),this.updatePosition()},get visible(){return this._visible},set visible(t){t=!!t,this._visible!==t&&(this._visible=t,this._updateVisibility())},get appearanceAnimation(){return this._appearanceAnimation},set appearanceAnimation(t){s.checkType(t,"string","[MapKit] Annotation.appearanceAnimation expected a string, but got `"+t+"` instead."),this._appearanceAnimation=t;var e=document.createElement("div");e.style.animation=e.style.webkitAnimation=t,this._appearanceAnimationName=e.style.animationName||e.style.webkitAnimationName},updatePosition:function(){this._node.position=new a(this._position.x-this._anchorPoint.x-this._anchorOffset.x,this._position.y-this._anchorPoint.y-this._anchorOffset.y)},setShown:function(t){t=!!t,this._shown!==t&&(this._shown=t,o.classList.toggle(this._node.element,r.HIDDEN),this.shownPropertyWasUpdated(t))},shownPropertyWasUpdated:function(){},isShown:function(){return this._shown},position:function(){return this._position},setPosition:function(t){this._position=t,this.updatePosition()},updateVisibility:function(t){o.classList.toggle(this._node.element,r.INVISIBLE,t)},setSize:function(t,e){this._node.size=t,this._anchorPoint=e===n.CalloutTailSide.Left?new a(0,t.height/2):e===n.CalloutTailSide.Right?new a(t.width,t.height/2):new a(t.width/2,t.height),this.updatePosition()},_updateVisibility:function(){!this._visible&&this._animating||(this.updateVisibility(!this._visible),this.delegate&&this.delegate.annotationPropertyDidChange(this._public||this,"visible"))}},e.exports=n},{"../utils":225,"@maps/geometry/point":69,"@maps/js-utils":84}],126:[function(t,e,i){function n(){Object.defineProperty(this,"_impl",{value:new o(this)})}var o=t("./annotation-layer-item-internal");n.CalloutTailSide={Left:"left",Right:"right",Bottom:"bottom"},n.prototype={get node(){return this._impl.node},get element(){return this._impl.element},set element(t){this._impl.element=t},get anchorOffset(){return this._impl.anchorOffset},set anchorOffset(t){this._impl.anchorOffset=t},get animates(){return this._impl.animates},set animates(t){this._impl.animates=t},get visible(){return this._impl.visible},set visible(t){this._impl.visible=t},get appearanceAnimation(){return this._impl.appearanceAnimation},set appearanceAnimation(t){this._impl.appearanceAnimation=t},addEventListener:function(t,e){this._impl.addEventListener(t,e)},removeEventListener:function(t,e){this._impl.addEventListener(t,e)}},e.exports=n},{"./annotation-layer-item-internal":125}],127:[function(t,e,i){function n(t,e,i){Object.defineProperty(this,"_impl",{value:new s(this,t,e,i)})}var o=t("./annotation-layer-item"),s=t("./annotation-internal"),a=t("@maps/js-utils");n.EVENTS=s.EVENTS,n.DisplayPriority=s.DisplayPriority,n.CollisionMode=s.CollisionMode,n.prototype=a.inheritPrototype(o,n,{get map(){return this._impl.map},set map(t){this._impl.map=t},get coordinate(){return this._impl.coordinate},set coordinate(t){this._impl.coordinate=t},get title(){return this._impl.title},set title(t){this._impl.title=t},get subtitle(){return this._impl.subtitle},set subtitle(t){this._impl.subtitle=t},get accessibilityLabel(){return this._impl.accessibilityLabel},set accessibilityLabel(t){this._impl.accessibilityLabel=t},get data(){return this._impl.data},set data(t){this._impl.data=t},get enabled(){return this._impl.enabled},set enabled(t){this._impl.enabled=t},get calloutEnabled(){return this._impl.calloutEnabled},set calloutEnabled(t){this._impl.calloutEnabled=t},get selected(){return this._impl.selected},set selected(t){this._impl.selected=t},get animates(){return this._impl.animates},set animates(t){this._impl.animates=t},get calloutOffset(){return this._impl.calloutOffset},set calloutOffset(t){this._impl.calloutOffset=t},get callout(){return this._impl.callout},set callout(t){this._impl.callout=t},get draggable(){return this._impl.draggable},set draggable(t){this._impl.draggable=t},get size(){return this._impl.size},set size(t){this._impl.size=t},get displayPriority(){return this._impl.displayPriority},set displayPriority(t){this._impl.displayPriority=t},get collisionMode(){return this._impl.collisionMode},set collisionMode(t){this._impl.collisionMode=t},get clusteringIdentifier(){return this._impl.clusteringIdentifier},set clusteringIdentifier(t){this._impl.clusteringIdentifier=t}}),e.exports=n},{"./annotation-internal":124,"./annotation-layer-item":126,"@maps/js-utils":84}],128:[function(t,e,i){function n(){o.GroupNode.call(this),this._element=a.htmlElement("div")}var o=t("../../../lib/scene-graph"),s=t("@maps/js-utils"),a=t("../utils");n.prototype=s.inheritPrototype(o.GroupNode,n,{get element(){return this._element},stringInfo:function(){return"AnnotationsControllerNode"}}),e.exports=n},{"../../../lib/scene-graph":47,"../utils":225,"@maps/js-utils":84}],129:[function(t,e,i){function n(t){h.call(this,t),this._sceneGraphNode=new c,this._node=new S.Node(v.htmlElement("div",{class:T.CONTAINER})),this._annotationsNode=this._node.addChild(new S.Node(this._sceneGraphNode.element)),this._calloutsNode=this._node.addChild(new S.Node(v.htmlElement("div"))),this._styleHelper=new _,this._map.element.appendChild(this._styleHelper.element),this._pendingAnnotations=[],this._annotationDraggingMapPanningController=new r(t),this._clustersController=new l(this)}function o(t,e,i){return new C(t.origin.x-e,t.origin.y-i,t.size.width,t.size.height)}function s(){if(this._draggedAnnotation){var t=this._draggedAnnotation._impl.dispatchDraggingEvent();this._map.dispatchEventWithAnnotation(t.type,this._draggedAnnotation,{coordinate:t.coordinate})}}var a=t("../../../lib/geo"),r=t("./annotation-dragging-map-panning-controller"),l=t("./clusters-controller"),h=t("../layer-items-controller"),c=t("./annotations-controller-node"),u=t("./annotation"),d=t("./annotation-internal"),p=t("./marker-annotation-internal"),m=t("./callout"),g=t("../services/geocoder"),_=t("../style-helper"),f=a.MapRect,y=t("./user-location-annotation"),v=t("../utils"),w=t("@maps/js-utils"),b=t("@maps/geometry/point"),C=t("@maps/geometry/rect"),S=t("@maps/render-tree"),L=t("@maps/scheduler"),T={CONTAINER:"mk-annotation-container",DRAGGING:"mk-dragging",SELECTED:"mk-selected",LIFTED:"mk-lifted"},E=null;n.prototype=w.inheritPrototype(h,n,{itemConstructor:u,itemName:"annotation",capitalizedItemName:"Annotation",_rtl:!1,_selectionDistance:Math.pow(h.prototype._selectionDistance,2),get sceneGraphNode(){return this._sceneGraphNode},isItemExposed:function(t){return t!==this._userLocationAnnotation&&!t.memberAnnotations},_userLocationAnnotation:null,get userLocationAnnotation(){return this._userLocationAnnotation},get dragging(){return!!this._draggedAnnotation},set rtl(t){this._rtl!==t&&(this._rtl=t,this._selectedItem&&this._callout&&this._showCalloutForAnnotation(this._selectedItem,!0))},preAddedAnnotation:function(t){return!(t.map||!t._impl.updatedPosition())&&(t._impl.setDelegate(this),!0)},resetAnnotation:function(t){delete t._impl.delegate},addItems:function(t){if(t=h.prototype.addItems.call(this,t),this._shouldAnnotationBePending())return t;t.sort(function(t,e){return e.coordinate.latitude-t.coordinate.latitude});var e=this._map.camera.toMapRect(),i=e.size.width,n=e.size.height,o=e.origin.x-i,s=o+3*i,a=e.origin.y-n,r=a+3*n,l=this._map.shouldWaitForTilesAndControls(),c=0;t.forEach(function(t){t._impl.doesAnimate()&&t.visible&&t._impl.x+(t._impl.x<o?1:0)<=s&&t._impl.y>=a&&t._impl.y<=r&&(t._impl.delayRank=c,++c)});var u=Math.min(50*c,3e3),d=0===c?0:u/c;return t.forEach(function(t){t._impl.delayMs=t._impl.delayRank*d,delete t._impl.delayRank,this._addAnnotationWaitingForTiles(t,l)},this),t},addWaitingAnnotations:function(t){var e="function"==typeof t;this._waitingAnnotations?(e&&(this._completionCallback=t),window.clearTimeout(this._tileLoadingTimeout),delete this._tileLoadingTimeout,this._waitingAnnotations.forEach(function(t){t.map&&this._addAnnotationWaitingForTiles(t,!1,!e)},this),delete this._waitingAnnotations,L.scheduleOnNextFrame(this._checkCompletion.bind(this))):e&&t()},annotationsInMapRect:function(t){w.checkInstance(t,f,"[MapKit] Map.annotationsInMapRect expects a MapRect as its argument, got `"+t+"` instead.");var e=w.mod(t.origin.x,1),i=e+t.size.width,n=t.origin.y,o=n+t.size.height;return this._items.filter(function(t){if(t===this._userLocationAnnotation)return!1;var s=t._impl.x+(t._impl.x<e?1:0),a=t._impl.y;return s>=e&&s<=i&&a>=n&&a<=o},this)},removeItem:function(t){return t===this._userLocationAnnotation?(console.warn("[MapKit] Map.removeAnnotation: the user location annotation cannot be removed. Set showsUserLocation to false instead."),t):(delete t._impl.wasCollided,h.prototype.removeItem.call(this,t))},removeUserLocationAnnotation:function(){this._userLocationAnnotation&&(this._userLocationAnnotation._impl.removedFromMap(),h.prototype.removeItem.call(this,this._userLocationAnnotation),delete this._userLocationAnnotation)},updateUserLocationAnnotation:function(t){if(t.coordinate){var e=this._userLocationAnnotation||new y(t);if(this._userLocationAnnotation||(this._userLocationAnnotation=e,this.addItem(e)),t.stale)return delete this._lastGeocoderRequestCoordinate,delete this._lastUserLocationAnnotationSubtitle,void(e._impl.stale=!0);if(e._impl.stale=!1,e._impl.setCoordinate(t.coordinate),E){if(this._lastGeocoderRequestCoordinate&&this._lastGeocoderRequestCoordinate.latitude===e._impl.coordinate.latitude&&this._lastGeocoderRequestCoordinate.longitude===e._impl.coordinate.longitude)return void(this._userLocationAnnotation.subtitle=this._lastUserLocationAnnotationSubtitle)}else E=new g;this._lastGeocoderRequestCoordinate=e._impl.coordinate.copy(),x(E,e,this)}},mapSizeDidUpdate:function(){if(0!==this._pendingAnnotations.length){var t=this._map.shouldWaitForTilesAndControls();this._pendingAnnotations.forEach(function(e){e._impl.isPending&&this._addAnnotationWaitingForTiles(e,t)},this),this._pendingAnnotations=[]}},updateVisibleAnnotations:function(){this._updateVisibleAnnotations(this._items)},startDraggingAnnotation:function(t,e){this._map.annotationDraggingWillStart(),this._draggedAnnotation=t,this._pendingDragStart=!0,t.selected&&this._hideCallout(t),v.classList.add(this._node.element,T.DRAGGING),v.classList.add(this._draggedAnnotation._impl.node.element,T.LIFTED),this._draggedAnnotation._impl.lift(40),this._updateSceneGraph()},mapTypeWasSet:function(t){p.prototype.darkColorScheme=t,this._items.forEach(function(t){t._impl.updateLayout()})},devicePixelRatioDidChange:function(){this._items.forEach(function(t){"function"==typeof t._impl.updateGlyphImages&&t._impl.updateGlyphImages()})},handleEvent:function(t){switch(t.type){case"region-change-start":this._nudgeStarted=!0,this._map.public.addEventListener("region-change-end",this);break;case"region-change-end":!this._nudgeStarted&&this._nudgeMapToShowCallout()||(delete this._nudgeStarted,this._callout&&this._callout.animateIn(),this._map.public.removeEventListener(t.type,this))}},performScheduledUpdate:s,addedItem:function(t,e){h.prototype.addedItem.call(this,t,e),t._impl.isWaiting=!0,e&&(t._impl.delayRank=0);var i=this._shouldAnnotationBePending(t);i&&(t._impl.isPending=!0,this._pendingAnnotations.push(t)),this._updateAnnotation(t),t._impl.selected&&this._didSelectAnnotation(t),e||i||this._addAnnotationWaitingForTiles(t,this._map.shouldWaitForTilesAndControls())},removedItem:function(t){t._impl.node.remove(),h.prototype.removedItem.call(this,t),t._impl.labelRegion&&this._removeLabelRegionForAnnotation(t),this._updateVisibleAnnotations([t]),this._clustersController.removedAnnotation(t),t.memberAnnotations||this._updateCollisions(this._items)},removedReferenceToMap:function(){this._userLocationAnnotation&&this._userLocationAnnotation._impl.removedFromMap()},pickableItemsCloseToPoint:function(t,e){var i=t.filter(function(t,i){var n=t._impl.distanceToPoint(e);return n<=this._selectionDistance&&(t._impl.distance=n,t._impl.index=i,!0)},this).sort(function(t,e){return t._impl.distance-e._impl.distance||e._impl.index-t._impl.index});return i.forEach(function(t){delete t._impl.distance,delete t._impl.index}),i},annotationDraggingDidChange:function(t){this._draggedAnnotation&&!this._draggedAnnotation._impl.shouldPreventDrag&&(this._pendingDragStart&&(delete this._pendingDragStart,this._draggedAnnotation._impl.draggingDidStart(),this._map.dispatchEventWithAnnotation(d.Events.DragStart,this._draggedAnnotation)),L.scheduleASAP(this),this._draggedAnnotation._impl.setDraggingTranslationForMapFrameSize(t,this._map.ensureRenderingFrame().size),this._annotationDraggingMapPanningController.update(this._draggedAnnotation,this._draggedAnnotation._impl.node))},annotationDraggingDidEnd:function(t){this._draggedAnnotation&&(this._annotationDraggingMapPanningController.stop(),this._draggedAnnotation._impl.dropAfterDraggingAndRevertPosition(!t),v.classList.remove(this._draggedAnnotation._impl.node.element,T.LIFTED),v.classList.remove(this._node.element,T.DRAGGING),this._map.annotationDraggingDidEnd(),this._map.dispatchEventWithAnnotation(d.Events.DragEnd,this._draggedAnnotation),delete this._draggedAnnotation,this._updateSceneGraph())},annotationPropertyDidChange:function(t,e){switch(e){case"selected":t.selected?this._didSelectAnnotation(t):this._didDeselectAnnotation(t);break;case"coordinate":if(!t._impl.updatedPosition())return;break;case"":case"displayPriority":case"collisionMode":break;case"calloutOffset":this._updateCalloutPositionWithTailShift(t,!0);break;case"visible":this._selectedItem===t&&(this._callout?this._callout.visible=t.visible:t.visible&&this._showCalloutForAnnotation(t,!0)),t._impl.needsColliding=!0;break;case"draggable":this._draggedAnnotation!==t||t.draggable||this._map.stopDraggingAnnotation();break;default:this._selectedItem===t&&(this._updateCalloutInfo(t),this._updateCalloutTailShift())}this._annotationsDidChangeSinceLastCollision=!0,this._updateVisibleAnnotations([t]),this._updateLabelRegionForAnnotation(t)},mapForAnnotation:function(t){return this._map?this._map.public:null},sizeForElement:function(t){if(this._map.isRooted())return this._styleHelper.sizeForElement(t)},selectedAnnotationDidMoveToMap:function(t){this._updateSceneGraph(),this._showCalloutForAnnotation(t)},supportsLabelRegions:function(){return this._map.supportsLabelRegions()},annotationFinishedAnimating:function(t){this._checkCompletion()},isElementInCallout:function(t){return!!this._callout&&this._callout.containsElement(t)},isElementInCustomCallout:function(t){return!!this._callout&&this._callout.isCustomCallout()&&this._callout.node.element.contains(t)},mapPanningDuringAnnotationDrag:s,mapSupportForLabelRegionsChanged:function(){this._items.forEach(function(t){var e=t._impl;e.updateLayout(),delete e.labelRegion,this._updateLabelRegionForAnnotation(t)},this)},containsMarkerAnnotation:function(){return this._items.some(function(t){return"string"==typeof t.glyphText})},_addAnnotationToMap:function(t,e){this._shouldAnnotationBePending()?t._impl.isPending=!0:(t._impl.willMoveToMap(t._impl.canAnimate&&!e),delete t._impl.timeout,delete t._impl.isWaiting,delete t._impl.canAnimate,delete t._impl.delayMs,this._annotationsNode.addChild(t._impl.node),t._impl.sceneGraphNode&&this._sceneGraphNode.addChild(t._impl.sceneGraphNode),this._updateAnnotation(t),t.selected&&this._showCalloutForAnnotation(t),this._updateLabelRegionForAnnotation(t),t._impl.didMoveToMap())},_addAnnotationWaitingForTiles:function(t,e,i){t._impl.hasOwnProperty("canAnimate")||(t._impl.canAnimate=!t._impl.isPending),delete t._impl.isPending,!e||t===this._userLocationAnnotation||this._items.some(function(t){return t!==this._userLocationAnnotation&&t._impl.mayBeDrawn()})?!i&&t._impl.doesAnimate()&&t._impl.delayMs>0?t._impl.timeout=window.setTimeout(this._addAnnotationToMap.bind(this,t),t._impl.delayMs):this._addAnnotationToMap(t,i):this._waitingAnnotations?this._waitingAnnotations.push(t):(this._waitingAnnotations=[t],this._tileLoadingTimeout=window.setTimeout(this.addWaitingAnnotations.bind(this,w.noop),3e3))},_didDeselectAnnotation:function(t){v.classList.remove(t._impl.node.element,T.SELECTED),this.selectedItem=null,this._map.annotationSelectionDidChange(t),this._hideCallout(t)},_didSelectAnnotation:function(t){v.classList.add(t._impl.node.element,T.SELECTED),this.selectedItem=t,this._map.annotationSelectionDidChange(t),t._impl.visible&&this._showCalloutForAnnotation(t)},_boundingRectForSelectedAnnotationAndCallout:function(){var t=this._callout.boundingRect,e=this._selectedItem._impl.position(),i=Math.min(t.minX(),e.x),n=Math.min(t.minY(),e.y),o=Math.max(t.maxX(),e.x)-i,s=Math.max(t.maxY(),e.y)-n;return new C(i,n,o,s)},_updateCalloutTailShift:function(t){if(!this._callout)return!1;var e=t?this._callout.boundingRect.pad(12):this._boundingRectForSelectedAnnotationAndCallout().pad(12),i=this._totalMapNudgingTranslation(e,this._map.ensureVisibleFrame(),t),n=i.x,o=i.y,s=this._callout.shiftTailBy(n);return 0!==n||0!==o?new b(-(n+s),-o):void 0},_nudgeMapToShowCallout:function(){if(this._map.cameraIsPanning||this._map.cameraIsZooming)return this._map.public.addEventListener("region-change-end",this),!0;if(!this._selectedItem._impl.isShown())return!1;var t=this._updateCalloutTailShift();return!!t&&(this._map.public.addEventListener("region-change-start",this),this._map.translateCameraAnimated(t,!0),this._map.public.removeEventListener("region-change-start",this),!!this._nudgeStarted)},_translationToFitInFrame:function(t,e){var i={x:0,y:0};return(t.maxX()>e.maxX()||t.minX()<e.minX()||t.maxY()>e.maxY()||t.minY()<e.minY())&&(i.x=t.minX()<e.minX()?t.minX()-e.minX():t.maxX()>e.maxX()?t.maxX()-e.maxX():0,i.y=t.minY()<e.minY()?t.minY()-e.minY():t.maxY()>e.maxY()?t.maxY()-e.maxY():0),i},_totalMapNudgingTranslation:function(t,e,i){var n=this._translationToFitInFrame(t,e),s=this._map.controlsLayer.controlBounds(),a=e.midX(),r=e.midY(),l=0,h=0;return t=o(t,n.x,n.y),s.forEach(function(e){if(t.minX()<e.maxX()&&t.maxX()>e.minX()&&t.minY()<e.maxY()&&t.maxY()>e.minY()){if(l+=e.maxX()<a?t.minX()-e.maxX():t.maxX()-e.minX(),h+=e.maxY()<r?t.minY()-e.maxY():t.maxY()-e.minY(),i)return;0!==h&&Math.abs(l)>Math.abs(h)?l=0:h=0,t=o(t,l,h)}},this),n.x+=l,n.y+=h,n},_hideCallout:function(t){this._callout&&(t._impl.calloutWillDisappear(),v.classList.remove(this._callout.node.element,T.SELECTED),this._callout.animateOut(),delete this._callout)},_shouldAnnotationBePending:function(){return!this._map.isRooted()},_showCalloutForAnnotation:function(t,e){if(this._hideCallout(t),t._impl.canShowCallout()){var i=t._impl.callout;if(!i||"function"!=typeof i.calloutShouldAppearForAnnotation||i.calloutShouldAppearForAnnotation(t)){var n;if(i&&"function"==typeof i.calloutElementForAnnotation&&(n=i.calloutElementForAnnotation(t),w.checkElement(n,"[MapKit] calloutElementForAnnotation() must return a DOM element, but returned `"+n+"` instead.")),!n){var o;if(i&&"function"==typeof i.calloutContentForAnnotation&&(o=i.calloutContentForAnnotation(t),w.checkElement(o,"[MapKit] contentElementForAnnotation() must return a DOM element, but returned `"+o+"` instead.")),!o&&!t.title)return}t._impl.calloutWillAppear();var s;i&&"function"==typeof i.calloutLeftAccessoryForAnnotation&&(s=i.calloutLeftAccessoryForAnnotation(t),w.checkElement(s,"[MapKit] calloutLeftAccessoryForAnnotation() must return a DOM element, but returned `"+s+"` instead.")),!s&&t._impl.canvasForCalloutAccessory&&(s=t._impl.canvasForCalloutAccessory());var a;i&&"function"==typeof i.calloutRightAccessoryForAnnotation&&(a=i.calloutRightAccessoryForAnnotation(t),w.checkElement(a,"[MapKit] calloutRightAccessoryForAnnotation() must return a DOM element, but returned `"+a+"` instead.")),this._callout=new m(this._styleHelper,{customElement:n,contentElement:o,ignoreCalloutCornerRadiusForLeftAccessory:t._impl.ignoreCalloutCornerRadiusForLeftAccessory,leftAccessory:this._rtl?a:s,rightAccessory:this._rtl?s:a,rtl:this._rtl}),this._callout.animates=!e&&(!i||"function"!=typeof i.calloutShouldAnimateForAnnotation||!!i.calloutShouldAnimateForAnnotation(t));var r=this._callout.animates&&i&&"function"==typeof i.calloutAppearanceAnimationForAnnotation?i.calloutAppearanceAnimationForAnnotation(t):"";if(w.checkType(r,"string","[MapKit] calloutAppearanceAnimationForAnnotation() must return a string, but returned `"+r+"` instead."),this._callout.appearanceAnimation=r,n){var l;i&&"function"==typeof i.calloutAnchorOffsetForAnnotation&&(l=i.calloutAnchorOffsetForAnnotation(t,this._callout.node.size),w.checkInstance(l,window.DOMPoint,"[MapKit] calloutAnchorOffsetForAnnotation() must return a DOMPoint, but returned `"+l+"` instead.")),this._callout.setAnchorOffset(l)}this._updateCalloutInfo(t),this._updateCalloutPositionWithTailShift(t,!1);var h=!e&&this._nudgeMapToShowCallout();this._callout.willMoveToMap(),v.classList.add(this._callout.node.element,T.SELECTED),this._calloutsNode.addChild(this._callout.node),h||this._callout.animateIn()}}},mapWasDestroyed:function(){h.prototype.mapWasDestroyed.call(this),this._annotationDraggingMapPanningController.mapWasDestroyed()},_updateCalloutInfo:function(t){this._callout?this._callout.updateInfo(t,12)||this._hideCallout(t):this._showCalloutForAnnotation(t)},_updateCalloutPositionWithTailShift:function(t,e){this._selectedItem===t&&this._callout&&(this._callout.setShown(t._impl.isShown()),this._callout.setPosition(t._impl.positionForCallout()),e&&this._updateCalloutTailShift(e))},_updateLabelRegionForAnnotation:function(t){var e=t._impl;if(e.shouldHideLabels){e.labelRegion||(e.labelRegion=this._map.createLabelRegion());var i=e.labelRegion;if(i){var n=e.node.size,o=n.width,s=n.height;i.x=e.x,i.y=1-e.y,i.width=o,i.height=s,i.xOffset=o/2-e._anchorPoint.x-e._anchorOffset.x,i.yOffset=e._anchorPoint.y+e._anchorOffset.y-s/2,this._map.updatedLabelRegion()}}},_removeLabelRegionForAnnotation:function(t){this._map.unregisterLabelRegion(t._impl.labelRegion),delete t._impl.labelRegion},_updateVisibleAnnotations:function(t,e){e||this._deletePreviousPointForPickingItem();var i=this._map,n=i.camera.toRenderingMapRect(),o=n.size.width,s=n.size.height,a=n.minX(),r=n.maxX(),l=a-o,h=r+o,c=n.minY()-s,u=c+3*s;t.forEach(function(t){if(t!==this._draggedAnnotation||!this._annotationDraggingMapPanningController.panning){var e=t._impl.x+(t._impl.x<l?1:t._impl.x>h?-1:0);if(e>=l&&e<=h&&t._impl.y>=c&&t._impl.y<=u){t._impl.isShown()||t!==this._selectedItem||this._showCalloutForAnnotation(t,!0),t._impl.setShown(!0);var n=a-e;n>0?Math.abs(r-(e+1))<n&&++e:(n=e-r)>0&&Math.abs(a-(e-1))<n&&--e}else t._impl.setShown(!1);t._impl.setPosition(i.adjustMapItemPoint(i.camera.transformMapPoint(new b(e,t._impl.y))))}},this),this._updateCalloutPositionWithTailShift(this._selectedItem,!0),e||this._updateCollisions(t),this._updateSceneGraph()},_updateCollisions:function(t){var e=!1,i=this._items.filter(function(t){var i=t.visible&&t._impl.isShown(),n=(i||t._impl.needsColliding)&&t!==this._userLocationAnnotation;return delete t._impl.needsColliding,n&&(t.displayPriority<u.DisplayPriority.Required||t.clusteringIdentifier)&&(e=!0),n&&i&&!t.memberAnnotations},this);if(e){var n=this._map;this._clustersController.collideAnnotations(i,n.zoomLevel,n.rotation,this._annotationsDidChangeSinceLastCollision)}this._annotationsDidChangeSinceLastCollision=!1},addCluster:function(t){try{var e="function"==typeof this._map.annotationForCluster?this._map._annotationForCluster.call(this._map.public,t):t;e=this._clustersController.setRequiredClusterAnnotationProperties(e,t),this.addItem(e)}catch(i){console.warn("[MapKit] annotationForCluster: the following error occurred; reverting to default annotation: "+i),e=this.addItem(t)}return e._impl.customCluster=e!==t,e._impl.updateLayout(!0),e},willUpdateCollisions:function(){this._items.forEach(function(t){t._impl.wasOccluded=t._impl.occluded,t._impl.previousCluster=t._impl.cluster})},didUpdateCollisions:function(){this._items.forEach(function(t){var e=t._impl;e.wasCollided||e.occluded||(e.wasCollided=!0),t.memberAnnotations&&t.memberAnnotations[0]._impl.cluster!==t&&(e.cluster=e.memberAnnotations[0]._impl.cluster),e.updateVisibility(e.occluded),e.occluded!==e.wasOccluded&&e.animateOcclusion(),delete e.wasOccluded,delete e.previousCluster,e.shouldHideLabels&&(e.occluded||e.labelRegion?e.occluded&&e.labelRegion&&this._removeLabelRegionForAnnotation(t):this._updateLabelRegionForAnnotation(t))},this),this._updateVisibleAnnotations(this._items,!0)},deselectClusterAnnotation:function(){this._selectedItem&&this._selectedItem.memberAnnotations&&(this._selectedItem.selected=!1)},_updateAnnotation:function(t){t._impl.updatedPosition()&&this._updateVisibleAnnotations([t])},_updateSceneGraph:function(){var t=this._selectedItem,e=this._draggedAnnotation;this._sceneGraphNode.children=this._items.filter(function(i){return i._impl.isDrawn()&&i!==t&&i!==e}).map(function(t){return t._impl.sceneGraphNode}),t&&t._impl.isDrawn()&&this._sceneGraphNode.addChild(t._impl.sceneGraphNode),e&&e._impl.isDrawn()&&this._sceneGraphNode.addChild(e._impl.sceneGraphNode)},_checkCompletion:function(){this._annotationsDidChangeSinceLastCollision=!0,this._updateVisibleAnnotations(this._items),this._completionCallback&&(this._items.some(function(t){return t._impl.floating})||"function"!=typeof this._completionCallback||(this._completionCallback(),delete this._completionCallback))}});var x=v.debounce(function(t,e,i){i._geocoderRequestId&&t.cancel(i._geocoderRequestId);var n=i._geocoderRequestId=t.reverseLookup(e._impl.coordinate,function(t,o){n===i._geocoderRequestId&&(delete i._geocoderRequestId,t?(console.error("[MapKit] Error getting address for user location: "+t.message),e.subtitle=null):o.results.length>0?i._lastUserLocationAnnotationSubtitle=e.subtitle=o.results[0].formattedAddress:e.subtitle=null)})},1e3);e.exports=n},{"../../../lib/geo":2,"../layer-items-controller":180,"../services/geocoder":213,"../style-helper":220,"../utils":225,"./annotation":127,"./annotation-dragging-map-panning-controller":123,"./annotation-internal":124,"./annotations-controller-node":128,"./callout":130,"./clusters-controller":133,"./marker-annotation-internal":142,"./user-location-annotation":156,"@maps/geometry/point":69,"@maps/geometry/rect":70,"@maps/js-utils":84,"@maps/render-tree":102,"@maps/scheduler":106}],130:[function(t,e,i){function n(t,e){function i(e){var i=t.backgroundColorForElement(e);return e.style.background="transparent",i}function n(t,e){var i=p.htmlElement("div",{class:I.CALLOUT_ACCESSORY_CONTENT},t);return i.style.maxWidth=E/2+"px",e&&(i.style.padding="0"),p.htmlElement("div",{class:I.CALLOUT_ACCESSORY},i)}r.call(this),this._styleHelper=t,this._rtl=e.rtl;var o=p.htmlElement("div",{class:I.CALLOUT});this._node=new u.Node(o),e.customElement?(this._containerElement=this._customElement=o.appendChild(e.customElement),this.setSize(this._styleHelper.sizeForElement(this._customElement))):(this._ignoreCalloutCornerRadiusForLeftAccessory=e.ignoreCalloutCornerRadiusForLeftAccessory,this._tailSide=e.tailSide||_.Bottom,this._tailScale=e.tailScale||1,this._bubbleElement=p.svgElement("path"),this._svgElement=o.appendChild(p.svgElement("svg",{class:I.CALLOUT_BUBBLE},this._bubbleElement)),this._containerElement=o.appendChild(p.htmlElement("div")),e.leftAccessory&&(this._leftAccessoryBackgroundColor=i(e.leftAccessory),this._leftAccessory=n(e.leftAccessory,!this._rtl&&this._ignoreCalloutCornerRadiusForLeftAccessory),this._containerElement.appendChild(this._leftAccessory)),this._containerContentElement=this._containerElement.appendChild(p.htmlElement("div",{class:I.CALLOUT_CONTENT})),e.rightAccessory&&(this._rightAccessoryBackgroundColor=i(e.rightAccessory),this._rightAccessory=n(e.rightAccessory,this._rtl&&this._ignoreCalloutCornerRadiusForLeftAccessory),this._containerElement.appendChild(this._rightAccessory)),(this._leftAccessoryBackgroundColor||this._rightAccessoryBackgroundColor)&&(this._calloutId=a(),this._linearGradientElement=p.svgElement("linearGradient",{id:this._calloutId}),this._svgElement.appendChild(p.svgElement("defs",this._linearGradientElement))),e.contentElement?this._setContentElement(e.contentElement):(p.classList.add(this._containerElement,I.STANDARD_CONTENT),p.classList.toggle(this._containerContentElement,I.RTL,e.rtl))),e.position&&this.setPosition(e.position),this._node.wantsHardwareCompositing=!0}function o(t){return(t-T)/(2*b)}function s(t,e){e||(e={});var i=e.tailShift||0,n=e.side||_.Bottom,o=e.scale||1,s=b*o,a=y*o,r=t.height/2-s,l=t.width/2-s,h=C*o,c=S*o;return"M"+(n===_.Left?a:0)+","+f+"c0,"+(w-f)+" "+v+","+-f+" "+f+","+-f+"h"+t.width+"c"+(f-v)+",0 "+f+","+w+" "+f+","+f+(n===_.Right?"v"+(r+i)+"c0,"+h+" "+a+","+c+" "+a+","+s+"c0,"+(s-c)+" "+-a+","+(s-h)+" "+-a+","+s+"v"+(r-i):"v"+t.height)+"c0,"+(f-w)+" "+-v+","+f+" "+-f+","+f+(n===_.Bottom?"h"+(-i-l)+"c"+-h+",0 "+-c+","+a+" "+-s+","+a+"c"+(c-s)+",0 "+(h-s)+","+-a+" "+-s+","+-a+"h"+(i-l):"h"+-t.width)+"c"+(v-f)+",0 "+-f+","+-w+" "+-f+","+-f+(n===_.Left?"v"+(i-r)+"c0,"+-h+" "+-a+","+-c+" "+-a+","+-s+"c0,"+(c-s)+" "+a+","+(h-s)+" "+a+","+-s+"v"+(-i-r):"z")}function a(){var t=Math.random().toString(36).substr(2);return document.getElementById(t)?a():t}var r=t("./annotation-layer-item-internal"),l=t("@maps/geometry/point"),h=t("@maps/geometry/rect"),c=t("@maps/geometry/size"),u=t("@maps/render-tree"),d=t("@maps/css-transform"),p=t("../utils"),m=t("@maps/js-utils"),g=t("@maps/scheduler"),_=r.CalloutTailSide,f=10.5,y=13,v=3.5826363,w=3.58028186,b=17,C=10,S=12,L=91-b,T=3,E=373,x=50+y,M=55+y,A=1+2*f,k={default:{left:10,right:10,content:{left:4,right:4}},withIcon:{left:7.5,right:10},withAccessories:{left:7.5,right:7.5}},O={default:5.5,withCustomContent:0},I={CALLOUT:"mk-callout",CALLOUT_BUBBLE:"mk-bubble",TITLE:"mk-title",SUBTITLE:"mk-subtitle",NO_SUBTITLE:"mk-no-subtitle",NO_ACESSORIES:"mk-no-accessories",STANDARD_CONTENT:"mk-standard",CALLOUT_ACCESSORY:"mk-callout-accessory",CALLOUT_CONTENT:"mk-callout-content",CUSTOM_CONTENT:"mk-custom-content",CALLOUT_ACCESSORY_CONTENT:"mk-callout-accessory-content",RTL:"mk-rtl"};n.prototype=m.inheritPrototype(r,n,{_tailShift:0,get node(){return this._node},get boundingRect(){var t=this._node.position;return new h(t.x,t.y,this._node.size.width,this._node.size.height)},willMoveToMap:function(){this._node.transform=(new d).scale(0)},setAnchorOffset:function(t){this._anchorOffset=t?new window.DOMPoint(t.x,t.y):new window.DOMPoint},containsElement:function(t){return t!==this._svgElement&&this._containerElement.contains(t)},isCustomCallout:function(){return!(!this._customElement&&!this._contentElement)},updateInfo:function(t,e){if(this._customElement||this._contentElement)return!0;if(!t||!t.title)return!1;this._containerContentElement.innerHTML="",this._containerElement.style.width="",this._containerContentElement.appendChild(p.htmlElement("div",{class:I.TITLE},t.title)),t.subtitle?(this._containerContentElement.appendChild(p.htmlElement("div",{class:I.SUBTITLE},t.subtitle)),p.classList.remove(this._containerElement,I.NO_SUBTITLE)):(p.classList.add(this._containerElement,I.NO_SUBTITLE),this._containerElement.classList.toggle(I.NO_ACESSORIES,!this._leftAccessory&&!this._rightAccessory)),this._updateAccessoryViews();var i=this._styleHelper.sizeForElement(this._containerElement),n=t.map._impl.ensureVisibleFrame().size.width-2*e-this._extraWidth(this._ignoreCalloutCornerRadiusForLeftAccessory);return i.width=m.clamp(i.width,L,m.clamp(n,L,E)),this._updateSize(i,{annotation:t}),this.updatePosition(),!0},shiftTailBy:function(t){if(this._customElement)return 0;var e=this._tailSide===_.Bottom?new c(this._node.size.width-A,this._node.size.height-this._extraHeight):new c(this._node.size.width-this._extraHeight,this._node.size.height-A),i=this._tailSide===_.Bottom?e.width:e.height,n=Math.max(0,(i-L-f)/2);return this._tailShift=t<0?Math.min(n,-t):-Math.min(n,t),this._bubbleElement.setAttribute("d",s(e,{side:this._tailSide,scale:this._tailScale,tailShift:this._tailShift})),this._node.position=this._tailSide===_.Bottom?new l(this._node.position.x+this._tailShift,this._node.position.y):new l(this._node.position.x,this._node.position.y-this._tailShift),this._tailShift},animateIn:function(){if(!this.animates||this.animates&&this._customElement&&!this.appearanceAnimation)this._node.transform=new d;else{if(this._appearanceAnimationName)return this._node.transform=new d,this._containerElement.style.animation=this._containerElement.style.webkitAnimation=this._appearanceAnimation,this._svgElement&&(this._svgElement.style.animation=this._svgElement.style.webkitAnimation=this._appearanceAnimation),this._animationName=this._appearanceAnimationName,this._containerElement.addEventListener("animationend",this),void this._containerElement.addEventListener("webkitAnimationEnd",this);this._scaleXOffset=this._tailSide===_.Bottom?-this._tailShift:this._tailSide===_.Left?-this._node.size.width/2:this._node.size.width/2,this._scaleYOffset=this._tailSide===_.Bottom?this._node.size.height/2:0,this._scaleAnimationParameterIndex=0,this._scaleAnimationStartDate=Date.now(),g.scheduleOnNextFrame(this)}},animateOut:function(){this.visible?(this._scaleAnimationStartDate&&this._finishAnimatingScale(),this._node.element.style.webkitAnimation=this._node.element.style.animation="mk-fadeout 0.1s forwards",this._node.element.style.webkitAnimationName||this._node.element.style.animationName?(this._animationName="mk-fadeout",this._node.element.addEventListener("animationend",this),this._node.element.addEventListener("webkitAnimationEnd",this)):this._node.remove()):this._node.remove()},handleEvent:function(t){"animationend"!==t.type&&"webkitAnimationEnd"!==t.type||t.animationName!==this._animationName||(this._animationName===this._appearanceAnimationName?(this._containerElement.style.animation=this._containerElement.style.webkitAnimation="",this._containerElement.removeEventListener("animationend",this),this._containerElement.removeEventListener("webkitAnimationEnd",this)):this._node.remove(),delete this._animationName)},performScheduledUpdate:function(){this._scaleAnimationStartDate&&this._animateScale()},_updateSize:function(t,e){var i=this._ignoreCalloutCornerRadiusForLeftAccessory,n=this._tailSide===_.Left||this._tailSide===_.Right?Math.min(o(t.height),this._tailScale):this._tailScale,a=(this._tailSide===_.Bottom?t.width-this.node.size.width:t.height-this.node.size.height)-A;this._tailShift=Math.max(0,this._tailShift+Math.min(0,a)),this._bubbleElement.setAttribute("d",s(t,{side:this._tailSide,scale:n,tailShift:this._tailShift})),this._containerElement.style.width=t.width+"px";var r=t.height;this._extraHeight=A+y*n;var l=this._extraWidth(i);t.width+=this._tailSide===_.Bottom?l:this._extraHeight;var h=i?M:x;t.height+=this._tailSide===_.Bottom?this._extraHeight:A,t.height-=f,t.height=e.hasCustomContent?t.height:Math.max(t.height,h);var c=e.hasCustomContent?O.withCustomContent:O.default,u=(t.height-r-y)/2;this._containerElement.style.top=r/2+Math.max(c,u)+"px",this._svgElement.style.width=t.width+"px",this._svgElement.style.height=t.height+"px",this._svgElement.setAttribute("viewBox","-0.5 -0.5 "+t.width+" "+t.height);var d=k.withAccessories.left+(this._tailSide===_.Left?y*n:0),p=k.withAccessories.right+(this._tailSide===_.Right?y*n:0);this._containerElement.style.left=d+"px",this.setSize(t,this._tailSide);var m;this._leftAccessoryBackgroundColor&&(m=100*(this._leftAccessoryWidth+d)/t.width,this._updateAccessoryViewBackground(m,this._leftAccessoryBackgroundColor,"white")),this._rightAccessoryBackgroundColor&&(m=100-100*(this._rightAccessoryWidth+p)/t.width,this._updateAccessoryViewBackground(m,"white",this._rightAccessoryBackgroundColor))},_extraWidth:function(t){return t?k.withIcon.left+k.withIcon.right:k.default.left+k.default.right-k.default.content.left},_updateAccessoryViews:function(){this._leftAccessory&&(this._leftAccessoryWidth=(!this._rtl&&this._ignoreCalloutCornerRadiusForLeftAccessory?0:f)+this._styleHelper.sizeForElement(this._leftAccessory.children[0]).width,this._leftAccessory.style.width=this._leftAccessoryWidth+"px",this._ignoreCalloutCornerRadiusForLeftAccessory&&!this._rtl&&(this._leftAccessory.style.height=this._leftAccessoryWidth+"px",this._leftAccessory.style.overflow="visible"),this._containerContentElement.style.marginLeft=this._leftAccessoryWidth+"px"),this._rightAccessory&&(this._rightAccessoryWidth=(this._rtl&&this._ignoreCalloutCornerRadiusForLeftAccessory?0:f)+this._styleHelper.sizeForElement(this._rightAccessory.children[0]).width,this._rightAccessory.style.width=this._rightAccessoryWidth+"px",this._ignoreCalloutCornerRadiusForLeftAccessory&&this._rtl&&(this._rightAccessory.style.height=this._rightAccessoryWidth+"px",this._rightAccessory.style.overflow="visible"),this._containerContentElement.style.marginRight=this._rightAccessoryWidth+"px")},_updateAccessoryViewBackground:function(t,e,i){this._linearGradientElement.appendChild(p.svgElement("stop",{offset:t+"%","stop-color":""+e})),this._linearGradientElement.appendChild(p.svgElement("stop",{offset:t+"%","stop-color":""+i})),this._bubbleElement.style.fill="url(#"+this._calloutId+")"},_setContentElement:function(t){this._updateAccessoryViews(),this._contentElement=t,this._containerContentElement.appendChild(p.htmlElement("div",t)),p.classList.add(this._containerElement,I.CUSTOM_CONTENT);var e=this._styleHelper.sizeForElement(this._containerElement);this._updateSize(e,{hasCustomContent:!0})},_scaleAnimationParameters:[[8e3/60,30/249,277/249],[5e3/60,277/249,237/249],[5e3/60,237/249,1]],_animateScale:function(){var t=this._scaleAnimationParameters[this._scaleAnimationParameterIndex],e=t[0],i=t[1],n=t[2],o=Date.now(),s=Math.min((o-this._scaleAnimationStartDate)/e,1),a=i+(n-i)*s;if(this._node.transform=(new d).translate(this._scaleXOffset,this._scaleYOffset).scale(a).translate(-this._scaleXOffset,-this._scaleYOffset),1===s){if(!(++this._scaleAnimationParameterIndex<this._scaleAnimationParameters.length))return void this._finishAnimatingScale();this._scaleAnimationStartDate=o}g.scheduleOnNextFrame(this)},_finishAnimatingScale:function(){delete this._scaleXOffset,delete this._scaleYOffset,delete this._scaleAnimationStartDate,delete this._scaleAnimationParameterIndex}}),e.exports=n},{"../utils":225,"./annotation-layer-item-internal":125,"@maps/css-transform":60,"@maps/geometry/point":69,"@maps/geometry/rect":70,"@maps/geometry/size":71,"@maps/js-utils":84,"@maps/render-tree":102,"@maps/scheduler":106}],131:[function(t,e,i){function n(t,e,i,n){this._memberAnnotations=i,s.call(this,t,e,n)}var o=t("./annotation-internal"),s=t("./marker-annotation-internal"),a=t("@maps/js-utils"),r=t("../localizer").l10n;n.prototype=a.inheritPrototype(s,n,{get memberAnnotations(){return this._memberAnnotations},get n(){return this._memberAnnotations.length},get title(){return this.hasOwnProperty("_title")?this._title:this._topAnnotation.title},set title(t){Object.getOwnPropertyDescriptor(o.prototype,"title").set.call(this,t)},get subtitle(){var t=this.n-1;return this.hasOwnProperty("_subtitle")?this._subtitle:r.get("Annotation.Clustering.More"+(t>1?".Plural":""),{n:r.digits(t)})},set subtitle(t){Object.getOwnPropertyDescriptor(o.prototype,"subtitle").set.call(this,t)},get glyphText(){return this.hasOwnProperty("_glyphText")?this._glyphText:this.hasOwnProperty("_glyphImage")||this.hasOwnProperty("_selectedGlyphImage")?"":r.digits(this.n)},set glyphText(t){Object.getOwnPropertyDescriptor(s.prototype,"glyphText").set.call(this,t)},get draggable(){return!1},get displayPriority(){return this._topAnnotation.displayPriority},get clusteringIdentifier(){return this._topAnnotation.clusteringIdentifier},get _topAnnotation(){return this._memberAnnotations[0]},get _showDefaultAltText(){return this.hasOwnProperty("_glyphText")||this.hasOwnProperty("_glyphImage")||this.hasOwnProperty("_selectedGlyphImage")},altText:function(){return this._showDefaultAltText?o.prototype.altText.call(this):this.title?r.get("Annotation.Clustering.AccessibilityLabel",{n:this.glyphText,title:this.title,subtitle:this.subtitle}):r.get("Annotation.Clustering.NoTitle.AccessibilityLabel",{n:this.glyphText,subtitle:this.subtitle})}}),e.exports=n},{"../localizer":182,"./annotation-internal":124,"./marker-annotation-internal":142,"@maps/js-utils":84}],132:[function(t,e,i){function n(t,e,i){Object.defineProperty(this,"_impl",{value:new s(this,t,e,i)})}var o=t("./marker-annotation"),s=t("./cluster-annotation-internal"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(o,n,{get memberAnnotations(){return this._impl.memberAnnotations}}),e.exports=n},{"./cluster-annotation-internal":131,"./marker-annotation":146,"@maps/js-utils":84}],133:[function(t,e,i){function n(t){this._annotationsController=t,this._clusters=[],this._previousClusters=[],this._previousOverlaps=[],this._previousAnnotations=[],this._frameCounter=0}function o(t){var e=[0,0];t.forEach(function(t){e[0]+=t.coordinate.latitude,e[1]+=t.coordinate.longitude});var i=t.length;return new f(e[0]/i,e[1]/i)}function s(t,e){for(var i=0,n=t.length;i<n;++i){var o=t[i],s=e.length;if(o.memberAnnotations.length===s){for(var a=0;a<s&&e[a]===o.memberAnnotations[a];++a);if(a===s)return i}}return-1}function a(t,e){var i=g.DisplayPriority.Required,n=t.selected?i:t.displayPriority;return(e.selected?i:e.displayPriority)-n||e._impl.boundingBox.y2-t._impl.boundingBox.y2}function r(t,e){return e.displayPriority-t.displayPriority||t._impl.index-e._impl.index}function l(t,e){return t._impl.boundingBox.x1-e._impl.boundingBox.x1}function h(t){var e=t._impl.node,i=e.size,n=i.width,o=i.height,s={x1:e.position.x,x2:e.position.x+n,y1:e.position.y,y2:e.position.y+o};return t.collisionMode===g.CollisionMode.Circle&&(s.cx=(s.x1+s.x2)/2,s.cy=(s.y1+s.y2)/2,s.r=Math.min(n,o)/2),s}function c(t,e){var i={x1:t.x1-e,x2:t.x2+e,y1:t.y1-e,y2:t.y2+e};return t.hasOwnProperty("r")&&(i.r=t.r+e,i.cx=t.cx,i.cy=t.cy),i}function u(t,e){var i=t.cx-y.clamp(t.cx,e.x1,e.x2),n=t.cy-y.clamp(t.cy,e.y1,e.y2);return i*i+n*n<=t.r*t.r}function d(t,e,i){var n=t._impl.boundingBox,o=e._impl.boundingBox;return i&&(n=c(n,w),o=c(o,w)),p(n,o)}function p(t,e){if(!(e.x2>=t.x1&&e.x1<=t.x2&&e.y2>=t.y1&&e.y1<=t.y2))return!1;if(t.hasOwnProperty("r")){if(e.hasOwnProperty("r")){var i=t.cx-e.cx,n=t.cy-e.cy,o=Math.sqrt(i*i+n*n);return t.r+e.r>=o}return u(t,e)}return!e.hasOwnProperty("r")||u(e,t)}function m(t,e){t._impl.occluded=e,t._impl.updateVisibility(e)}var g=t("./annotation"),_=t("./cluster-annotation"),f=t("../../../lib/geo").Coordinate,y=t("@maps/js-utils"),v=t("@maps/scheduler"),w=5;n.prototype={collideAnnotations:function(t,e,i,n){this._locked||(this._annotations=t,this._zoomLevel=e,this._rotation=i,this._changesSinceLastCollision=n,v.scheduleOnNextFrame(this))},setRequiredClusterAnnotationProperties:function(t,e){return t!==e&&(t||(t=e),t.coordinate=e.coordinate,t.draggable=!1,t.displayPriority=e.memberAnnotations[0].displayPriority,t.clusteringIdentifier=e.memberAnnotations[0].clusteringIdentifier,t.selected=!1,Object.defineProperty(t,"memberAnnotations",{enumerable:!0,get:function(){return this._impl.memberAnnotations}}),Object.defineProperty(t._impl,"memberAnnotations",{enumerable:!0,value:e.memberAnnotations})),t.animates=e.memberAnnotations.some(function(t){return!t._impl.wasCollided}),t},removedAnnotation:function(t){t.memberAnnotations||(this._previousClusters=this._previousClusters.filter(function(e){if(e.memberAnnotations.indexOf(t)<0)return!0;this._annotationsController.removeItem(e)},this))},performScheduledUpdate:function(){if(this._frameCounter=(this._frameCounter+1)%10,1===this._frameCounter){var t=this._needsUpdate();if(t){this._changesSinceLastCollision=!1,this._previousZoomLevel=this._zoomLevel,this._previousRotation=this._rotation,this._previousAnnotations=this._annotations.slice(),this._locked=!0,this._annotationsController.willUpdateCollisions(),"region"===t&&this._annotationsController.deselectClusterAnnotation(),this._overlaps=[];for(var e=0,i=0,n=this._annotations.length;i<n;++i){var o=this._annotations[i];if(o._impl.needsLayout)return this._frameCounter=0,this._locked=!1,void v.scheduleOnNextFrame(this);o._impl.index=i,o._impl.occluded=!1,o._impl.previousCluster=o._impl.cluster,delete o._impl.cluster,o._impl.boundingBox=h(o),e=Math.max(e,o._impl.boundingBox.x2-o._impl.boundingBox.x1)}var s=this._annotations.sort(l),a={};s.forEach(function(t){if(!t.selected){var e=t.clusteringIdentifier;e&&(a[e]?a[e].push(t):a[e]=[t])}});var r=this._clusters;this._clusters=[];for(var c in a)a[c].length>1&&(e=this._clusterAnnotationsWithMaxWidth(a[c],e));r.forEach(function(t){this._clusters.indexOf(t)<0&&(m(t,!0),t.selected&&(t.selected=!1))},this),this._collideAnnotationsAndClusters(s,e),this._previousOverlaps=this._overlaps,this._annotationsController.didUpdateCollisions(),this._locked=!1}}else v.scheduleOnNextFrame(this)},_clusterAnnotationsWithMaxWidth:function(t,e){for(var i=0;i<t.length;){var n=t[i];if(n._impl.cluster)++i;else{var o=n._impl.boundingBox.x2,s=[n],a=i+1;if(n.memberAnnotations&&i>0){var l=n._impl.boundingBox.x1-e;for(a=i-1;a>0&&t[a]._impl.boundingBox.x1>=l;--a);}for(;a<t.length&&t[a]._impl.boundingBox.x1<=o;++a){var c=t[a];!c._impl.cluster&&a!==i&&this._annotationsOverlapExcludingSelected(n,c)&&s.push(c)}if(s.length>1){s=s.reduce(function(t,e){return e.memberAnnotations?(t=t.concat(e.memberAnnotations),e._impl.cluster=!0,m(e,!0)):t.push(e),t},[]).sort(r);var u=this._clusterAnnotationForMemberAnnotations(s);for(u._impl.occluded=!1,u._impl.boundingBox=h(u),e=Math.max(e,u._impl.boundingBox.x2-u._impl.boundingBox.x1),delete u._impl.cluster,a=0;a<s.length;++a)s[a]._impl.occluded=!0,s[a]._impl.cluster=u;for(a=0;a<t.length&&t[a]._impl.boundingBox.x1<u._impl.boundingBox.x1;++a);t.splice(a,0,u),i=Math.min(i+1,a)}else++i}}return t.forEach(function(t){t.memberAnnotations&&!t._impl.cluster&&(this._clusters.push(t),t.map||this._annotationsController.addItem(t))},this),e},_collideAnnotationsAndClusters:function(t,e){for(var i=!1,n=[],o=0,s=0,a=t.length,r=this._clusters.length;o<a||s<r;){var l=t[o],h=this._clusters[s];l?l._impl.cluster?++o:h&&h._impl.boundingBox.x1<l._impl.boundingBox.x1?(h._impl.isRequired()||(i=!0),n.push(h),++s):(l._impl.isRequired()||(i=!0),n.push(l),++o):(h._impl.isRequired()||(i=!0),n.push(h),++s)}i&&this._collideAnnotationsWithMaxWidth(n,e)},_collideAnnotationsWithMaxWidth:function(t,e){for(var i=[],n=0,o=t.length;n<o;++n)for(var s=t[n],r=s._impl.boundingBox.x2,l=n+1;l<o;++l){var h=t[l];if(h._impl.boundingBox.x1>r)break;s._impl.isRequired()&&h._impl.isRequired()||this._annotationsOverlap(s,h)&&i.push(a(s,h)<=0?[s,h]:[h,s])}i.sort(function(t,e){return a(t[0],e[0])}).forEach(function(t){t[0]._impl.occluded||(t[1]._impl.occluded=!0)})},_annotationsOverlapExcludingSelected:function(t,e){return!t.selected&&!e.selected&&this._annotationsOverlap(t,e)},_annotationsOverlap:function(t,e){if(t._impl.isLifted()||e._impl.isLifted())return!1;var i=r(t,e)<=0?[t,e]:[e,t],n=d(t,e,this._previousOverlaps.find(function(t){return t[0]===i[0]&&t[1]===i[1]}));return n&&this._overlaps.push(i),n},_clusterAnnotationForMemberAnnotations:function(t){var e,i=s(this._previousClusters,t);if(i>=0)e=this._previousClusters[i];else{var n=o(t);e=this._annotationsController.addCluster(new _(n,t)),this._previousClusters.push(e)}return e},_needsUpdate:function(){if(this._zoomLevel!==this._previousZoomLevel||this._rotation!==this._previousRotation)return"region";if(this._changesSinceLastCollision)return"annotations";var t=this._annotations.length;if(this._previousAnnotations.length!==t)return"annotations";for(var e=0;e<t;++e)if(this._annotations[e]!==this._previousAnnotations[e])return"annotations";return""}},e.exports=n},{"../../../lib/geo":2,"./annotation":127,"./cluster-annotation":132,"@maps/js-utils":84,"@maps/scheduler":106}],134:[function(t,e,i){function n(t,e,i){if(this._sceneGraphNode=new s(this),o.call(this,t,e,o.div,i),!(i&&"url"in i))throw new Error("[MapKit] No URL for image of ImageAnnotation");this._waitingForImage=!this._userSetSize,this.url=i.url}var o=t("./annotation-internal"),s=t("./image-annotation-node"),a=t("./pin-annotation-internal"),r=t("../urls"),l=t("../utils"),h=t("@maps/js-utils"),c=t("@maps/geometry/size"),u=t("@maps/geometry/point"),d=t("@maps/css-matrix"),p=Math.min(l.devicePixelRatio,3),m=r.createImageUrl("pins/pin-red")+(p>1?"_"+p+"x":"")+".png",g=new c(32,39);n.prototype=h.inheritPrototype(o,n,{get url(){return this._url},set url(t){if(this._ratio=n.bestRatio(t),!this._ratio)throw new Error("[MapKit] No URL for image of ImageAnnotation");this._url=t;var e=this._sceneGraphNode.image=l.htmlElement("img",{src:this._url[this._ratio]});e.complete?this.updateSize():(this._userSetSize||(this._waitingForImage=!0),e.addEventListener("load",this),e.addEventListener("error",this))},handleEvent:function(t){switch(t.type){case"load":this._handleImageLoaded();break;case"error":this._handleImageError();break;default:return void o.prototype.handleEvent.call(this,t)}this._sceneGraphNode.image.removeEventListener("load",this),this._sceneGraphNode.image.removeEventListener("error",this)},resetNodeTransform:function(){this.sceneGraphNode.transform=new d},updateLocalizedText:function(){this._element.setAttribute("aria-label",this.altText())},updateSize:function(){if(delete this._waitingForImage,!this._useFallbackImage){var t;if(this._userSetSize)t=this._node.size;else{var e=this._sceneGraphNode.image;t=new c(e.naturalWidth/this._ratio,e.naturalHeight/this._ratio),this.setSize(t)}this._useFallbackImage||this._setElementSize(t),o.prototype.updateSize.call(this)}},isAKnownOption:function(t){return"url"===t||o.prototype.isAKnownOption.call(this,t)},willMoveToMap:function(){this._isMoving=this.doesAnimate()},canShowCallout:function(){return!this._waitingForImage&&o.prototype.canShowCallout.call(this)},_handleImageLoaded:function(){this._useFallbackImage&&(delete this.updatePosition,delete this._useFallbackImage,delete this.positionForCallout),this.updateSize()},_handleImageError:function(){console.error("[MapKit] Could not load image for ImageAnnotation at URL "+this._sceneGraphNode.image.src),this._useFallbackImage=!0,this.updatePosition=function(){this._node.position=new u(this._position.x-a.prototype._anchorPoint.x,this._position.y-a.prototype._anchorPoint.y)},this.updatePosition(),this.positionForCallout=function(){return new u(this._node.position.x-a.prototype._calloutAnchorPoint.x,this._node.position.y-a.prototype._calloutAnchorPoint.y)},this._sceneGraphNode.image=l.htmlElement("img",{src:m}),this._setElementSize(g)},_setElementSize:function(t){this._element.style.width=t.width+"px",this._element.style.height=t.height+"px",this._sceneGraphNode.size=t}}),n.bestRatio=function(t){if(t&&"object"==typeof t){for(var e,i=Object.keys(t).filter(function(e){return!!t[e]}).map(parseFloat).filter(function(t){return!isNaN(t)}).sort(),n=l.devicePixelRatio,o=i.length-1;o>=0&&((!e||i[o]>=n)&&(e=i[o]),!(i[o]<=n));--o);return e}},e.exports=n},{"../urls":222,"../utils":225,"./annotation-internal":124,"./image-annotation-node":135,"./pin-annotation-internal":148,"@maps/css-matrix":58,"@maps/geometry/point":69,"@maps/geometry/size":71,"@maps/js-utils":84}],135:[function(t,e,i){function n(t){o.ImageNode.call(this),this._annotation=t}var o=t("../../../lib/scene-graph"),s=t("@maps/js-utils");n.prototype=s.inheritPrototype(o.ImageNode,n,{get position(){return this._annotation.node.position}}),e.exports=n},{"../../../lib/scene-graph":47,"@maps/js-utils":84}],136:[function(t,e,i){function n(t,e){Object.defineProperty(this,"_impl",{value:new s(this,t,e)})}var o=t("./annotation"),s=t("./image-annotation-internal"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(o,n,{get url(){return this._impl._url},set url(t){this._impl.url=t}}),e.exports=n},{"./annotation":127,"./image-annotation-internal":134,"@maps/js-utils":84}],137:[function(t,e,i){function n(t,e){o.BaseNode.call(this),this._renderer=new a(this),this.annotation=t,e&&(this._state=e)}var o=t("../../../lib/scene-graph"),s=t("@maps/js-utils"),a=t("./marker-annotation-balloon-renderer");n.prototype=s.inheritPrototype(o.BaseNode,n,{stringInfo:function(){var t=this._renderer,e=this.hasOwnProperty("_state")?"<"+this.state+">":"",i=t.hasOwnProperty("glyphFontSize")?' "'+this.annotation.glyphText+'"@'+t.glyphFontSize:"",n=t.glyphImageSrc?"  "+t.glyphImageSrc:"";return"MarkerAnnotationBalloonNode"+e+("<color: "+this.annotation.color+">")+i+n},get state(){return this.hasOwnProperty("_state")?this._state:this.parent.state},get params(){return this.parent.params[this.state]},glyphImageError:function(t){"selected"===t&&this.selectedGlyphImage?delete this.selectedGlyphImage:delete this.glyphImage,this.needsDisplay=!0}}),e.exports=n},{"../../../lib/scene-graph":47,"./marker-annotation-balloon-renderer":138,"@maps/js-utils":84}],138:[function(t,e,i){function n(t){c.RenderItem.call(this,t)}function o(t,e,i,n){null==n&&(n=e.glyphText),t.save(),t.textAlign="center",t.textBaseline="bottom",t.fillStyle=e.glyphColor;var o,s=i.glyphFontSize;do{t.font=s--+"px "+h.MarkerAnnotationFontFamily,o=t.measureText(n).width}while(o>i.glyphImageSize&&s>0);var a=s+i.balloonRadius-s/2+1;return t.fillText(n,i.balloonRadius,a,i.glyphImageSize),t.restore(),s+1}function s(t,e,i,n){var s,r=n.glyphImageSize,h=g.roundToDevicePixel((e.size.width-r)/2),c=!1;if(!(s="default"===i||"lifted"===i?e.glyphImage:e.selectedGlyphImage||e.glyphImage)){if(b)return o(t,e.annotation,n,"?"),null;s=l[e.bubble?"bubble":i],c=!0}try{return t.drawImage(a(s,e.annotation.glyphColor,r),h,h,r,r),c?null:s.src}catch(t){e.glyphImageError()}}function a(t,e,i){t._tinted||(t._tinted={}),t._tinted[e]||(t._tinted[e]=[]);var n=i*g();if(!t._tinted[e][n]){var o=document.createElement("canvas");o.width=n,o.height=n;var s=o.getContext("2d");s.fillStyle=e,s.fillRect(0,0,n,n),s.globalCompositeOperation="destination-in",s.drawImage(t,0,0,n,n),t._tinted[e][n]=o}return t._tinted[e][n]}function r(t,e,i){var n=i/6,o=i/3,s=2*e,a=.448*e,r=.385*e;t.moveTo(s,e),t.bezierCurveTo(s,1.5*e,s-r,s-i/3,e+i/2+o,s),t.bezierCurveTo(e+i/3,s+i/3,e+n,s+i,e,s+i),t.bezierCurveTo(e-n,s+i,e-i/3,s+i/3,e-(i/2+o),s),t.bezierCurveTo(r,s-i/3,0,1.5*e,0,e),t.bezierCurveTo(0,a,a,0,e,0),t.bezierCurveTo(s-a,0,s,a,s,e),t.closePath()}var l,h=t("../constants"),c=t("../../../lib/scene-graph"),u=t("@maps/js-utils"),d=t("@maps/loaders"),p=t("../utils"),m=t("../urls"),g=t("@maps/device-pixel-ratio"),_=Math.min(p.devicePixelRatio,3),f=m.createImageUrl("pins/marker"),y=(_>1?"_"+_+"x":"")+".png",v=["default","selected","bubble"],w=[],b=!1;n.prototype=u.inheritPrototype(c.RenderItem,n,{draw:function(t){if(l){var e=this._node,i=e.state,n=e.annotation,a=e.params;delete this.glyphImageSrc,delete this.renderType,t.save(),t.fillStyle=n.color,e.bubble||(t.shadowOffsetY=a.shadowOffsetY,t.shadowBlur=a.shadowBlur,t.shadowColor=a.shadowColor),t.beginPath(),"callout"===i?t.arc(a.radius,a.radius,a.radius,0,2*Math.PI):e.bubble?t.arc(a.balloonRadius,a.balloonRadius,a.balloonRadius,0,2*Math.PI):r(t,a.balloonRadius,a.tailLength),t.fill(),t.restore(),"callout"!==i&&(delete this.glyphFontSize,delete this.glyphImageSrc,n.glyphText?(this.glyphFontSize=o(t,n,a),this.renderType="glyphText"):(this.glyphImageSrc=s(t,e,i,a),this.renderType=this.glyphImageSrc?"glyphImage":"default"))}else w.indexOf(this._node)<0&&w.push(this._node)}}),function(){function t(){0===--n&&((l=i).lifted=l.default,w.forEach(function(t){t.needsDisplay=!0}))}function e(e){new d.ImageLoader(d.Priority.Highest,{urlForImageLoader:f+(e?"-":"")+e+y,loaderDidSucceed:function(n){i[e]=n.image,t()},loaderDidFail:function(e){console.warn("[MapKit] Error loading marker annotation image "+e.url+"; marker annotations may not display correctly."),b=!0,t()}}).schedule()}var i={},n=v.length;v.forEach(function(t){i[t]={},e(t)})}(),e.exports=n},{"../../../lib/scene-graph":47,"../constants":161,"../urls":222,"../utils":225,"@maps/device-pixel-ratio":61,"@maps/js-utils":84,"@maps/loaders":85}],139:[function(t,e,i){function n(t,e){this._renderer=new s(this),this.frozen=!0,this.annotation=t,this.state="default",this.params=e,this.bubble=!0;var i=2*e.balloonRadius;this.size=new o.Size(i,i),this.layerBounds=new o.Rect(0,0,this.size.width,this.size.height)}var o=t("@maps/geometry"),s=t("./marker-annotation-balloon-renderer");n.prototype.glyphImageError=function(t){delete this.glyphImage},e.exports=n},{"./marker-annotation-balloon-renderer":138,"@maps/geometry":68}],140:[function(t,e,i){function n(t,e){o.BaseNode.call(this),this.annotation=t,this.radius=e,this._renderer=new a(this)}var o=t("../../../lib/scene-graph"),s=t("@maps/js-utils"),a=t("./marker-annotation-dot-renderer");n.prototype=s.inheritPrototype(o.BaseNode,n,{stringInfo:function(){return"MarkerAnnotationDotNode<color: "+this.annotation.color+">"}}),e.exports=n},{"../../../lib/scene-graph":47,"./marker-annotation-dot-renderer":141,"@maps/js-utils":84}],141:[function(t,e,i){function n(t){o.RenderItem.call(this,t)}var o=t("../../../lib/scene-graph"),s=t("@maps/js-utils");n.prototype=s.inheritPrototype(o.RenderItem,n,{draw:function(t){var e=this._node,i=e.size.width,n=e.size.height;t.save(),t.fillStyle=e.annotation.color,t.beginPath(),t.arc(i/2,n/2,e.radius,0,2*Math.PI),t.fill(),t.restore()}}),e.exports=n},{"../../../lib/scene-graph":47,"@maps/js-utils":84}],142:[function(t,e,i){function n(t,e,i){this._sceneGraphNode=new r(this),s.call(this,t,e,s.div,i),this._public=t,i&&g.forEach(function(t){t in i&&(this[t]=i[t])},this),this._sceneGraphNode.updateState()}function o(t,e,i,n){new u.ImageLoader(u.Priority.Highest,{urlForImageLoader:e,loaderDidSucceed:function(e){t[i]=e.image,t._sceneGraphNode[n](e.image)},loaderDidFail:function(){delete t[i],t._sceneGraphNode[n]()}}).schedule()}var s=t("./annotation-internal"),a=t("./image-annotation-internal"),r=t("./marker-annotation-node"),l=t("./marker-annotation-callout-bubble-node"),h=t("@maps/css-matrix"),c=t("@maps/js-utils"),u=t("@maps/loaders"),d=t("../localizer").l10n,p=t("@maps/geometry/point"),m=t("@maps/device-pixel-ratio"),g=["color","glyphColor","glyphImage","selectedGlyphImage","glyphText","titleVisibility","subtitleVisibility"];n.prototype=c.inheritPrototype(s,n,{_animates:!0,_calloutAnchorPoint:new window.DOMPoint(-r.prototype.params.callout.radius,1),_color:"#ff5b40",_glyphColor:"white",_glyphImage:null,_selectedGlyphImage:null,_glyphText:"",_titleVisibility:r.FeatureVisibility.Adaptive,_subtitleVisibility:r.FeatureVisibility.Adaptive,shouldHideLabels:!0,darkColorScheme:!1,get size(){return this._sceneGraphNode.size.copy()},set size(t){console.warn("[MapKit] The `size` property of a pin annotation cannot be set.")},get color(){return this._color},set color(t){c.checkType(t,"string","[MapKit] Expected a string value for MarkerAnnotation.color, but got `"+t+"` instead"),t!==this._color&&(this._color=t,this._sceneGraphNode.needsDisplay=!0,this._drawCalloutAccessory())},get glyphColor(){return this._glyphColor},set glyphColor(t){c.checkType(t,"string","[MapKit] Expected a string value for MarkerAnnotation.glyphColor, but got `"+t+"` instead"),t!==this._glyphColor&&(this._glyphColor=t,this._sceneGraphNode.needsDisplay=!0,this._drawCalloutAccessory())},get glyphImage(){return this._glyphImage},set glyphImage(t){this._setGlyphImage("_glyphImage","updateGlyphImage",t)},get selectedGlyphImage(){return this._selectedGlyphImage},set selectedGlyphImage(t){this._setGlyphImage("_selectedGlyphImage","updateSelectedGlyphImage",t)},updateGlyphImages:function(){this._setGlyphImage("_glyphImage","updateGlyphImage",this._glyphImage),this._setGlyphImage("_selectedGlyphImage","updateSelectedGlyphImage",this._selectedGlyphImage)},get glyphText(){return this._glyphText},set glyphText(t){c.checkType(t,"string","[MapKit] Expected a string value for MarkerAnnotation.glyphText, but got `"+t+"` instead"),t!==this._glyphText&&(this._glyphText=t,this.updateLocalizedText(),this._sceneGraphNode.needsDisplay=!0,this._drawCalloutAccessory())},get titleVisibility(){return this._titleVisibility},set titleVisibility(t){if(!c.checkValueIsInEnum(t,r.FeatureVisibility))throw new Error("[MapKit] Expected one of Hidden, Visible or Adaptive for MarkerAnnotation.titleVisibility");t!==this._titleVisibility&&(this._titleVisibility=t,this._sceneGraphNode.needsLayout=!0)},get subtitleVisibility(){return this._subtitleVisibility},set subtitleVisibility(t){if(!c.checkValueIsInEnum(t,r.FeatureVisibility))throw new Error("[MapKit] Expected one of Hidden, Visible or Adaptive for MarkerAnnotation.subtitleVisibility");t!==this._subtitleVisibility&&(this._subtitleVisibility=t,this._sceneGraphNode.needsLayout=!0)},labelsCanBeShown:function(){return this.delegate&&this.delegate.supportsLabelRegions()},titleCanBeShown:function(){return this.title&&this._titleVisibility!==r.FeatureVisibility.Hidden},subtitleCanBeShown:function(t){return this.subtitle&&(this._subtitleVisibility===r.FeatureVisibility.Visible||this._subtitleVisibility===r.FeatureVisibility.Adaptive&&(this._public.memberAnnotations||this.selected&&t))},updateLayout:function(t){t?this._sceneGraphNode.updateLayout():this._sceneGraphNode.needsLayout=!0},updatedLayout:function(){this._updatedProperty("")},updatePosition:function(){this._node.position=new p(m.roundToDevicePixel(this._position.x-this._anchorPoint.x-this._anchorOffset.x),this._position.y-this._anchorPoint.y-this._anchorOffset.y)},setDelegate:function(t){s.prototype.setDelegate.call(this,t),this.labelsCanBeShown()&&this._updatedProperty("title")},doesAnimate:function(){return this._animates},willMoveToMap:function(t){this._isMoving=t&&this.animates},didMoveToMap:function(){var t=this._isMoving;s.prototype.didMoveToMap.call(this),this.delegate&&t&&this.visible&&!this._appearanceAnimation&&this._shown&&(this._isAnimating=!0,this._sceneGraphNode.animateAppearance(function(t){t.node.annotation.finishedAnimating()}))},lift:function(t){this._sceneGraphNode.updateState("lifted"),s.prototype.lift.call(this,t)},droppedAfterLift:function(){this._sceneGraphNode.updateState(),s.prototype.droppedAfterLift.call(this)},canShowCallout:function(){return(!!this.callout||this.delegate&&!this.delegate.supportsLabelRegions())&&s.prototype.canShowCallout.call(this)},calloutWillAppear:function(){this._sceneGraphNode.updateState("callout")},calloutWillDisappear:function(){delete this._calloutAccessoryNode,this._sceneGraphNode.updateState()},canvasForCalloutAccessory:function(){if(!this.callout||!(this.callout.calloutElementForAnnotation||this.callout.calloutContentForAnnotation||this.callout.calloutLeftAccessoryForAnnotation||this.callout.calloutRightAccessoryForAnnotation))return this._calloutAccessoryNode?this._calloutAccessoryNode._renderer.layer:(this._calloutAccessoryNode=new l(this,r.prototype.params.bubble),this._calloutAccessoryNode.glyphImage=this._sceneGraphNode._balloon.glyphImage,this._calloutAccessoryNode.glyphText=this._glyphText,this._drawCalloutAccessory(),this._calloutAccessoryNode._renderer.layer);delete this._calloutAccessoryNode},get ignoreCalloutCornerRadiusForLeftAccessory(){return!0},altText:function(){return s.prototype.altText.call(this)||d.get("Annotation.Marker.AccessibilityLabel")},isAKnownOption:function(t){return g.indexOf(t)>=0||s.prototype.isAKnownOption.call(this,t)},resetNodeTransform:function(){this.sceneGraphNode.transform=new h},_setGlyphImage:function(t,e,i){null!=i&&c.checkType(i,"object","[MapKit] Expected a hash value for MarkerAnnotation."+t.replace(/^_/,"")+", but got `"+i+"` instead"),this[t]=i;var n=t+"Element";if(!i)return delete this[n],void this._sceneGraphNode[e](null);var s=a.bestRatio(i);s?o(this,i[s],n,e):(delete this[n],this._sceneGraphNode.glyphImageError())},_updatedProperty:function(t){"selected"===t?this._sceneGraphNode.updateState():"title"!==t&&"subtitle"!==t||(this._sceneGraphNode.needsLayout=!0),s.prototype._updatedProperty.call(this,t)},_drawCalloutAccessory:function(){if(this._calloutAccessoryNode){var t=this._calloutAccessoryNode._renderer.layer;t.style.width=t.style.height=this._calloutAccessoryNode.size.width+"px",this._calloutAccessoryNode._renderer.draw(t.getContext("2d"))}}}),e.exports=n},{"../localizer":182,"./annotation-internal":124,"./image-annotation-internal":134,"./marker-annotation-callout-bubble-node":139,"./marker-annotation-node":145,"@maps/css-matrix":58,"@maps/device-pixel-ratio":61,"@maps/geometry/point":69,"@maps/js-utils":84,"@maps/loaders":85}],143:[function(t,e,i){function n(t,e){o.BaseNode.call(this),this.text=t,this.kind=e,this._renderer=new a(this)}var o=t("../../../lib/scene-graph"),s=t("@maps/js-utils"),a=t("./marker-annotation-label-renderer");n.prototype=s.inheritPrototype(o.BaseNode,n,{stringInfo:function(){return"MarkerAnnotationLabelNode<"+this.kind+(this.parent.annotation.darkColorScheme?", dark":"")+'> "'+this.text+'"'},get lineHeight(){return this._renderer.params[this.kind].lineHeight}}),n.Font={title:a.prototype.params.title.font,subtitle:a.prototype.params.subtitle.font},e.exports=n},{"../../../lib/scene-graph":47,"./marker-annotation-label-renderer":144,"@maps/js-utils":84}],144:[function(t,e,i){function n(t){s.RenderItem.call(this,t)}var o=t("../constants"),s=t("../../../lib/scene-graph"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(s.RenderItem,n,{params:{haloColor:{light:"rgba(255, 255, 255, .8)",dark:"black"},haloSize:2,miterLimit:2,textAlign:"center",title:{font:"600 11px "+o.MarkerAnnotationFontFamily,lineHeight:12,color:{light:"#2b2b2b",dark:"white"},yPadding:1},subtitle:{font:"500 10px "+o.MarkerAnnotationFontFamily,lineHeight:12,color:{light:"#4c4c4c",dark:"white"},yPadding:0}},draw:function(t){var e=this._node,i=e.parent.annotation.darkColorScheme?"dark":"light",n=this.params[e.kind];t.font=n.font,t.textAlign=this.params.textAlign,t.fillStyle=n.color[i],t.strokeStyle=this.params.haloColor[i],t.lineWidth=this.params.haloSize,t.miterLimit=this.params.miterLimit;var o=e.size.width/2,s=e.size.height+n.yPadding;t.strokeText(e.text,o,s),t.fillText(e.text,o,s)}}),e.exports=n},{"../../../lib/scene-graph":47,"../constants":161,"@maps/js-utils":84}],145:[function(t,e,i){function n(t){h.GroupNode.call(this),this.annotation=t,this._balloon=this.addChild(new b(t))}function o(t,e,i){L.font=e;for(var n=t.trim().split(/\s+/),o=[];n.length>0;){for(var s=[n.shift()],a=L.measureText(s.join(" ")).width,r=0;n.length>0&&a<i;)s.push(n.shift()),r=a,a=L.measureText(s.join(" ")).width;a>i&&s.length>1&&(n.unshift(s.pop()),a=r),o.push([s.join(" "),a])}return o}function s(t,e){var i=Object.create(t);for(var n in e)i[n]=e[n];return i}function a(t,e){new h.NodeAnimator.Opacity({node:t,duration:e.transitionDuration}).begin()}function r(t,e,i){t.fadingOut=!0,new h.NodeAnimator.Opacity({node:t,duration:e.transitionDuration,from:1,to:0,done:function(){delete t.fadingOut,t.remove()}}).begin()}function l(t,e,i,n,o,s){new h.NodeAnimator.Scale({node:t,duration:e.transitionDuration,from:i,to:n,center:new d(t.size.width/2,t.size.height),done:s,mass:o,stiffness:e.springStiffness,damping:e.springDamping,initialVelocity:e.initialSpringVelocity}).begin()}var h=t("../../../lib/scene-graph"),c=t("@maps/js-utils"),u=t("@maps/scheduler"),d=t("@maps/geometry/point"),p=t("@maps/device-pixel-ratio"),m=t("@maps/geometry/size"),g=t("@maps/css-matrix"),_=t("../constants").FeatureVisibility,f={labelWidth:64,shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.15)",shadowOffsetY:1.5,transitionDuration:300,dotAnimationDuration:100,dotScale:1.5,springMass:1,springStiffness:100,springDamping:10,initialSpringVelocity:0},y=s(f,{balloonRadius:13.5,dotRadius:0,glyphFontSize:15,glyphImageSize:20,offset:0,tailLength:5}),v=s(f,{balloonRadius:30,dotRadius:3,glyphFontSize:32,glyphImageSize:40,offset:8,tailLength:6}),w=s(f,{balloonRadius:20,dotRadius:3,glyphFontSize:28,glyphImageSize:30,offset:0,tailLength:0}),b=t("./marker-annotation-balloon-node"),C=t("./marker-annotation-dot-node"),S=t("./marker-annotation-label-node");n.prototype=c.inheritPrototype(h.BaseNode,n,{params:{default:y,lifted:y,selected:v,bubble:w,callout:s(f,{radius:4.5,shadowOffsetY:0,shadowBlur:0,shadowColor:"transparent"})},get position(){return this.annotation?this.annotation.node.position:new d},stringInfo:function(){return"MarkerAnnotationNode"+("default"!==this.state?"<"+this.state+">":"")},set needsLayout(t){t&&!this._needsLayout&&u.scheduleASAP(this),this._needsLayout=t},get needsLayout(){return this._needsLayout},balloonNodeSize:function(t){t||(t=this.state);var e=this.params[t];if("callout"===t)return new m(2*e.radius,2*e.radius);var i=2*e.balloonRadius;return new m(i,i+e.tailLength+e.offset)},updateState:function(t){var e=this.annotation;t=t||(e.selected&&!e.callout?"selected":"default"),this.state!==t&&((e.selected||"selected"===this.state||"callout"===this.state)&&(this._animateFromState=this._animateFromState||this.state),this.state=t,e._node.size=this._size=this._balloon.size=this.balloonNodeSize(),this.needsLayout=!0)},performScheduledUpdate:function(){this.updateLayout(!1)},updateLayout:function(t){this._needsLayout&&(this._layoutSubNodes(t),this._needsLayout=!1)},updateGlyphImage:function(t){this._balloon.glyphImage=t,this._balloon.needsDisplay=!0},updateSelectedGlyphImage:function(t){this._balloon.selectedGlyphImage=t,this._balloon.needsDisplay=!0},glyphImageError:function(){this._balloon.glyphImageError(this.state)},animateAppearance:function(t){var e=this.params[this.state];this.children.forEach(function(t){a(t,e)}),l(this._balloon,e,1e-12,1,e.springMass,t)},_layoutSubNodes:function(t){function e(t,e){n.forEach(function(e){e.kind===t&&(this.addChild(e),r(e,_,this.annotation))},this),delete this[e]}function i(t,e){var i=S.Font[t],n=_.labelWidth,s=c[t],r=!(!this.parent||s===e||s&&e);return o(s,i,n).forEach(function(e){var i=new S(e[0],t);i.size=new m(e[1],i.lineHeight),h=Math.max(h,e[1]),L=i.lineHeight/2,this.addChild(i),r&&a(i,_)},this),s}if(this.annotation){var n=this.children.slice();this.children=[this._balloon],this._dot&&this.addChild(this._dot);var h=this._balloon.size.width,c=this.annotation,u=this.state,_=this.params[this.state],f="callout"!==u&&"lifted"!==u&&!("default"===u&&c.selected)&&c.labelsCanBeShown(),y=f&&c.titleCanBeShown();y?this._prevTitle=i.call(this,"title",this._prevTitle):e.call(this,"title","_prevTitle"),f&&c.subtitleCanBeShown(y)?this._prevSubtitle=i.call(this,"subtitle",this._prevSubtitle):e.call(this,"subtitle","_prevSubtitle");var v=this._balloon.size.height,w=v,L=0;this.children.forEach(function(t){t.position=new d((h-t.size.width)/2,t.lineHeight?w:0),t.lineHeight&&(w+=t.lineHeight,t.fadingOut||(v+=t.lineHeight,L=t.lineHeight/2))}),c._anchorPoint=new d(h/2,this._balloon.size.height),c._node.size=this.size=new m(h,v+L),c.updatePosition();var T=c._position.x-c._anchorPoint.x-c._anchorOffset.x,E=this.position.x;if(this.children.forEach(function(t){t.position=new d(p.roundToDevicePixel(T+t.position.x)-E,t.position.y)}),"selected"===u?(this._dot||(this._dot=this.addChild(new C(this.annotation,_.dotRadius*_.dotScale))),this._dot.size=new m(2*_.dotRadius*_.dotScale,2*_.dotRadius*_.dotScale),this._dot.position=new d(this._balloon.position.x+_.balloonRadius-_.dotRadius,this._balloon.size.height-2*_.dotRadius),this._dot.transform=(new g).scale(1/_.dotScale),this._dot.wantsLayerBacking=!0):this._dot&&(this._dot.remove(),delete this._dot),this.hasOwnProperty("_animateFromState")){if("callout"===u||"callout"===this._animateFromState){var x=s(_);x.transitionDuration/=2;var M=this.addChild(new b(this.annotation,this._animateFromState));M.glyphImage=this._balloon.glyphImage,M.selectedGlyphImage=this._balloon.selectedGlyphImage,M.size=this.balloonNodeSize(M.state),M.position=new d((this.size.width-M.size.width)/2,this._balloon.size.height-M.size.height),this._balloon.transform=(new g).scale(1e-12),l(M,x,1,1e-12,0,function(){M.remove(),l(this._balloon,_,1e-12,1,_.springMass)}.bind(this))}else{var A=this.balloonNodeSize(this._animateFromState).height/this.balloonNodeSize().height;1!==A&&l(this._balloon,_,A,1,_.springMass);var k=this._dot;k&&a(k,{transitionDuration:_.dotAnimationDuration})}delete this._animateFromState}t||c.updatedLayout()}}}),n.FeatureVisibility=_;var L=document.createElement("canvas").getContext("2d");e.exports=n},{"../../../lib/scene-graph":47,"../constants":161,"./marker-annotation-balloon-node":137,"./marker-annotation-dot-node":140,"./marker-annotation-label-node":143,"@maps/css-matrix":58,"@maps/device-pixel-ratio":61,"@maps/geometry/point":69,"@maps/geometry/size":71,"@maps/js-utils":84,"@maps/scheduler":106}],146:[function(t,e,i){function n(t,e){Object.defineProperty(this,"_impl",{value:new s(this,t,e)})}var o=t("./annotation"),s=t("./marker-annotation-internal"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(o,n,{get size(){return this._impl.size},set size(t){this._impl.size=t},get color(){return this._impl.color},set color(t){this._impl.color=t},get glyphColor(){return this._impl.glyphColor},set glyphColor(t){this._impl.glyphColor=t},get glyphImage(){return this._impl.glyphImage},set glyphImage(t){this._impl.glyphImage=t},get selectedGlyphImage(){return this._impl.selectedGlyphImage},set selectedGlyphImage(t){this._impl.selectedGlyphImage=t},get glyphText(){return this._impl.glyphText},set glyphText(t){this._impl.glyphText=t},get titleVisibility(){return this._impl.titleVisibility},set titleVisibility(t){this._impl.titleVisibility=t},get subtitleVisibility(){return this._impl.subtitleVisibility},set subtitleVisibility(t){this._impl.subtitleVisibility=t}}),e.exports=n},{"./annotation":127,"./marker-annotation-internal":142,"@maps/js-utils":84}],147:[function(t,e,i){function n(t){o.call(this,t)}var o=t("./annotation-drag-controller"),s=t("@maps/css-matrix"),a=t("@maps/scheduler"),r=t("@maps/js-utils"),l=[1,2,3,2,1],h=Math.tan(.820304748437335);n.prototype=r.inheritPrototype(o,n,{get isBouncing(){return this._bounceAnimationFrameIndex>=0},animateDropAfterLift:function(){var t=Math.max(this._dropAnimationStartP-Math.min((Date.now()-this._dropAfterLiftAnimationStartDate)/this.liftDurationMs,1),0),e=this.liftAmount*t;this._annotation.sceneGraphNode.transform=(new s).translate(0,-e),this._dropAnimationRevert||(e*=1.25),this._annotation.sceneGraphNode.shadowTransform=(new s).translate(h*e,-e),0===t&&(delete this._annotation.floating,this._annotation.sceneGraphNode.updateState(),delete this._dropAfterLiftAnimationStartDate,delete this._dropAnimationStartP,delete this._dropAnimationRevert,this._dequeueNextAnimation()),a.scheduleOnNextFrame(this)},animateLift:function(){var t=Math.min((Date.now()-this._liftAnimationStartDate)/this.liftDurationMs,1),e=this.liftAmount*t;this._annotation.sceneGraphNode.transform=(new s).translate(this.translation.x,this.translation.y-e),this._shadowLiftDamping&&(e=this.liftAmount*(1+.25*t)),this._annotation.sceneGraphNode.shadowTransform=(new s).translate(h*e,-e),t<1?(a.scheduleOnNextFrame(this),this._liftAnimationProgress=t):(delete this._liftAnimationStartDate,delete this._liftAnimationProgress,delete this._shadowLiftDamping,this._dequeueNextAnimation())},drop:function(){var t=this._annotation.position().y;this._pinVerticalTranslation=-t-4,this._shadowHorizontalTranslation=h*-this._pinVerticalTranslation,this._shadowVerticalTranslation=this._pinVerticalTranslation;var e=t/this._annotation.delegate.mapForAnnotation(this._annotation._public)._impl.ensureRenderingFrame().size.height;this._dropDurationMs=1e3*Math.min(.35*(e+(1-e)/2),3),this._dropAnimationStartDate=Date.now(),this._annotation.floating=!0,this._annotation.sceneGraphNode.updateState(),this._animateDrop(),this._animationQueue=[this._bounce,this._annotation.finishedAnimating.bind(this._annotation)],a.scheduleOnNextFrame(this)},dropAnnotationAfterDraggingAndRevertPosition:function(t){var e=this._annotation.droppedAfterLift.bind(this._annotation);this._bounceAnimationFrameIndex>=0?this._animationQueue=[e]:(this._liftAnimationStartDate?(this._dropAnimationStartP=this._liftAnimationProgress,delete this._liftAnimationStartDate,delete this._liftAnimationProgress):this._dropAnimationStartP=1,t?(this._dropAfterLift(),this._animationQueue=[this._bounce,e]):(this._annotation.draggingDidEnd(),this._shadowLiftDamping=!0,this._animationQueue=[this._dropAfterLift,this._bounce,e],o.prototype.lift.call(this,this.nominalLiftAmount)),this._dropAnimationRevert=t,a.scheduleOnNextFrame(this))},lift:function(t){this.nominalLiftAmount=t,this._animationQueue=[this._liftAfterBounce],this._bounce(),a.scheduleOnNextFrame(this)},setTranslation:function(t){this.translation=t,this._bounceAnimationFrameIndex>=0||this._liftAnimationStartDate||(this._annotation.sceneGraphNode.transform=(new s).translate(t.x,t.y-this.liftAmount),this._annotation.sceneGraphNode.shadowTransform=(new s).translate(h*this.liftAmount,-this.liftAmount))},performScheduledUpdate:function(){this._dropAnimationStartDate?this._animateDrop():this._bounceAnimationFrameIndex>=0?this._animateBounce():o.prototype.performScheduledUpdate.call(this)},_animateBounce:function(){this._bounceAnimationFrameIndex<l.length?(this._annotation.sceneGraphNode.updateState("down"+l[this._bounceAnimationFrameIndex]),++this._bounceAnimationFrameIndex):(delete this._bounceAnimationFrameIndex,this._dequeueNextAnimation()),a.scheduleOnNextFrame(this)},_animateDrop:function(){var t=Math.min((Date.now()-this._dropAnimationStartDate)/this._dropDurationMs,1),e=1-t;this._annotation.sceneGraphNode.transform=(new s).translate(0,e*this._pinVerticalTranslation),this._annotation.sceneGraphNode.shadowTransform=(new s).translate(e*this._shadowHorizontalTranslation,e*this._shadowVerticalTranslation),1===t&&(delete this._pinVerticalTranslation,delete this._shadowHorizontalTranslation,delete this._shadowVerticalTranslation,delete this._dropAnimationStartDate,delete this._dropDurationMs,this._annotation.floating=!1,this._annotation.sceneGraphNode.updateState(),this._dequeueNextAnimation()),a.scheduleOnNextFrame(this)},_bounce:function(){this._bounceAnimationFrameIndex=0},_dequeueNextAnimation:function(){this._animationQueue.length>0&&this._animationQueue.shift().call(this)},_dropAfterLift:function(){delete this.translation,this._dropAfterLiftAnimationStartDate=Date.now(),a.scheduleOnNextFrame(this)},_liftAfterBounce:function(){o.prototype.lift.call(this,this.nominalLiftAmount),this._annotation.floating=!0,this._annotation.sceneGraphNode.updateState()}}),e.exports=n},{"./annotation-drag-controller":122,"@maps/css-matrix":58,"@maps/js-utils":84,"@maps/scheduler":106}],148:[function(t,e,i){function n(t,e,i){this._animationController=new a(this),this._dragController=this._animationController,this._sceneGraphNode=new s(this),o.call(this,t,e,o.div,i),this._public=t,this.setSize(d),i&&"color"in i&&(this.color=i.color)}var o=t("./annotation-internal"),s=t("./pin-annotation-node"),a=t("./pin-annotation-animation-controller"),r=t("@maps/geometry/size"),l=t("@maps/geometry/point"),h=t("@maps/css-matrix"),c=t("@maps/js-utils"),u=t("../localizer").l10n,d=new r(15,36);n.Colors={Red:"#ff3d38",Green:"#54d669",Purple:"#c969e0"},n.prototype=c.inheritPrototype(o,n,{_animates:!0,_color:n.Colors.Red,_anchorPoint:new window.DOMPoint(8,35),_calloutAnchorPoint:new window.DOMPoint(-8,0),get size(){return d.copy()},set size(t){console.warn("[MapKit] The `size` property of a pin annotation cannot be set.")},get color(){return this._color},set color(t){c.checkType(t,"string","[MapKit] Expected a string value for PinAnnotation.color, but got `"+t+"` instead"),t!==this._color&&(this._color=t,this.updateLocalizedText(),this._sceneGraphNode.needsDisplay=!0)},get shouldPreventDrag(){return this._animationController.isBouncing},doesAnimate:function(){return this._animates},willMoveToMap:function(t){this._isMoving=t&&this.animates},didMoveToMap:function(){var t=this._isMoving;o.prototype.didMoveToMap.call(this),this.delegate&&t&&this.visible&&!this._appearanceAnimation&&this._shown&&(this._isAnimating=!0,this._animationController.drop())},droppedAfterLift:function(){this.resetNodeTransform(),this._sceneGraphNode.updateState(),o.prototype.droppedAfterLift.call(this)},finishedAnimating:function(){this._sceneGraphNode.updateState(),o.prototype.finishedAnimating.call(this)},altText:function(){return o.prototype.altText.call(this)||(this._color===n.Colors.Green?u.get("Annotation.Pin.Green.AccessibilityLabel"):this._color===n.Colors.Purple?u.get("Annotation.Pin.Purple.AccessibilityLabel"):this._color===n.Colors.Red?u.get("Annotation.Pin.Red.AccessibilityLabel"):u.get("Annotation.Pin.AccessibilityLabel"))},draggingDidEnd:function(){o.prototype.draggingDidEnd.call(this),o.prototype.updatePosition.call(this)},dragOffset:new l(0,2),isAKnownOption:function(t){return"color"===t||o.prototype.isAKnownOption.call(this,t)},resetNodeTransform:function(){this.sceneGraphNode.transform=new h}}),e.exports=n},{"../localizer":182,"./annotation-internal":124,"./pin-annotation-animation-controller":147,"./pin-annotation-node":149,"@maps/css-matrix":58,"@maps/geometry/point":69,"@maps/geometry/size":71,"@maps/js-utils":84}],149:[function(t,e,i){function n(t){o.BaseNode.call(this),this.size=new s(32,39),this._annotation=t,this._renderer=new r(this),this.updateState()}var o=t("../../../lib/scene-graph"),s=t("@maps/geometry/size"),a=t("@maps/js-utils"),r=t("./pin-annotation-renderer");n.prototype=a.inheritPrototype(o.BaseNode,n,{get position(){return this._annotation.node.position},stringInfo:function(){return"PinAnnotationNode"+(this._state?"<"+this._state+">":"")},updateState:function(t){t=this._annotation.floating?"floating":t||"",this._state!==t&&(this._state=t,this.needsDisplay=!0)}}),e.exports=n},{"../../../lib/scene-graph":47,"./pin-annotation-renderer":150,"@maps/geometry/size":71,"@maps/js-utils":84}],150:[function(t,e,i){function n(t){a.RenderItem.call(this,t)}function o(t,e,i,n){t.strokeStyle="#ff4040",t.lineWidth=2,t.strokeRect(0,e,i,n-e),t.beginPath(),t.moveTo(0,e),t.lineTo(i,n),t.moveTo(0,n),t.lineTo(i,e),t.stroke()}var s,a=t("../../../lib/scene-graph"),r=t("@maps/js-utils"),l=t("../utils"),h=t("../urls"),c=Math.min(l.devicePixelRatio,3),u=h.createImageUrl("pins/pin"),d=(c>1?"_"+c+"x":"")+".png",p={},m=[],g=!1;n.prototype=r.inheritPrototype(a.RenderItem,n,{draw:function(t){if(s){var e=this._node,i=e.size.width,n=e.size.height;if(g)o(t,n-e._annotation.size.height,e._annotation.size.width,n);else{var a=e._state,r=e._annotation.color;if(p[r]||(p[r]={}),!p[r][a]){var l=document.createElement("canvas");l.width=i*c,l.height=n*c;var h=l.getContext("2d");h.fillStyle=r,h.fillRect(0,0,l.width,l.height),h.save(),h.globalCompositeOperation="destination-in",h.drawImage(s[a].head,0,0),h.restore(),h.drawImage(s[a].base,0,0),p[r][a]=l}e.shadowTransform&&t.drawImage(s[""].shadow,e.shadowTransform.e,e.shadowTransform.f,i,n),t.drawImage(p[r][a],0,0,i,n)}}else m.indexOf(this._node)<0&&m.push(this._node)}}),function(){function t(){0===--o&&(s=n,m.forEach(function(t){t.needsDisplay=!0}))}function e(e){console.warn("[MapKit] Error loading pin annotation image "+e.target.src+"; pin annotations may not display correctly."),g=!0,t()}function i(i,o){var s=u+(i?"-":"")+i+"-"+o+d,a=l.htmlElement("img",{src:s});a.addEventListener("load",function(){n[i][o]=a,t()}),a.addEventListener("error",e)}var n={},o=["","floating","down1","down2","down3"].reduce(function(t,e){return n[e]={},i(e,"base"),i(e,"head"),t+2},1);i("","shadow")}(),e.exports=n},{"../../../lib/scene-graph":47,"../urls":222,"../utils":225,"@maps/js-utils":84}],151:[function(t,e,i){function n(t,e){console.warn("[MapKit] mapkit.PinAnnotation is deprecated and will be removed in a future release. Please use the newer mapkit.MarkerAnnotation class instead."),Object.defineProperty(this,"_impl",{value:new s(this,t,e)})}var o=t("./annotation"),s=t("./pin-annotation-internal"),a=t("@maps/js-utils");n.Colors=s.Colors,n.prototype=a.inheritPrototype(o,n,{get size(){return this._impl.size},set size(t){this._impl.size=t},get color(){return this._impl._color},set color(t){this._impl.color=t}}),e.exports=n},{"./annotation":127,"./pin-annotation-internal":148,"@maps/js-utils":84}],152:[function(t,e,i){function n(t,e){console.assert(e&&e.location&&"number"==typeof e.location.latitude&&"number"==typeof e.location.longitude),o.call(this,t,e.coordinate,o.div),this._element.style.width=this._element.style.height=2*l.TOTAL_RADIUS+"px",this._updateTitleAndSubtitleForLocale(),this._sceneGraphNode=new s(this),this.shownPropertyWasUpdated(!0)}var o=t("./annotation-internal"),s=t("./user-location-annotation-node"),a=t("../localizer").l10n,r=t("@maps/js-utils"),l=t("./user-location-annotation-style");n.prototype=r.inheritPrototype(o,n,{_anchorOffset:new window.DOMPoint(0,-l.TOTAL_RADIUS),_calloutAnchorPoint:new window.DOMPoint(-l.TOTAL_RADIUS,-l.SHADOW_BLUR),get coordinate(){return this._coordinate},set coordinate(t){this.hasOwnProperty("_coordinate")?console.warn("[MapKit] The `coordinate` property of the user location annotation cannot be set."):this._coordinate=t.copy()},get draggable(){return!1},set draggable(t){console.warn("[MapKit] The `draggable` property of the user location annotation cannot be set.")},get size(){return this._node.size.copy()},set size(t){console.warn("[MapKit] The `size` property of the user location annotation cannot be set.")},get node(){return this._node},handleEvent:function(t){switch(t.type){case a.Events.LocaleChanged:this._updateTitleAndSubtitleForLocale();break;case"blur":this._sceneGraphNode.pauseAnimation();break;case"focus":this._sceneGraphNode.resumeAnimation()}},shownPropertyWasUpdated:function(t){t?(this._sceneGraphNode.startAnimation(),this._startMonitoringFocus()):(this._sceneGraphNode.stopAnimation(),this._stopMonitoringFocus())},removedFromMap:function(){this._sceneGraphNode.stopAnimation(),a.removeEventListener(a.Events.LocaleChanged,this),this._stopMonitoringFocus()},stale:!1,setCoordinate:function(t){Object.getOwnPropertyDescriptor(o.prototype,"coordinate").set.call(this,t)},_startMonitoringFocus:function(){try{window.top.addEventListener("blur",this),window.top.addEventListener("focus",this)}catch(t){}},_stopMonitoringFocus:function(){try{window.top.removeEventListener("blur",this),window.top.removeEventListener("focus",this)}catch(t){}},_updateTitleAndSubtitleForLocale:function(){this.title=a.get("Location.Title"),this.subtitle=a.get("Location.Subtitle")}}),e.exports=n},{"../localizer":182,"./annotation-internal":124,"./user-location-annotation-node":153,"./user-location-annotation-style":155,"@maps/js-utils":84}],153:[function(t,e,i){function n(t){s.BaseNode.call(this),this._annotation=t,this._renderer=new r(this)}var o=t("@maps/scheduler"),s=t("../../../lib/scene-graph"),a=t("@maps/js-utils"),r=t("./user-location-annotation-renderer");n.prototype=a.inheritPrototype(s.BaseNode,n,{stringInfo:function(){var t=[];return this.stale&&t.push("stale"),null!=this._pausedTime&&t.push("paused@"+this._pausedTime),"UserLocationAnnotationNode"+(t.length>0?"<"+t.join(", ")+">":"")},get startTime(){return this._startTime},get size(){return this._annotation.node.size},get position(){return this._annotation.node.position},startAnimation:function(){this._startTime=Date.now(),this._pausedTime=null,o.scheduleASAP(this)},stopAnimation:function(){this._startTime=null,this._pausedTime=null},pauseAnimation:function(){this._pausedTime=Date.now()},resumeAnimation:function(){null!=this._pausedTime&&(this._startTime+=Date.now()-this._pausedTime,this._pausedTime=null,o.scheduleASAP(this))},performScheduledUpdate:function(){null!=this._startTime&&(this.needsDisplay=!0,null==this._pausedTime&&o.scheduleOnNextFrame(this))}}),e.exports=n},{"../../../lib/scene-graph":47,"./user-location-annotation-renderer":154,"@maps/js-utils":84,"@maps/scheduler":106}],154:[function(t,e,i){function n(t){s.RenderItem.call(this,t)}function o(t,e,i){return"rgb("+t.map(function(t,n){return Math.round(t+(e[n]-t)*i)}).join(", ")+")"}var s=t("../../../lib/scene-graph"),a=t("@maps/js-utils"),r=t("./user-location-annotation-style"),l=t("../utils");n.prototype=a.inheritPrototype(s.RenderItem,n,{draw:function(t){var e=(Date.now()-this._node.startTime)%r.ANIMATION_DURATION_MS,i=l.easeInOut(e<r.ANIMATION_HALF_DURATION_MS?1-e/r.ANIMATION_HALF_DURATION_MS:(e-r.ANIMATION_HALF_DURATION_MS)/r.ANIMATION_HALF_DURATION_MS),n=r.ANIMATION_SCALE_TO+(r.ANIMATION_SCALE_FROM-r.ANIMATION_SCALE_TO)*i;t.save(),t.beginPath(),t.arc(r.TOTAL_RADIUS,r.TOTAL_RADIUS,r.OUTER_RADIUS,0,2*Math.PI),t.fillStyle=r.OUTER_FILL,t.shadowColor=r.SHADOW_COLOR,t.shadowBlur=r.SHADOW_BLUR,t.fill(),t.restore(),t.beginPath(),t.arc(r.TOTAL_RADIUS,r.TOTAL_RADIUS,r.INNER_RADIUS*n,0,2*Math.PI),t.fillStyle=this.node.stale?r.STALE_FILL:o(r.ANIMATION_FILL_FROM,r.ANIMATION_FILL_TO,i),t.fill()}}),e.exports=n},{"../../../lib/scene-graph":47,"../utils":225,"./user-location-annotation-style":155,"@maps/js-utils":84}],155:[function(t,e,i){e.exports={INNER_RADIUS:8,OUTER_RADIUS:11,SHADOW_BLUR:10,TOTAL_RADIUS:21,OUTER_FILL:"white",STALE_FILL:"rgb(180, 180, 180)",SHADOW_COLOR:"rgba(0, 0, 0, 0.3)",ANIMATION_DURATION_MS:3e3,ANIMATION_HALF_DURATION_MS:1500,ANIMATION_SCALE_FROM:1,ANIMATION_SCALE_TO:.75,ANIMATION_FILL_FROM:[68,152,252],ANIMATION_FILL_TO:[26,129,251]}},{}],156:[function(t,e,i){function n(t){Object.defineProperty(this,"_impl",{value:new s(this,t)})}var o=t("./annotation"),s=t("./user-location-annotation-internal"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(o,n,{set coordinate(t){this._impl.coordinate=t},get coordinate(){return this._impl.coordinate},get draggable(){return this._impl.draggable},set draggable(t){this._impl.draggable=t},get size(){return this._impl.size},set size(t){this._impl.size=t}}),e.exports=n},{"./annotation":127,"./user-location-annotation-internal":152,"@maps/js-utils":84}],157:[function(t,e,i){"use strict";function n(t,e){this.items=t,this.data=e}n.prototype={constructor:n,get data(){return this._data},set data(t){this._data=t},get items(){return this._items},set items(t){this._items=t instanceof Array?t:[t]},getFlattenedItemList:function(){var t=[];return this.items.forEach(function(e){"function"==typeof e.getFlattenedItemList?t=t.concat(e.getFlattenedItemList(e)):t.push(e)},this),t}},e.exports=n},{}],158:[function(t,e,i){function n(t,e){Object.defineProperty(this,"_impl",{value:new o(t,e)})}var o=t("./item-collection-internal");n.prototype={get data(){return this._impl.data},set data(t){this._impl.data=t},get items(){return this._impl._items},set items(t){this._impl.items=t},getFlattenedItemList:function(){return this._impl.getFlattenedItemList()}},e.exports=n},{"./item-collection-internal":157}],159:[function(t,e,i){var n=t("../build.json"),o=t("./localizer"),s=t("../../lib/bootstrap"),a={_instrumented:!1,get instrumented(){return this._instrumented},get previewLoCSR(){return!!this._previewLoCSR},get didFallback(){return this._syrupRequestedFallback},init:function(t){return t&&"object"==typeof t&&("instrumented"in t&&(this._instrumented=!!t.instrumented,delete t.instrumented),"_previewLoCSR"in t&&(this._previewLoCSR=!!t._previewLoCSR,delete t._previewLoCSR)),s.init.call(this,t,"[MapKit] mapkit.init(): ")},Events:{Changed:"configuration-change",Error:"error"},StorageKeys:{BootstrapData:"mapkit.bootstrapData",BootstrapRequestParams:"mapkit.bootstrapRequestParams",BootstrapDataExpirationTimeMS:"mapkit.bootstrapData.expirationTimeMS"}},r=Object.create(s).withParameters({mkjsVersion:n.version,poi:"1",languageSupport:o.languageSupport,l10n:o.l10n});Object.keys(a).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(a,t))}),e.exports=r},{"../../lib/bootstrap":1,"../build.json":111,"./localizer":182}],160:[function(t,e,i){var n=t("@maps/js-utils").noop;e.exports={log:n,warn:n,error:n,assert:n}},{"@maps/js-utils":84}],161:[function(t,e,i){e.exports={MapTypes:{Satellite:"satellite",Hybrid:"hybrid",Standard:"standard"},FeatureVisibility:{Adaptive:"adaptive",Hidden:"hidden",Visible:"visible"},MarkerAnnotationFontFamily:'"-apple-system", "BlinkMacSystemFont", "Helvetica Neue", Helvetica, Arial, sans-serif',MapTiledLayerMinZoomLevel:2,MapTiledLayerMaxZoomLevel:20}},{}],162:[function(t,e,i){function n(t){h.call(this,t),r.classList.add(t,u.CONTROL)}function o(t){this._control=t}function s(t){this._control=t}function a(t){this._control=t}var r=t("../utils"),l=t("@maps/js-utils"),h=t("@maps/render-tree").Node,c=t("../localizer").l10n,u={CONTROL:"mk-control",DISABLED:"mk-disabled",FOCUS:"mk-focus"};n.prototype=l.inheritPrototype(h,n,{constructor:n,_enabled:!1,hasFocus:!1,pageHasFocus:!1,get enabled(){return this._enabled},set enabled(t){var e=!!t;this._enabled!==e&&(e?(r.classList.remove(this.element,u.DISABLED),this._createListeners(),this.element.addEventListener(r.touchstartOrMousedown,this._eventListener),this._addFocusAndBlurListeners(),this._addKeyboardListeners()):(r.classList.add(this.element,u.DISABLED),this.element.removeEventListener(r.touchstartOrMousedown,this._eventListener),this._removeFocusAndBlurListeners(),this._removeKeyboardListeners()),this._enabled=e,this.reset())},set canShowTooltips(t){t?this._updateLabels():this._clearLabels()},willMoveToParent:function(t){t?this.parent||(this._createListeners(),c.addEventListener(c.Events.LocaleChanged,this._eventListener),this._addFocusAndBlurListeners(),this._addKeyboardListeners(),this.addEventListeners()):(c.removeEventListener(c.Events.LocaleChanged,this._eventListener),this.removeEventListeners(),this._removeFocusAndBlurListeners(),this._removeKeyboardListeners(),this._destroyListeners())},blurFocusedElement:function(t){try{this.element.contains(document.activeElement)&&document.activeElement.blur()}catch(t){}},reset:function(){},touchesBegan:function(t){},touchesMoved:function(t){},touchesEnded:function(t){},touchesCanceled:function(t){},spaceBarKeyDown:function(t){},spaceBarKeyUp:function(t){},escapeKeyDown:function(t){},escapeKeyUp:function(t){},downArrowKeyUp:function(t){},downArrowKeyDown:function(t){},upArrowKeyUp:function(t){},upArrowKeyDown:function(t){},rightArrowKeyUp:function(t){},leftArrowKeyUp:function(t){},rightArrowKeyDown:function(t){},leftArrowKeyDown:function(t){},focused:function(t){},blurred:function(t){},pageDidFocus:function(t){},pageDidBlur:function(t){},updateTintColor:function(t){},removeEventListeners:function(){},addEventListeners:function(){},localeChanged:function(){},_clearLabels:function(){r.updateLabel(this.element,"")},_createListeners:function(){this._eventListener||(this._eventListener=new o(this)),this._windowEventListener||(this._windowEventListener=new a(this)),this._cancelFocusEventListener||(this._cancelFocusEventListener=new s(this))},_destroyListeners:function(){this._eventListener&&(this.element.removeEventListener(r.touchstartOrMousedown,this._eventListener),this._eventListener.destroy(),delete this._eventListener),this._windowEventListener&&(this._windowEventListener.destroy(),delete this._windowEventListener),this._cancelFocusEventListener&&(this._cancelFocusEventListener.destroy(),delete this._cancelFocusEventListener)},_addFocusAndBlurListeners:function(){this.element.addEventListener("focus",this._eventListener,!0),this.element.addEventListener("blur",this._eventListener,!0),window.addEventListener("focus",this._windowEventListener),window.addEventListener("blur",this._windowEventListener)},_removeFocusAndBlurListeners:function(){this.element.removeEventListener("focus",this._eventListener,!0),this.element.removeEventListener("blur",this._eventListener,!0),window.removeEventListener("focus",this._windowEventListener),window.removeEventListener("blur",this._windowEventListener)},_addKeyboardListeners:function(){this.element.addEventListener("keydown",this._eventListener),this.element.addEventListener("keyup",this._eventListener)},_removeKeyboardListeners:function(){this.element.removeEventListener("keydown",this._eventListener),this.element.removeEventListener("keyup",this._eventListener)}}),o.prototype={destroy:function(){this._removeEventListeners(),delete this._control},handleEvent:function(t){switch(t.type){case"mousedown":case"touchstart":this._touchesBegan(t);break;case"touchmove":case"mousemove":this._control.touchesMoved(t);break;case"touchend":case"mouseup":this._removeEventListeners(),this._control.touchesEnded(t);break;case"touchcancel":this._removeEventListeners(),this._control.touchesCanceled(t);break;case"keydown":this._keyDown(t);break;case"keyup":this._keyUp(t);break;case"focus":this._focus(t);break;case"blur":this._blur(t);break;case c.Events.LocaleChanged:this._control.localeChanged(t)}},_touchesBegan:function(t){t.preventDefault(),t.stopPropagation(),("mousedown"!==t.type||0===t.button&&!t.ctrlKey)&&(r.supportsTouches?(window.addEventListener("touchmove",this,!0),window.addEventListener("touchend",this,!0),window.addEventListener("touchcancel",this,!0)):(window.addEventListener("mousemove",this,!0),window.addEventListener("mouseup",this,!0)),this._control.touchesBegan(t))},_keyDown:function(t){switch(t.keyCode){case l.KeyCodes.Escape:this._control.escapeKeyDown(t);break;case l.KeyCodes.SpaceBar:t.preventDefault(),this._control.spaceBarKeyDown(t);break;case l.KeyCodes.DownArrow:t.preventDefault(),this._control.downArrowKeyDown(t);break;case l.KeyCodes.UpArrow:t.preventDefault(),this._control.upArrowKeyDown(t);break;case l.KeyCodes.RightArrow:t.preventDefault(),this._control.rightArrowKeyDown(t);break;case l.KeyCodes.LeftArrow:t.preventDefault(),this._control.leftArrowKeyDown(t)}},_keyUp:function(t){switch(t.keyCode){case l.KeyCodes.Escape:this._control.escapeKeyUp(t);break;case l.KeyCodes.DownArrow:t.preventDefault(),this._control.downArrowKeyUp(t);break;case l.KeyCodes.UpArrow:t.preventDefault(),this._control.upArrowKeyUp(t);break;case l.KeyCodes.RightArrow:t.preventDefault(),this._control.rightArrowKeyUp(t);break;case l.KeyCodes.LeftArrow:t.preventDefault(),this._control.leftArrowKeyUp(t);break;case l.KeyCodes.SpaceBar:t.preventDefault(),this._control.spaceBarKeyUp(t)}},_focus:function(t){this._control.hasFocus||(this._control.hasFocus=!0,r.classList.add(this._control.element,u.FOCUS),window.addEventListener(r.touchstartOrMousedown,this._control._cancelFocusEventListener,!0),this._control.focused(t))},_blur:function(t){this._control.hasFocus&&(this._control.hasFocus=!1,window.removeEventListener(r.touchstartOrMousedown,this._control._cancelFocusEventListener,!0),r.classList.remove(this._control.element,u.FOCUS),this._control.blurred(t))},_removeEventListeners:function(){r.supportsTouches?(window.removeEventListener("touchmove",this,!0),window.removeEventListener("touchend",this,!0),window.removeEventListener("touchcancel",this,!0)):(window.removeEventListener("mousemove",this,!0),window.removeEventListener("mouseup",this,!0))}},s.prototype={destroy:function(){delete this._control},handleEvent:function(t){this._control.blurFocusedElement(t)}},a.prototype={destroy:function(){delete this._control},handleEvent:function(t){switch(t.type){case"focus":this._control.pageHasFocus||(this._control.pageHasFocus=!0,this._control.pageDidFocus(t));break;case"blur":this._control.pageHasFocus=!1,this._control.pageDidBlur(t)}}},e.exports=n},{"../localizer":182,"../utils":225,"@maps/js-utils":84,"@maps/render-tree":102}],163:[function(t,e,i){function n(t){_.call(this,o.htmlElement("div",{class:C})),this._map=t,this._logo=this.addChild(new a),this._topLeftControlsNode=this.addChild(new _(o.htmlElement("div",{class:S}))),this._topRightControlsNode=this.addChild(new _(o.htmlElement("div",{class:T}))),this._bottomRightControlsNode=this.addChild(new _(o.htmlElement("div",{class:L}))),this._legalControl=this._topRightControlsNode.addChild(new r),this._controlsPending=!1,y.activeLocale&&(this._rtl=y.activeLocale.rtl),y.addEventListener(y.Events.LocaleChanged,this)}var o=t("../utils"),s=t("@maps/js-utils"),a=t("./logo"),r=t("./legal-control"),l=t("./map-type-control"),h=t("./scale"),c=t("./zoom-control"),u=t("./user-location-control"),d=t("./rotation-control"),p=t("@maps/geometry/point"),m=t("@maps/geometry/size"),g=t("@maps/render-tree"),_=t("@maps/render-tree").Node,f=t("../user-location/user-location"),y=t("../localizer").l10n,v=t("@maps/geometry/rect"),w=t("../constants").FeatureVisibility,b=new m(262,222),C="mk-controls-container",S="mk-top-left-controls-container",L="mk-bottom-right-controls-container",T="mk-top-right-controls-container",E=new p(7,11);n.prototype=s.inheritPrototype(_,n,{_rtl:!1,get controlsPending(){return this._controlsPending},set canShowTooltips(t){this._userLocationControl&&(this._userLocationControl.canShowTooltips=t),this._zoomControl&&(this._zoomControl.canShowTooltips=t),this._mapTypeControl&&(this._mapTypeControl.canShowTooltips=t),this._rotationControl&&(this._rotationControl.canShowTooltips=t)},get legalControlExpandedSize(){return this._legalControl.expandedSize},mapPaddingDidChange:function(t){var e=this.element.style;e.top=t.top+"px",e.left=t.left+"px",e.bottom=t.bottom+"px",e.right=t.right+"px",this.sizeDidChange()},sizeDidChange:function(){var t=this._shouldHideControls();this._toggleControl(this._map.showsZoomControl&&!t,this._zoomControl,this.updateZoomControl),this._toggleControl(this._map.showsMapTypeControl&&!t,this._mapTypeControl,this.updateMapTypeControl),this._toggleControl(this._map.showsUserLocationControl&&!t,this._userLocationControl,this.updateUserLocationControl),this.updateRotationControl(),this.updateScale(),this.zoomLevelDidChange()},zoomLevelDidChange:function(){this._zoomControl&&(this._zoomControl.zoomOutEnabled=this._map.zoomLevel!==this._map.minZoomLevel,this._zoomControl.zoomInEnabled=this._map.zoomLevel!==this._map.maxZoomLevel)},update:function(){this._map&&(this._setPendingControls(),this._shouldHideControls()?(this._removeZoomControl(),this._removeMapTypeControl(),this._removeUserLocationControl(),this._removeRotationControl(),this._removeScale()):(this.updateZoomControl(),this.updateMapTypeControl(),this.updateUserLocationControl(),this.updateRotationControl(),this.updateScale()),this._logo.updateWithMapType(this._map.mapType),this.updateLegalControl())},scaleDidChange:function(){this._scale&&(this._scale.update(),this._scale.hideIfNeeded())},updateScale:function(){this._map.showsScale===w.Hidden||this._shouldHideControls()?this._removeScale():(this._addScale(),this._scale.node.mapWidth=this._map._mapNode.size.width,this._scale.updateThemeForMap(this._map),this._positionScale(),this._scale.update())},updateZoomControl:function(){this._map.showsZoomControl&&!this._shouldHideControls()?(this._addZoomControl(),this._zoomControl.enabled=this._map.isZoomEnabled,this._zoomControl.zoomOutEnabled=this._map.zoomLevel!==this._map.minZoomLevel,this._zoomControl.zoomInEnabled=this._map.zoomLevel!==this._map.maxZoomLevel,this._zoomControl.updateTintColor(this._map.tintColor)):this._removeZoomControl()},updateMapTypeControl:function(){this._map.showsMapTypeControl&&!this._shouldHideControls()?(this._addMapTypeControl(),this._mapTypeControl.mapType=this._map.mapType,this._mapTypeControl.enabled=!0,this._mapTypeControl.updateTintColor(this._map.tintColor)):this._removeMapTypeControl()},updateUserLocationControl:function(){if(this._map.showsUserLocationControl&&!this._shouldHideControls()){switch(this._addUserLocationControl(),this._userLocationControl.enabled=!0,this._userLocationControl.state){case u.States.Default:this._map.tracksUserLocation&&f&&f.location?this._userLocationControl.toTrackingState():(this._map.tracksUserLocation||this._map.showsUserLocation&&!this._map.userLocationAnnotation)&&this._userLocationControl.toWaitingState();break;case u.States.Waiting:f&&f.location&&this.userLocationDidChange(f),this._map.showsUserLocation||this._userLocationControl.toDefaultState();break;case u.States.Tracking:this._map.tracksUserLocation||this._userLocationControl.toDefaultState()}this._userLocationControl.updateTintColor(this._map.tintColor)}else this._removeUserLocationControl()},updateRotationControl:function(){this._shouldHideControls()||this._map.isCompassHidden?this._removeRotationControl():(this._addRotationControl(),this._rotationControl.rotation=this._map.rotation,this._rotationControl.updateTintColor(this._map.tintColor))},updateLegalControl:function(){this._legalControl.updateWithMapType(this._map.mapType),this._legalControl.updateTintColor(this._map.tintColor)},devicePixelRatioDidChange:function(t){this._userLocationControl&&this._userLocationControl.updateIcons(t.value),this._rotationControl&&this._rotationControl.updateImage(t.value)},handleEvent:function(t){if(this._map)switch(t.type){case l.EVENTS.MAPTYPE_CHANGE:this._mapTypeControl&&(this._map.mapType=this._mapTypeControl.mapType);break;case u.EVENTS.PRESSED:this._userLocationControl.state===u.States.Waiting?this._map.tracksUserLocation=!0:this._userLocationControl.state!==u.States.Tracking&&(this._map.tracksUserLocation=!1);break;case y.Events.LocaleChanged:this._handleLocaleChanged(t);break;case"update":this._unsetPendingControls(),this._map.addWaitingAnnotations()}},mapWasDestroyed:function(){this._unsetPendingControls(),y.removeEventListener(y.Events.LocaleChanged,this),this._destroyZoomControl(),this._destroyMapTypeControl(),this._destroyUserLocationControl(),this._destroyRotationControl(!0),this._legalControl.remove(),delete this._legalControl,this._logo.mapWasDestroyed(),this._logo.remove(),delete this._logo,this._removeScale(),this.remove(),delete this._map},userLocationDidChange:function(t){this._userLocationControl&&(this._map.tracksUserLocation?this._userLocationControl.toTrackingState():this._userLocationControl.toDefaultState())},userLocationDidError:function(t){this._userLocationControl&&this._userLocationControl.toDisabledState(),this._map.userLocationAnnotation||3===t.errorCode||(this._map.showsUserLocation=!1)},mapTypeControlWasOpened:function(){},mapTypeControlWasClosed:function(){},_handleLocaleChanged:function(t){this._rtl!==t.locale.rtl&&(this._rtl=t.locale.rtl,this._rtlChanged=!0,this.update(),this._rtlChanged=!1)},_addScale:function(){this._scale||(this._setPendingControls(),this._scale=new h(this._map),this.addChild(this._scale,0))},_positionScale:function(){var t=this._map.ensureVisibleFrame().size,e=!this._rtl;this._scale.node.leftAligned=e,this._scale.position=e?new p(E.x,E.y):new p(t.width-this._scale.size.width-E.x,E.y),this._scale.shouldDisplayScale||this._scale.node.setOpacityAnimated(0,!1)},_removeScale:function(){this._scale&&(this._setPendingControls(),this._scale.node.l10n=null,this._scale.node.remove(),this._scale.scene.destroy(),this._scale.remove(),delete this._scale)},_addZoomControl:function(){!this._map.showsZoomControl||this._zoomControl||this._shouldHideControls()||(this._setPendingControls(),this._zoomControl=new c,this._zoomControl.enabled=this._map.isZoomEnabled,this._zoomControl.addEventListener(c.EVENTS.ZOOM_START,this._map),this._zoomControl.addEventListener(c.EVENTS.ZOOM_END,this._map),this._bottomRightControlsNode.addChild(this._zoomControl))},_removeZoomControl:function(){!this._shouldHideControls()&&this._map.showsZoomControl||!this._zoomControl||(this._setPendingControls(),this._zoomControl.enabled=!1,this._destroyZoomControl())},_destroyZoomControl:function(){this._zoomControl&&(this._zoomControl.removeEventListener(c.EVENTS.ZOOM_START,this._map),this._zoomControl.removeEventListener(c.EVENTS.ZOOM_END,this._map),this._zoomControl.remove(),delete this._zoomControl)},_addMapTypeControl:function(){!this._map.showsMapTypeControl||this._mapTypeControl||this._shouldHideControls()||(this._setPendingControls(),this._mapTypeControl=new l(t("../map").MapTypes,this._map.mapType,this),this._mapTypeControl.addEventListener(l.EVENTS.MAPTYPE_CHANGE,this),this._topRightControlsNode.addChild(this._mapTypeControl),this.updateLegalControl())},_removeMapTypeControl:function(){this._mapTypeControl&&(this._setPendingControls(),this._mapTypeControl.enabled=!1,this._destroyMapTypeControl(),this.updateLegalControl())},_destroyMapTypeControl:function(){this._mapTypeControl&&(this._mapTypeControl.removeEventListener(l.EVENTS.MAPTYPE_CHANGE,this),this._mapTypeControl.remove(),delete this._mapTypeControl)},_toggleControl:function(t,e,i){(e&&!t||!e&&t)&&i.call(this)},_shouldHideControls:function(){var t=this._map.ensureVisibleFrame().size;return t.width<b.width||t.height<b.height},_addRotationControl:function(){this._shouldHideControls()||this._rotationControl||(this._setPendingControls(),this._rotationControl=new d(this._map),this._rotationControl.enabled=!0,this._bottomRightControlsNode.insertBefore(this._rotationControl,this._zoomControl))},_removeRotationControl:function(){this._rotationControl&&(this._setPendingControls(),this._destroyRotationControl())},_destroyRotationControl:function(t){if(this._rotationControl){if(t)this._rotationControl.mapWasDestroyed(),this._rotationControl.remove();else{var e=this._rotationControl;e.opacity=0,e.element.addEventListener(o.transitionend,function t(){e.element.removeEventListener(o.transitionend,t),e.mapWasDestroyed(),e.remove()})}delete this._rotationControl}},_addUserLocationControl:function(){!this._map.showsUserLocationControl||this._userLocationControl||this._shouldHideControls()||(this._setPendingControls(),this._userLocationControl=new u(this._map,this._rtl),this._userLocationControl.addEventListener(u.EVENTS.PRESSED,this),this._bottomRightControlsNode.insertBefore(this._userLocationControl,this._rotationControl||this._zoomControl))},_removeUserLocationControl:function(){!this._shouldHideControls()&&this._map.showsUserLocationControl||!this._userLocationControl||(this._setPendingControls(),this._destroyUserLocationControl())},_destroyUserLocationControl:function(){this._userLocationControl&&(this._userLocationControl.removeEventListener(u.EVENTS.STATE_CHANGE,this._map),this._userLocationControl.mapWasDestroyed(),this._userLocationControl.remove(),delete this._userLocationControl)},_setPendingControls:function(){this._controlsPending=!0,g.addEventListener("update",this)},_unsetPendingControls:function(){this._controlsPending=!1,g.removeEventListener("update",this)},controlBounds:function(){var t=[];return this.children.forEach(function(e){0!==e.children.length&&(e.classList.contains(L)?Array.prototype.push.apply(t,e.children):t.push(e))}),t.map(function(t){try{var e=t.element.getBoundingClientRect(),i=window.getComputedStyle(this._map.element);if("none"===(i.transform||i.msTransform||i.webkitTransform)){var n=this._map.element.getBoundingClientRect();return new v(e.left-n.left,e.top-n.top,e.width,e.height)}return v.rectFromClientRect(e)}catch(t){return new v}},this)}}),e.exports=n},{"../constants":161,"../localizer":182,"../map":185,"../user-location/user-location":224,"../utils":225,"./legal-control":164,"./logo":165,"./map-type-control":166,"./rotation-control":167,"./scale":168,"./user-location-control":169,"./zoom-control":170,"@maps/geometry/point":69,"@maps/geometry/rect":70,"@maps/geometry/size":71,"@maps/js-utils":84,"@maps/render-tree":102}],164:[function(t,e,i){function n(){var t=h.htmlElement("div",{class:y.CONTROL});this._elLegal=t.appendChild(h.htmlElement("div",{class:y.LEGAL,role:"button",tabindex:0})),this._elLegal.textContent=m.get("Legal.Label"),d.call(this,t);var e=h.htmlElement("div",{class:y.LEGAL_INFO,"aria-hidden":!0});this._legalInfoNode=new p.Node(e);var i=e.appendChild(h.htmlElement("div",{class:y.LEGAL_INFO_CONTAINER}));this._elCloseButton=h.htmlElement("div",{class:y.CLOSE,role:"button"},r()),i.appendChild(h.htmlElement("header")).appendChild(this._elCloseButton),this._elInfoItems=i.appendChild(h.htmlElement("div",{class:y.LEGAL_INFO_ITEMS,role:"menu"})),this.enabled=!0,this._updateAccessibilityState()}function o(t,e){var i=a(t);return i.textContent=m.get(e),i}function s(t,e,i){var n,o,s=a(t);return h.classList.add(s,y.LEGAL_ATTRIBUTION_ITEM),i?(n='<img width="68" height="22" class="mk-attribution-logo" src="'+h.imagePathForDevice([1,2,3],g.createImageUrl("legal/tomtom"))+'" alt="TomTom">',o=h.htmlElement("span",{class:"mk-right-caret"},l()),s.innerHTML=m.get("Legal.Attribution.HTML.Label",{logo:n,chevron:o.outerHTML})):s.textContent=m.get("Legal.Attribution.Plain.Label",{attribution:e}),s}function a(t){var e=h.htmlElement("div",{class:y.LEGAL_INFO_ITEM,role:"menuitem",tabindex:-1});return t&&e.setAttribute(v.MAP_ATTRIBUTION_URL,t),e}function r(){return h.createSVGIcon(h.svgElement("path",{d:"M6.20710678,5.5 L10.3535534,9.6464466 L9.6464466,10.3535534 L5.5,6.20710678 L1.35355339,10.3535534 L0.646446609,9.64644661 L4.79289322,5.5 L0.646446602,1.35355338 L1.35355338,0.646446602 L5.5,4.79289322 L9.64644661,0.646446609 L10.3535534,1.35355339 L6.20710678,5.5 Z"}),{viewBox:"0 0 11 11"})}function l(){return h.createSVGIcon(h.svgElement("path",{d:"M1,1 L5,4.5 L1,7.5"}),{viewBox:"0 0 7 9"})}var h=t("../utils"),c=t("@maps/js-utils"),u=t("../configuration"),d=t("./control"),p=t("@maps/render-tree"),m=t("../localizer").l10n,g=t("../urls"),_=t("@maps/geometry/size");e.exports=n;var f=new _(222,116),y={CONTROL:"mk-legal-controls",OPEN:"mk-open",CLOSE:"mk-close",DIVIDER:"mk-divider",LEGAL:"mk-legal",LEGAL_SATELLITE:"mk-legal-satellite",LEGAL_INFO:"mk-legal-info",LEGAL_INFO_CONTAINER:"mk-legal-info-container",LEGAL_INFO_ITEMS:"mk-legal-info-items",LEGAL_INFO_ITEM:"mk-legal-info-item",LEGAL_ATTRIBUTION_ITEM:"mk-legal-attribution-item",PRESSED:"mk-pressed"},v={MAP_ATTRIBUTION_URL:"data-map-attribution-url"};n.prototype=c.inheritPrototype(d,n,{_isOpen:!1,_shouldFocusOnLegalButton:!1,_canShowFocusOutline:!0,_hadFocusOutline:!1,_pageLostFocus:!1,updateWithMapType:function(e){var i=t("../map");if(u.ready){this.mapType=e,this._elLegal.className=y.LEGAL,this._elLegal.textContent=m.get("Legal.Label"),this._elLegal.removeAttribute(v.MAP_ATTRIBUTION_URL),e!==i.MapTypes.Standard&&h.classList.add(this._elLegal,y.LEGAL_SATELLITE),this._elCloseButton.setAttribute("aria-label",m.get("Legal.Menu.Close.Label"));var n=u.types[this.mapType].tileSources[0];n.showTermsOfUseLink||n.showPrivacyLink?(this.updateLegalInfo(n),this.addChild(this._legalInfoNode)):(this._elLegal.setAttribute(v.MAP_ATTRIBUTION_URL,n.attribution&&n.attribution.url),this._legalInfoNode.remove()),this._updateAccessibilityState()}},updateLegalInfo:function(t){console.assert(t);var e=[];if(this._elInfoItems.innerHTML="",t.showTermsOfUseLink&&e.push(o(m.get("Legal.TermsOfUse.URL"),"Legal.TermsOfUse.Label")),t.showPrivacyLink&&e.push(o(m.get("Legal.Privacy.URL"),"Legal.Privacy.Label")),t.attribution){var i=t.attribution.url,n=t.attribution.name,a=t.attribution.name===u.TILE_SOURCES.TOMTOM;e.push(s(i,n,a))}e.forEach(function(t,i){this._elInfoItems.appendChild(t),i<e.length-1&&this._elInfoItems.appendChild(h.htmlElement("div",{class:y.DIVIDER}))},this)},get expandedSize(){var t=this._legalInfoNode.element.getBoundingClientRect();return new _(Math.ceil(t.width)||f.width,Math.ceil(t.height)||f.height)},handleEvent:function(t){switch(t.type){case h.transitionend:this._handleTransitionend(t);break;case h.touchstartOrMousedown:this._isOpen&&!this.element.contains(t.target)&&this._close()}},localeChanged:function(t){this.mapType&&(this.updateWithMapType(this.mapType),this.updateTintColor(this.tintColor))},touchesBegan:function(t){this._setPressedElement(t.target)},touchesMoved:function(t){if(this._isOpen&&this._isDown){var e=h.parentNodeForSvgTarget(t.target);this._clearPressedElement(),this._setPressedElement(e)}},touchesEnded:function(t){this._pressed(t)},spaceBarKeyDown:function(t){this._setPressedElement(t.target)},spaceBarKeyUp:function(t){this._pressed(t)},escapeKeyDown:function(t){this._isOpen&&(this._shouldFocusOnLegalButton=!0,this._canShowFocusOutline=!0,this._close())},focused:function(t){if(this._isOpen&&t.target===this._elLegal)return this._shouldFocusOnLegalButton=!0,void this._close();var e=this._canShowFocusOutline&&!this._pageLostFocus||this._canShowFocusOutline&&this._pageLostFocus&&this._hadFocusOutline;this._hadFocusOutline=e,h.classList.toggle(this.element,"mk-focus",e),this._isDown&&e&&(this._clearPressedElement(),this._setPressedElement(t.target))},blurred:function(t){setTimeout(function(t){document.activeElement&&"body"!==document.activeElement.tagName.toLowerCase()&&!this.element.contains(document.activeElement)&&this._close()}.bind(this),0)},pageDidFocus:function(t){setTimeout(function(){delete this._pageLostFocus}.bind(this),0)},pageDidBlur:function(t){this._elInfoItems.contains(document.activeElement)&&d.prototype.blurFocusedElement.call(this,t),this._pageLostFocus=!0,this._close()},blurFocusedElement:function(t){d.prototype.blurFocusedElement.call(this,t),this._isOpen&&!this.element.contains(t.target)&&this._close()},updateTintColor:function(t){if(this.tintColor=t,this._elInfoItems)for(var e=this._elInfoItems.querySelectorAll("."+y.LEGAL_INFO_ITEM+":not(."+y.LEGAL_ATTRIBUTION_ITEM+")"),i=0;i<e.length;i++)e[i].style.color=t},reset:function(){this._close()},_open:function(){window.addEventListener(h.touchstartOrMousedown,this,!0),this._legalInfoNode.element.addEventListener("transitionend",this),h.classList.add(this._legalInfoNode.element,y.OPEN),this._isOpen=!0},_close:function(){this._isOpen=!1,this._updateAccessibilityState(),window.removeEventListener(h.touchstartOrMousedown,this,!0),h.classList.remove(this._legalInfoNode.element,y.OPEN)},_tabbable:function(){for(var t=this.element.querySelectorAll("."+y.LEGAL_INFO_ITEM),e=0;e<t.length;e++)t[e].setAttribute("tabindex",this._isOpen?0:-1);this._elCloseButton.setAttribute("tabindex",this._isOpen?0:-1)},_pressed:function(t){var e=h.parentNodeForSvgTarget(t.target),i="keyup"===t.type&&t.keyCode===c.KeyCodes.SpaceBar;delete this._isDown,this._clearPressedElement(),h.classList.contains(e,"mk-attribution-logo")&&(e=e.parentNode),e.getAttribute(v.MAP_ATTRIBUTION_URL)?window.open(e.getAttribute(v.MAP_ATTRIBUTION_URL)):h.classList.contains(e,y.CLOSE)?(this._shouldFocusOnLegalButton=!0,this._canShowFocusOutline=i,this._elCloseButton.blur(),this._close()):h.classList.contains(this._legalInfoNode.element,y.OPEN)||(this._canShowFocusOutline=i,this._open())},_handleTransitionend:function(t){this._isOpen?(this._updateAccessibilityState(),this.element.blur(),this._elInfoItems.children.item(0).focus()):(this._legalInfoNode.element.removeEventListener("transitionend",this),this._shouldFocusOnLegalButton&&this._elLegal.focus(),this._shouldFocusOnLegalButton=!1),c.isIEAndNotEdge()?setTimeout(function(){this._canShowFocusOutline=!0}.bind(this),0):this._canShowFocusOutline=!0},_updateAccessibilityState:function(){this._legalInfoNode.parent?(this._elLegal.setAttribute("aria-haspopover",!0),this._elLegal.setAttribute("aria-expanded",this._isOpen),this._isOpen?this._legalInfoNode.element.removeAttribute("aria-hidden"):this._legalInfoNode.element.setAttribute("aria-hidden","true"),this._tabbable()):(this._elLegal.removeAttribute("aria-haspopover"),this._elLegal.removeAttribute("aria-expanded"))},_setPressedElement:function(t){t=h.parentNodeForSvgTarget(t),this._isDown=!0,this._clearPressedElement(),(h.classList.contains(t,y.LEGAL_INFO_ITEM)||h.classList.contains(t,y.CLOSE))&&h.classList.add(t,y.PRESSED)},_clearPressedElement:function(){var t=this.element.querySelector("."+y.PRESSED);t&&h.classList.remove(t,y.PRESSED)}})},{"../configuration":159,"../localizer":182,"../map":185,"../urls":222,"../utils":225,"./control":162,"@maps/geometry/size":71,"@maps/js-utils":84,"@maps/render-tree":102}],165:[function(t,e,i){function n(){this._logoElement=o.htmlElement("img",{class:u.LOGO}),l.call(this,o.htmlElement("div",{class:u.CONTROL},this._logoElement)),h.addEventListener(h.Events.LocaleChanged,this)}var o=t("../utils"),s=t("@maps/js-utils"),a=t("../configuration"),r=t("../urls"),l=t("@maps/render-tree").Node,h=t("../localizer").l10n;e.exports=n;var c=r.createImageUrl("logos/logo"),u={CONTROL:"mk-logo-control",LOGO:"mk-logo",LOGO_AUTONAVI:"mk-logo-autonavi"};n.prototype=s.inheritPrototype(l,n,{updateWithMapType:function(e){var i=t("../map"),n=e.toLowerCase()===i.MapTypes.Standard;this.mapType=e,this._logoElement.className=u.LOGO;var s=[c];"AutoNavi"===a.tileProvider&&(o.classList.add(this._logoElement,u.LOGO_AUTONAVI),s.push("autonavi")),n||s.push("satellite"),this.rtl&&s.push("rtl"),this._logoElement.src=o.imagePathForDevice([1,2,3],s.join("-")),this._logoElement.setAttribute("alt",h.get("Logo."+a.tileProvider+".Tooltip"))},handleEvent:function(t){switch(t.type){case h.Events.LocaleChanged:this.rtl=t.locale.rtl,this._handleLocaleChange(t)}},mapWasDestroyed:function(){h.removeEventListener(h.Events.LocaleChanged,this)},_handleLocaleChange:function(t){this.mapType&&this.updateWithMapType(this.mapType)}})},{"../configuration":159,"../localizer":182,"../map":185,"../urls":222,"../utils":225,"@maps/js-utils":84,"@maps/render-tree":102}],166:[function(t,e,i){function n(t,e,i){c.call(this,l.htmlElement("div",{class:g.CONTROL})),u.EventTarget(this),this._caretIcon=o(),this._checkmarkIcon=s(),["Standard","Hybrid","Satellite"].forEach(function(i){var n=new d.Node(l.htmlElement("div",{class:g.MAP_TYPE})),o="Mode."+i;n.element.setAttribute(m.MAP_TYPE,t[i]),n.element.setAttribute(m.L10N,o),n.element.textContent=p.get(o),t[i]===e&&(this._mapType=e,this._updateActiveNode(n)),this.addChild(n)},this),this._updateLabels(),this._updateAccessibilityState(),this.enabled=!0,this._delegate=i}function o(){return l.createSVGIcon(l.svgElement("path",{d:"M1,1 L4.5,4.5 L8,1"}),{viewBox:"0 0 9 6"})}function s(){return l.createSVGIcon(l.svgElement("path",{d:"M3.76776695,8.47487373 L3.41421356,8.82842712 L2.70710678,8.12132034 L0.707106781,6.12132034 L0,5.41421356 L1.41421356,4 L2.12132034,4.70710678 L3.41421356,6 L8.70710678,0.707106781 L9.41421356,0 L10.8284271,1.41421356 L10.1213203,2.12132034 L4.12132034,8.12132034 L3.76776695,8.47487373 Z"}),{viewBox:"0 0 11 9"})}function a(t){t.focus(),t.setAttribute("tabindex",0),t.setAttribute("aria-checked",!0)}function r(t){t.blur(),t.setAttribute("tabindex",-1),t.setAttribute("aria-checked",!1)}var l=t("../utils"),h=t("@maps/js-utils"),c=t("./control"),u=t("@maps/dom-events"),d=t("@maps/render-tree"),p=t("../localizer").l10n;e.exports=n;var m={MAP_TYPE:"data-map-type",L10N:"data-l10n-key"},g={CONTROL:"mk-map-type-control",MAP_TYPES:"mk-map-types",MAP_TYPE:"mk-map-type",ACTIVE:"mk-active",PRESSED:"mk-pressed",OPEN:"mk-open",OPENING:"mk-opening",FOCUS:"mk-focus",SHOW_FOCUS:"mk-show-focus"};n.EVENTS={MAPTYPE_CHANGE:"map-type-change"},n.prototype=h.inheritPrototype(c,n,{constructor:n,_transitioning:!1,_shouldFocusOnClose:!0,_canShowFocusOutline:!0,_hadFocusOutline:!1,_pageLostFocus:!1,_activeMapTypeNode:null,_activeIcon:null,get mapType(){return this._mapType},set mapType(t){t!==this._mapType&&(this._mapType=t,this._updateDisplay(),this.dispatchEvent(new u.Event(n.EVENTS.MAPTYPE_CHANGE)))},handleEvent:function(t){switch(t.type){case l.touchstartOrMousedown:this.element.contains(t.target)?this._shouldFocusOnClose=!0:(this._shouldFocusOnClose=!1,this._close());break;case l.transitionend:this._handleTransitionend(t)}},localeChanged:function(t){this._updateLabels(),this.children.forEach(function(t){var e=t.element.getAttribute(m.L10N);t.element.textContent=p.get(e)}),this._updateActiveIcon()},touchesBegan:function(t){if(!this._transitioning){var e=l.parentNodeForSvgTarget(t.target);this._updatePressedMapType(e),this._clearOutline(),this._isDown=!0,this._canShowFocusOutline=!1,this._open()}},touchesMoved:function(t){if(this._isOpen&&this._isDown){var e=l.parentNodeForSvgTarget(t.target);this._updatePressedMapType(e)}},touchesEnded:function(t){var e=l.parentNodeForSvgTarget(t.target);if(t.stopPropagation(),this._isDown=!1,this._clearPressedState(),Date.now()-this._openTime<200)this._openTime=0;else if(this._isOpen&&!this._transitioning){this._shouldFocusOnClose=!0,this._canShowFocusOutline=!1;var i=e.getAttribute(m.MAP_TYPE);i&&(this.mapType=i),this.reset()}},blurred:function(t){setTimeout(function(){document.activeElement&&"body"!==document.activeElement.tagName.toLowerCase()&&!this.element.contains(document.activeElement)&&(this._clearPressedState(),this._shouldFocusOnClose=!1,this._close())}.bind(this),0)},touchesCanceled:function(t){this.reset()},spaceBarKeyDown:function(t){var e=l.parentNodeForSvgTarget(t.target);this._isOpen||(e=this._activeMapTypeNode.element),this._updatePressedMapType(e),this._isDown=!0},spaceBarKeyUp:function(t){var e=l.parentNodeForSvgTarget(t.target);this._isDown=!1,this._clearPressedState(),this._isOpen&&l.classList.contains(e,g.MAP_TYPE)?(this.mapType=e.getAttribute(m.MAP_TYPE),this.resetWithFocusOutline()):this._isOpen||(this._canShowFocusOutline=!0,this._open())},escapeKeyDown:function(t){this._isOpen&&this.resetWithFocusOutline()},downArrowKeyUp:function(t){this._handleUpAndDownArrows("down")},upArrowKeyUp:function(t){this._handleUpAndDownArrows("up")},focused:function(t){var e=l.parentNodeForSvgTarget(t.target),i=this._canShowFocusOutline&&!this._pageLostFocus||this._canShowFocusOutline&&this._pageLostFocus&&this._hadFocusOutline;this._hadFocusOutline=i,l.classList.toggle(this.element,g.SHOW_FOCUS,i),this._outlinedMapTypeNode||(this._outlinedMapTypeNode=this._activeMapTypeNode),this._isDown&&i&&this._updatePressedMapType(e)},pageDidFocus:function(t){setTimeout(function(){this._pageLostFocus=!1}.bind(this),0)},pageDidBlur:function(t){this._pageLostFocus=!0,this._clearPressedState(),this._close()},updateTintColor:function(t){this.tintColor=t,this._activeMapTypeNode.element.style.color=this.tintColor,this._checkmarkIcon.style.fill=this.tintColor,this._caretIcon.style.stroke=this.tintColor,this._activeIcon.style[this._isOpen?"fill":"stroke"]=this.tintColor},reset:function(){this._close()},resetWithFocusOutline:function(){this._shouldFocusOnClose=!0,this._canShowFocusOutline=!0,this.reset()},removeEventListeners:function(){this.element.removeEventListener(l.transitionend,this)},addEventListeners:function(){this.element.addEventListener(l.transitionend,this)},_updateLabels:function(){l.updateLabel(this.element,p.get("MapType.Tooltip"))},_open:function(){this._isOpen||(window.addEventListener(l.touchstartOrMousedown,this,!0),this._isOpen=!0,this._openTime=Date.now(),this._transitioning=!0,l.classList.add(this.element,g.OPEN),this._updateActiveIcon(),l.classList.add(this.element,g.OPENING),this._delegate.mapTypeControlWasOpened())},_close:function(){this._isOpen&&(window.removeEventListener(l.touchstartOrMousedown,this,!0),delete this._isOpen,delete this._isDown,delete this._openTime,this._transitioning=!0,l.classList.remove(this.element,g.OPEN),this._updateActiveIcon(),this._clearOutline(),this._delegate.mapTypeControlWasClosed())},_updateDisplay:function(){this.localeChanged();var t=this.findNode(function(t){return t.element.getAttribute(m.MAP_TYPE)===this._mapType},this);t&&(this._updateActiveNode(t),this._updateAccessibilityState())},_updateActiveNode:function(t){t!==this._activeMapTypeNode&&(this._activeMapTypeNode&&(this._activeMapTypeNode.element.style.removeProperty("color"),l.classList.remove(this._activeMapTypeNode.element,g.ACTIVE)),this._activeMapTypeNode=t,l.classList.add(t.element,g.ACTIVE),this._updateActiveIcon())},_updateActiveIcon:function(){this._activeIcon&&this._activeIcon.parentNode&&this._activeIcon.parentNode.removeChild(this._activeIcon),this._activeMapTypeNode?(this._activeIcon=this._isOpen?this._checkmarkIcon:this._caretIcon,this._activeMapTypeNode.element.appendChild(this._activeIcon)):this._activeIcon=null},_updatePressedMapType:function(t){this._clearPressedState(),l.classList.contains(t,g.MAP_TYPE)&&l.classList.add(t,g.PRESSED)},_handleLocaleChange:function(){this.children.forEach(function(t){var e=t.element.getAttribute(m.L10N);t.element.textContent=p.get(e)}),this._updateActiveIcon()},_handleTransitionend:function(){this._updateAccessibilityState(),this._focusWhenClosed(),this.updateTintColor(this.tintColor),this._isOpen&&this._activeMapTypeNode&&a(this._activeMapTypeNode.element),delete this._transitioning,h.isIEAndNotEdge()?setTimeout(function(){this._canShowFocusOutline=!0}.bind(this),0):this._canShowFocusOutline=!0},_handleUpAndDownArrows:function(t){if(this._isOpen){var e,i=this.children.indexOf(this._outlinedMapTypeNode||this._activeMapTypeNode);l.classList.contains(this.element,g.SHOW_FOCUS)?e="up"===t?Math.max(0,i-1):Math.min(i+1,this.children.length-1):(e=i,this._canShowFocusOutline=!0),this._clearOutline(),this._outlinedMapTypeNode=this.children[e],a(this._outlinedMapTypeNode.element)}},_clearOutline:function(){this._outlinedMapTypeNode&&(r(this._outlinedMapTypeNode.element),this._outlinedMapTypeNode=null)},_clearPressedState:function(){this._clearState(g.PRESSED)},_clearState:function(t){var e=this.findNode(function(e){return l.classList.contains(e.element,t)});e&&l.classList.remove(e.element,t)},_focusWhenClosed:function(){this._isOpen?l.classList.remove(this.element,g.OPENING):(this._shouldFocusOnClose&&this.element.focus(),this._shouldFocusOnClose=!1)},_updateAccessibilityState:function(){this._isOpen?(this.element.setAttribute("role","menu"),this.element.setAttribute("aria-expanded",!0),this.element.setAttribute("tabindex",-1)):(this.element.setAttribute("role","button"),this.element.setAttribute("aria-expanded",!1),this.element.setAttribute("tabindex",0)),this.children.forEach(function(t){var e=l.classList.contains(t.element,g.ACTIVE);t.element.setAttribute("tabindex",e&&this._isOpen?0:-1),t.element.setAttribute("aria-checked",e&&this._isOpen),this._isOpen?(t.element.setAttribute("role","menuitem"),t.element.removeAttribute("aria-hidden")):(t.element.removeAttribute("role"),e||t.element.setAttribute("aria-hidden",!0))},this)}})},{"../localizer":182,"../utils":225,"./control":162,"@maps/dom-events":62,"@maps/js-utils":84,"@maps/render-tree":102}],167:[function(t,e,i){function n(t){u.EventTarget(this),this.element=l.htmlElement("div",{class:y.CONTROL,role:"button",tabindex:0}),this._compassNode=new g.Node(r()),this.element.appendChild(this._compassNode.element);var e=l.htmlElement("img",{class:y.COMPASS,role:"presentation"});e.src=a(),this._compass=e,this._compassNode.element.appendChild(e);var i=l.htmlElement("div",{class:y.NORTH_INDICATOR});this._compassNode.element.appendChild(i),this._northIndicator=i,this._map=t,this._rotation=0,this._activeKeyRightAt=null,this._activeKeyLeftAt=null,this._updateLabels(),this._setupGestureRecognizers(),c.call(this,this.element)}function o(t,e,i,n){var o=e-n,a=t-i;return t>i?e<n?90+s(Math.atan(o/a)):180-s(Math.atan(a/o)):e<n?360-s(Math.atan(a/o)):270+s(Math.atan(o/a))}function s(t){return 180*t/Math.PI}function a(t){var e=t||l.devicePixelRatio;return e=h.clamp(Math.floor(e),1,3),d.createImageUrl("icons/compass_"+e+"x.png")}function r(){return l.htmlElement("div",{class:y.WRAPPER})}var l=t("../utils"),h=t("@maps/js-utils"),c=t("./control"),u=t("@maps/dom-events"),d=t("../urls"),p=t("../localizer").l10n,m=t("@maps/gesture-recognizers"),g=t("@maps/render-tree"),_=t("@maps/scheduler"),f=t("../configuration"),y={CONTROL:"mk-rotation-control",ROTATION:"mk-rotation",COMPASS:"mk-compass",PRESSED:"mk-pressed",NORTH_INDICATOR:"mk-north-indicator",LONG_NORTH_INDICATOR:"mk-north-indicator-long",WRAPPER:"mk-rotation-wrapper"};n.prototype=h.inheritPrototype(c,n,{set rotation(t){this._rotation=t,this._rotateTo(t)},localeChanged:function(t){this._updateLabels()},mapWasDestroyed:function(){delete this._map},updateTintColor:function(t){this.tintColor!==t&&(this.tintColor=t,this._northIndicator.style.color=t)},updateImage:function(t){this._compass.src=a(t)},reset:function(t){this._map&&this._center&&this._map.compassDraggingDidEnd(),l.classList.remove(this.element,y.PRESSED),!t||t.target!==this._tapRecognizer&&t.keyCode!==h.KeyCodes.UpArrow&&t.keyCode!==h.KeyCodes.SpaceBar||this._map.setRotationAnimated(0,!0),delete this._angleOffset},spaceBarKeyDown:function(){this.reset(event)},upArrowKeyUp:function(t){this.reset(t)},rightArrowKeyDown:function(t){this._beginKeyboardRotate(t)},rightArrowKeyUp:function(t){this._endKeyboardRotate(t)},leftArrowKeyDown:function(t){this._beginKeyboardRotate(t)},leftArrowKeyUp:function(t){this._endKeyboardRotate(t)},performScheduledUpdate:function(){if(!this._activeKeyRightAt&&!this._activeKeyLeftAt)return!1;this._keyboardRotate(),_.scheduleOnNextFrame(this)},handleEvent:function(t){switch(t.target){case this._tapRecognizer:t.target.state===m.States.Recognized&&this.reset(t);break;case this._panRecognizer:t.target.state===m.States.Possible?this._beginDrag(t):t.target.state===m.States.Changed?this._drag(t):t.target.state!==m.States.Recognized&&t.target.state!==m.States.Failed||this.reset(t)}},fadeIn:function(){this.element.style.opacity=1},fadeOut:function(){this.element.style.opacity=0},_updateLabels:function(t){this._northIndicator.textContent=p.get("Compass.NorthIndicator"),l.updateLabel(this.element,p.get("Compass.Tooltip")),"ar"===f.language||"th"===f.language?l.classList.add(this._northIndicator,y.LONG_NORTH_INDICATOR):l.classList.remove(this._northIndicator,y.LONG_NORTH_INDICATOR)},_rotateTo:function(t){return Math.abs(t)<5&&(t=0),this._compassNode.transform="rotate("+t+"deg)",t},_setupGestureRecognizers:function(){var t=new m.Tap;t.numberOfTapsRequired=1,t.addEventListener("statechange",this),t.target=this.element,this._tapRecognizer=t;var e=new m.Pan;e.addEventListener("statechange",this),e.target=this.element,this._panRecognizer=e},removeEventListeners:function(){this._tapRecognizer.removeEventListener("statechange",this),this._tapRecognizer.enabled=!1,this._tapRecognizer.target=null,this._panRecognizer.removeEventListener("statechange",this),this._panRecognizer.enabled=!1,this._panRecognizer.target=null},_beginDrag:function(t){var e=this.element.getBoundingClientRect();this._center={x:e.right-e.width/2,y:e.bottom-e.height/2},this._map.compassDraggingWillStart(),l.classList.add(this.element,y.PRESSED),this._angleOffset=o(t.target.locationInClient().x,t.target.locationInClient().y,this._center.x,this._center.y)-this._map.rotation},_drag:function(t){var e=o(t.target.locationInClient().x,t.target.locationInClient().y,this._center.x,this._center.y)-this._angleOffset;e=this._rotateTo(e),this._map.setRotationAnimated(e,!1,!0)},_beginKeyboardRotate:function(t){var e=this._activeKeyRightAt&&t.keyCode===h.KeyCodes.RightArrow,i=this._activeKeyLeftAt&&t.keyCode===h.KeyCodes.LeftArrow;if(!e&&!i){var n=Date.now();t.keyCode===h.KeyCodes.RightArrow?this._activeKeyRightAt=n:this._activeKeyLeftAt=n,this._timeAtLastFrame=n,_.scheduleASAP(this)}},_keyboardRotate:function(){var t=Math.max(this._activeKeyRightAt||0,this._activeKeyLeftAt||0);if(t&&this._timeAtLastFrame){var e=Date.now(),i=this._rotation,n=e-this._timeAtLastFrame;i+=(4*(t===this._activeKeyLeftAt)?-1:1)*(60*n)/1e3,this._map.rotation=i,this._timeAtLastFrame=Date.now()}},_endKeyboardRotate:function(t){t.keyCode===h.KeyCodes.RightArrow?this._activeKeyRightAt=null:this._activeKeyLeftAt=null,this._activeKeyRightAt||this._activeKeyLeftAt||(this._timeAtLastFrame=null)}}),e.exports=n},{"../configuration":159,"../localizer":182,"../urls":222,"../utils":225,"./control":162,"@maps/dom-events":62,"@maps/gesture-recognizers":72,"@maps/js-utils":84,"@maps/render-tree":102,"@maps/scheduler":106}],168:[function(t,e,i){function n(t){this._map=t,this.scene=new u.Scene,this.scene.size=m,this.node=this.scene.addChild(new c),this.node.size=m,this.node.position=new h(0,0),this.node.opacity=0,this.node.l10n=r,o.call(this,this.scene.element),this.element.classList.add(g.Control),this.size=m}var o=t("./control"),s=t("../../../lib/geo"),a=t("@maps/js-utils"),r=t("../localizer").l10n,l=t("@maps/device-pixel-ratio"),h=t("@maps/geometry/point"),c=t("../../../lib/scale-node"),u=t("../../../lib/scene-graph"),d=t("@maps/geometry/size"),p=t("../constants").FeatureVisibility,m=new d(170,20),g={Control:"mk-scale"};n.prototype=a.inheritPrototype(o,n,{get shouldDisplayScale(){return this._map._showsScale===p.Visible||this._map._showsScale===p.Adaptive&&this._map.cameraIsZooming},updateThemeForMap:function(e){var i=t("../map");this.node.theme=c.Themes[e._mapType===i.MapTypes.Standard?"Light":"Dark"]},update:function(){var t=this._map;if(this.node&&this.shouldDisplayScale){var e=t.renderingMapRect.origin.toCoordinate().latitude,i=t.renderingMapRect.size.width/s.mapUnitsPerMeterAtLatitude(e);i/t._visibleFrame.size.width*l()>=7500?this.hideIfNeeded(!0):(this.node.distance=i,this.node.setOpacityAnimated(1,!1))}},hideIfNeeded:function(t){!this.node||this.shouldDisplayScale&&!t||this.node.setOpacityAnimated(0,!0)}}),e.exports=n},{"../../../lib/geo":2,"../../../lib/scale-node":37,"../../../lib/scene-graph":47,"../constants":161,"../localizer":182,"../map":185,"./control":162,"@maps/device-pixel-ratio":61,"@maps/geometry/point":69,"@maps/geometry/size":71,"@maps/js-utils":84}],169:[function(t,e,i){function n(t,e){h.call(this,a.htmlElement("div",{class:g.CONTROL,role:"button",tabindex:"0"})),c.EventTarget(this),this._arrowIconNode=new d.Node(o()),this._waitingIconNode=new d.Node(s()),this.element.appendChild(this._arrowIconNode.element),this.element.appendChild(this._waitingIconNode.element),this._updateLabels(),this.updateIcons(a.devicePixelRatio),this._map=t,this._showsErrorMessage=!1,this._rtl=e}function o(){var t=a.svgElement("path"),e=a.createSVGIcon(t);return t.parentNode.appendChild(a.svgElement("path")),e.setAttribute("class",e.getAttribute("class")+" "+g.ARROW_ICON),e}function s(){var t=a.svgElement("path");t.setAttribute("d","M14.5732357,10 C13.5436447,12.9129809 10.7655471,15 7.5,15 C3.35786438,15 0,11.6421356 0,7.5 C0,3.35786438 3.35786438,0 7.5,0 C10.7655471,0 13.5436447,2.08701907 14.5732357,5 L13.5018367,5 C12.522277,2.65104815 10.20395,1 7.5,1 C3.91014913,1 1,3.91014913 1,7.5 C1,11.0898509 3.91014913,14 7.5,14 C10.20395,14 12.522277,12.3489518 13.5018367,10 L14.5732357,10 L14.5732357,10 Z");var e=a.createSVGIcon(t,{viewBox:"0 0 15 15"});return e.setAttribute("class",e.getAttribute("class")+" "+g.WAITING_ICON),e}var a=t("../utils"),r=t("@maps/scheduler"),l=t("@maps/js-utils"),h=t("./control"),c=t("@maps/dom-events"),u=t("../localizer").l10n,d=t("@maps/render-tree");e.exports=n;var p=.3,m={"1x":["M0,6 L8,6 L8,14 L14,0 Z","M3.65,5.25 L8.75,5.25 L8.75,10.35 L12.6,1.4 Z"],"2x":["M0,12 L16,12 L16,28 L28,0 Z","M7.3,10.5 L17.5,10.5 L17.5,20.7 L25.2,2.8 Z"],"3x":["M0,18 L24,18 L24,42 L42,0 Z","M10.95,15.75 L26.25,15.75 L26.25,31.05 L37.8,4.2 Z"]},g={CONTROL:"mk-user-location-control",BUTTON_USER_LOCATION:"mk-user-location-button",PRESSED:"mk-pressed",TRACKING:"mk-tracking",WAITING:"mk-waiting",DISABLED:"mk-disabled",WAITING_ICON:"mk-icon-waiting",ARROW_ICON:"mk-icon-arrow",ERROR:"mk-error-message",ERROR_TEXT:"mk-error-text",ERROR_SUPPORT:"mk-error-support",ERROR_ANIMATE_IN:"mk-error-message-pop"};n.States={Default:"default",Waiting:"waiting",Tracking:"tracking",Disabled:"disabled"},n.EVENTS={PRESSED:"pressed"},n.prototype=l.inheritPrototype(h,n,{_state:n.States.Default,_tintColor:"",_arrowIconDurationMs:200,_waitingIconDurationMs:200,_waitingIconCycleTimeMs:1500,get state(){return this._state},set state(t){this._state!==t&&(this._state=t,a.classList.toggle(this.element,g.TRACKING,this.isTrackingState()),a.classList.toggle(this.element,g.WAITING,this.isWaitingState()),a.classList.toggle(this.element,g.DISABLED,this.isDisabledState()),this.updateTintColor(this._tintColor),!this.isWaitingState()&&this._waitingIconInStart&&(this._waitingIconOutStart=Date.now(),r.scheduleOnNextFrame(this)),this.isWaitingState()&&(this._arrowIconOutStart=Date.now(),r.scheduleOnNextFrame(this)),this.isDisabledState()?this._arrowIconNode.opacity=p:this._arrowIconNode.opacity=1)},isDefaultState:function(){return this.state===n.States.Default},toDefaultState:function(){this.state=n.States.Default,this._removeErrorMessage()},isTrackingState:function(){return this.state===n.States.Tracking},toTrackingState:function(){this.state=n.States.Tracking,this._removeErrorMessage()},isWaitingState:function(){return this.state===n.States.Waiting},toWaitingState:function(){this.state=n.States.Waiting},isDisabledState:function(){return this.state===n.States.Disabled},toDisabledState:function(){if(!this._map.tracksUserLocation||!this._map.userLocationAnnotation)if(this.state=n.States.Disabled,this._showsErrorMessage)this._removeErrorMessage();else{if(0===this.element.getBoundingClientRect().width)return;this._errorMessageNode||(this._errorMessageElement=this._createErrorMessageElement(),this._errorMessageNode=new d.Node(this._errorMessageElement)),this._addUpdatedErrorMessage()}},handleEvent:function(t){switch(t.type){case a.touchstartOrMousedown:t.target===this._errorMessageElement||this._errorMessageElement.contains(t.target)||(this._removeErrorMessage(),window.removeEventListener(a.touchstartOrMousedown,this,!0));break;case"animationend":case"webkitAnimationEnd":"mk-fadeout"===t.animationName&&this._errorMessageNode.remove(),this._errorMessageElement.removeEventListener("animationend",this),this._errorMessageElement.removeEventListener("webkitAnimationEnd",this);break;case"keydown":27===t.keyCode&&this._removeErrorMessage(),window.removeEventListener("keydown",this,!0)}},touchesBegan:function(t){this._pressed(t)},touchesEnded:function(t){this.reset(),this.dispatchEvent(new c.Event(n.EVENTS.PRESSED))},touchesCanceled:function(t){this.reset()},spaceBarKeyDown:function(t){this._pressed(t)},spaceBarKeyUp:function(t){this.reset(t),this.dispatchEvent(new c.Event(n.EVENTS.PRESSED))},updateTintColor:function(t){this._tintColor=t,this._arrowIconNode.element.querySelector("g").style.fill=this.isTrackingState()?"":t,this._waitingIconNode.element.querySelector("g").style.fill=t,this.element.style.backgroundColor=this.isTrackingState()?t:""},updateIcons:function(t){var e=14*(t=t||1);this._arrowIconNode.element.setAttribute("viewBox",[0,0,e,e].join(" "));for(var i=this._arrowIconNode.element.querySelectorAll("path"),n=0,o=i.length;n<o;++n)i[n].setAttribute("d",m[t+"x"][n])},reset:function(){a.classList.contains(this.element,g.PRESSED)&&(a.classList.remove(this.element,g.PRESSED),this.isDefaultState()?this.toWaitingState():this.isDisabledState()?this.toWaitingState():this.toDefaultState()),delete this._mousedown,window.removeEventListener(a.touchendOrMouseup,this),a.supportsTouches&&window.removeEventListener("touchcancel",this)},localeChanged:function(t){this._updateLabels(),this._rtl=t.locale.rtl,this._showsErrorMessage&&(this._removeErrorMessage(),this._addUpdatedErrorMessage())},remove:function(){this._removeErrorMessage(),h.prototype.remove.call(this)},performScheduledUpdate:function(){this._arrowIconOutStart&&this._animateArrowIconOut(),this._waitingIconInStart&&this._animateWaitingIconIn(),this._waitingIconOutStart&&this._animateWaitingIconOut(),this._waitingIconSpinStart&&this._animateWaitingIconSpin()},mapWasDestroyed:function(){delete this._map},blurred:function(t){this._removeErrorMessage()},_updateLabels:function(){a.updateLabel(this.element,u.get("Track.User.Location.Tooltip"))},_pressed:function(t){var e=a.parentNodeForSvgTarget(t.target);a.classList.add(e,g.PRESSED)},_animateArrowIconOut:function(){var t=Math.min((Date.now()-this._arrowIconOutStart)/this._arrowIconDurationMs,1),e=Math.max(0,1-t);this._arrowIconNode.opacity=e,this._arrowIconNode.transform="scale("+e+")",this.isWaitingState()&&!this._waitingIconInStart&&t>.15&&(this._waitingIconInStart=Date.now(),r.scheduleOnNextFrame(this)),this.isWaitingState()||(delete this._arrowIconOutStart,this._arrowIconNode.opacity=this.isDisabledState()?p:1,this._arrowIconNode.transform="scale(1)"),t<1?r.scheduleOnNextFrame(this):delete this._arrowIconOutStart},_animateWaitingIconIn:function(){var t=Math.min((Date.now()-this._waitingIconInStart)/this._waitingIconDurationMs,1),e=Math.min(1,t);this._waitingIconNode.opacity=e,this._waitingIconNode.transform="scale("+e+")",t<1?r.scheduleOnNextFrame(this):(delete this._waitingIconInStart,this.isWaitingState()&&(this._waitingIconSpinStart=Date.now(),r.scheduleOnNextFrame(this)))},_animateWaitingIconOut:function(){var t=Math.min((Date.now()-this._waitingIconOutStart)/this._waitingIconDurationMs,1),e=Math.max(0,1-t);this._waitingIconNode.opacity=e,this._waitingIconNode.transform="scale("+e+")",t<1?r.scheduleOnNextFrame(this):(delete this._waitingIconOutStart,this._arrowIconNode.opacity=this.isDisabledState()?p:1,this._arrowIconNode.transform="scale(1)")},_animateWaitingIconSpin:function(){var t=(Date.now()-this._waitingIconSpinStart)%this._waitingIconCycleTimeMs/this._waitingIconCycleTimeMs,e=2*Math.PI*t;this._waitingIconNode.transform="rotate("+e+"rad)",this.isWaitingState()?r.scheduleOnNextFrame(this):(delete this._waitingIconSpinStart,this._waitingIconOutStart=Date.now(),r.scheduleOnNextFrame(this))},_createErrorMessageElement:function(){var t=a.htmlElement("div",{class:g.ERROR});return this._supportLink=a.htmlElement("a",{class:g.ERROR_SUPPORT,target:"__blank"}),t.appendChild(a.htmlElement("span",{class:g.ERROR_TEXT})),t.appendChild(this._supportLink),t},_updateErrorMessage:function(){this._errorMessageElement.getElementsByClassName(g.ERROR_TEXT)[0].textContent=u.get("Location.Error.Message")+" ",this._supportLink.textContent=u.get("Location.Error.Support.Label"),this._supportLink.href=u.get("Location.Error.Support.URL")},_positionErrorMessage:function(){var t,e,i=this.element.getBoundingClientRect(),n=this._map.element.getBoundingClientRect();t="left"===this._messagePlacementSide()?i.left+i.width+9-n.left-this._map.padding.left:n.right-i.right+9+i.width-this._map.padding.right,e=n.bottom-i.bottom-this._map.padding.bottom,this._errorMessageElement.removeAttribute("style"),this._errorMessageElement.style[this._messagePlacementSide()]=t+"px",this._errorMessageElement.style.bottom=e+"px"},_addUpdatedErrorMessage:function(){this._showsErrorMessage=!0,this._updateErrorMessage(),this._positionErrorMessage(),this._animateErrorMessageIn(),this.parent.parent.addChild(this._errorMessageNode),window.addEventListener(a.touchstartOrMousedown,this,!0),window.addEventListener("keydown",this,!0)},_removeErrorMessage:function(){this._errorMessageNode&&(a.classList.remove(this._errorMessageElement,g.ERROR_ANIMATE_IN),this._showsErrorMessage=!1,this._errorMessageElement.style.webkitAnimation=this._errorMessageElement.style.animation="mk-fadeout 300ms ease-out",this._errorMessageElement.style.webkitAnimationName||this._errorMessageElement.style.animationName?(this._errorMessageElement.addEventListener("animationend",this),this._errorMessageElement.addEventListener("webkitAnimationEnd",this)):this._errorMessageNode.remove(),window.removeEventListener(a.touchstartOrMousedown,this,!0))},_animateErrorMessageIn:function(){a.classList.remove(this._errorMessageElement,g.ERROR_ANIMATE_OUT),a.classList.add(this._errorMessageElement,g.ERROR_ANIMATE_IN)},_messagePlacementSide:function(){return this._rtl?"left":"right"}})},{"../localizer":182,"../utils":225,"./control":162,"@maps/dom-events":62,"@maps/js-utils":84,"@maps/render-tree":102,"@maps/scheduler":106}],170:[function(t,e,i){function n(){c.EventTarget(this);var t=r.htmlElement("div",{class:d.CONTROL});this._zoomOutButton=t.appendChild(r.htmlElement("div",{class:d.BUTTON_ZOOM_OUT,role:"button",tabindex:"0"})),this._zoomOutButton.appendChild(a()),t.appendChild(r.htmlElement("div",{class:d.BUTTON_DIVIDER})),this._zoomInButton=t.appendChild(r.htmlElement("div",{class:d.BUTTON_ZOOM_IN,role:"button",tabindex:"0"})),this._zoomInButton.appendChild(s()),this._updateLabels(),h.call(this,t)}function o(t,e){e?(r.classList.remove(t,d.DISABLED),t.removeAttribute("aria-disabled"),t.setAttribute("tabindex",0)):(r.classList.add(t,d.DISABLED),t.setAttribute("aria-disabled","true"),t.setAttribute("tabindex",-1))}function s(){var t=r.svgElement("path");return t.setAttribute("d","M7,6 L7,1 L6,1 L6,6 L1,6 L1,7 L6,7 L6,12 L7,12 L7,7 L12,7 L12,6 L7,6 Z"),r.createSVGIcon(t,{viewBox:"0 0 13 13"})}function a(){var t=r.svgElement("rect",{x:1,y:6,width:12,height:1});return r.createSVGIcon(t,{viewBox:"0 0 13 13"})}var r=t("../utils"),l=t("@maps/js-utils"),h=t("./control"),c=t("@maps/dom-events"),u=t("../localizer").l10n;e.exports=n;var d={CONTROL:"mk-zoom-controls",BUTTON_DIVIDER:"mk-divider",BUTTON_ZOOM_IN:"mk-zoom-in",BUTTON_ZOOM_OUT:"mk-zoom-out",PRESSED:"mk-pressed",DISABLED:"mk-disabled"};n.EVENTS={ZOOM_START:"zoom-start",ZOOM_END:"zoom-end"},n.prototype=l.inheritPrototype(h,n,{_zoomInEnabled:!0,_zoomOutEnabled:!0,get zoomInEnabled(){return this._zoomInEnabled},set zoomInEnabled(t){this._enabled&&t===this._zoomInEnabled||(this._zoomInEnabled=this._enabled&&t,o(this._zoomInButton,this._zoomInEnabled))},get zoomOutEnabled(){return this._zoomOutEnabled},set zoomOutEnabled(t){this._enabled&&t===this._zoomOutEnabled||(this._zoomOutEnabled=this._enabled&&t,o(this._zoomOutButton,this._zoomOutEnabled))},localeChanged:function(t){this._updateLabels()},touchesBegan:function(t){this._pressed(t)},touchesEnded:function(t){this.reset(t)},touchesCanceled:function(t){this.reset(t)},focused:function(t){this.updateTintColor(this.tintColor),t.target.style.fill=r.focusColor},blurred:function(t){this.updateTintColor(this.tintColor)},spaceBarKeyDown:function(t){this._pressed(t)},spaceBarKeyUp:function(t){this.reset(t)},updateTintColor:function(t){this.tintColor=t,this._zoomInButton.querySelector(".mk-icon").style.fill=t,this._zoomOutButton.querySelector(".mk-icon").style.fill=t},reset:function(t){var e=this.element.querySelector("."+d.PRESSED);if(e){var i=Date.now()-this._zoomStartTimestamp;r.classList.remove(e,d.PRESSED);var o=new c.Event(n.EVENTS.ZOOM_END);o.dt=i,this.dispatchEvent(o)}t&&t.keyCode!==l.KeyCodes.SpaceBar&&this.blurFocusedElement(),delete this._zoomStartTimestamp,window.removeEventListener(r.touchendOrMouseup,this),r.supportsTouches&&window.removeEventListener("touchcancel",this)},_clearLabels:function(t){r.updateLabel(this._zoomInButton,""),r.updateLabel(this._zoomOutButton,"")},_updateLabels:function(t){r.updateLabel(this._zoomInButton,u.get("Zoom.In.Tooltip")),r.updateLabel(this._zoomOutButton,u.get("Zoom.Out.Tooltip"))},_pressed:function(t){var e=r.parentNodeForSvgTarget(t.target);r.classList.add(e,d.PRESSED),this._zoomStartTimestamp=Date.now();var i=new c.Event(n.EVENTS.ZOOM_START);i.zoomIn=r.classList.contains(e,d.BUTTON_ZOOM_IN),this.dispatchEvent(i)}})},{"../localizer":182,"../utils":225,"./control":162,"@maps/dom-events":62,"@maps/js-utils":84}],171:[function(t,e,i){"use strict";function n(t,e,i){new r(e,{getDataToSend:function(){return t},loaderDidSucceed:function(t,e){if(e.status<200||e.status>=300)i(new Error("HTTP error:"+e.status));else try{i(null,JSON.parse(e.responseText))}catch(t){return void i(new Error("Failed to parse response: "+e.responseText))}},loaderDidFail:function(t,e){i(new Error("Network error"))}},{method:"POST"}).schedule()}function o(t){var e=t.toMapPoint(),i=c*a.tileSize;return{x:Math.floor(e.x*i),y:Math.floor(e.y*i),z:h}}function s(t){function e(t){return t/c/a.tileSize}return new l(e(t.x),e(t.y)).toCoordinate()}var a=t("../../lib/geo"),r=t("@maps/loaders").XHRLoader,l=a.MapPoint,h=21,c=Math.pow(2,h);i.shift=function(t,e,i){n(JSON.stringify({pixelPoint:o(t)}),e,function(t,e){t?i(new Error):e&&e.shiftedPixelPoint?i(null,s(e.shiftedPixelPoint)):i(new Error)})}},{"../../lib/geo":2,"@maps/loaders":85}],172:[function(t,e,i){e.exports='.mk-map-view{width:100%;height:100%;overflow:hidden;-webkit-tap-highlight-color:transparent}.mk-map-view.mk-dragging-annotation{cursor:none}.mk-map-view.mk-dragging-annotation .mk-legal,.mk-map-view.mk-dragging-annotation .mk-map-type,.mk-map-view.mk-dragging-annotation .mk-user-location-control,.mk-map-view.mk-dragging-annotation .mk-zoom-in,.mk-map-view.mk-dragging-annotation .mk-zoom-out{cursor:none}.mk-annotation-container,.mk-map-view{z-index:0}.mk-map-view>*{position:absolute;-webkit-user-select:none;-moz-user-select:none}.mk-map-node-element{background-color:rgba(0,0,0,0)}.mk-map-view .rt-root{left:0;letter-spacing:.3px}.mk-map-view .mk-annotation-container,.mk-map-view .mk-controls-container{-ms-user-select:text}.mk-map-view .mk-annotation-container.mk-dragging ::selection,.mk-map-view .mk-annotation-container>div:first-child ::selection,.mk-map-view .mk-controls-container ::selection,.mk-map-view.mk-panning ::selection{background:0 0}.mk-map-view.mk-dragging-cursor{cursor:pointer;cursor:-moz-grabbing;cursor:-webkit-grabbing;cursor:grabbing}.mk-map-view>iframe{width:100%;height:100%;pointer-events:none;opacity:0;border:0}.mk-map-view>.mk-grid{width:100%;height:100%}.mk-map-view .mk-tile-grid{position:absolute;pointer-events:none;background-repeat:no-repeat}.mk-invisible{opacity:0;pointer-events:none}.mk-hidden{display:none}.mk-annotation-container>div,.mk-annotation-container>div>*{position:absolute;top:0;left:0}.mk-annotation-container .mk-selected{z-index:1}.mk-annotation-container .mk-lifted{z-index:2}.mk-callout{position:absolute;top:0;left:0;pointer-events:auto;-webkit-user-select:auto;-moz-user-select:text;-ms-user-select:text}.mk-callout>*{position:absolute;top:0;left:0}svg.mk-bubble{display:block;width:100%;height:100%}div.mk-callout-accessory{position:absolute;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);overflow:hidden}div.mk-callout-accessory-content{white-space:nowrap;position:relative;text-align:center;font-size:12px}div.mk-callout-accessory:first-child{left:0}div.mk-callout-accessory:last-child{right:0}div.mk-callout-accessory:first-child .mk-callout-accessory-content{padding-right:8px}div.mk-callout-accessory:last-child .mk-callout-accessory-content{padding-left:8px}div.mk-callout-accessory:first-child+.mk-callout-content{padding-left:8px}div.mk-standard .mk-callout-content:nth-last-child(2){padding-right:8px}div.mk-standard{font-family:"-apple-system",BlinkMacSystemFont,"Helvetica Neue",Helvetica,Arial,sans-serif;box-sizing:border-box;position:relative}div.mk-custom-content,div.mk-standard{-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}div.mk-standard .mk-callout-content>div{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}div.mk-standard .mk-callout-content{padding:0 4px}div.mk-standard .mk-title{font-size:17px;font-weight:500;color:#000;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;letter-spacing:.025em}div.mk-standard.mk-no-subtitle.mk-no-accessories .mk-title{text-align:center}div.mk-standard .mk-subtitle{font-size:13px;color:rgba(0,0,0,.7);letter-spacing:.025em}svg.mk-bubble path{fill:#fff;stroke:rgba(0,0,0,.2)}.mk-top-left-controls-container,.mk-top-right-controls-container{position:absolute;top:12px;left:12px}.mk-top-right-controls-container{left:auto;right:12px}.mk-bottom-right-controls-container .mk-control:last-child.mk-user-location-control{right:0}.mk-control.mk-pressed{background:#ededed}.mk-scale{vertical-align:top}.mk-user-location-control{position:absolute;right:60px;bottom:0;cursor:pointer;position:relative;width:23px;height:23px;background-color:#fff;box-shadow:0 0 0 1px #bfbfbf;border-radius:4px;pointer-events:auto;margin:0;-webkit-transition:background-color .2s ease;-ms-transition:background-color .2s ease;transition:background-color .2s ease}.mk-user-location-control .mk-icon{pointer-events:none;position:absolute;top:0;left:0;width:14px;height:14px;margin:5px 5px 4px 4px}.mk-user-location-control .mk-icon-waiting{opacity:0;top:-1px;left:1px}.mk-user-location-control .mk-icon path:nth-child(2){fill:#fff}.mk-user-location-control.mk-tracking{box-shadow:0 0 0 1px rgba(255,255,255,.7);background-color:#007aff}.mk-user-location-control.mk-tracking .mk-icon{fill:#fff}.mk-user-location-control.mk-focus{box-shadow:0 0 0 3px rgba(0,122,255,.2),0 0 0 1px #007aff}.mk-user-location-control.mk-pressed.mk-focus{background-color:#e0ecfa}.mk-user-location-control.mk-tracking.mk-focus{background-color:#007aff;box-shadow:0 0 0 3px rgba(0,122,255,.2)}.mk-user-location-control.mk-focus:not(.mk-tracking) .mk-icon{fill:#007aff;fill-rule:nonzero}.mk-error-message{font-family:"-apple-system-font","Helvetica Neue",Helvetica,Arial,sans-serif;position:absolute;background-color:rgba(250,250,250,.95);color:#333;font-size:13px;bottom:0;box-shadow:0 0 0 1px #bfbfbf;opacity:0;border-radius:5px;padding:7px;max-width:250px;pointer-events:auto;-webkit-transform-origin:100% 50% 0;transform-origin:100% 50% 0}.mk-error-support{white-space:nowrap}.mk-error-message-pop{-webkit-animation-name:mk-pop;animation-name:mk-pop;-webkit-animation-duration:.7s;animation-duration:.7s;-webkit-animation-timing-function:ease-in;animation-timing-function:ease-in;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes mk-pop{0%{-webkit-transform:translate3d(0,0,0) scale3d(.01,.05,1);opacity:0}50%{opacity:0}70%{-webkit-transform:scale3d(1.1,1.1,1)}85%{-webkit-transform:scale3d(.95,.95,1)}100%{-webkit-transform:translate3d(0,0,0) scale3d(1,1,1);opacity:1}}@keyframes mk-pop{0%{transform:translate3d(0,0,0) scale3d(.01,.05,1);opacity:0}50%{opacity:0}70%{transform:scale3d(1.1,1.1,1)}85%{transform:scale3d(.95,.95,1)}100%{transform:translate3d(0,0,0) scale3d(1,1,1);opacity:1}}.mk-controls-container{position:absolute;overflow:hidden;top:0;bottom:0;left:0;right:0;z-index:3;pointer-events:none}.mk-controls-container :focus{outline:0}.mk-logo-control{position:absolute;bottom:0;left:0}.mk-logo-control .mk-logo{vertical-align:bottom;width:40px;height:46px}.mk-logo-control .mk-logo.mk-logo-autonavi{width:68px;height:45px}.mk-bottom-right-controls-container{position:absolute;bottom:12px;right:12px}.mk-bottom-right-controls-container .mk-control:last-child.mk-rotation-control{bottom:-2px}.mk-legal-controls{display:inline-block;vertical-align:top;margin-bottom:2px;pointer-events:auto;overflow:hidden}.mk-legal-controls .mk-pressed{background:rgba(0,0,0,.07)}.mk-legal-controls .mk-legal{color:rgba(0,0,0,.7);font:9px "-apple-system-font","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:500;text-decoration:underline;text-shadow:0 0 1px rgba(255,255,255,.85);pointer-events:auto;white-space:nowrap;cursor:pointer;padding:4px 5px 6px 5px}.mk-legal-controls .mk-legal.mk-legal-satellite{color:rgba(255,255,255,.9);text-shadow:0 0 1px rgba(0,0,0,.5),0 0 10px rgba(0,0,0,1)}.mk-legal-controls.mk-focus{background-color:#e2eef9;border-radius:2px;box-shadow:0 0 0 1px #007aff}.mk-legal-controls.mk-focus .mk-legal{color:#157efb;text-shadow:none}.mk-legal-info{z-index:1;box-sizing:border-box;position:absolute;top:-12px;right:-12px;padding:0 0 1px 1px;background:rgba(0,0,0,.2);-webkit-transform:translate3d(0,-100%,0) translateY(2px);-ms-transform:translateY(-100%) translateY(2px);transform:translate3d(0,-100%,0) translateY(2px);-webkit-transition:-webkit-transform .3s;-ms-transition:-ms-transform .3s;transition:transform .3s}.mk-legal-info.mk-open{-webkit-transform:translate3d(0,0,0);-ms-transform:translateY(0);transform:translate3d(0,0,0)}.mk-legal-info .mk-legal-info-container{background:#fff}.mk-legal-info .mk-legal-info-container>header{height:27px;background:rgba(0,0,0,.04)}.mk-legal-info header{position:relative}.mk-legal-info .mk-close{position:relative;cursor:pointer;pointer-events:auto;width:27px;height:27px}.mk-legal-controls .mk-close svg{position:absolute;pointer-events:none;height:11px;width:11px;top:8px;left:8px}.mk-legal-controls.mk-focus .mk-legal-info .mk-close:focus svg{border:1px solid #007aff;border-radius:2px;padding:3px;top:4px;left:4px;fill:#007aff}.mk-legal-controls.mk-focus .mk-legal-info .mk-pressed:focus{background:0 0}.mk-legal-controls.mk-focus .mk-legal-info .mk-close.mk-pressed:focus svg,.mk-legal-controls.mk-focus .mk-legal-info .mk-legal-info-item.mk-pressed:focus{background:rgba(0,122,255,.1)}.mk-legal-info .mk-legal-info-item{display:block;cursor:pointer;text-decoration:none;text-align:left;font:13px/16px "-apple-system-font",HelveticaNeue-Medium,Helvetica,Arial,sans-serif;color:#212121;padding:6px 10px;pointer-events:auto;white-space:nowrap}.mk-legal-controls.mk-focus .mk-legal-info .mk-legal-info-item:focus{color:#007aff!important;box-shadow:0 0 0 3px rgba(0,122,255,.2),0 0 0 1px #007aff}.mk-legal-info .mk-legal-attribution-item{color:#b2b2b2;font:13px/1.2em "-apple-system-font","Helvetica Neue",Helvetica,Arial,sans-serif;font-weight:500;letter-spacing:.5px}.mk-legal-info .mk-legal-attribution-item img{border:none}.mk-legal-info .mk-legal-info-item .mk-attribution-logo{margin-bottom:-7px;pointer-events:none}.mk-legal-info .mk-legal-info-item .mk-right-caret{pointer-events:none;display:inline-block;position:relative;width:7px;height:9px}.mk-legal-info .mk-legal-info-item .mk-right-caret svg{position:absolute;width:7px;height:9px;top:1px;fill:none;stroke-width:1.5;stroke:#8e8e8e}.mk-legal-controls.mk-focus .mk-legal-info .mk-legal-info-item:focus svg{stroke:#007aff}.mk-legal-info .mk-legal-info-container .mk-divider{height:1px;background-color:rgba(0,0,0,.2)}.mk-legal-info[aria-hidden=true]{visibility:hidden}.mk-zoom-controls{position:absolute;right:0;bottom:0;width:51px;height:23px;background:#fff;box-shadow:0 0 0 1px #bfbfbf;border-radius:4px;pointer-events:auto}.mk-zoom-controls .mk-icon{position:absolute;pointer-events:none;width:13px;height:13px;margin:5px 6px;fill:#333}.mk-zoom-controls .mk-disabled,.mk-zoom-controls.mk-disabled .mk-zoom-in,.mk-zoom-controls.mk-disabled .mk-zoom-out{opacity:.25}.mk-zoom-controls .mk-zoom-in,.mk-zoom-controls .mk-zoom-out{position:absolute;z-index:2;width:25px;height:23px;cursor:pointer;transform:translateZ(0)}.mk-zoom-controls .mk-zoom-in{border-top-right-radius:inherit;border-bottom-right-radius:inherit;right:0}.mk-zoom-controls .mk-zoom-out{border-top-left-radius:inherit;border-bottom-left-radius:inherit}.mk-zoom-controls.mk-focus{background:#fafafa;box-shadow:0 0 0 3px rgba(0,122,255,.2)}.mk-zoom-controls.mk-focus .mk-zoom-in:focus,.mk-zoom-controls.mk-focus .mk-zoom-out:focus{box-shadow:0 0 0 1px #007aff}.mk-zoom-controls.mk-focus .mk-zoom-in.mk-pressed:focus,.mk-zoom-controls.mk-focus .mk-zoom-out.mk-pressed:focus{background:rgba(0,122,255,.1)}.mk-zoom-controls.mk-focus .mk-zoom-in:focus .mk-icon,.mk-zoom-controls.mk-focus .mk-zoom-out:focus .mk-icon{fill:#007aff}.mk-zoom-controls .mk-pressed{background:#ededed}.mk-zoom-controls .mk-divider{position:absolute;left:25px;width:1px;height:23px;border-left:1px solid #bfbfbf;box-sizing:border-box}.mk-map-type-control{display:inline-block;vertical-align:top;height:23px;margin-left:7px;overflow:hidden;background:#fff;box-shadow:0 0 0 1px #bfbfbf;border-radius:4px;pointer-events:auto;-webkit-transition:height .3s,margin-top .3s;-ms-transition:height .3s,margin-top .3s;transition:height .3s,margin-top .3s}.mk-map-type-control .mk-map-type{position:relative;cursor:pointer;font:13px/23px "-apple-system-font",HelveticaNeue-Medium,Helvetica,Arial,sans-serif;color:#424242;letter-spacing:.1px;text-align:left;padding:0 24px 0 6px;margin-top:-24px;border-bottom:1px solid #e1e1e1;opacity:0}.mk-map-type-control .mk-map-type.mk-active{margin-top:auto;opacity:1}.mk-map-type-control .mk-map-type.mk-active .mk-icon{pointer-events:none;position:absolute;width:9px;height:6px;right:5px;top:9px;fill:none;stroke-width:1.5;stroke:#7c7c7c}.mk-map-type-control .mk-map-type.mk-pressed{background:#ededed}.mk-map-type-control.mk-open.mk-opening{overflow:hidden}.mk-map-type-control.mk-open{height:71px;overflow:visible}.mk-map-type-control.mk-open .mk-map-type{position:relative;opacity:1;margin-top:auto}.mk-map-type-control:not(.mk-open) .mk-map-type.mk-active{border-bottom:none;border-radius:3px}.mk-map-type-control.mk-open .mk-map-type:first-child{border-radius:3px 3px 0 0}.mk-map-type-control.mk-open .mk-map-type:last-child{border:none;border-radius:0 0 3px 3px}.mk-map-type-control.mk-open .mk-map-type.mk-active{margin-top:auto;opacity:1}.mk-map-type-control.mk-open .mk-map-type.mk-active .mk-icon{width:11px;height:9px;right:5px;top:7px;stroke:none;fill:#333}.mk-map-type-control.mk-focus.mk-show-focus{background-color:#fff;box-shadow:0 0 0 1px #007aff,0 0 0 3px rgba(0,122,255,.2)}.mk-map-type-control.mk-focus.mk-show-focus:not(.mk-open) .mk-map-type.mk-active{color:#007aff!important}.mk-map-type-control.mk-focus.mk-show-focus:not(.mk-open) .mk-map-type.mk-pressed.mk-active{background-color:rgba(0,122,255,.1)}.mk-map-type-control.mk-focus.mk-show-focus:not(.mk-open) .mk-map-type.mk-active .mk-icon{stroke:#007aff!important}.mk-map-type-control.mk-open.mk-focus.mk-show-focus{box-shadow:0 0 0 3px rgba(0,122,255,.2)}.mk-map-type-control.mk-open.mk-focus .mk-map-type.mk-active{color:#424242}.mk-map-type-control.mk-open .mk-map-type.mk-active .mk-icon{stroke:none!important;fill:#333}.mk-map-type-control.mk-open .mk-map-type.mk-active.mk-focus .mk-icon,.mk-map-type-control.mk-open.mk-show-focus .mk-map-type.mk-active:focus .mk-icon{fill:#007aff!important}.mk-map-type-control.mk-open.mk-show-focus .mk-map-type:focus{color:#007aff!important;box-shadow:0 0 0 1px #007aff}.mk-map-type-control.mk-open:focus.mk-show-focus .mk-map-type.mk-pressed:focus{background-color:rgba(0,122,255,.1)}.mk-style-helper{opacity:0;pointer-events:none}.mk-rotation-control{width:53px;height:53px;cursor:-webkit-grab;cursor:grab;pointer-events:auto;position:absolute;bottom:33px;right:-1px;border-radius:50px;box-shadow:0 1px 3px rgba(0,0,0,.1);z-index:-1;overflow:hidden;line-height:0;-webkit-transition:opacity .1s cubic-bezier(.19,1,.22,1);transition:opacity .1s cubic-bezier(.19,1,.22,1)}.mk-rotation-control{-webkit-transition:opacity .3s;-ms-transition:opacity .3s;transition:opacity .3s}.mk-rotation-control>.mk-rotation-wrapper{width:53px;height:53px;position:absolute;will-change:transform}.mk-rotation-control.mk-pressed{cursor:-webkit-grabbing;cursor:grabbing}.mk-rotation-control .mk-compass{width:53px}.mk-rotation-control .mk-north-indicator{font:16px/18px "-apple-system-font",HelveticaNeue-Medium,Helvetica,Arial,sans-serif;color:#000;position:absolute;top:24px;left:26.5%;width:25px;overflow:hidden;text-overflow:clip;text-align:center}.mk-rotation-control .mk-north-indicator.mk-north-indicator-long{font-size:12px}.mk-rotation-control.mk-focus{box-shadow:0 0 0 1px #007aff,0 0 0 3px rgba(0,122,255,.2)}.mk-rotation-control.mk-focus .mk-north-indicator{color:#007aff}.mk-rtl *{text-align:right!important;direction:rtl}.mk-rtl .mk-user-location-control{right:auto;left:60px}.mk-rtl .mk-logo-control{right:0}.mk-rtl .mk-top-right-controls-container{left:12px;right:auto}.mk-rtl .mk-top-left-controls-container{left:auto;right:12px}.mk-rtl .mk-map-type-control .mk-map-type{padding:0 6px 0 24px}.mk-rtl .mk-map-type-control .mk-map-type.mk-active .mk-icon{left:5px;right:auto}.mk-rtl .mk-zoom-controls{right:auto;left:0}.mk-rtl .mk-zoom-controls .mk-zoom-out{right:0;left:auto}.mk-rtl .mk-zoom-controls .mk-zoom-in{right:auto;left:0}.mk-rtl .mk-bottom-right-controls-container{left:12px;right:auto}.mk-rtl .mk-bottom-right-controls-container .mk-zoom-controls{margin-left:0;margin-right:9px}.mk-rtl .mk-bottom-right-controls-container .mk-control:last-child.mk-user-location-control{right:auto;left:0}.mk-rtl .mk-map-type-control{margin-right:7px;margin-left:0}.mk-rtl .mk-legal-info{left:-12px;right:auto;padding:0 1px 1px 0}.mk-rtl .mk-right-caret{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-o-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.mk-rtl>.mk-error-message{-webkit-transform-origin:0 50% 0;transform-origin:0 50% 0}.mk-rtl .mk-rotation-control{right:auto;left:-1px}.mk-rtl .mk-rotation-control .mk-north-indicator{text-align:center!important}div.mk-standard.mk-no-subtitle.mk-no-accessories .mk-rtl .mk-title{text-align:center!important}@-webkit-keyframes mk-fadeout{from{opacity:1}to{opacity:0}}@keyframes mk-fadeout{from{opacity:1}to{opacity:0}}'},{}],173:[function(t,e,i){var n=t("./configuration"),o=t("../build.json"),s=t("./utils"),a=t("@maps/js-utils"),r={init:function(t){this.options=t||{}},infoForMap:function(e){var i=t("./map");a.required(e,"[MapKit] Missing `map` parameter in call to `mapkit.debugInfoForMap()`.").checkInstance(e,i,"[MapKit] The parameter passed to `mapkit.debugInfoForMap()` is not a Map.");var r=e._impl._mapNode._impl._tileGridsGroup.lastChild;return JSON.stringify({userAgent:navigator.userAgent,build:o,mapSize:e._impl.ensureRenderingFrame().size.toString(),devicePixelRatio:s.devicePixelRatio,zoomLevel:e._impl.zoomLevel,visibleMapRect:e.visibleMapRect.toString(),tileRange:{min:e._impl.tileRange&&e._impl.tileRange.min.toString(),max:e._impl.tileRange&&e._impl.tileRange.max.toString()},pendingTiles:r?r._pendingTileCount:0,screenSize:{width:window.screen.width,height:window.screen.height},rootNode:e._impl.rootNode.element.outerHTML,configuration:n._debugInfo()},null,"    ")}};e.exports=r},{"../build.json":111,"./configuration":159,"./map":185,"./utils":225,"@maps/js-utils":84}],174:[function(t,e,i){"use strict";function n(t,e){var i=new o(t,{loaderDidSucceed:function(i,n){var o;try{o=JSON.parse(n.responseText)}catch(i){return void e(new Error("[MapKit] The response of "+t+" does not appear to be valid JSON:"+n.responseText))}e(null,o)},loaderDidFail:function(i,n){e(new Error("[MapKit] Failed to load "+t))}});return i.schedule(),i.id}var o=t("@maps/loaders").XHRLoader,s=t("../../lib/geojson-adapter");e.exports=function(t,e){function i(t){var i=s.importGeoJSON(t,o);return a&&e(null,i),i}var o={},a="function"==typeof e,r="object"==typeof e,l="string"==typeof t;if(r&&(o=e),l&&!a&&!r){var h=new Error("[MapKit] For GeoJSON file imports, a callback must be provided as a second argument");throw o.geoJSONDidError&&o.geoJSONDidError(h),h}return l?n(t,function(t,n){return t?(o.geoJSONDidError&&o.geoJSONDidError(t),void(a&&e(t))):i(n)}):i(t)}},{"../../lib/geojson-adapter":5,"@maps/loaders":85}],175:[function(t,e,i){var n=t("@maps/dom-events"),o=t("../../lib/geo"),s=t("../build.json"),a=t("./configuration"),r=t("./debug"),l=t("./utils");window.DOMPoint||(window.DOMPoint=t("@maps/geometry-interfaces"));var h=t("./overlays/polyline-overlay"),c=t("./services/directions-internal");Object.defineProperty(c.Route.prototype,"polyline",{enumerable:!0,get:function(){return this._polyline||(this._polyline=new h(this._path.reduce(function(t,e){return t.concat(e)},[]))),this._polyline}});var u={init:function(t,e){r.init(e),a.init(t);var i=this.dispatchEvent.bind(this);a.addEventListener(a.Events.Changed,i),a.addEventListener(a.Events.Error,i)},get version(){return s.version},get build(){return s.build},get language(){return a.language},set language(t){a.language=t},toString:function(){return["MapKit JS",this.version,"("+this.build+")"].join(" ")},importGeoJSON:t("./import-geojson-method"),get _tileProvider(){return a.tileProvider},get _countryCode(){return a.countryCode},set _countryCode(t){a.countryCode=t},_restore:function(){a._restore()},get _environment(){return a.environment},debugInfoForMap:r.infoForMap,FeatureVisibility:t("./constants").FeatureVisibility,CoordinateRegion:o.CoordinateRegion,CoordinateSpan:o.CoordinateSpan,Coordinate:o.Coordinate,BoundingRegion:o.BoundingRegion,MapPoint:o.MapPoint,MapRect:o.MapRect,MapSize:o.MapSize,Padding:t("./padding"),Style:t("./overlays/style"),CircleOverlay:t("./overlays/circle-overlay"),PolylineOverlay:h,PolygonOverlay:t("./overlays/polygon-overlay"),Geocoder:t("./services/geocoder"),Search:t("./services/search"),Directions:t("./services/directions"),Map:t("./map"),Annotation:t("./annotations/annotation"),PinAnnotation:t("./annotations/pin-annotation"),ImageAnnotation:t("./annotations/image-annotation"),MarkerAnnotation:t("./annotations/marker-annotation"),TileOverlay:t("../../lib/map-node").TileOverlay};n.EventTarget(u),e.exports=u,document.head.appendChild(l.htmlElement("style",t("./css")))},{"../../lib/geo":2,"../../lib/map-node":7,"../build.json":111,"./annotations/annotation":127,"./annotations/image-annotation":136,"./annotations/marker-annotation":146,"./annotations/pin-annotation":151,"./configuration":159,"./constants":161,"./css":172,"./debug":173,"./import-geojson-method":174,"./map":185,"./overlays/circle-overlay":190,"./overlays/polygon-overlay":199,"./overlays/polyline-overlay":202,"./overlays/style":204,"./padding":209,"./services/directions":211,"./services/directions-internal":210,"./services/geocoder":213,"./services/search":216,"./utils":225,"@maps/dom-events":62,"@maps/geometry-interfaces":67}],176:[function(t,e,i){function n(t,e){r.call(this,t),this._map=e}function o(t){a.call(this),this._renderer=new n(this,t)}var s=t("@maps/js-utils"),a=t("../../lib/scene-graph/src/model/scene"),r=t("../../lib/scene-graph/src/render/c2d/render-scene");n.prototype=s.inheritPrototype(r,n,{update:function(){var t=performance&&performance.now()||Date.now();r.prototype.update.call(this);var e=performance&&performance.now()||Date.now();this._map._performanceLog.push({name:"render-frame",timestamp:t,duration:e-t})}}),o.prototype=s.inheritPrototype(a,o,{}),e.exports={Scene:o,now:window.performance&&window.performance.now?function(){return window.performance.now()}:Date.now}},{"../../lib/scene-graph/src/model/scene":52,"../../lib/scene-graph/src/render/c2d/render-scene":56,"@maps/js-utils":84}],177:[function(t,e,i){function n(t,e){this._delegate=e,this._snapsToIntegralZoomLevels=t}var o=t("../utils"),s=t("@maps/js-utils"),a=t("@maps/scheduler");n.prototype={constructor:n,_speed:.03,_startTime:0,_shouldStop:!1,_animating:!1,start:function(t,e){var i=Date.now();return this._gasPedalValue=0,this._startTime=i,this._shouldStop&&this._cleanUp(),this._shouldStop=!1,this.zoomsIn=!!e,o.supportsForceTouch&&window.addEventListener("webkitmouseforcechanged",this),!this._animating&&(this._animating=!0,this._zoomLevel=t,this._timeAtLastFrame=i,a.scheduleOnNextFrame(this),!0)},stop:function(){this._shouldStop=!0,o.supportsForceTouch&&(window.removeEventListener("webkitmouseforcechanged",this),delete this._speed)},set snapsToIntegralZoomLevels(t){this._snapsToIntegralZoomLevels=!!t},performScheduledUpdate:function(){var t=!0,e=Date.now(),i=e-this._timeAtLastFrame,n=this._speed*(this.zoomsIn?1:-1);this._zoomLevel+=60*i*s.log2(1+n)/1e3,this._timeAtLastFrame=e,this._shouldStop&&e-this._startTime>=250&&(this._zoomLevelAtWhichToStop?(t=this.zoomsIn&&this._zoomLevel<this._zoomLevelAtWhichToStop||!this.zoomsIn&&this._zoomLevel>this._zoomLevelAtWhichToStop)||(this._zoomLevel=this._zoomLevelAtWhichToStop):this._snapsToIntegralZoomLevels?this._zoomLevelAtWhichToStop=this.zoomsIn?Math.ceil(this._zoomLevel):Math.floor(this._zoomLevel):t=!1),this._delegate&&this._delegate.linearZoomControllerDidZoom(this._zoomLevel),t?a.scheduleOnNextFrame(this):this._cleanUp()},handleEvent:function(t){this._handleForceChangedEvent(t)},_handleForceChangedEvent:function(t){var e=s.clamp(t.webkitForce,MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN,MouseEvent.WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN)-MouseEvent.WEBKIT_FORCE_AT_MOUSE_DOWN;Math.abs(e-this._gasPedalValue)>.01&&(this._gasPedalValue=e),this._speed=.01+this._gasPedalValue*(.06-.01)},_cleanUp:function(){this._animating=!1,this._shouldStop=!1,delete this._zoomLevelAtWhichToStop,this._delegate&&this._delegate.linearZoomControllerDidStop()}},e.exports=n},{"../utils":225,"@maps/js-utils":84,"@maps/scheduler":106}],178:[function(t,e,i){function n(){a.LongPress.call(this),this.minimumPressDuration=125}var o=t("@maps/js-utils"),s=t("@maps/geometry/point"),a=t("@maps/gesture-recognizers");n.prototype=o.inheritPrototype(a.LongPress,n,{touchesBegan:function(t){(o.isIEAndNotEdge()||o.isEdge())&&document.getSelection().removeAllRanges(),a.LongPress.prototype.touchesBegan.call(this,t),this.translation=new s,this._translationOrigin=this._lastTouchLocation=this.locationInElement()},enterRecognizedState:function(){a.LongPress.prototype.enterBeganState.call(this)},touchesMoved:function(t){t.preventDefault();var e=this.locationInElement();this.state===a.States.Possible?a.LongPress.prototype.touchesMoved.call(this,t):this.state!==a.States.Began&&this.state!==a.States.Changed||(this.translation.x+=e.x-this._lastTouchLocation.x,this.translation.y+=e.y-this._lastTouchLocation.y,this.enterChangedState()),this._lastTouchLocation=e},touchesCanceled:function(t){this.interruptGesture()},touchesEnded:function(t){this.state===a.States.Changed?(t.preventDefault(),this.enterEndedState()):this.enterFailedState()},interruptGesture:function(){this.state===a.States.Changed?this.enterEndedState():this.state===a.States.Began&&this.enterFailedState()},reset:function(){a.LongPress.prototype.reset.call(this),delete this._translationOrigin,delete this._lastTouchLocation}}),e.exports=n},{"@maps/geometry/point":69,"@maps/gesture-recognizers":72,"@maps/js-utils":84}],179:[function(t,e,i){function n(t,e){this._target=t,this._delegate=e,this.initialEventTargetForCurrentInteraction=null,this._doubleTapWithOneFingerRecognizer=this._addGestureRecognizer(o.Tap),this._doubleTapWithOneFingerRecognizer.numberOfTouchesRequired=1,this._doubleTapWithOneFingerRecognizer.numberOfTapsRequired=2,this._singleTapWithOneFingerRecognizer=this._addGestureRecognizer(o.Tap),this._longPressAndPanRecognizer=this._addGestureRecognizer(s),this._longPressAndPanRecognizer.delegate=this,t.addEventListener(a.touchstartOrMousedown,this),window.addEventListener(a.touchendOrMouseup,this),this._target.addEventListener("dragstart",this)}var o=t("@maps/gesture-recognizers"),s=t("./long-press-and-pan-gesture-recognizer"),a=t("../utils"),r="auto"===a.htmlElement("div",{style:"pointer-events: auto"}).style.pointerEvents;n.prototype={constructor:n,handleEvent:function(t){switch(t.type){case"dragstart":this._delegate.elementShouldPreventDragstart(t.target)&&t.preventDefault();break;case"mousedown":if(this.initialEventTargetForCurrentInteraction=t.target,!r&&"none"===window.getComputedStyle(this.initialEventTargetForCurrentInteraction).pointerEvents){var e=this.initialEventTargetForCurrentInteraction.style,i=e.display;e.display="none",this.initialEventTargetForCurrentInteraction=document.elementFromPoint(t.clientX,t.clientY),e.display=i}t.target.ownerDocument.defaultView!==window.top||this._delegate.elementWantsDefaultBrowserBehavior(this.initialEventTargetForCurrentInteraction)||t.preventDefault();break;case"mouseup":this.initialEventTargetForCurrentInteraction=null;break;case"touchstart":t.touches.length===t.changedTouches.length&&(this.initialEventTargetForCurrentInteraction=t.touches[0].target,this._delegate.elementWantsDefaultBrowserBehavior(this.initialEventTargetForCurrentInteraction)||t.preventDefault());break;case"touchend":0===t.touches.length&&(this.initialEventTargetForCurrentInteraction=null);break;case"statechange":this._handleStatechange(t)}},_handleStatechange:function(t){switch(t.target){case this._doubleTapWithOneFingerRecognizer:this._handleDoubleTapWithOneFingerChange(t);break;case this._singleTapWithOneFingerRecognizer:this._handleSingleTapWithOneFingerChange(t);break;case this._longPressAndPanRecognizer:this._handleLongPressAndPanChange(t)}},gestureRecognizerShouldBegin:function(t){return this._delegate.userDidLongPress(t.locationInElement())},mapWasDestroyed:function(){window.removeEventListener(a.touchendOrMouseup,this),this._target.removeEventListener(a.touchstartOrMousedown,this),this._target.removeEventListener("dragstart",this),this._doubleTapWithOneFingerRecognizer.removeEventListener("statechange",this),this._doubleTapWithOneFingerRecognizer.enabled=!1,this._doubleTapWithOneFingerRecognizer=null,this._singleTapWithOneFingerRecognizer.removeEventListener("statechange",this),this._singleTapWithOneFingerRecognizer.enabled=!1,this._singleTapWithOneFingerRecognizer=null,this._longPressAndPanRecognizer.removeEventListener("statechange",this),this._longPressAndPanRecognizer.enabled=!1,this._longPressAndPanRecognizer.delegate=null,this._longPressAndPanRecognizer=null,delete this.initialEventTargetForCurrentInteraction,delete this._target,delete this._delegate},_addGestureRecognizer:function(t){var e=new t;return e.target=this._target,e.addEventListener("statechange",this),e},_handleDoubleTapWithOneFingerChange:function(t){t.target.state===o.States.Recognized&&(this._delayedSingleTapRecognizerTimeoutID&&(this._delegate.userCanceledTap(),window.clearTimeout(this._delayedSingleTapRecognizerTimeoutID),delete this._delayedSingleTapRecognizerTimeoutID),this._singleTapWithOneFingerRecognizer.enabled=!1)},_handleSingleTapWithOneFingerChange:function(t){var e=t.target;this._singleTapWithOneFingerRecognizer.enabled&&e.state===o.States.Recognized&&(this._delegate.userWillTap(e.locationInElement()),this._delayedSingleTapRecognizerTimeoutID=window.setTimeout(function(){delete this._delayedSingleTapRecognizerTimeoutID,this._delegate.userDidTap()}.bind(this),350))},_handleLongPressAndPanChange:function(t){var e=t.target;switch(e.state){case o.States.Began:this._singleTapWithOneFingerRecognizer.enabled=!1,this._doubleTapWithOneFingerRecognizer.enabled=!1,this._doubleTapWithOneFingerRecognizer.enabled=!0;break;case o.States.Changed:this._delegate.userDidPanAfterLongPress(e.translation);break;case o.States.Ended:case o.States.Failed:this._singleTapWithOneFingerRecognizer.enabled=!0,this._delegate.userDidStopPanningAfterLongPress(e.state!==o.States.Failed)}},_stopDraggingAnnotation:function(){this._longPressAndPanRecognizer.interruptGesture()}},e.exports=n},{"../utils":225,"./long-press-and-pan-gesture-recognizer":178,"@maps/gesture-recognizers":72}],180:[function(t,e,i){function n(t){this._map=t,this._items=[]}function o(t,e){var i=t.toCoordinateRegion();if(i.span.latitudeDelta>=e.latitudeDelta&&i.span.longitudeDelta>=e.longitudeDelta)return t;i.span.latitudeDelta=Math.max(i.span.latitudeDelta,e.latitudeDelta),i.span.longitudeDelta=Math.max(i.span.longitudeDelta,e.longitudeDelta);var n=i.span.latitudeDelta/2,o=i.span.longitudeDelta/2,a=new h(s.convertLongitudeToX(i.center.longitude-o),s.convertLatitudeToY(i.center.latitude+n)),l=new h(s.convertLongitudeToX(i.center.longitude+o),s.convertLatitudeToY(i.center.latitude-n));return a.x>l.x&&a.x--,new r(a.x,a.y,Math.min(l.x-a.x,1),l.y-a.y)}var s=t("../../lib/geo"),a=t("@maps/js-utils"),r=s.MapRect,l=s.CoordinateSpan,h=s.MapPoint,c=t("./padding"),u=t("./types-internal"),d=t("@maps/dom-events"),p=new l(.001,.001),m=new c(12,12,12,12),g={Select:"select",Deselect:"deselect"};n.checkShowItemsParameters=function(t,e){return a.checkArray(t,"[MapKit] Map.showItems expects an array of items as its first parameter."),e=a.checkOptions(e,"object","[MapKit] Map.showItems expects an object as optional second parameter."),Object.keys(e).forEach(function(t){switch(t){case"animate":break;case"padding":a.checkInstance(e.padding,c,"[MapKit] Map.showItems expects a Padding object for `options.padding`.");break;case"minimumSpan":a.checkInstance(e.minimumSpan,l,"[MapKit] Map.showItems expects a CoordinateSpan for `options.minimumSpan`.");break;default:console.warn("[MapKit] `"+t+"` is not a valid option of Map.showItems.")}}),e},n.setRegionForItems=function(t,e,i){if(t.ensureRenderingFrame().size.height<=0||t.ensureRenderingFrame().size.width<=0)return!1;if(0===e.length)return!0;for(var n=!!i.animate,s=i.padding||m,a=i.minimumSpan||p,l=0,h=0,d=0,g=0,_=[],f=0,y=e.length;f<y;++f){var v=e[f];if(v.map===t.public){var w=v._impl._boundingRect||v._impl.boundingRectAtScale&&v._impl.boundingRectAtScale(1);if(w){if(v._impl.style){var b=v._impl.style._impl.halfStrokeWidthAtResolution();l=Math.max(l,b),h=Math.max(h,b),d=Math.max(d,b),g=Math.max(g,b)}_.push(w)}else v._impl.updateLayout(!0),l=Math.max(l,v._impl._anchorPoint.y),h=Math.max(h,v.size.width-v._impl._anchorPoint.x),d=Math.max(d,v.size.height-v._impl._anchorPoint.y),g=Math.max(g,v._impl._anchorPoint.x),_.push(new r(v._impl.x,v._impl.y,0,0))}}if(0===_.length)return!0;s=new c(s.top+l,s.right+h,s.bottom+d,s.left+g);var C=o(u.boundingRectForSortedRects(_.sort(function(t,e){return t.minX()-e.minX()})),a);return t.setVisibleMapRectAnimated(t.padMapRect(C,s),n),!0},n.prototype={constructor:n,_map:null,_selectedItem:null,_selectionDistance:10,get node(){return this._node},get items(){return this._items.filter(this.isItemExposed,this)},set items(t){a.checkArray(t,"[MapKit] Map."+this.itemName+"s expected an array of "+this.itemName+"s, but got `"+t+"` instead."),this._items.forEach(function(t){this.isItemExposed(t)&&this.removedItem(t)},this),this._items=t.filter(function(t,e){return a.checkInstance(t,this.itemConstructor,"[MapKit] Map."+this.itemName+"s expected an "+this.itemName+" at index "+e+", but got `"+t+"` instead."),this.isItemExposed(t)&&this.shouldAddItem(t,!0)},this),this._items.forEach(function(t){this.addedItem(t)},this)},get selectedItem(){return this._selectedItem},set selectedItem(t){if(t!==this._selectedItem){if(null!=t&&(a.checkInstance(t,this.itemConstructor,"[MapKit] Map.selected"+this.capitalizedItemName+" expected an "+this.itemName+" or `null`, but got `"+t+"` instead."),t.map!==this._map.public))throw new Error("[MapKit] Map.selected"+this.capitalizedItemName+" cannot be set to an "+this.itemName+" that is not in the map.");if(this._selectedItem){var e=this._selectedItem;this._selectedItem=null,e.selected=!1,e.dispatchEvent(new d.Event(g.Deselect))}t&&(this._selectedItem=t,t.selected=!0,t.dispatchEvent(new d.Event(g.Select)))}},addItem:function(t){return a.checkInstance(t,this.itemConstructor,"[MapKit] Map.add"+this.capitalizedItemName+" expected an "+this.itemName+", but got `"+t+"` instead."),this.addItemToList(t),t},addItems:function(t){return a.checkArray(t,"[MapKit] Map.add"+this.capitalizedItemName+"s expected an array of "+this.itemName+"s, but got `"+t+"` instead."),t.filter(function(t,e){return a.checkInstance(t,this.itemConstructor,"[MapKit] Map.add"+this.capitalizedItemName+"s expected an "+this.itemName+" at index "+e+", but got `"+t+"` instead."),!!this.addItemToList(t,!0)},this)},shouldAddItem:function(t,e){return!t.map||(t.map._impl!==this._map&&console.warn("[MapKit] Map."+this.capitalizedItemName+(e?"s":"")+": "+this.itemName+" is already in another map."),!1)},removeItem:function(t){if(a.checkInstance(t,this.itemConstructor,"[MapKit] Map.remove"+this.capitalizedItemName+" expected an "+this.itemName+", but got `"+t+"` instead."),t.map!==this._map.public)console.warn("[MapKit] Map.remove"+this.capitalizedItemName+": cannot remove "+this.itemName+" as it is not attached to this map.");else{var e=this._items.indexOf(t);console.assert(e>=0),e>=0&&(this._items.splice(e,1),this.removedItem(t))}return t},removeItems:function(t){return a.checkArray(t,"[MapKit] Map.remove"+this.capitalizedItemName+"s expected an array of "+this.itemName+"s, but got `"+t+"` instead."),t.forEach(function(t,e){a.checkInstance(t,this.itemConstructor,"[MapKit] Map.remove"+this.capitalizedItemName+"s expected an "+this.itemName+" at index "+e+", but got `"+t+"` instead."),t.map===this._map.public?t._impl._toBeRemoved=!0:console.warn("[MapKit] Map.remove"+this.capitalizedItemName+"s: cannot remove "+this.itemName+" at index "+e+" as it is not attached to this map.")},this),this._items=this._items.filter(function(t){return!t._impl._toBeRemoved}),t.forEach(function(t){t._impl._toBeRemoved&&(delete t._impl._toBeRemoved,this.removedItem(t))},this),t},itemCloseToPoint:function(t,e){if(this._previousPointForPickingItem&&this._previousPointForPickingItem.equals(t))return e?this._closeItems[this._closeItemIndex]:(this._closeItemIndex=(this._closeItemIndex+1)%this._closeItems.length,this._closeItems[this._closeItemIndex]);this._previousPointForPickingItem=t;var i=this._itemsCloseToPoint(t),n=i.filter(function(t){return t.enabled});return this._closeItems=n.length>0?n:i,this._closeItemIndex=!e&&this._closeItems.length>1&&this._closeItems[0].selected?1:0,this._closeItems[this._closeItemIndex]},addItemToList:function(t,e){if(this.shouldAddItem(t,e))return this._items.push(t),this.addedItem(t,e),t},addedItem:function(t,e){"function"==typeof t._impl.setDelegate?t._impl.setDelegate(this):t._impl.delegate=this,t._impl.addedToMap&&t._impl.addedToMap()},removedItem:function(t){t.selected=!1,delete t._impl.delegate,t._impl.removedFromMap&&t._impl.removedFromMap()},mapWasDestroyed:function(){delete this._map,this.removedReferenceToMap()},_node:null,_deletePreviousPointForPickingItem:function(){delete this._previousPointForPickingItem,delete this._closeItems,delete this._closeItemIndex},_itemsCloseToPoint:function(t){var e=this._items.filter(function(t){return t._impl.canBePicked()});return 0===e.length?[]:this.pickableItemsCloseToPoint(e,t)}},e.exports=n},{"../../lib/geo":2,"./padding":209,"./types-internal":221,"@maps/dom-events":62,"@maps/js-utils":84}],181:[function(t,e,i){e.exports={preprocessPoints:function(t,e){function i(t,e){var i=r[t];return r[t]=r[e],r[e]=i,r[t]._index=t,r[e]._index=e,e}function n(t){for(;t>0;){var e=Math.floor((t-1)/2);if(r[e]._area<=r[t]._area)return;t=i(t,e)}}function o(t){for(;;){var e=2*t+1,n=2*t+2,o=r[t]._area,s=r[e]?r[e]._area:1/0,a=r[n]?r[n]._area:1/0;if(o<=s&&o<=a)return;t=i(t,s<=o&&s<=a?e:n)}}function s(t){var e=t._prev,i=t,n=t._next;return Math.abs((e.x-n.x)*(i.y-e.y)-(e.x-i.x)*(n.y-e.y))/2}function a(t,e){var i=t._area;t._area=Math.max(s(t),e),t._area<i?n(t._index):o(t._index)}var r=[],l=t.length-1;if(e&&l>1){if(!t[l].equals(t[0])){t.push(t[0].copy());var h=!0;++l}var c=!0;t.unshift(t[l-1].copy()),++l}t[0]._area=t[l]._area=1/0;for(var u=1;u<l;++u){var d=t[u];d._prev=t[u-1],d._next=t[u+1],d._area=s(d),function(t){var e=r.length;t._index=e,r.push(t),n(e)}(d)}for(c&&t.shift(),h&&t.pop();r.length>0;){var p=function(){var t=r[0],e=r.pop();return r.length>0&&(r[0]=e,e._index=0,o(0)),t}(),m=p._prev,g=p._next;m._prev&&(m._next=g,a(m,p._area)),g._next&&(g._prev=m,a(g,p._area)),delete p._index,delete p._next,delete p._prev}},filterPointsAtScale:function(t,e){var i=1/(e*e),n=t.filter(function(t){return t._area>i});if(2===n.length){var o=n[0].x-n[1].x,s=n[0].y-n[1].y;if(o*o+s*s<1*i)return[]}return n}}},{}],182:[function(t,e,i){var n=t("@maps/localizer"),o=t("@maps/js-utils").isNode()?"file://"+e.require("path").resolve(t.resolve("."),"..","..","locales/{{locale}}/strings.json"):t("./urls").createUrl("locales/{{locale}}/strings.json"),s=new n.LanguageSupport({supportedLocales:t("../locales/supported-tile-locales.json"),regionToScriptMap:t("../locales/region-to-script-map.json"),localesMap:t("../locales/locales-map.json")}),a=new n.L10n({supportedLocales:t("../locales/supported-locales.json"),primaryLocales:t("../locales/primary-locales.json"),localesMap:t("../locales/locales-map.json"),regionToScriptMap:t("../locales/region-to-script-map.json"),rtlLocales:t("../locales/rtl-locales.json"),enUSDictionary:t("../locales/en-US/strings.json"),localeUrl:o});a.useMetric=function(){var t=n.LangTag.parse(this.activeLocale.localeId);return n.UseMetric.forLanguageTag(t)},e.exports={languageSupport:s,l10n:a}},{"../locales/en-US/strings.json":226,"../locales/locales-map.json":227,"../locales/primary-locales.json":228,"../locales/region-to-script-map.json":229,"../locales/rtl-locales.json":230,"../locales/supported-locales.json":231,"../locales/supported-tile-locales.json":232,"./urls":222,"@maps/js-utils":84,"@maps/localizer":94}],183:[function(t,e,i){function n(t,e,i){if(u.instrumented){this._instrumented=u.instrumented,this._performanceLog=[];var n=N.now()}this._initialMapLoad=!0,e&&(this._bootstrapSize=new T(e.offsetWidth,e.offsetHeight)),E.EventTarget(t),this.public=t,e=this._checkParent(e),i=c.checkOptions(i),this._checkOptions(i),this._setDefaultState(i),this._setupScene(),this._setupRenderTree(),this._setupControllers(i),this.isRotationEnabled=!("isRotationEnabled"in i)||i.isRotationEnabled,i.rotation&&(this.rotation=i.rotation),this._flushToDOM(e),this._handleOptions(i,e),this._setupListeners(),this._shouldPerformDelayedInit=!0,M.scheduleOnNextFrame(this),this._instrumented&&this._performanceLog.push({name:"map-init",timestamp:n,duration:N.now()-n})}function o(t){this.selected=t}function s(t){t.selected=!0,k.log(k.Events.AnnotationClick,{map:this})}var a=t("../../lib/geo"),r=t("../../lib/scene-graph"),l=t("../../lib/map-node").BackgroundGridThemes,h=t("./utils"),c=t("@maps/js-utils"),u=t("./configuration"),d=t("./types-internal"),p=t("./padding"),m=t("./interaction/linear-zoom-controller"),g=t("./interaction/map-user-interaction-controller"),_=t("./localizer").l10n,f=t("./overlays/overlays-controller"),y=t("./annotations/annotations-controller"),v=t("./map-node-controller"),w=t("./controls/zoom-control"),b=t("./user-location/user-location-controller"),C=t("./controls/controls-layer"),S=t("@maps/geometry/point"),L=t("@maps/geometry/rect"),T=t("@maps/geometry/size"),E=t("@maps/dom-events"),x=t("@maps/render-tree"),M=t("@maps/scheduler"),A=t("@maps/device-pixel-ratio"),k=t("./analytics/analytics"),O=t("./layer-items-controller"),I=t("./overlays/overlay"),R=t("./annotations/annotation"),P=t("./collections/item-collection"),D=t("./constants"),z=D.FeatureVisibility,N=t("./instruments"),F=a.CoordinateRegion,j=a.CoordinateSpan,U=a.Coordinate,B=a.MapPoint,G=a.MapSize,W=a.MapRect,K=h.supportsTouches,Z=new W(0,0,1,1),V=new j(.15,.15),q={padding:"rw",isScrollEnabled:"rw",isZoomEnabled:"rw",center:"rw",region:"rw",rotation:"rw",isRotationEnabled:"rw",showsCompass:"rw",visibleMapRect:"rw",tintColor:"rw",annotations:"rw",selectedAnnotation:"rw",overlays:"rw",selectedOverlay:"rw",showsUserLocation:"rw",tracksUserLocation:"rw",mapType:"rw",_showsDefaultTiles:"rw",showsPointsOfInterest:"rw",showsMapTypeControl:"rw",showsZoomControl:"rw",showsScale:"rw",showsUserLocationControl:"rw",annotationForCluster:"rw",element:"ro",userLocationAnnotation:"ro"},H={ZOOM_START:"zoom-start",ZOOM_END:"zoom-end",SELECT:"select",DESELECT:"deselect",DRAG_START:"drag-start",DRAGGING:"dragging",DRAG_END:"drag-end",REGION_CHANGE_START:"region-change-start",REGION_CHANGE_END:"region-change-end",SCROLL_START:"scroll-start",SCROLL_END:"scroll-end",MAP_TYPE_CHANGE:"map-type-change",ROTATION_START:"rotation-start",ROTATION_END:"rotation-end",MAP_NODE_CHANGE:"map-node-change",MAP_NODE_READY:"map-node-ready",COMPLETE:"complete"};n.MapTypes=D.MapTypes,n.prototype={constructor:n,_showsUserLocation:!1,_tracksUserLocation:!1,_tintColor:"",_annotationForCluster:null,get padding(){return this._padding.copy()},set padding(t){if(c.checkInstance(t,p,"[MapKit] The `padding` parameter passed to `Map.padding` is not a Padding."),!this._padding.equals(t)){this._padding=t.copy();var e=this.ensureRenderingFrame();e.equals(L.Zero)||(this._setRenderingFrameValue(e),this.setVisibleMapRectAnimated(this._mapRectAccountingForPadding(),!1)),this.controlsLayer&&this.controlsLayer.mapPaddingDidChange(this._adjustedPadding)}},get isScrollEnabled(){return this._mapNode.pannable},set isScrollEnabled(t){this._mapNode.pannable=!!t},get isZoomEnabled(){return this._mapNode.zoomable},set isZoomEnabled(t){this._mapNode.zoomable=!!t,this.controlsLayer.updateZoomControl()},get showsZoomControl(){return this._showsZoomControl},set showsZoomControl(t){(t=!!t)!==this._showsZoomControl&&(this._showsZoomControl=t,this.controlsLayer.updateZoomControl(),this.controlsLayer.updateScale())},get showsScale(){return this._showsScale},set showsScale(t){c.checkValueIsInEnum(t,z)?t!==this._showsScale&&(this._showsScale=t,this.controlsLayer&&this.controlsLayer.updateScale()):console.warn("[MapKit] value passed to `Map.showsScale` setter must be part of the mapkit.FeatureVisibility enum.")},get mapType(){return this._mapType},set mapType(t){if(t!==this._mapType){if(!c.checkValueIsInEnum(t,n.MapTypes))throw new Error("[MapKit] Unknown value for `mapType`. Choose from Map.MapTypes.");this._mapType=t,this._mapNodeController.handleMapConfigurationChange(),this.controlsLayer.update();var e=t!==n.MapTypes.Standard;this._annotationsController.mapTypeWasSet(e),this._overlaysController.mapTypeWasSet(e),this.public.dispatchEvent(new E.Event(H.MAP_TYPE_CHANGE)),k.log(k.Events.MapTypeChange,{map:this})}},get _showsTileInfo(){return this._mapNode._impl.debug},set _showsTileInfo(t){this._mapNode._impl.debug=t},get _showsDefaultTiles(){return this._mapNode.showsDefaultTiles},set _showsDefaultTiles(t){this._mapNode.showsDefaultTiles=t},get tileOverlays(){return this._mapNode.tileOverlays},set tileOverlays(t){this._mapNode.tileOverlays=t,this.controlsLayer.updateZoomControl()},addTileOverlay:function(t){var e=this._mapNode.addTileOverlay(t);return this.controlsLayer.updateZoomControl(),e},addTileOverlays:function(t){var e=this._mapNode.addTileOverlays(t);return this.controlsLayer.updateZoomControl(),e},removeTileOverlay:function(t){var e=this._mapNode.removeTileOverlay(t);return this.controlsLayer.updateZoomControl(),e},removeTileOverlays:function(t){var e=this._mapNode.removeTileOverlays(t);return this.controlsLayer.updateZoomControl(),e},get showsMapTypeControl(){return this._showsMapTypeControl},set showsMapTypeControl(t){(t=!!t)!==this._showsMapTypeControl&&(this._showsMapTypeControl=t,this.controlsLayer.updateMapTypeControl())},get showsUserLocationControl(){return this._showsUserLocationControl},set showsUserLocationControl(t){(t=!!t)!==this._showsUserLocationControl&&(this._showsUserLocationControl=t,this.controlsLayer.updateUserLocationControl(),this.controlsLayer.updateScale())},get showsPointsOfInterest(){return this._mapNode.showsPointsOfInterest},set showsPointsOfInterest(t){this._mapNode.showsPointsOfInterest=!!t},get element(){return this.rootNode&&this.rootNode.element},set element(t){console.warn("[MapKit] The `element` property is read-only.")},get renderingMapRect(){return this._mapNode.visibleMapRect},get visibleMapRect(){return this._visibleMapRect||(this._visibleMapRect=this._mapRectAccountingForPadding()),this._visibleMapRect},set visibleMapRect(t){this.setVisibleMapRectAnimated(t,!1)},setVisibleMapRectAnimated:function(t,e,i){c.required(t,"[MapKit] Missing `visibleMapRect` parameter in call to `Map.setVisibleMapRectAnimated()`.").checkInstance(t,W,"[MapKit] The `visibleMapRect` parameter passed to `Map.setVisibleMapRectAnimated()` is not a MapRect."),t!==Z&&(this._defaultVisibleMapRectHasBeenOverriden=!0);var n=this.ensureRenderingFrame();if(0===n.size.width||0===n.size.height)this._visibleMapRect=t;else{var o=this._visibleFrame,s=t,r=this._adjustedPadding;if(!r.equals(p.Zero)){var l=n.size.width/o.size.width,h=n.size.height/o.size.height;s=new W(t.minX()-r.left*l*t.size.width,t.minY()-r.top*h*t.size.height,t.size.width*l,t.size.height*h)}var u=new B(t.midX(),t.midY()),d=a.zoomLevelForMapRectInViewport(s,n.size,a.tileSize);d=c.clamp(this._mapNode.snapsToIntegralZoomLevels?Math.floor(d+1e-6):d,this.minZoomLevel,this.maxZoomLevel);var m=Math.pow(2,Math.ceil(d))*(a.tileSize*Math.pow(2,d-Math.ceil(d))),g=new G(o.size.width/m,o.size.height/m);t=new W(u.x-g.width/2,u.y-g.height/2,g.width,g.height)}return e=void 0===e||!!e,this._setVisibleMapRect(t,e,i),delete this._delayedShowItems,this.public},get region(){return this.visibleMapRect.toCoordinateRegion()},set region(t){this.setRegionAnimated(t,!1)},setRegionAnimated:function(t,e,i){return c.required(t,"[MapKit] Tried to set `Map.region` property to a non-existent value.").checkInstance(t,F,"[MapKit] Region passed to `Map.region` setter is not a CoordinateRegion."),this.region.equals(t)||this.setVisibleMapRectAnimated(t.toMapRect(),e,i),this.public},get isRotationAvailable(){return u.previewLoCSR?!u.didFallback&&this.csrCapable:u.ready||u.didFallback?u.canRunCSR&&this.csrCapable:this.csrCapable},set isRotationAvailable(t){console.warn("[MapKit] Map.isRotationAvailable is a read-only property")},get isRotationEnabled(){return this._mapNode.isRotationEnabled},set isRotationEnabled(t){"boolean"==typeof t?(this.isRotationAvailable?this._mapNode.isRotationEnabled=t:console.warn("[MapKit] Rotation can't be enabled because it's not available."),this.controlsLayer.updateRotationControl()):console.warn("[MapKit] Value passed to `Map.isRotationEnabled` is not a Boolean.")},get rotation(){return this._mapNode.rotation},set rotation(t){this.setRotationAnimated(t,!1),this.controlsLayer.updateRotationControl()},get showsCompass(){return this.usingCSR?this._showsCompass:z.Hidden},set showsCompass(t){c.checkValueIsInEnum(t,z)?(this.isRotationEnabled||t!==z.Visible&&t!==z.Adaptive||console.warn("[MapKit] The compass cannot be shown when `Map.isRotationEnabled` is false."),this._usingDefaultShowsCompassValue=!1,t!==this._showsCompass&&(this._showsCompass=t,this.controlsLayer&&this.controlsLayer.updateRotationControl())):console.warn("[MapKit] value passed to `Map.showsCompass` setter must be part of the MapKit.FeatureVisibility enum.")},get usingCSR(){return!this._mapNodeController.usingSSR},setRotationAnimated:function(t,e,i){if(this.isRotationAvailable||console.warn("[MapKit] Rotation is not available."),c.required(t,"[MapKit] Tried to set `Map.rotation` property to a non-existent value."),"number"==typeof t&&!isNaN(t)){if(e){var n=this.camera.copy();n.rotation=t,this._mapNode.setCameraAnimated(n,!0),this.mapRotationWillStart()}else i||this.mapRotationWillStart(),this._mapNode.rotation=t,i||this.mapRotationDidEnd();return this.public}console.warn("[MapKit] Region passed to `Map.rotation` setter is not a Number.")},get center(){var t=this.visibleMapRect;return new B(t.midX(),t.midY()).toCoordinate()},set center(t){this.setCenterAnimated(t,!1)},setCenterAnimated:function(t,e,i){return c.required(t,"[MapKit] Tried to set `Map.center` property to a non-existent value.").checkInstance(t,U,"[MapKit] Value passed to `Map.center` setter is not a Coordinate object."),this._mapNode.setCenterAnimated(t,e),delete this._visibleMapRect,i||(this.tracksUserLocation=!1),this.public},get overlays(){return this._overlaysController.items},set overlays(t){this._overlaysController.items=t},get selectedOverlay(){return this._overlaysController.selectedItem},set selectedOverlay(t){this._overlaysController.selectedItem=t},addOverlay:function(t){return this._overlaysController.addItem(t)},addOverlays:function(t){return this._overlaysController.addItems(t),t},removeOverlay:function(t){return this._overlaysController.removeItem(t)},removeOverlays:function(t){return this._overlaysController.removeItems(t)},topOverlayAtPoint:function(t){c.checkInstance(t,window.DOMPoint,"[MapKit] Map.topOverlayAtPoint expected a DOMPoint, but got `"+t+"` instead.");var e=this.rootNode.convertPointFromPage(t),i=this._overlaysController.pickableItemsCloseToPoint(this.overlays,e,0),n=this.selectedOverlay;return n&&i.indexOf(n)>0?n:i[0]},overlaysAtPoint:function(t){c.checkInstance(t,window.DOMPoint,"[MapKit] Map.overlaysAtPoint expected a DOMPoint, but got `"+t+"` instead.");var e=this.rootNode.convertPointFromPage(t);return this._overlaysController.pickableItemsCloseToPoint(this.overlays,e,0).reverse()},get annotations(){return this._annotationsController.items},set annotations(t){this._annotationsController.items=t},get selectedAnnotation(){return this._annotationsController.selectedItem},set selectedAnnotation(t){this._annotationsController.selectedItem=t},addAnnotation:function(t){return this._annotationsController.addItem(t)},addAnnotations:function(t){return this._annotationsController.addItems(t)},removeAnnotation:function(t){return this._annotationsController.removeItem(t)},removeAnnotations:function(t){return this._annotationsController.removeItems(t)},showItems:function(t,e){var i=new P(t).getFlattenedItemList();e=O.checkShowItemsParameters(i,e);var n=[],o=[];return i.forEach(function(t){t.map||(t instanceof I?(t._impl._map=this.public,n.push(t)):t instanceof R&&this._annotationsController.preAddedAnnotation(t)&&o.push(t))},this),this.isRooted()&&O.setRegionForItems(this,i,e)||(this._delayedShowItems=[i,e]),n.forEach(function(t){delete t._impl._map}),o.forEach(this._annotationsController.resetAnnotation),this._addItems(i),t},addItems:function(t){var e=new P(t).getFlattenedItemList();return this._addItems(e)},removeItems:function(t){var e=[],i=[];return new P(t).getFlattenedItemList().forEach(function(t,n){if(!(t instanceof I||t instanceof R))throw new Error("[MapKit] Map.removeItems expected an Annotation, Overlay, ItemCollection, or Array of valid items at index "+n+", but got `"+t+"` instead.");t instanceof I?e.push(t):i.push(t)},this),this.removeOverlays(e),this.removeAnnotations(i),t},annotationsInMapRect:function(t){return this._annotationsController.annotationsInMapRect(t)},updateSize:function(t){return console.warn("[MapKit] Map resizing is now automatic, the Map.updateSize() method has been deprecated and will be removed in a future version."),this.public},convertCoordinateToPointOnPage:function(t){c.checkInstance(t,U,"[MapKit] Map.convertCoordinateToPointOnPage expected a Coordinate, but got `"+t+"` instead.");var e=this.camera.transformMapPoint(t.toMapPoint()),i=this.rootNode.convertPointToPage(e);return new window.DOMPoint(i.x,i.y)},convertPointOnPageToCoordinate:function(t){c.checkInstance(t,window.DOMPoint,"[MapKit] Map.convertPointOnPageToCoordinate expected a DOMPoint, but got `"+t+"` instead.");var e=this.camera.transformGestureCenter(this.rootNode.convertPointFromPage(new S(t.x,t.y))),i=this.renderingMapRect.origin;return new U(a.convertYToLatitude(i.y+e.y/this.worldSize),a.convertXToLongitude(i.x+e.x/this.worldSize))},get showsUserLocation(){return this._userLocationController.showsUserLocation},set showsUserLocation(t){(t=!!t)!==this.showsUserLocation&&(this._userLocationController.showsUserLocation=t,t||(this._removeUserLocationDisplay(),this.tracksUserLocation=!1),this.showsUserLocationControl&&(this.controlsLayer.updateUserLocationControl(),this.controlsLayer.updateScale()))},get userLocationAnnotation(){return this._annotationsController.userLocationAnnotation},get tracksUserLocation(){return this._userLocationController.tracksUserLocation},set tracksUserLocation(t){(t=!!t)!==this.tracksUserLocation&&(this._userLocationController.tracksUserLocation=t,this._mapNode.staysCenteredDuringZoom=t,t?this.showsUserLocation=!0:this.userLocationAnnotation||(this.showsUserLocation=!1),this._firstCameraUpdateToTrackUserLocationPending=t,this._updateCameraToTrackUserLocation(this._userLocationController.userLocation),this.controlsLayer.updateUserLocationControl(),this._userLocationTrackingDelegate&&"function"==typeof this._userLocationTrackingDelegate.mapUserLocationTrackingDidChange&&this._userLocationTrackingDelegate.mapUserLocationTrackingDidChange(this.public))},get tintColor(){return this._tintColor},set tintColor(t){if(t!==this._tintColor){if(null!=t){if(c.checkType(t,"string","[MapKit] Expected a string value for Map.tintColor, but got `"+t+"` instead"),""!==t&&!h.isValidCSSColor(t))return void console.warn("[MapKit] value passed to `Map.tintColor` is not a valid color value. Ignoring: "+t);this._tintColor=t}else delete this._tintColor;this.controlsLayer&&this.controlsLayer.update()}},get minZoomLevel(){return this._mapNode.minZoomLevel},get maxZoomLevel(){return this._mapNode.maxZoomLevel},get zoomLevel(){return this._mapNode.zoomLevel},set zoomLevel(t){this._mapNode.zoomLevel=t},get worldSize(){return Math.pow(2,this._mapNode.zoomLevel)*a.tileSize},get camera(){return this._mapNodeController.node.camera},get cameraIsPanning(){return this._mapNode.cameraIsPanning},get cameraIsZooming(){return this._mapNode.cameraIsZooming},get _mapNode(){return this._mapNodeController.node},get csrCapable(){return this._mapNodeController.csrCapable},destroy:function(){this.removeAnnotations(this.annotations),this.removeOverlays(this.overlays),this._stopStabilizationTimeout(),this._shouldPerformDelayedInit=!1,this._linearZoomController.stop(),this.showsUserLocation&&this._removeUserLocationDisplay(),this.controlsLayer.mapWasDestroyed(),this.controlsLayer=null,this._mapUserInteractionController.mapWasDestroyed(),this._overlaysController.mapWasDestroyed(),this._annotationsController.mapWasDestroyed(),this._userLocationController.mapWasDestroyed(),this._linearZoomController._delegate=null,u.removeEventListener(u.Events.Changed,this),_.removeEventListener(_.Events.LocaleChanged,this),A.removeEventListener("device-pixel-ratio-change",this),this._iframe&&(this._iframe.removeEventListener("load",this),this._iframe.contentWindow&&this._iframe.contentWindow.removeEventListener("resize",this),this._iframe.remove(),this._iframe=null),this._mapNodeController.destroy(),this._mapRoot.remove(),this._mapRoot=null,this._scene.destroy(),this._scene=null,this._removePrintListener(),this.element&&this.element.parentNode&&this.element.parentNode.removeChild(this.element),this.rootNode.remove(),this.rootNode=null},adjustMapItemPoint:function(t){return this._mapNode.adjustMapItemPoint(t)},get annotationForCluster(){return this._annotationForCluster},set annotationForCluster(t){if(null==t)delete this._annotationForCluster;else{if("function"!=typeof t)throw new Error("[MapKit] annotationForCluster must be a function or null");this._annotationForCluster=t}},handleEvent:function(t){switch(t.type){case u.Events.Changed:this._configurationDidBecomeAvailable();break;case w.EVENTS.ZOOM_START:this._handleZoomStartEvent(t);break;case w.EVENTS.ZOOM_END:this._handleZoomEndEvent(t);break;case _.Events.LocaleChanged:this._handleLocaleChange(t);break;case"device-pixel-ratio-change":this._devicePixelRatioDidChange(t);break;case"load":this._iframeDidLoad();break;case"resize":this._iframeSizeDidChange()}},elementShouldPreventDragstart:function(t){return!this._annotationsController.isElementInCustomCallout(t)},elementWantsDefaultBrowserBehavior:function(t){return this._annotationsController.isElementInCallout(t)},tileAccessForbidden:function(){u.accessKeyHasExpired()},mapDidFinishRendering:function(t){this._instrumented&&this._performanceLog.push({name:"map-fully-rendered",timestamp:N.now()}),this.addWaitingAnnotations(),this._startStabilizationTimeoutIfNeeded()},mapCanStartPanning:function(t){return!(this.tracksUserLocation&&this.cameraIsZooming||this._annotationsController.dragging||this._isInitialInteractionTargetInUIElement()||!this.public.dispatchEvent(new E.Event(H.SCROLL_START)))},mapWillStartPanning:function(t){this._stopStabilizationTimeout(),this.tracksUserLocation=!1;var e=this.rootNode.element;h.classList.add(e,"mk-panning"),h.classList.add(e,"mk-dragging-cursor")},mapWillStopPanning:function(t){h.classList.remove(this.rootNode.element,"mk-dragging-cursor")},mapDidStopPanning:function(t){this._startStabilizationTimeoutIfNeeded(),h.classList.remove(this.rootNode.element,"mk-panning"),this.public.dispatchEvent(new E.Event(H.SCROLL_END))},mapCanStartZooming:function(t){return!(this._isInitialInteractionTargetInUIElement()||!this.public.dispatchEvent(new E.Event(H.ZOOM_START)))},mapWillStartZooming:function(t,e,i){this._stopStabilizationTimeout(),i&&(this.tracksUserLocation=!1)},mapDidStopZooming:function(t){this._startStabilizationTimeoutIfNeeded(),this.public.dispatchEvent(new E.Event(H.ZOOM_END)),k.log(k.Events.Zoom,{map:this}),this.controlsLayer.scaleDidChange()},mapCameraDidChange:function(t,e){delete this._visibleMapRect,this._overlaysController.mapCameraDidChange(),this._annotationsController.updateVisibleAnnotations(),this.controlsLayer.scaleDidChange(),this.controlsLayer.updateRotationControl()},mapCameraChangesWillStart:function(t,e){this._zoomLevelWhenCameraChangeStarted=this.zoomLevel,this.public.dispatchEvent(new E.Event(H.REGION_CHANGE_START))},mapCameraChangesDidEnd:function(t){this._zoomLevelWhenCameraChangeStarted!==this.zoomLevel&&this.controlsLayer.zoomLevelDidChange(),delete this._zoomLevelWhenCameraChangeStarted,this.public.dispatchEvent(new E.Event(H.REGION_CHANGE_END))},mapRotationWillStart:function(t){this.public.dispatchEvent(new E.Event(H.ROTATION_START))},mapRotationDidChange:function(t){this.controlsLayer.updateRotationControl()},mapRotationDidEnd:function(t){this.public.dispatchEvent(new E.Event(H.ROTATION_END))},mapTransformCenter:function(t){var e=this.visibleMapRect;return new B(e.midX(),e.midY())},userWillTap:function(t){if(this._isInitialInteractionTargetInUIElement())h.supportsTouches&&(this._delayedTapFunction=this._elementWasTapped.bind(this,this._mapUserInteractionController.initialEventTargetForCurrentInteraction));else{var e=this.rootNode.convertPointFromPage(t),i=this._annotationsController.itemCloseToPoint(e);if(i)i.enabled&&(this._delayedTapFunction=s.bind(this,i));else{var n=this._overlaysController.itemCloseToPoint(e);n?n.enabled&&(this._delayedTapFunction=o.bind(n,!0)):this._delayedTapFunction=function(){this._annotationsController.selectedItem=null,this._overlaysController.selectedItem=null}.bind(this)}}},userDidTap:function(t){this._delayedTapFunction&&(this._delayedTapFunction(),delete this._delayedTapFunction)},userCanceledTap:function(t){delete this._delayedTapFunction},userDidLongPress:function(t){if(this._isInitialInteractionTargetInUIElement())return!1;var e=this._annotationsController.itemCloseToPoint(this.rootNode.convertPointFromPage(t),!0);if(!e)return!1;if(e.enabled){if(e._impl.isDraggable()&&!this.cameraIsPanning&&!this.cameraIsZooming)return this._annotationsController.startDraggingAnnotation(e,t),!0;if(h.supportsTouches)return s.call(this,e),!0}return h.supportsTouches},userDidPanAfterLongPress:function(t){this._annotationsController.annotationDraggingDidChange(t)},userDidStopPanningAfterLongPress:function(t){this._annotationsController.annotationDraggingDidEnd(t)},linearZoomControllerDidZoom:function(t){this.cameraIsZooming&&(this.zoomLevel=t,(t<=this.minZoomLevel&&!this._linearZoomController.zoomsIn||t>=this.maxZoomLevel&&this._linearZoomController.zoomsIn)&&this._mapNode.cameraDidStopZooming())},linearZoomControllerDidStop:function(){this._mapNode.cameraDidStopZooming()},userLocationDidChange:function(t){this._updateUserLocationDisplay(t.target),this.controlsLayer.userLocationDidChange(t.target),this.tracksUserLocation&&this._updateCameraToTrackUserLocation(t.target),this.public.dispatchEvent(t)},userLocationDidError:function(t){this._updateUserLocationDisplay(t.target),this.controlsLayer.userLocationDidError(t.target),this.public.dispatchEvent(t)},isRooted:function(){return this.element&&this.element.ownerDocument.body.contains(this.element)},stopDraggingAnnotation:function(){this._mapUserInteractionController._stopDraggingAnnotation()},translateVisibleMapRectAnimated:function(t,e){var i=this.visibleMapRect;this._setVisibleMapRect(new W(i.minX()+t.x/this.worldSize,i.minY()+t.y/this.worldSize,i.size.width,i.size.height),!!e)},translateCameraAnimated:function(t,e){this._mapNode.setCameraAnimated(this.camera.translate(t),!!e)},setCameraAnimated:function(t,e){this._mapNode.setCameraAnimated(t,!!e)},shouldWaitForTilesAndControls:function(){return!u.ready||this.controlsLayer.controlsPending||!this._mapNode.fullyRendered},ensureRenderingFrame:function(){return this._renderingFrame||new L},ensureVisibleFrame:function(){return this._visibleFrame||new L},annotationDraggingWillStart:function(){h.classList.add(this.rootNode.element,"mk-dragging-annotation"),this.controlsLayer.canShowTooltips=!1},annotationDraggingDidEnd:function(){h.classList.remove(this.rootNode.element,"mk-dragging-annotation"),this.controlsLayer.canShowTooltips=!0},get isCompassHidden(){return this.showsCompass===z.Hidden||h.supportsTouches&&this.showsCompass===z.Adaptive&&0===this.rotation||!this.isRotationEnabled},compassDraggingWillStart:function(){this.mapRotationWillStart(),h.classList.add(this.element,"mk-dragging-cursor")},compassDraggingDidEnd:function(){this.mapRotationDidEnd(),h.classList.remove(this.element,"mk-dragging-cursor")},panningDuringAnnotationDrag:function(){this._annotationsController.mapPanningDuringAnnotationDrag()},padMapRect:function(t,e){c.checkType(e,"object","[MapKit] padding must be an object with any of `top`, `left`, `bottom`, `right`"),["top","left","bottom","right"].forEach(function(t){if(t in e){var i=e[t];if("number"!=typeof i||i<0)throw new Error("[MapKit] property `"+t+"` of padding must be a number >= 0; got `"+i+"`")}else e[t]=0});var i=a.zoomLevelForMapRectInViewport(t,this.ensureRenderingFrame().size,a.tileSize),n=Math.pow(2,i)*a.tileSize;return d.padMapRect(t,{top:e.top/n,left:e.left/n,bottom:e.bottom/n,right:e.right/n})},supportsLabelRegions:function(){return!this._mapNodeController.usingSSR},createLabelRegion:function(){return this._mapNode.createLabelRegion()},updatedLabelRegion:function(){this._mapNode.updatedLabelRegion()},unregisterLabelRegion:function(t){this._mapNode.unregisterLabelRegion(t)},_addItems:function(t){var e=[];return t.forEach(function(t,i){if(!(t instanceof I||t instanceof R))throw new Error("[MapKit] Map.addItems expected an Annotation, Overlay, ItemCollection, or Array of valid items at index "+i+", but got `"+t+"` instead.");t.map||(t instanceof I?this.addOverlay(t):e.push(t))},this),this.addAnnotations(e),t},_configurationDidBecomeAvailable:function(t){this._mapNodeController.configurationDidBecomeAvailable(t),this._initialMapLoad&&(k.log(k.Events.MapsLoad,{map:this}),this._initialMapLoad=!1),this.controlsLayer.update(),u.location&&!this._defaultVisibleMapRectHasBeenOverriden&&(this.region=new F(new U(u.location.lat,u.location.lng),V))},_setupScene:function(){this._instrumented?this._scene=new N.Scene(this):this._scene=new r.Scene,h.classList.add(this._scene.element,"rt-root")},_checkOptions:function(t){c.checkType(t,"object","[MapKit] The `options` object is invalid."),Object.keys(t).forEach(function(t){var e=q[t];"rw"===e||("ro"===e?console.warn("[MapKit] `"+t+"` is read-only and can't be set on a Map."):console.warn("[MapKit] `"+t+"` is not a valid property of Map."))})},_checkParent:function(t){if(void 0!==t&&null!==t){var e="string"==typeof t?document.getElementById(t):t;if(!e||!c.isElement(e))throw new Error("[MapKit] `parent` must either be a DOM element or its ID.");return e}},_setDefaultState:function(t){this._showsScale=z.Hidden,this._visibleMapRect=Z,this._padding=new p,this._adjustedPadding=new p,this._showsCompass=z.Adaptive,this._usingDefaultShowsCompassValue=!0,this._showsZoomControl="showsZoomControl"in t?!!t.showsZoomControl:!K,this._showsMapTypeControl="showsMapTypeControl"in t?!!t.showsMapTypeControl:!K,this._showsUserLocationControl="showsUserLocationControl"in t&&!!t.showsUserLocationControl;var e=n.MapTypes.Standard;if(t.mapType){if(!c.checkValueIsInEnum(t.mapType,n.MapTypes))throw new Error("[MapKit] Unknown value for `mapType`. Choose from Map.MapTypes.");e=t.mapType}this._mapType=e},_setupRenderTree:function(){var t=document.createElement("div");t.className="mk-map-view",t.appendChild(this._scene.element),this.rootNode=new x.Node(t)},_setupControllers:function(t){this.controlsLayer=new C(this),this._overlaysController=new f(this),this._scene.addChild(this._overlaysController.node),this._annotationsController=new y(this),this._scene.addChild(this._annotationsController.sceneGraphNode),this._userLocationController=new b(this),this._mapNodeController=new v(this,t),this._linearZoomController=new m(this._mapNode.snapsToIntegralZoomLevels,this),this._mapUserInteractionController=new g(this.rootNode.element,this)},_handleOptions:function(t,e){t.showsScale&&(this.showsScale=t.showsScale),t.showsCompass&&(this.showsCompass=t.showsCompass),t.padding&&(this.padding=t.padding),t.visibleMapRect?this.visibleMapRect=t.visibleMapRect:t.region?this.region=t.region:t.center&&(this.center=t.center);var i=[],n=!t.visibleMapRect&&!t.region&&!t.center&&e;t.overlays&&(c.checkArray(t.overlays,"[MapKit] Map constructor overlays option expected an array of overlays, but got `"+t.annotations+"` instead."),n?i.push.apply(i,t.overlays):this.overlays=t.overlays),t.annotations&&(c.checkArray(t.annotations,"[MapKit] Map constructor annotations option expected an array of annotations, but got `"+t.annotations+"` instead."),n?i.push.apply(i,t.annotations):this.annotations=t.annotations),i.length>0&&this.showItems(i),t.selectedOverlay&&(this.selectedOverlay=t.selectedOverlay),t.selectedAnnotation&&(this.selectedAnnotation=t.selectedAnnotation),this.tintColor=t.tintColor,this.showsUserLocation=t.showsUserLocation,this.tracksUserLocation=t.tracksUserLocation},_flushToDOM:function(t){this._addMapToParent(t),M.flush(),this._ensureContainerIsPositioned()},_addMapToParent:function(t){void 0!==t&&null!==t&&(t.appendChild(this.element),this._bootstrapSize.width&&this._bootstrapSize.height&&this._updateRenderingFrameSize(this._bootstrapSize),delete this._bootstrapSize)},performScheduledUpdate:function(){this._shouldPerformDelayedInit&&(this._delayedInit(),this._shouldPerformDelayedInit=!1)},_delayedInit:function(){this._iframe=h.htmlElement("iframe",{tabindex:-1,"aria-hidden":!0}),this._iframe.addEventListener("load",this),this.element.insertBefore(this._iframe,this._scene.element)},_updateUserLocationDisplay:function(t){this._annotationsController.updateUserLocationAnnotation(t),this._overlaysController.updateUserLocationAccuracyRingOverlay(t)},_removeUserLocationDisplay:function(){this._annotationsController.removeUserLocationAnnotation(),this._overlaysController.removeUserLocationAccuracyRingOverlay()},_updateCameraToTrackUserLocation:function(t){var e,i;if(this.tracksUserLocation&&this.showsUserLocation&&t.coordinate){if(this._firstCameraUpdateToTrackUserLocationPending&&this.zoomLevel<9.5){var n=14;if(t.location.accuracy>0){var o=5*t.location.accuracy*a.mapUnitsPerMeterAtLatitude(t.location.latitude),s=new W(0,0,o,o),r=this._visibleFrame.size;n=Math.max(this.zoomLevel,a.zoomLevelForMapRectInViewport(s,r,a.tileSize))}e=this._mapRectForCenterAndZoomLevel(t.coordinate.toMapPoint(),n),this._userLocationTrackingDelegate&&"function"==typeof this._userLocationTrackingDelegate.mapRegionWillChangeToTrackUserLocation&&(i=e.toCoordinateRegion(),this._userLocationTrackingDelegate.mapRegionWillChangeToTrackUserLocation(this.public,i),e=i.toMapRect()),this._mapNode.setCameraAnimated(this.camera.withNewMapRect(e),!0,!0)}else this._userLocationTrackingDelegate&&"function"==typeof this._userLocationTrackingDelegate.mapRegionWillChangeToTrackUserLocation?(i=(e=this._mapRectForCenterAndZoomLevel(t.coordinate.toMapPoint(),this.zoomLevel)).toCoordinateRegion(),this._userLocationTrackingDelegate.mapRegionWillChangeToTrackUserLocation(this.public,i),this._mapNode.setCameraAnimated(this.camera.withNewMapRect(e),!0,!0)):this.setCenterAnimated(t.coordinate,!0,!0);delete this._firstCameraUpdateToTrackUserLocationPending}},_updateRenderingFrameFromElement:function(){var t=this.rootNode.element,e=t.offsetWidth,i=t.offsetHeight;0!==e&&0!==i&&this._updateRenderingFrameSize(new T(e,i))},_setRenderingFrameValue:function(t){this._renderingFrame=t,this._visibleFrame=t;var e=this._adjustedPadding.copy(),i=this._adjustedPadding=this._adjustedPaddingForMapSize(t.size);i.equals(p.Zero)||(this._visibleFrame=new L(t.origin.x+i.left,t.origin.y+i.top,t.size.width-i.left-i.right,t.size.height-i.top-i.bottom)),!i.equals(e)&&this.controlsLayer&&this.controlsLayer.mapPaddingDidChange(i)},_adjustedPaddingForMapSize:function(t){var e=this.controlsLayer.legalControlExpandedSize,i=new T(Math.min(e.width,t.width),Math.min(e.height,t.height)),n=this._padding.copy(),o=n.left+n.right,s=n.top+n.bottom,a=o+i.width-t.width,r=s+i.height-t.height;if(a>0&&o>0){var l=(o-a)/o;n.left*=l,n.right*=l}if(r>0&&s>0){var h=(s-r)/s;n.top*=h,n.bottom*=h}return n},_iframeDidLoad:function(){this._iframe.contentWindow.addEventListener("resize",this),this._ensureContainerIsPositioned(),this._iframeSizeDidChange()},_iframeSizeDidChange:function(){"function"==typeof window.matchMedia&&window.matchMedia("print").matches||this._updateRenderingFrameFromElement()},_updateRenderingFrameSize:function(t){var e=!this._renderingFrame;0===t.width||0===t.height||!e&&this._renderingFrame.size.equals(t)||(this._setRenderingFrameValue(new L(0,0,t.width,t.height)),this._scene.size=t,this._mapRoot.size=t,this._mapNodeController.updateSize(t),this._delayedShowItems&&(O.setRegionForItems(this,this._delayedShowItems[0],this._delayedShowItems[1]),delete this._delayedShowItems),this.controlsLayer.sizeDidChange(),this._annotationsController.mapSizeDidUpdate())},_mapRectForCenterAndZoomLevel:function(t,e){var i=this.ensureVisibleFrame().size,n=Math.pow(2,e)*a.tileSize,o=i.width/n,s=i.height/n;return new W(t.x-o/2,t.y-s/2,o,s)},_isInitialInteractionTargetInUIElement:function(){var t=this._mapUserInteractionController.initialEventTargetForCurrentInteraction;return!!t&&(!!this._annotationsController.isElementInCallout(t)||!!this.controlsLayer.element.contains(t))},_handleZoomStartEvent:function(t){t.zoomIn&&this.zoomLevel>=this.maxZoomLevel||!t.zoomIn&&this.zoomLevel<=this.minZoomLevel||this._linearZoomController.start(this.zoomLevel,t.zoomIn)&&this._mapNode.cameraWillStartZooming()},_handleZoomEndEvent:function(t){this._linearZoomController.stop()},_setVisibleMapRect:function(t,e,i){i||(this.tracksUserLocation=!1);var n=t,o=this._adjustedPadding,s=this.ensureRenderingFrame(),a=this.ensureVisibleFrame();o.equals(p.Zero)||a.equals(L.Zero)||(n=new W(t.minX()-o.left/a.size.width*t.size.width,t.minY()-o.top/a.size.height*t.size.height,t.size.width*(s.size.width/a.size.width),t.size.height*(s.size.height/a.size.height))),this._mapNode.setVisibleMapRectAnimated(n,e)},_ensureContainerIsPositioned:function(){var t=this.rootNode.element;"static"===t.ownerDocument.defaultView.getComputedStyle(t).position&&(t.style.position="relative")},didInsertNewMapNode:function(t){t.delegate=this,this._updateMapRoot(t),window.setTimeout(function(){this.public.dispatchEvent(new E.Event(H.MAP_NODE_CHANGE))}.bind(this),0)},didReconfigureMapNode:function(t){t.backgroundGridTheme=l[this._mapType===n.MapTypes.Standard?"Light":"Dark"],this._linearZoomController&&(this._linearZoomController.snapsToIntegralZoomLevels=t.snapsToIntegralZoomLevels),this.controlsLayer.updateZoomControl()},didFinishMapNodeInitialization:function(t){if(t.customCanvas){var e=this._scene.element;e.parentNode.insertBefore(t.customCanvas,e)}else this._scene.addChild(t,0)},mapNodeReady:function(t){window.setTimeout(function(){var e=new E.Event(H.MAP_NODE_READY);e.usingCSR=t,this.public.dispatchEvent(e),k.log(k.Events.MapNodeReady,{map:this})}.bind(this),0),this.controlsLayer.updateRotationControl(),this._annotationsController.mapSupportForLabelRegionsChanged()},_updateMapRoot:function(t){this._mapRoot&&this._mapRoot.remove(),this._mapRoot=this.rootNode.insertBefore(new x.Node(t.element),this.rootNode.firstChild),t.element.className="mk-map-node-element",this._mapRoot.size=t.size=this._scene.size,this._mapRoot.addChild(this._annotationsController.node),this._mapRoot.addChild(this.controlsLayer)},overlaySelectionDidChange:function(t){t.selected&&(this._annotationsController.selectedItem=null);var e=new E.Event(t.selected?H.SELECT:H.DESELECT);e.overlay=t,this.public.dispatchEvent(e)},annotationSelectionDidChange:function(t){t.selected&&(this._overlaysController.selectedItem=null),this.dispatchEventWithAnnotation(t.selected?H.SELECT:H.DESELECT,t)},dispatchEventWithAnnotation:function(t,e,i){var n=new E.Event(t);if(n.annotation=e,i)for(var o in i)n[o]=i[o];this.public.dispatchEvent(n)},addWaitingAnnotations:function(){this.shouldWaitForTilesAndControls()||this._annotationsController.addWaitingAnnotations(this._dispatchCompleteEvent.bind(this))},_dispatchCompleteEvent:function(){this._mapNode.fullyRendered&&this.public.dispatchEvent(new E.Event(H.COMPLETE))},_handleLocaleChange:function(t){this._mapNodeController.handleMapConfigurationChange(),h.classList.toggle(this.controlsLayer.element,"mk-rtl",t.locale.rtl);var e=this.ensureRenderingFrame();0!==e.size.width&&0!==e.size.height&&(this._annotationsController.rtl=t.locale.rtl,this._setRenderingFrameValue(e))},_elementWasTapped:function(t){for(;null!==t;t=t.parentNode)if(function(t){return"a"===t.localName||"button"===t.localName||"input"===t.localName&&"button"===t.type}(t))return void t.click()},_devicePixelRatioDidChange:function(t){this.controlsLayer.devicePixelRatioDidChange(t),this._annotationsController.devicePixelRatioDidChange(),this._mapNode.devicePixelRatioDidChange()||this._mapNodeController.handleRecreate()},_mapRectAccountingForPadding:function(){var t=this.renderingMapRect;if(this._adjustedPadding.equals(p.Zero))return t.copy();var e=this.ensureVisibleFrame(),i=this.ensureRenderingFrame();return new W(t.minX()+this._adjustedPadding.left/i.size.width*t.size.width,t.minY()+this._adjustedPadding.top/i.size.height*t.size.height,t.size.width*(e.size.width/i.size.width),t.size.height*(e.size.height/i.size.height))},_setupListeners:function(){u.state===u.States.READY&&this._configurationDidBecomeAvailable(!0),u.addEventListener(u.Events.Changed,this),_.activeLocale&&this._handleLocaleChange({locale:_.activeLocale}),_.addEventListener(_.Events.LocaleChanged,this),A.addEventListener("device-pixel-ratio-change",this),"function"==typeof window.matchMedia&&(this._boundPrintListener=this._printMediaQueryChanged.bind(this),this._mediaQuery=window.matchMedia("print"),this._mediaQuery.addListener(this._boundPrintListener))},_removePrintListener:function(){"function"==typeof window.matchMedia&&(this._mediaQuery.removeListener(this._boundPrintListener),this._boundPrintListener=null,this._mediaQuery=null)},_printMediaQueryChanged:function(t){var e=this._mapNode;t.matches?(this.rootNode.element.style.background=this.rootNode.element.parentNode.getAttribute("data-map-printing-background"),e.fullyRendered?this._ensureMapCenterDuringPrint(!0):(e.opacity=0,this._annotationsController.addWaitingAnnotations()),this._mapNodeController.handlePrintMatch(),M.flush()):(this._mapNodeController.handlePrintUnmatch(),e.opacity=1,this.rootNode.element.style.background="",this._ensureMapCenterDuringPrint(!1))},_ensureMapCenterDuringPrint:function(t){var e=[this._scene.element];this._mapNode.customCanvas&&e.push(this._mapNode.customCanvas),e.forEach(function(e){if(t){var i=this._scene.size;e.style.left="50%",e.style.marginLeft="-"+i.width/2+"px",e.style.top="50%",e.style.marginTop="-"+i.height/2+"px"}else e.style.left="",e.style.marginLeft="",e.style.top="",e.style.marginTop=""},this)},_mapStabilizationTimeout:null,_startStabilizationTimeoutIfNeeded:function(){this._mapNode&&this._mapNode.fullyRendered&&!this.cameraIsPanning&&!this.cameraIsZooming&&this._mapNode.cssBackgroundProperty&&(this._stopStabilizationTimeout(),this._mapStabilizationTimeout=window.setTimeout(this._updatePrintingBackground.bind(this),500))},_stopStabilizationTimeout:function(){this._mapStabilizationTimeout&&(window.clearTimeout(this._mapStabilizationTimeout),this._mapStabilizationTimeout=null)},_updatePrintingBackground:function(){this._mapNode&&this._mapNode.fullyRendered&&this.isRooted()&&this.rootNode.element.parentNode.setAttribute("data-map-printing-background",this._mapNode.cssBackgroundProperty)},_loadSpileAndSwitchToCSR:function(t,e){if(u.state===u.States.READY)if(this._mapNode){var i=function(){e&&(u._madabaBaseUrl=e,u._customMadabaUrl=!0),u._disableCsr=!1,this._mapNodeController.forceSyrup()}.bind(this);if(t){if(!this._mapNodeController.hasSpile){var n=document.head.appendChild(document.createElement("script"));return n.addEventListener("error",function(){n.remove()}),n.addEventListener("load",i),void(n.src=t)}console.warn("Spile is already loaded; will not load again from "+t+".")}i()}else console.warn("Will not force switch to CSR: no map node yet.");else console.warn("Will not force switch to CSR: configuration not loaded.")}},e.exports=n},{"../../lib/geo":2,"../../lib/map-node":7,"../../lib/scene-graph":47,"./analytics/analytics":112,"./annotations/annotation":127,"./annotations/annotations-controller":129,"./collections/item-collection":158,"./configuration":159,"./constants":161,"./controls/controls-layer":163,"./controls/zoom-control":170,"./instruments":176,"./interaction/linear-zoom-controller":177,"./interaction/map-user-interaction-controller":179,"./layer-items-controller":180,"./localizer":182,"./map-node-controller":184,"./overlays/overlay":194,"./overlays/overlays-controller":196,"./padding":209,"./types-internal":221,"./user-location/user-location-controller":223,"./utils":225,"@maps/device-pixel-ratio":61,"@maps/dom-events":62,"@maps/geometry/point":69,"@maps/geometry/rect":70,"@maps/geometry/size":71,"@maps/js-utils":84,"@maps/render-tree":102,"@maps/scheduler":106}],184:[function(t,e,i){function n(t,e){this._state=null,this._map=t,this._previousNode=null,this.node=null,this._initialOptions=e,this._cachedWebGLCheck=null,this.hasSpile=null,this._previousCanRunCSR=!1;this._updateState("sg_grid")}function o(t){return btoa(t)}function s(t){if(h.supportsLocalStorage)try{return window.localStorage.getItem(t)}catch(t){return}}function a(t,e){if(h.supportsLocalStorage)try{window.localStorage.setItem(t,e)}catch(t){return}}function r(t){if(h.supportsLocalStorage)try{window.localStorage.removeItem(t)}catch(t){return}}var l=t("./configuration"),h=t("@maps/js-utils"),c=t("../../lib/map-node").SceneGraphMapNode,u=t("../../lib/map-node").SyrupMapNode,d=t("./debug"),p=t("@maps/fast-webgl-check"),m=t("@maps/loaders").XHRLoader,g=t("@maps/loaders").Priority,_=t("./constants").FeatureVisibility,f={MissingMadaba:1,SpileFailed:3,SpileAdvancedRunning:4,SyrupInitFailure:5},y="mapkit.SpileTestResults",v=.2,w={sg_grid:{"global-configuration":"sg_ready",upgrade:"syrup_insert"},sg_insert:{"global-configuration":"sg_ready",upgrade:"syrup_insert",recreate:"sg_insert"},syrup_insert:{"global-configuration":"syrup_need_spile",fallback:"sg_insert",recreate:"syrup_insert"},syrup_need_spile:{"spile-load":"syrup_init",fallback:"sg_insert",recreate:"syrup_insert"},syrup_init:{"global-configuration":"syrup_network_stalled",fallback:"sg_insert",recreate:"syrup_insert","syrup-complete":"syrup_ready"},syrup_network_stalled:{"global-configuration":"syrup_network_stalled",fallback:"sg_insert",recreate:"syrup_insert","syrup-complete":"syrup_ready"},sg_ready:{"global-configuration":"sg_ready",upgrade:"syrup_insert",recreate:"sg_insert","map-configuration":"sg_ready"},syrup_ready:{"global-configuration":"syrup_ready",fallback:"sg_insert",recreate:"syrup_insert","map-configuration":"syrup_ready","print-match":"syrup_printing"},syrup_printing:{"print-unmatch":"syrup_ready"}};n.prototype={constructor:n,defaultSpileURL:"//cdn.apple-mapkit.com/mk/csr/1.x.x/mk-csr.js",get usingSSR(){return"sg_insert"===this._state||"sg_ready"===this._state},get usingAdvancedAPIs(){return!0},get manageableMap(){var t=this._map.ensureRenderingFrame(),e=this._gpuInfo.MAX_RENDERBUFFER_SIZE*v;return t.size.width<=e&&t.size.height<=e},get csrCapable(){return this._webglCheckResult.shouldTryCSR&&!this.knownBadRendering},get shouldDynamicallyLoadSyrup(){return this._webglCheckResult.shouldTryCSR},get knownGoodRendering(){return!!this._cachedSpileResult&&!!this._cachedSpileResult.pass},get knownBadRendering(){return!!this._cachedSpileResult&&!this._cachedSpileResult.pass},get _webglCheckResult(){if(null===this._cachedWebGLCheck){var t=this._map.ensureRenderingFrame().size;this._cachedWebGLCheck=p(t.width,t.height)}return this._cachedWebGLCheck},get _gpuInfo(){return this._webglCheckResult&&this._webglCheckResult.webGL?this._webglCheckResult.webGL.gpuInfo:{MAX_RENDERBUFFER_SIZE:0,VERSION:"unknown"}},get gpuKey(){return o(this._gpuInfo.VERSION)},get _cachedSpileResult(){var t=s(y);if(t){var e=JSON.parse(t);if(e)return e[this.gpuKey]}},get renderingMode(){var t="CLIENT";return this.usingSSR?t="SERVER":this._startedInLoCSR&&(t="HYBRID"),t},configurationDidBecomeAvailable:function(t){var e=this._previousCanRunCSR,i=l.canRunCSR;this._previousCanRunCSR=i,!e||i||this.usingSSR?!e&&i?this.handleUpgrade():t||this.handleGlobalConfigurationChange():this.handleFallback()},forceSyrup:function(){this.hasSpile=null,this._transition("upgrade")},updateSize:function(t){this.node.size=t,this._previousNode&&(this._previousNode.size=t)},destroy:function(){this.node.destroy(),this.node.delegate=null,this.node=null,this._previousNode&&(this._previousNode.destroy(),this._previousNode=null)},handleGlobalConfigurationChange:function(){this._transition("global-configuration")},handleSpileLoad:function(){this._transition("spile-load")},handleFallback:function(t){t?this._logFallback("TEST_FAILURE"):l.didFallback?this._logFallback("BOOTSTRAP_FALLBACK"):this._logFallback("SYRUP_FALLBACK"),this._transition("fallback")},handleUpgrade:function(){this._transition("upgrade")},handleRecreate:function(){this._transition("recreate")},handleMapConfigurationChange:function(){this._transition("map-configuration")},handleSyrupComplete:function(){this._transition("syrup-complete")},handlePrintMatch:function(){this._transition("print-match")},handlePrintUnmatch:function(){this._transition("print-unmatch")},_transition:function(t){var e=w[this._state][t];e&&this._updateState(e)},_updateState:function(t){this._state=t;var e=this["_enter_"+t];"function"==typeof e&&e.call(this)},_loadSpileIfNeeded:function(t){var e=null,i=function(){e&&(e.removeEventListener("error",i),e.removeEventListener("load",i),e=null),this.hasSpile=!!window.Spile&&!!window.Spile.Syrup,t.call(this,this.hasSpile)}.bind(this);null!=this.hasSpile?t.call(this,this.hasSpile):"function"==typeof window.Spile?i():((e=document.head.appendChild(document.createElement("script"))).addEventListener("error",i),e.addEventListener("load",i),e.src=window.location.protocol+this.defaultSpileURL)},_insertSceneGraphNode:function(){this.usingSSR&&(this.node.isRotationEnabled=!1);var t=new c;this._insertNewMapNode(t),this._map.didFinishMapNodeInitialization(t)},_enter_sg_grid:function(){this._insertSceneGraphNode(),l.ready&&!l.canRunCSR&&this._updateState("sg_ready")},_enter_sg_insert:function(){this._insertSceneGraphNode(),l.ready&&this._updateState("sg_ready")},_enter_syrup_insert:function(){this._insertNewMapNode(new u),l.state===l.States.READY&&this._updateState("syrup_need_spile")},_insertNewMapNode:function(t){var e=this._initialOptions||{};this.node?(this._removePreviousMapNode(),this._previousNode=this.node,this._previousNode.deactivate(),this.node.migrateStateTo(t)):(t.pannable=!("isScrollEnabled"in e)||!!e.isScrollEnabled,t.zoomable=!("isZoomEnabled"in e)||!!e.isZoomEnabled,t.showsPointsOfInterest=!("showsPointsOfInterest"in e)||!!e.showsPointsOfInterest,t.showsDefaultTiles=!("_showsDefaultTiles"in e)||!!e._showsDefaultTiles),this.node=t,this._map.didInsertNewMapNode(t),this._initialOptions?delete this._initialOptions:this.node._impl._cameraDidChange(this.node,!1)},_removePreviousMapNode:function(){this._previousNode&&(this._previousNode.destroy(!0),this._previousNode.remove(),this._previousNode=null)},_enter_syrup_need_spile:function(){if(this.shouldDynamicallyLoadSyrup)return this.knownBadRendering?(this.handleFallback(),void this._loadSpileIfNeeded(function(t){t&&(this.isSpileResultValid(this._cachedSpileResult)||(this.invalidateSpileCache(),this.spileRun()))})):void this._loadSpileIfNeeded(function(t){t?this.handleSpileLoad():this.handleFallback()});this.handleFallback()},_enter_syrup_init:function(){if(!l.madabaDomains||!l.madabaDomains.length)return this._csrWarning(f.MissingMadaba),void this.handleFallback();this._cachedSpileResult&&!this.isSpileResultValid(this._cachedSpileResult)&&this.invalidateSpileCache();var t=Spile.getRendererWithoutAnyWarranty();if(this._startedInLoCSR=!(this.knownGoodRendering&&this.manageableMap&&!l.previewLoCSR),this.manageableMap||this.usingAdvancedAPIs||l.previewLoCSR){var e=this.node;this._reConfigureMapNode(),e.init(l,t,Spile.Syrup.Camera,this._startedInLoCSR,function(t){t?(this._csrWarning(f.SyrupInitFailure),this.handleFallback()):(this._reConfigureMapNode(),e.needsDisplay=!0,this._map.didFinishMapNodeInitialization(e),this.handleSyrupComplete())}.bind(this))}else this.handleFallback()},_csrWarning:function(t){console.warn("[MapKit] CSR is unavailable:",t)},_enter_syrup_network_stalled:function(){this.node.updateNetworkConfiguration(l)},_enter_sg_ready:function(){this._removePreviousMapNode(),this._reConfigureMapNode(),this.node.isRotationEnabled=!1,this._map.mapNodeReady(!1)},_enter_syrup_ready:function(){this._removePreviousMapNode(),this._reConfigureMapNode(),this.node.updateNetworkConfiguration(l),this._map.mapNodeReady(!0),this._cachedSpileResult||this.spileRun()},_reConfigureMapNode:function(){this.node.language=l.language,this.node.configuration=l.types[this._map.mapType],this.node._impl.debug||(this.node._impl.debug=!!d.options.showsTileInfo),this._map.didReconfigureMapNode(this.node)},_enter_syrup_printing:function(){this.node.forceRerender(),this.node.needsDisplay=!0},_logFallback:function(t){h.doNotTrack()||(this._fallbackReason=t,new m("https://gsp10-ssl.ls.apple.com/hvr/mw/v1/spile",this,{method:"POST",priority:g.Low}).schedule())},_usingCSRAPI:function(){return!(this._map._showsCompass!==_.Visible&&(this._map._showsCompass!==_.Adaptive||this._map._usingDefaultShowsCompassValue)&&0===this._map.rotation&&!this._map._annotationsController.containsMarkerAnnotation())},getDataToSend:function(t){return t.setRequestHeader("Content-Type","text/plain"),t.responseType="text",JSON.stringify({ssrFallback:{reason:this._fallbackReason,usingCSRAPI:this._usingCSRAPI()}})},spileRun:function(){Spile&&Spile.testRendering&&Spile.testRendering(this.cacheSpileResult.bind(this))},cacheSpileResult:function(t){if(t.status!==Spile.Status.MAYBE&&t["gpu-identifier"]){var e=o(t["gpu-identifier"].VERSION),i=t.status===Spile.Status.YES,n=JSON.parse(s(y))||{};n[e]={pass:i,version:Spile.version},a(y,JSON.stringify(n)),i||this.usingSSR||this.handleFallback(!0)}},isSpileResultValid:function(t){if(Spile&&Spile.version)return t.version===Spile.version},invalidateSpileCache:function(){r(y)}},e.exports=n},{"../../lib/map-node":7,"./configuration":159,"./constants":161,"./debug":173,"@maps/fast-webgl-check":63,"@maps/js-utils":84,"@maps/loaders":85}],185:[function(t,e,i){function n(t,e){Object.defineProperty(this,"_impl",{value:new o(this,t,e)})}var o=t("./map-internal");n.MapTypes=o.MapTypes,n.prototype={constructor:n,get padding(){return this._impl.padding},set padding(t){this._impl.padding=t},get isScrollEnabled(){return this._impl.isScrollEnabled},set isScrollEnabled(t){this._impl.isScrollEnabled=t},get isZoomEnabled(){return this._impl.isZoomEnabled},set isZoomEnabled(t){this._impl.isZoomEnabled=t},get showsZoomControl(){return this._impl.showsZoomControl},set showsZoomControl(t){this._impl.showsZoomControl=t},get showsScale(){return this._impl.showsScale},set showsScale(t){this._impl.showsScale=t},get mapType(){return this._impl.mapType},set mapType(t){this._impl.mapType=t},get _showsTileInfo(){return this._impl._showsTileInfo},set _showsTileInfo(t){this._impl._showsTileInfo=t},get _showsDefaultTiles(){return this._impl._showsDefaultTiles},set _showsDefaultTiles(t){this._impl._showsDefaultTiles=t},get tileOverlays(){return this._impl.tileOverlays},set tileOverlays(t){this._impl.tileOverlays=t},addTileOverlay:function(t){return this._impl.addTileOverlay(t)},addTileOverlays:function(t){return this._impl.addTileOverlays(t)},removeTileOverlay:function(t){return this._impl.removeTileOverlay(t)},removeTileOverlays:function(t){return this._impl.removeTileOverlays(t)},get showsMapTypeControl(){return this._impl.showsMapTypeControl},set showsMapTypeControl(t){this._impl.showsMapTypeControl=t},get showsUserLocationControl(){return this._impl.showsUserLocationControl},set showsUserLocationControl(t){this._impl.showsUserLocationControl=t},get showsPointsOfInterest(){return this._impl.showsPointsOfInterest},set showsPointsOfInterest(t){this._impl.showsPointsOfInterest=t},get element(){return this._impl.element},set element(t){this._impl.element=t},get visibleMapRect(){return this._impl.visibleMapRect},set visibleMapRect(t){this._impl.visibleMapRect=t},setVisibleMapRectAnimated:function(t,e){return this._impl.setVisibleMapRectAnimated(t,e)},get region(){return this._impl.region},set region(t){this._impl.region=t},setRegionAnimated:function(t,e){return this._impl.setRegionAnimated(t,e)},get isRotationAvailable(){return this._impl.isRotationAvailable},set isRotationAvailable(t){this._impl.isRotationAvailable=t},get isRotationEnabled(){return this._impl.isRotationEnabled},set isRotationEnabled(t){this._impl.isRotationEnabled=t},get rotation(){return this._impl.rotation},set rotation(t){this._impl.rotation=t},get showsCompass(){return this._impl.showsCompass},set showsCompass(t){this._impl.showsCompass=t},setRotationAnimated:function(t,e){return this._impl.setRotationAnimated(t,e)},get center(){return this._impl.center},set center(t){this._impl.center=t},setCenterAnimated:function(t,e){return this._impl.setCenterAnimated(t,e)},get overlays(){return this._impl.overlays},set overlays(t){this._impl.overlays=t},get selectedOverlay(){return this._impl.selectedOverlay},set selectedOverlay(t){this._impl.selectedOverlay=t},addOverlay:function(t){return this._impl.addOverlay(t)},addOverlays:function(t){return this._impl.addOverlays(t)},removeOverlay:function(t){return this._impl.removeOverlay(t)},removeOverlays:function(t){return this._impl.removeOverlays(t)},topOverlayAtPoint:function(t){return this._impl.topOverlayAtPoint(t)},overlaysAtPoint:function(t){return this._impl.overlaysAtPoint(t)},get annotations(){return this._impl.annotations},set annotations(t){this._impl.annotations=t},get selectedAnnotation(){return this._impl.selectedAnnotation},set selectedAnnotation(t){this._impl.selectedAnnotation=t},addAnnotation:function(t){return this._impl.addAnnotation(t)},addAnnotations:function(t){return this._impl.addAnnotations(t)},removeAnnotation:function(t){return this._impl.removeAnnotation(t)},removeAnnotations:function(t){return this._impl.removeAnnotations(t)},showItems:function(t,e){return this._impl.showItems(t,e)},addItems:function(t){return this._impl.addItems(t)},removeItems:function(t){return this._impl.removeItems(t)},annotationsInMapRect:function(t){return this._impl.annotationsInMapRect(t)},updateSize:function(t){return this._impl.updateSize(t)},convertCoordinateToPointOnPage:function(t){return this._impl.convertCoordinateToPointOnPage(t)},convertPointOnPageToCoordinate:function(t){return this._impl.convertPointOnPageToCoordinate(t)},get showsUserLocation(){return this._impl.showsUserLocation},set showsUserLocation(t){this._impl.showsUserLocation=t},get userLocationAnnotation(){return this._impl.userLocationAnnotation},get tracksUserLocation(){return this._impl.tracksUserLocation},set tracksUserLocation(t){this._impl.tracksUserLocation=t},get tintColor(){return this._impl.tintColor},set tintColor(t){this._impl.tintColor=t},get performanceLog(){return this._impl._performanceLog},destroy:function(){this._impl.destroy()},get annotationForCluster(){return this._impl.annotationForCluster},set annotationForCluster(t){this._impl.annotationForCluster=t}},e.exports=n},{"./map-internal":183}],186:[function(t,e,i){function n(t){s.call(this,t.coordinate,o(t),{style:l})}function o(t){return!t.stale&&t.location.accuracy>0&&t.location.accuracy<h?t.location.accuracy:0}var s=t("./circle-overlay"),a=t("./style"),r=t("@maps/js-utils"),l=new a({strokeColor:null}),h=3e4;n.prototype=r.inheritPrototype(s,n,{updateForUserLocation:function(t){this.coordinate=t.coordinate,this.radius=o(t)}}),e.exports=n},{"./circle-overlay":190,"./style":204,"@maps/js-utils":84}],187:[function(t,e,i){function n(t,e,i,n){s.call(this,new a(this),t,n),this.coordinate=e,this.radius=i}function o(){return[this._coordinate.toMapPoint()]}var s=t("./styled-overlay-internal"),a=t("./circle-overlay-node"),r=t("../../../lib/geo"),l=r.Coordinate,h=r.MapRect,c=t("@maps/js-utils");n.prototype=c.inheritPrototype(s,n,{get coordinate(){return this._coordinate},set coordinate(t){c.checkInstance(t,l,"[MapKit] CircleOverlayInternal.coordinate expected a Coordinate value, but got `"+t+"` instead."),this._coordinate&&this._coordinate.latitude===t.latitude&&this._coordinate.longitude===t.longitude||(this._coordinate=t.copy(),this.updateGeometry())},get radius(){return this._radius},set radius(t){var e="[MapKit] CircleOverlayInternal.radius expected a non-negative number (radius in meters), but got `"+t+"` instead.";c.checkType(t,"number",e),t<0&&console.warn(e);var i=Math.max(0,t);this._radius!==i&&(this._radius=i,this.updateGeometry())},calculateBoundingRect:function(){if(!this._coordinate||isNaN(this._radius))return null;var t=this._center=this._coordinate.toMapPoint(),e=this._mapRadius=this._radius*r.mapUnitsPerMeterAtLatitude(this._coordinate.latitude);return new h(t.x-e,t.y-e,2*e,2*e)},simplifyShapeAtLevel:o,clip:o}),e.exports=n},{"../../../lib/geo":2,"./circle-overlay-node":188,"./styled-overlay-internal":205,"@maps/js-utils":84}],188:[function(t,e,i){function n(t){o.call(this,t,!0,new s(this))}var o=t("./styled-overlay-node.js"),s=t("./circle-overlay-renderer.js"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(o,n,{stringInfo:function(){var t=this.overlay;return"CircleOverlayNode<radius:"+t.radius+","+t.coordinate.toString().toLowerCase()+">"+(t.style.toString()?"["+t.style+"]":"")}}),e.exports=n},{"./circle-overlay-renderer.js":189,"./styled-overlay-node.js":206,"@maps/js-utils":84}],189:[function(t,e,i){function n(t){r.call(this,t)}function o(t,e,i,n,o,s,r){t.beginPath();var l=e.transformMapPoint(new a(i.x+n,i.y));s&&(s+=e.rotation),r&&(r-=e.rotation),t.arc(l.x,l.y,o,s||0,r||h,!0)}var s=t("../../../lib/geo").MapPoint,a=t("@maps/geometry/point"),r=t("./styled-overlay-renderer"),l=t("@maps/js-utils"),h=2*Math.PI;n.prototype=l.inheritPrototype(r,n,{drawShapes:function(t,e,i,n,s,a){var r=this._node.shapes[0],l=r[0],h=this._node.overlay._mapRadius,c=h*a.worldSize;c<.5||this.drawClipped(t,e,i,n,s,a,l,h,r.xOffset)||(o(t,a,l,r.xOffset,c),i&&this._node.overlay.fillPath(t,e),n&&this._node.overlay.strokePath(t,e,1))},drawClipped:function(t,e,i,n,r,l,c,u,d){function p(t,e){var i=w-t,n=b-e;return i*i+n*n<=u*u}if(!n||u<r.size.width||u<r.size.height)return!1;var m,g=e._impl.halfStrokeWidthAtResolution()/l.worldSize,_=r.minX()-g-d,f=r.maxX()+g-d,y=r.minY()-g,v=r.maxY()+g,w=c.x,b=c.y,C=[];p(f,v)&&C.push(new s(f,v));var S=Math.acos((f-w)/u);if(!isNaN(S)){var L=b+u*Math.sin(S);L>=y&&L<=v&&((m=new s(f,L)).angle=S,C.push(m)),(L=b-u*Math.sin(S))>=y&&L<=v&&((m=new s(f,L)).angle=h-S,C.push(m))}p(f,y)&&C.push(new s(f,y));var T=Math.asin((y-b)/u);if(!isNaN(T)){var E=w+u*Math.cos(T);E>=_&&E<=f&&((m=new s(E,y)).angle=(T+h)%h,C.push(m)),(E=w-u*Math.cos(T))>=_&&E<=f&&((m=new s(E,y)).angle=Math.PI-T,C.push(m))}p(_,y)&&C.push(new s(_,y));var x=Math.acos((_-w)/u);if(!isNaN(x)){var M=b-u*Math.sin(x);M>=y&&M<=v&&((m=new s(_,M)).angle=h-x,C.push(m)),(M=b+u*Math.sin(x))>=y&&M<=v&&((m=new s(_,M)).angle=x,C.push(m))}p(_,v)&&C.push(new s(_,v));var A=Math.asin((v-b)/u);if(!isNaN(A)){var k=w-u*Math.cos(A);k>=_&&k<=f&&((m=new s(k,v)).angle=Math.PI-A,C.push(m)),(k=w+u*Math.cos(A))>=_&&k<=f&&((m=new s(k,v)).angle=(A+h)%h,C.push(m))}for(var O=C.length,I=1;O>2&&I<O&&(!isNaN(C[I-1].angle)||isNaN(C[I].angle)||isNaN(C[(I+1)%O].angle));++I);if(I<O){for(var R=(I+1)%O;O>2&&!isNaN(C[R].angle)&&!isNaN(C[(R+1)%O].angle);R=(R+1)%O);var P=u*l.worldSize,D=Math.abs(C[I].angle-C[R].angle),z=P*D-2*P*Math.sin(D/2)>.001,N=l.transformMapPoint(new a(C[I].x+d,C[I].y)),F=l.transformMapPoint(new a(C[R].x+d,C[R].y));if(i){z?o(t,l,c,d,P,C[I].angle,C[R].angle):(t.beginPath(),t.moveTo(N.x,N.y),t.lineTo(F.x,F.y));for(var j=(R+1)%O;isNaN(C[j].angle);j=(j+1)%O){var U=l.transformMapPoint(new a(C[j].x+d,C[j].y));t.lineTo(U.x,U.y)}this._node.overlay.fillPath(t,e)}n&&(z?o(t,l,c,d,P,C[I].angle,C[R].angle):(t.beginPath(),t.moveTo(N.x,N.y),t.lineTo(F.x,F.y)),this._node.overlay.strokePath(t,e))}else O>0&&i&&(t.fillStyle=e.fillColor,t.globalAlpha=e.fillOpacity,t.fillRect(0,0,r.size.width*l.worldSize,r.size.height*l.worldSize));return!0}}),e.exports=n},{"../../../lib/geo":2,"./styled-overlay-renderer":207,"@maps/geometry/point":69,"@maps/js-utils":84}],190:[function(t,e,i){function n(t,e,i){Object.defineProperty(this,"_impl",{value:new s(this,t,e,i)})}var o=t("./styled-overlay"),s=t("./circle-overlay-internal"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(o,n,{get coordinate(){return this._impl.coordinate},set coordinate(t){this._impl.coordinate=t},get radius(){return this._impl.radius},set radius(t){this._impl.radius=t}}),e.exports=n},{"./circle-overlay-internal":187,"./styled-overlay":208,"@maps/js-utils":84}],191:[function(t,e,i){function n(){this._overlays=[]}var o=t("@maps/js-utils"),s=t("@maps/scheduler");n.prototype={constructor:n,fadeOverlayTo:function(t,e){t.hasOwnProperty("fadeInOutOpacity")?t.fadeInOutOpacity.durationMs=350*Math.abs(t.fadeInOutOpacity.value-t.fadeInOutOpacity.end):(t.fadeInOutOpacity={durationMs:350},t.setFadeInOutOpacity(1-e),this._overlays.push(t)),t.fadeInOutOpacity.start=t.fadeInOutOpacity.value,t.fadeInOutOpacity.end=e,t.fadeInOutOpacity.startTime=Date.now(),s.scheduleASAP(this)},performScheduledUpdate:function(){var t=Date.now();this._overlays=this._overlays.filter(function(e){return e.setFadeInOutOpacity(o.clamp(e.fadeInOutOpacity.start+(e.fadeInOutOpacity.end-e.fadeInOutOpacity.start)*((t-e.fadeInOutOpacity.startTime)/e.fadeInOutOpacity.durationMs),0,1)),e.fadeInOutOpacity.value!==e.fadeInOutOpacity.end||(delete e.fadeInOutOpacity,!1)}),this._overlays.length>0&&s.scheduleOnNextFrame(this)}},e.exports=n},{"@maps/js-utils":84,"@maps/scheduler":106}],192:[function(t,e,i){function n(t,e,i){s.EventTarget(e),this._node=t,this._public=e,i=o.checkOptions(i),r.forEach(function(t){t in i&&(this[t]=i[t])},this),Object.keys(i).forEach(function(t){r.indexOf(t)<0&&console.warn("[MapKit] Unknown option: "+t+". Use the data property to store custom data.")})}var o=t("@maps/js-utils"),s=t("@maps/dom-events"),a=t("../../../lib/geo").MapRect,r=["visible","enabled","selected","data"];n.prototype={constructor:n,delegate:null,_map:null,_visible:!0,_enabled:!0,_selected:!1,get map(){return this._map},set map(t){console.warn("[MapKit] The `map` property of an overlay is read-only. Use map.addOverlay() instead.")},get data(){return this.hasOwnProperty("_data")||(this._data={}),this._data},set data(t){this._data=t},get visible(){return this._visible},set visible(t){var e=!!t;this._visible!==e&&(this._visible=e,this.updatedProperty("visible"))},get enabled(){return this._enabled},set enabled(t){this._enabled=!!t},get selected(){return this._selected},set selected(t){var e=!!t;e!==this._selected&&(this._selected=e,this.updatedProperty("selected"))},get node(){return this._node},canBePicked:function(){return this.shown&&this._visible},setMap:function(t){t?this._map=t:this._map&&delete this._map},handleEvent:function(){},updatedProperty:function(t){this.delegate&&this.delegate.overlayPropertyDidChange(this._public,t)},visibleAfterClipping:function(t,e,i,n,o){this._node.shapes=[];var s=this.visibilityToleranceAtScale(i),r=this._boundingRect||this.boundingRectAtScale(i);if(!this.visible||r.maxY()+s<t.minY()||r.minY()-s>t.maxY())return!1;for(var l=r.minX()-s,h=r.maxX()+s,c=-1;c<=1;++c){var u=0===c?t:new a(t.origin.x-c,t.origin.y,t.size.width,t.size.height);if(h>=u.minX()&&l<=u.maxX()){var d=this.clipOverlay(u,e,i,n,o);d.length>0&&(d.xOffset=c,this._node.shapes.push(d))}}return this._node.shapes.length>0},visibilityToleranceAtScale:function(){return 0}},e.exports=n},{"../../../lib/geo":2,"@maps/dom-events":62,"@maps/js-utils":84}],193:[function(t,e,i){function n(t){o.BaseNode.call(this),this.overlay=t}var o=t("../../../lib/scene-graph"),s=t("@maps/js-utils");n.prototype=s.inheritPrototype(o.BaseNode,n,{}),e.exports=n},{"../../../lib/scene-graph":47,"@maps/js-utils":84}],194:[function(t,e,i){function n(t){Object.defineProperty(this,"_impl",{value:new o(null,this,t)})}var o=t("./overlay-internal");n.Events={Select:"select",Deselect:"deselect"},n.prototype={constructor:n,get map(){return this._impl.map},set map(t){this._impl.map=t},get data(){return this._impl.data},set data(t){this._impl.data=t},get visible(){return this._impl.visible},set visible(t){this._impl.visible=t},get enabled(){return this._impl.enabled},set enabled(t){this._impl.enabled=t},get selected(){return this._impl.selected},set selected(t){this._impl.selected=t}},e.exports=n},{"./overlay-internal":192}],195:[function(t,e,i){function n(t){o.GroupNode.call(this),this._controller=t}var o=t("../../../lib/scene-graph"),s=t("@maps/js-utils");n.prototype=s.inheritPrototype(o.GroupNode,n,{stringInfo:function(){return"OverlaysControllerNode"}}),e.exports=n},{"../../../lib/scene-graph":47,"@maps/js-utils":84}],196:[function(t,e,i){function n(t){o.call(this,t),this._node=new s(this),this._fadeAnimationController=new r}var o=t("../layer-items-controller"),s=t("./overlays-controller-node"),a=t("./overlay"),r=t("./fade-animation-controller"),l=t("./accuracy-ring-overlay"),h=t("../utils"),c=t("@maps/js-utils"),u=t("../../../lib/geo").MapRect,d=t("@maps/geometry/point"),p=t("@maps/scheduler"),m=t("../constants");n.prototype=c.inheritPrototype(o,n,{itemConstructor:a,itemName:"overlay",capitalizedItemName:"Overlay",get map(){return this._map},get node(){return this._node},isItemExposed:function(t){return t!==this._userLocationAccuracyRingOverlay},removeUserLocationAccuracyRingOverlay:function(){this._userLocationAccuracyRingOverlay&&(this.removeItem(this._userLocationAccuracyRingOverlay),delete this._userLocationAccuracyRingOverlay)},removedReferenceToMap:function(){this._items.forEach(function(t){t._impl.setMap(null)})},mapTypeWasSet:function(t){this._userLocationAccuracyRingOverlay&&(this._userLocationAccuracyRingOverlay.style.fillOpacity=t?.4:.1)},mapCameraDidChange:function(){p.scheduleASAP(this),this._deletePreviousPointForPickingItem()},overlayPropertyDidChange:function(t,e){switch(e){case"selected":t.selected?this.selectedItem=t:this.selectedItem=null,this._map.overlaySelectionDidChange(t),p.scheduleASAP(this);break;case"style":case"visible":case"geometry":p.scheduleASAP(this)}},fadeOverlayTo:function(t,e){this._fadeAnimationController.fadeOverlayTo(t,e)},updateUserLocationAccuracyRingOverlay:function(t){if(t.coordinate)return this._userLocationAccuracyRingOverlay?void this._userLocationAccuracyRingOverlay.updateForUserLocation(t):(this._userLocationAccuracyRingOverlay=this.addItem(new l(t)),void this.mapTypeWasSet(this._map.mapType!==m.MapTypes.Standard))},addedItem:function(t,e){o.prototype.addedItem.call(this,t,e),t._impl.setMap(this._map.public),t.selected&&(this.selectedItem=t),p.scheduleASAP(this)},removedItem:function(t){t._impl.setMap(null),o.prototype.removedItem.call(this,t),p.scheduleASAP(this)},pickableItemsCloseToPoint:function(t,e,i){var n=document.createElement("canvas"),o=n.getContext("2d");n.width=this._selectionDistance,n.height=this._selectionDistance;var s=this._map.camera.copy();e=s.transformGestureCenter(e);var a=s.toMapRect(),r=s.worldSize,l=this._selectionDistance/2,c=e.x-l,p=e.y-l,m=new d(-a.origin.x*r-c,-a.origin.y*r-p),g="number"==typeof i?i:this._selectionDistance/h.devicePixelRatio,_=new u(-m.x/r,-m.y/r,n.width/r,n.height/r);s.rotation=0;var f=!1;return t.filter(function(t){return!!t._impl.shown&&(f&&(o.clearRect(0,0,n.width,n.height),f=!1),t._impl.node._renderer.render(o,_,s,g),f=!0,!!o.getImageData(l,l,1,1).data[3])},this).reverse()},performScheduledUpdate:function(){var t=this.map;if(t){for(var e=t.camera.toRenderingMapRect(),i=t.worldSize,n=Math.ceil(c.log2(i)),o=[],s=this._items,a=0,r=s.length;a<r;++a){var l=s[a];l._impl.shown=l._impl.visibleAfterClipping(e,!0,i,n,!0),l._impl.shown&&!l.selected&&o.push(l._impl.node)}var h=this.selectedItem;h&&h._impl.shown&&o.push(h._impl.node),this._node.children=o}}}),e.exports=n},{"../../../lib/geo":2,"../constants":161,"../layer-items-controller":180,"../utils":225,"./accuracy-ring-overlay":186,"./fade-animation-controller":191,"./overlay":194,"./overlays-controller-node":195,"@maps/geometry/point":69,"@maps/js-utils":84,"@maps/scheduler":106}],197:[function(t,e,i){function n(t,e,i){h.call(this,new c(this),t,i),this.points=e,this.updateGeometry()}function o(t){var e=t.filter(function(t){return t.length>2}).map(function(t){var e=t.reduce(function(t,e){return e.x<t.xMin&&(t.xMin=e.x),e.x>t.xMax&&(t.xMax=e.x),e.y<t.yMin&&(t.yMin=e.y),e.y>t.yMax&&(t.yMax=e.y),t},{xMin:1/0,xMax:-1/0,yMin:1,yMax:0});return new l(e.xMin,e.yMin,e.xMax-e.xMin,e.yMax-e.yMin)}).sort(function(t,e){return t.minX()-e.minX()});return p.boundingRectForSortedRects(e)}function s(t,e,i){for(var n=e.minX()-i,o=e.minY()-i,s=e.maxX()+i,a=e.maxY()+i,r=[],l=0,h=t.length;l<h;++l){for(var c=t[l],u=[],d=0,p=c.length;d<p;++d){var m=c[d];(m.x>=n||c[(d-1+p)%p].x>=n||c[(d+1)%p].x>=n)&&u.push(m)}var g=[];for(d=0,p=u.length;d<p;++d)((m=u[d]).y>=o||u[(d-1+p)%p].y>=o||u[(d+1)%p].y>=o)&&g.push(m);var _=[];for(d=0,p=g.length;d<p;++d)((m=g[d]).x<=s||g[(d-1+p)%p].x<=s||g[(d+1)%p].x<=s)&&_.push(m);var f=[];for(d=0,p=_.length;d<p;++d)((m=_[d]).y<=a||_[(d-1+p)%p].y<=a||_[(d+1)%p].y<=a)&&f.push(m);f.length>2&&r.push(f)}return r}var a=t("../../../lib/geo"),r=a.Coordinate,l=a.MapRect,h=t("./styled-overlay-internal"),c=t("./polygon-overlay-node"),u=t("../line-simplification"),d=t("@maps/js-utils"),p=t("../types-internal");n.prototype=d.inheritPrototype(h,n,{get points(){return this._points.map(function(t){return t.slice()})},set points(t){d.checkArray(t,"[MapKit] PolygonOverlay.points expected an array of Coordinates."),Array.isArray(t[0])||(t=[t]),this._points=t.map(function(t,e){return d.checkArray(t,"[MapKit] PolygonOverlay.points expected an array at index: "+e),t.slice()}),this._polygons=this._points.map(function(t,e){return t.map(function(t,i){return d.checkInstance(t,r,"[MapKit] PolygonOverlay.points expected a Coordinate at index: "+e+", "+i),t.toUnwrappedMapPoint()})}),this.updateGeometry()},calculateBoundingRect:function(){var t=o(this._polygons);return delete this._simplifiedShapeLevel,t.size.width>1&&console.warn("[MapKit] Polygon overlay spans over 360 in longitude and may not render correctly."),this._polygons.forEach(function(e){0!==e.length&&(e.forEach(function(e){var i=d.mod(e.x,1);e.x=i+(i<t.minX()?1:0)}),u.preprocessPoints(e,!0))}),t},simplifyShapeAtLevel:function(t){var e=this._simplifiedShapeLevel>t?this._simplifiedShape:this._polygons,i=Math.pow(2,t);return e.reduce(function(t,e){var n=u.filterPointsAtScale(e,i);return n.length>0&&t.push(n),t},[])},clip:function(t,e,i){return!e||p.mapRectContains(e,this._boundingRect)?t:s(t,e,i)}}),e.exports=n},{"../../../lib/geo":2,"../line-simplification":181,"../types-internal":221,"./polygon-overlay-node":198,"./styled-overlay-internal":205,"@maps/js-utils":84}],198:[function(t,e,i){function n(t){s.call(this,t,!0)}function o(t){return t.map(function(t){return t.map(function(t){return t.toString()}).join(",")}).join("|")}var s=t("./styled-overlay-node.js"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(s,n,{stringInfo:function(){var t=this.overlay;return"PolygonOverlayNode<points:"+o(t.points)+">"+(t.style.toString()?"["+t.style+"]":"")}}),e.exports=n},{"./styled-overlay-node.js":206,"@maps/js-utils":84}],199:[function(t,e,i){function n(t,e){Object.defineProperty(this,"_impl",{value:new s(this,t,e)})}var o=t("./styled-overlay"),s=t("./polygon-overlay-internal"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(o,n,{get points(){return this._impl.points},set points(t){this._impl.points=t}}),e.exports=n},{"./polygon-overlay-internal":197,"./styled-overlay":208,"@maps/js-utils":84}],200:[function(t,e,i){function n(t,e,i){l.call(this,new h(this),t,i),this.points=e,this.updateGeometry()}function o(t,e,i){for(var n,o=e.minX()-i,s=e.minY()-i,a=e.maxX()+i,r=e.maxY()+i,l=[],h=0,c=t.length;h<c-1;++h){var u,d=t[h],p=t[h+1],m=p.x-d.x;if(0!==m){var g=(o-d.x)/m,_=(a-d.x)/m;u=!(g<0&&_<0||g>1&&_>1)}else u=d.x>=o&&d.x<=a;if(u){var f=p.y-d.y;if(0!==f){var y=(s-d.y)/f,v=(r-d.y)/f;u=!(y<0&&v<0||y>1&&v>1)}else u=d.y>=s&&d.y<=r}u?(n||(n=[]),n.push(d)):n&&(n.push(d),l.push(n),n=null)}return n&&(n.push(p),l.push(n)),l}var s=t("../../../lib/geo"),a=s.Coordinate,r=s.MapRect,l=t("./styled-overlay-internal"),h=t("./polyline-overlay-node"),c=t("../line-simplification"),u=t("../types-internal"),d=t("@maps/js-utils");n.prototype=d.inheritPrototype(l,n,{_fillable:!1,get points(){return this._points.slice()},set points(t){d.checkInstance(t,Array,"[MapKit] PolylineOverlay.points expected an array of Coordinates."),this._points=t.slice(),this._mapPoints=this._points.map(function(t,e){return d.checkInstance(t,a,"[MapKit] PolylineOverlay.points expected a Coordinate at index: "+e),t.toUnwrappedMapPoint()}),this._pointsNeedRemapping=!0,this.updateGeometry()},calculateBoundingRect:function(){if(0===this._mapPoints.length)return new r(0,0,0,0);var t=this._mapPoints.reduce(function(t,e){return e.x<t.xMin&&(t.xMin=e.x),e.x>t.xMax&&(t.xMax=e.x),e.y<t.yMin&&(t.yMin=e.y),e.y>t.yMax&&(t.yMax=e.y),t},{xMin:1/0,xMax:-1/0,yMin:1,yMax:0}),e=t.xMax-t.xMin,i=d.mod(t.xMin,1);if(this._pointsNeedRemapping){delete this._pointsNeedRemapping,e>1&&console.warn("[MapKit] Polyline overlay spans over 360 in longitude and may not render correctly.");var n=t.xMin-i;this._mapPoints.forEach(function(t){t.x-=n}),c.preprocessPoints(this._mapPoints),delete this._simplifiedShapeLevel}return new r(i,t.yMin,e,t.yMax-t.yMin)},simplifyShapeAtLevel:function(t){var e=this._simplifiedShapeLevel>t?this._simplifiedShape:this._mapPoints;return c.filterPointsAtScale(e,Math.pow(2,t))},clip:function(t,e,i){return!e||u.mapRectContains(e,this._boundingRect)?0===t.length?[]:[t]:o(t,e,i)}}),e.exports=n},{"../../../lib/geo":2,"../line-simplification":181,"../types-internal":221,"./polyline-overlay-node":201,"./styled-overlay-internal":205,"@maps/js-utils":84}],201:[function(t,e,i){function n(t){s.call(this,t,!1)}function o(t){return t.map(function(t){return t.toString()}).join(",")}var s=t("./styled-overlay-node.js"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(s,n,{stringInfo:function(){var t=this.overlay;return"PolylineOverlayNode<points:"+o(t.points)+">"+(t.style.toString()?"["+t.style+"]":"")}}),e.exports=n},{"./styled-overlay-node.js":206,"@maps/js-utils":84}],202:[function(t,e,i){function n(t,e){Object.defineProperty(this,"_impl",{value:new s(this,t,e)})}var o=t("./styled-overlay"),s=t("./polyline-overlay-internal"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(o,n,{get points(){return this._impl.points},set points(t){this._impl.points=t}}),e.exports=n},{"./polyline-overlay-internal":200,"./styled-overlay":208,"@maps/js-utils":84}],203:[function(t,e,i){function n(t){o.EventTarget(this),a.checkOptions(t);for(var e in t){var i=Object.getOwnPropertyDescriptor(n.prototype,e);i&&i.set?this[e]=t[e]:console.warn("[MapKit] Style has no property named `"+e+"`, ignoring.")}}var o=t("@maps/dom-events"),s=t("../utils"),a=t("@maps/js-utils"),r={lineCap:["butt","round","square"],lineJoin:["miter","round","bevel"],fillRule:["nonzero","evenodd"]};n.UPDATE_EVENT="update-style";n.prototype={constructor:n,_strokeColor:"rgb(0, 122, 255)",_strokeOpacity:1,_lineWidth:1,_lineCap:"round",_lineJoin:"round",_lineDash:[],_lineDashOffset:0,_fillColor:"rgb(0, 122, 255)",_fillOpacity:.1,_fillRule:"nonzero",get strokeColor(){return this._strokeColor},set strokeColor(t){null!=t&&a.checkType(t,"string","[MapKit] Expected a string value for Style.strokeColor, but got `"+t+"` instead."),this._strokeColor!==t&&(this._strokeColor=t,this._updated())},get strokeOpacity(){return this._strokeOpacity},set strokeOpacity(t){a.checkType(t,"number","[MapKit] Expected a number value for Style.strokeOpacity, but got `"+t+"` instead.");var e=a.clamp(t,0,1);this._strokeOpacity!==e&&(this._strokeOpacity=e,this._updated())},get lineWidth(){return this._lineWidth},set lineWidth(t){a.checkType(t,"number","[MapKit] Expected a number value for Style.lineWidth, but got `"+t+"` instead.");var e=Math.max(0,t);this._lineWidth!==e&&(this._lineWidth=e,this._updated())},get lineCap(){return this._lineCap},set lineCap(t){var e=r.lineCap,i="[MapKit] Expected one of "+e.map(function(t){return"`"+t+"`"}).join(", ")+" for Style.lineCap, but got `"+t+"` instead.";if(a.checkType(t,"string",i),e.indexOf(t)<0)throw new TypeError(i);this._lineCap!==t&&(this._lineCap=t,this._updated())},get lineJoin(){return this._lineJoin},set lineJoin(t){var e=r.lineJoin,i="[MapKit] Expected one of "+e.map(function(t){return"`"+t+"`"}).join(", ")+" for Style.lineJoin, but got `"+t+"` instead.";if(a.checkType(t,"string",i),e.indexOf(t)<0)throw new TypeError(i);this._lineJoin!==t&&(this._lineJoin=t,this._updated())},get lineDash(){return this._lineDash},set lineDash(t){a.checkArray(t,"[MapKit] Expected an array of numbers for Style.lineDash, but got `"+t+"` instead."),t.forEach(function(t,e){a.checkType(t,"number","[MapKit] Expected an array of numbers for Style.lineDash, but got `"+t+"` at index "+e+" instead.")}),this._lineDash=t.slice(),this._updated()},get lineDashOffset(){return this._lineDashOffset},set lineDashOffset(t){a.checkType(t,"number","[MapKit] Expected a number value for Style.lineDashOffset, but got `"+t+"` instead."),this._lineDashOffset!==t&&(this._lineDashOffset=t,this._updated())},get fillColor(){return this._fillColor},set fillColor(t){null!=t&&a.checkType(t,"string","[MapKit] Expected a string value for Style.fillColor, but got `"+t+"` instead."),this._fillColor!==t&&(this._fillColor=t,this._updated())},get fillOpacity(){return this._fillOpacity},set fillOpacity(t){a.checkType(t,"number","[MapKit] Expected a number value for Style.fillOpacity, but got `"+t+"` instead.");var e=a.clamp(t,0,1);this._fillOpacity!==e&&(this._fillOpacity=e,this._updated())},get fillRule(){return this._fillRule},set fillRule(t){var e=r.fillRule,i="[MapKit] Expected one of "+e.map(function(t){return"`"+t+"`"}).join(", ")+" for Style.fillRule, but got `"+t+"` instead.";if(a.checkType(t,"string",i),e.indexOf(t)<0)throw new TypeError(i);this._fillRule!==t&&(this._fillRule=t,this._updated())},shouldStroke:function(){return this.strokeColor&&this.strokeOpacity>0&&this.lineWidth>0},shouldFill:function(){return this.fillColor&&this.fillOpacity>0},halfStrokeWidthAtResolution:function(){return this.strokeColor&&this.strokeOpacity>0?this.lineWidth/2*s.devicePixelRatio:0},styleForHitTesting:function(t){var e=Object.create(this);return null!=this._fillColor&&(e._fillColor="rgb(0, 122, 255)",e._fillOpacity=1),e._strokeColor="rgb(0, 122, 255)",e._strokeOpacity=1,e._lineWidth=this.lineWidth+t,e._impl=e,e},toString:function(){return["strokeColor","strokeOpacity","lineWidth","lineCap","lineJoin","lineDash","lineDashOffset","fillColor","fillOpacity","fillRule"].filter(function(t){return this.hasOwnProperty("_"+t)},this).map(function(t){return t+":"+(Array.isArray(this[t])?JSON.stringify(this[t]):this[t])},this).join(",")},_updated:function(){this.dispatchEvent(new o.Event(n.UPDATE_EVENT))}},e.exports=n},{"../utils":225,"@maps/dom-events":62,"@maps/js-utils":84}],204:[function(t,e,i){function n(t){Object.defineProperty(this,"_impl",{value:new o(t)})}var o=t("./style-internal.js");n.prototype={constructor:n,get strokeColor(){return this._impl.strokeColor},set strokeColor(t){this._impl.strokeColor=t},get strokeOpacity(){return this._impl.strokeOpacity},set strokeOpacity(t){this._impl.strokeOpacity=t},get lineWidth(){return this._impl.lineWidth},set lineWidth(t){this._impl.lineWidth=t},get lineCap(){return this._impl.lineCap},set lineCap(t){this._impl.lineCap=t},get lineJoin(){return this._impl.lineJoin},set lineJoin(t){this._impl.lineJoin=t},get lineDash(){return this._impl.lineDash},set lineDash(t){this._impl.lineDash=t},get lineDashOffset(){return this._impl.lineDashOffset},set lineDashOffset(t){this._impl.lineDashOffset=t},get fillColor(){return this._impl.fillColor},set fillColor(t){this._impl.fillColor=t},get fillOpacity(){return this._impl.fillOpacity},set fillOpacity(t){this._impl.fillOpacity=t},get fillRule(){return this._impl.fillRule},set fillRule(t){this._impl.fillRule=t},toString:function(){return this._impl.toString()}},e.exports=n},{"./style-internal.js":203}],205:[function(t,e,i){function n(t,e,i){if(i&&"object"==typeof i&&"style"in i){this.style=i.style;var n={};Object.keys(i).forEach(function(t){"style"!==t&&(n[t]=i[t])}),i=n}o.call(this,t,e,i)}var o=t("./overlay-internal"),s=t("./style"),a=t("./style-internal"),r=t("../utils"),l=t("@maps/js-utils");n.prototype=l.inheritPrototype(o,n,{constructor:n,_fillable:!0,fadeInOutOpacity:{value:1},get style(){return this._style||(this._style=new s,this._style._impl.addEventListener(a.UPDATE_EVENT,this)),this._style},set style(t){if(this._style){if(this._style===t)return;this._style._impl.removeEventListener(a.UPDATE_EVENT,this)}l.checkInstance(t,s,"[MapKit] Expected a mapkit.Style value for Overlay.style, but got `"+t+"` instead."),this._style!==t&&(this._style=t,this._style&&this._style._impl.addEventListener(a.UPDATE_EVENT,this),this.updatedProperty("style"))},visibilityToleranceAtScale:function(t){return this.style._impl.halfStrokeWidthAtResolution()/t},clipOverlay:function(t,e,i,n,o){if(this._simplifiedShapeLevel!==n){var s=Math.abs(this._simplifiedShapeLevel-n),a=!!this._hasPoints,r=this._simplifiedShape;this._simplifiedShape=this.simplifyShapeAtLevel(n),this._simplifiedShapeLevel=n,this._hasPoints=this._simplifiedShape.length>0,1===s&&a!==this._hasPoints&&(this.delegate.fadeOverlayTo(this,a?0:1),a&&(this.fadeInOutOpacity.previousShape=this.clip(r)))}var l=this.fadeInOutOpacity.previousShape||(e||!this.clippedShape?this.clip(this._simplifiedShape,t,this.style._impl.halfStrokeWidthAtResolution()/i):this.clippedShape);return o&&(this.clippedShape=l),l},setFadeInOutOpacity:function(t){this.fadeInOutOpacity.value=t,this.updatedProperty("style")},handleEvent:function(t){t.type===a.UPDATE_EVENT&&this.updatedProperty("style")},fillPath:function(t,e){t.save(),t.fillStyle=e.fillColor,t.globalAlpha=e.fillOpacity*this.fadeInOutOpacity.value,t.fill(e.fillRule),t.restore()},strokePath:function(t,e,i){t.save(),t.strokeStyle=e.strokeColor,t.globalAlpha=e.strokeOpacity*this.fadeInOutOpacity.value;var n=i||r.devicePixelRatio;t.lineWidth=e.lineWidth*n,e.lineDash.length>0&&"function"==typeof t.setLineDash&&(t.setLineDash(e.lineDash.map(function(t){return t*n})),t.lineDashOffset=e.lineDashOffset*n),t.lineJoin=e.lineJoin,t.lineCap=e.lineCap,t.stroke(),t.restore()},updateGeometry:function(){var t=this.calculateBoundingRect();t&&(this._boundingRect=t,this.updatedProperty("geometry"))}}),e.exports=n},{"../utils":225,"./overlay-internal":192,"./style":204,"./style-internal":203,"@maps/js-utils":84}],206:[function(t,e,i){function n(t,e,i){o.call(this,t),this._closed=!!e,this._renderer=i||new s(this)}var o=t("./overlay-node.js"),s=t("./styled-overlay-renderer.js"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(o,n,{get closed(){return this._closed}}),e.exports=n},{"./overlay-node.js":193,"./styled-overlay-renderer.js":207,"@maps/js-utils":84}],207:[function(t,e,i){function n(t){o.RenderItem.call(this,t)}var o=t("../../../lib/scene-graph"),s=t("@maps/js-utils"),a=t("@maps/geometry/point");n.prototype=s.inheritPrototype(o.RenderItem,n,{draw:function(t){if(this._node.overlay.map){var e=this._node.overlay.map._impl.camera;this.render(t,e.toRenderingMapRect(),e)}},render:function(t,e,i,n){var o=this._node.overlay.style;"number"==typeof n&&(o=o._impl.styleForHitTesting(n));var s=this._node.closed&&o._impl.shouldFill(),a=o._impl.shouldStroke();(s||a)&&this.drawShapes(t,o,s,a,e,i)},drawShapes:function(t,e,i,n,o,s){var r=s.toRenderingMapRect(),l=new a(r.minX()-o.minX(),r.minY()-o.minY());t.beginPath(),this._node.shapes.forEach(function(e){e.forEach(function(i){var n=s.transformMapPoint(new a(i[0].x+e.xOffset+l.x,i[0].y+l.y));t.moveTo(n.x,n.y);for(var o=1,r=i.length;o<r;o++)n=s.transformMapPoint(new a(i[o].x+e.xOffset+l.x,i[o].y+l.y)),t.lineTo(n.x,n.y);this._node.closed&&t.closePath()},this)},this),i&&this._node.overlay.fillPath(t,e),n&&this._node.overlay.strokePath(t,e,1)}}),e.exports=n},{"../../../lib/scene-graph":47,"@maps/geometry/point":69,"@maps/js-utils":84}],208:[function(t,e,i){function n(t){Object.defineProperty(this,"_impl",{value:new s(this,t)})}var o=t("./overlay"),s=t("./styled-overlay-internal"),a=t("@maps/js-utils");n.prototype=a.inheritPrototype(o,n,{constructor:n,get style(){return this._impl.style},set style(t){this._impl.style=t}}),e.exports=n},{"./overlay":194,"./styled-overlay-internal":205,"@maps/js-utils":84}],209:[function(t,e,i){function n(){var t=arguments.length;if(1===t&&"object"==typeof arguments[0]){this.top=0,this.right=0,this.bottom=0,this.left=0;var e=arguments[0];Object.keys(e).forEach(function(t){"top"===t||"right"===t||"bottom"===t||"left"===t?this[t]=e[t]:console.warn("[MapKit] Unknown property `"+t+"` for Padding constructor.")},this)}else this.top=t>0?arguments[0]:0,this.right=t>1?arguments[1]:0,this.bottom=t>2?arguments[2]:0,this.left=t>3?arguments[3]:0;o.checkType(this.top,"number","[MapKit] Expected a number for `top` in Padding constructor but got `"+this.top+"` instead."),o.checkType(this.left,"number","[MapKit] Expected a number for `left` in Padding constructor but got `"+this.left+"` instead."),o.checkType(this.bottom,"number","[MapKit] Expected a number for `bottom` in Padding constructor but got `"+this.bottom+"` instead."),o.checkType(this.right,"number","[MapKit] Expected a number for `right` in Padding constructor but got `"+this.right+"` instead.")}var o=t("@maps/js-utils");n.Zero=new n,n.prototype={constructor:n,toString:function(){return"Padding("+[this.top,this.right,this.bottom,this.left].join(", ")+")"},copy:function(){return new n(this.top,this.right,this.bottom,this.left)},equals:function(t){return this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left}},e.exports=n},{"@maps/js-utils":84}],210:[function(t,e,i){function n(t){t=h.checkOptions(t),this._checkOptions(t,u),c.call(this,"Directions",t)}function o(t){if("string"==typeof t)return{q:t};if("object"==typeof t&&t.muid)return{muid:t.muid};var e=t.coordinate||t;if(e instanceof l)return{loc:{lat:e.latitude,lng:e.longitude}};throw new Error("[MapKit] Location must be an address (string), Coordinate object or Place object.")}function s(t,e,i){this.name=t.name,this.distance=t.distanceMeters,this.expectedTravelTime=t.durationSeconds,this.transportType=t.transportType,this._path=t.stepIndexes.map(function(t){return i[t]}),this.steps=t.stepIndexes.map(function(t){return e[t]})}function a(t,e){this.instructions=t.instructions,this.pathIndex=t.stepPathIndex,this.distance=t.distanceMeters,this.transportType=t.transportType,this.path=e[t.stepPathIndex]}var r=t("../configuration"),l=t("../../../lib/geo").Coordinate,h=t("@maps/js-utils"),c=t("./service-internal"),u=["language"],d=["origin","destination","transportType","requestsAlternateRoutes"];n.Transport={Automobile:"AUTOMOBILE",Walking:"WALKING"},n.prototype=h.inheritPrototype(c,n,{constructor:n,route:function(t,e){if(h.required(t,"[MapKit] Missing `request` in call to `Directions.route()`.").checkOptions(t,"[MapKit] `request` is not a valid object."),h.required(e,"[MapKit] Missing `callback` in call to `Directions.route()`.").checkType(e,"function","[MapKit] `callback` passed to `Directions.route()` is not a function."),"CN"===r.countryCode)return e(new Error("Directions aren't supported in China yet.")),0;this._checkOptions(t,d);var i={},s=t.origin,a=t.destination,l=t.transportType;h.required(s,"[MapKit] Missing required property `origin` in `request` object."),h.required(a,"[MapKit] Missing required property `destination` in `request` object."),i.wps=JSON.stringify([o(s),o(a)]),l&&(l===n.Transport.Automobile||l===n.Transport.Walking?i.transport=l:console.warn("[MapKit] transportType must be either Directions.Transport.Automobile or Directions.Transport.Walking.")),t.hasOwnProperty("requestsAlternateRoutes")?i.n=t.requestsAlternateRoutes?"3":"1":i.n="1";var c=this.language||r.language;return c&&(i.lang=c),this._send("directions",i,e,this._handleResponse)},_handleResponse:function(t,e){var i=e.stepPaths.map(function(t){return t.map(function(t){return new l(t.lat,t.lng)})}),n=e.steps.map(function(t){return new a(t,i)});return{request:t,routes:e.routes.map(function(t){return new s(t,n,i)})}}}),s.prototype={get path(){return console.warn("[MapKit] The `Route.path` property is deprecated and will be removed in a future release."),this._path}},n.Route=s,e.exports=n},{"../../../lib/geo":2,"../configuration":159,"./service-internal":217,"@maps/js-utils":84}],211:[function(t,e,i){function n(t){Object.defineProperty(this,"_impl",{value:new a(t)})}var o=t("@maps/js-utils"),s=t("./service"),a=t("./directions-internal");n.Transport=a.Transport,n.prototype=o.inheritPrototype(s,n,{constructor:n,route:function(t,e){return this._impl.route(t,e)}}),e.exports=n},{"./directions-internal":210,"./service":218,"@maps/js-utils":84}],212:[function(t,e,i){"use strict";function n(t){t=s.checkOptions(t),this._checkOptions(t,c),r.call(this,"Geocoder",t)}var o=t("../configuration"),s=t("@maps/js-utils"),a=t("../../../lib/geo"),r=t("./service-internal"),l=a.BoundingRegion,h=a.Coordinate,c=["language","getsUserLocation"],u=["language","region","coordinate","limitToCountries"],d=["language"];n.prototype=s.inheritPrototype(r,n,{constructor:n,lookup:function(t,e,i){var n={};i=s.checkOptions(i),this._checkOptions(i,u),s.required(t,"[MapKit] Missing `address` in call to `Geocoder.lookup()`.").checkType(t,"string","[MapKit] `address` passed to `Geocoder.lookup()` is not a string."),s.required(e,"[MapKit] Missing `callback` in call to `Geocoder.lookup()`.").checkType(e,"function","[MapKit] `callback` passed to `Geocoder.lookup()` is not a function."),n.q=t;var a=i.region,r=i.coordinate,l=i.limitToCountries,h=this.language||o.language;if(a){var c=a.toBoundingRegion();n.searchRegion=[c.northLatitude,c.eastLongitude,c.southLatitude,c.westLongitude].join(",")}else r&&(n.searchLocation=[r.latitude,r.longitude].join(","));return i.language&&(h=this._bestLanguage(i.language)),h&&(n.lang=h),l&&(s.checkType(l,"string","[MapKit] `limitToCountries` is not a string."),n.limitToCountries=l),this._sendImmediatelyOrWithUserLocation("geocode",n,e,this._transform)},reverseLookup:function(t,e,i){var n={},a=this.language||o.language;return i=s.checkOptions(i),this._checkOptions(i,d),s.required(t,"[MapKit] Missing `coordinate` in call to `Geocoder.reverseLookup()`.").checkInstance(t,h,"[MapKit] `coordinate` passed to `Geocoder.reverseLookup()` is not a Coordinate."),s.required(e,"[MapKit] Missing `callback` in call to `Geocoder.reverseLookup()`.").checkType(e,"function","[MapKit] `callback` passed to `Geocoder.reverseLookup()` is not a function."),n.loc=t.latitude+","+t.longitude,i.language&&(a=this._bestLanguage(i.language)),a&&(n.lang=a),this._send("reverseGeocode",n,e,this._transform)},_transform:function(t,e){var i={status:e.status,results:[]};return e.results&&(i.results=e.results.map(function(t){var e,i,n={};return t.displayMapRegion&&(e=t.displayMapRegion,i=new l(e.northLat,e.eastLng,e.southLat,e.westLng),n.region=i.toCoordinateRegion(),n.coordinate=n.region.center),t.formattedAddressLines&&(n.formattedAddress=t.formattedAddressLines.join(", ")),t.center&&(n.coordinate=new h(t.center.lat,t.center.lng)),t.countryCode&&(n.countryCode=t.countryCode),t.geocodeAccuracy&&(n.geocodeAccuracy=t.geocodeAccuracy),n})),i}}),e.exports=n},{"../../../lib/geo":2,"../configuration":159,"./service-internal":217,"@maps/js-utils":84}],213:[function(t,e,i){function n(t){Object.defineProperty(this,"_impl",{value:new a(t)})}var o=t("@maps/js-utils"),s=t("./service"),a=t("./geocoder-internal");n.prototype=o.inheritPrototype(s,n,{constructor:n,lookup:function(t,e,i){return this._impl.lookup(t,e,i)},reverseLookup:function(t,e,i){return this._impl.reverseLookup(t,e,i)}}),e.exports=n},{"./geocoder-internal":212,"./service":218,"@maps/js-utils":84}],214:[function(t,e,i){function n(){this._requests={},this._types={},this._counter=1}n.prototype={constructor:n,add:function(t,e){console.assert(e&&-1!==["query","geo","xhr"].indexOf(e),"Invalid type: "+e);var i=this._counter;return this._counter+=1,this._requests[i]=t,this._types[i]=e,i},get:function(t){return console.assert(t&&"number"==typeof t,"Invalid ID: "+t),this._requests[t]},typeForId:function(t){return console.assert(t&&"number"==typeof t,"Invalid ID: "+t),this._types[t]},idsByType:function(t){return Object.keys(this._requests).filter(function(e){return this._types[e]===t},this).map(function(t){return parseInt(t)})},remove:function(t){return console.assert(t&&"number"==typeof t,"Invalid ID: "+t),!!this.get(t)&&(delete this._requests[t],delete this._types[t],!0)}},e.exports=n},{}],215:[function(t,e,i){function n(t){this.displayLines=t.displayLines,t.location&&(this.coordinate=new u(t.location.lat,t.location.lng)),this._completionUrl=t.completionUrl}function o(t){t=a.checkOptions(t),this._checkOptions(t,d),l.call(this,"Search",t),this.coordinate=t.coordinate,this.region=t.region}var s=t("../configuration"),a=t("@maps/js-utils"),r=t("../../../lib/geo"),l=t("./service-internal"),h=r.BoundingRegion,c=r.CoordinateRegion,u=r.Coordinate,d=["language","getsUserLocation","coordinate","region"],p=["language","region","coordinate"];o.prototype=a.inheritPrototype(l,o,{constructor:o,get coordinate(){return this._coordinate},set coordinate(t){null!=t&&(a.checkInstance(t,u,"[MapKit] Search.coordinate expected a Coordinate value."),t=t.copy()),this._coordinate=t},get region(){return this._region},set region(t){null!=t&&(a.checkInstance(t,c,"[MapKit] Search.region expected a CoordinateRegion value."),t=t.copy()),this._region=t},search:function(t,e,i){return this._request("search","search",this._searchTransform,t,e,i)},autocomplete:function(t,e,i){this._request("autocomplete","searchAutocomplete",this._autocompleteTransform,t,e,i)},_request:function(t,e,i,o,r,l){if("object"==typeof r){var h=r;r=function(e,i){var n="search"===t?h.searchDidError:h.autocompleteDidError,o="search"===t?h.searchDidComplete:h.autocompleteDidComplete;e?"function"==typeof n&&n(e):"function"==typeof o&&o(i)}}var c={};l=a.checkOptions(l),this._checkOptions(l,p);var u="Search."+t+"()";a.required(o,"[MapKit] Missing `query` in call to `"+u+"`."),a.required(r,"[MapKit] Missing `callback` in call to `"+u+"`.").checkType(r,"function","[MapKit] `callback` passed to `"+u+"` is not a function."),o instanceof n?e=o._completionUrl:(console.assert("string"==typeof o,"[MapKit] `query` passed to `"+u+"` is neither a string nor SearchAutocompleteResult."),c.q=o);var d=l.region||this.region,m=l.coordinate||this.coordinate,g=this.language||s.language;if(d){var _=d.toBoundingRegion();c.searchRegion=[_.northLatitude,_.eastLongitude,_.southLatitude,_.westLongitude].join(",")}else m&&(c.searchLocation=[m.latitude,m.longitude].join(","));return l.language&&(g=this._bestLanguage(l.language)),g&&(c.lang=g),this._sendImmediatelyOrWithUserLocation(e,c,r,i)},_searchTransform:function(t,e){var i={places:[]};if(t.q&&(i.query=t.q),e.displayMapRegion){var n=new h(e.displayMapRegion.northLat,e.displayMapRegion.eastLng,e.displayMapRegion.southLat,e.displayMapRegion.westLng);i.boundingRegion=n.toCoordinateRegion()}return e.results&&(i.places=e.results.map(function(t){var e,i,n={};return t.muid&&(n.muid=t.muid),t.name&&(n.name=t.name),t.displayMapRegion&&(e=t.displayMapRegion,i=new h(e.northLat,e.eastLng,e.southLat,e.westLng),n.region=i.toCoordinateRegion(),n.coordinate=n.region.center),t.formattedAddressLines&&(n.formattedAddress=t.formattedAddressLines.join(", ")),t.center&&(n.coordinate=new u(t.center.lat,t.center.lng)),t.countryCode&&(n.countryCode=t.countryCode),n})),i},_autocompleteTransform:function(t,e){var i={query:t.q,results:[]};return e.results&&(i.results=e.results.map(function(t){return new n(t)})),i}}),e.exports=o},{"../../../lib/geo":2,"../configuration":159,"./service-internal":217,"@maps/js-utils":84}],216:[function(t,e,i){function n(t){Object.defineProperty(this,"_impl",{value:new a(t)})}var o=t("@maps/js-utils"),s=t("./service"),a=t("./search-internal");n.prototype=o.inheritPrototype(s,n,{constructor:n,get coordinate(){return this._impl.coordinate},set coordinate(t){this._impl.coordinate=t},get region(){return this._impl.region},set region(t){this._impl.region=t},search:function(t,e,i){return this._impl.search(t,e,i)},autocomplete:function(t,e,i){return this._impl.autocomplete(t,e,i)}}),e.exports=n},{"./search-internal":215,"./service":218,"@maps/js-utils":84}],217:[function(t,e,i){function n(t,e){this._name=t,this._requestMap=new h,o.state===o.States.ERROR&&(this._configFailed=!0),this.language=e.language,this.getsUserLocation=!!e.getsUserLocation}var o=t("../configuration"),s=t("../localizer").languageSupport,a=t("@maps/js-utils"),r=t("../user-location/user-location"),l=t("../../../lib/geo").Coordinate,h=t("./request-map"),c=t("@maps/loaders").XHRLoader,u={enableHighAccuracy:!1,timeout:8e3,maximumAge:9e5};n.prototype={constructor:n,get getsUserLocation(){return this._getsUserLocation},set getsUserLocation(t){this._getsUserLocation=!!t},get language(){return this._language},set language(t){this._language=null==t?null:this._bestLanguage(t)},cancel:function(t){a.required(t,"[MapKit] Missing `id` in call to `"+this._name+".cancel()`.").checkType(t,"number","[MapKit] `id` passed to `"+this._name+".cancel()` is not a number.");var e=this._requestMap.typeForId(t);if(e)switch(e){case"query":case"geo":return this._requestMap.remove(t);case"xhr":var i=this._requestMap.get(t);if(i)return i.unschedule(),this._requestMap.remove(t);break;default:console.assert(!1,"Unknown type: "+e)}return!1},handleEvent:function(t){switch(t.type){case o.Events.Error:this._configFailed=!0;case o.Events.Changed:this._requestMap.idsByType("query").forEach(function(t){var e=this._requestMap.get(t);this._send(e.path,e.parameters,e.callback,e.transform),this._requestMap.remove(t)},this)}0===this._requestMap.idsByType("query").length&&this._stopWatchingConfiguration()},_watchingConfiguration:!1,_watchConfiguration:function(){this._watchingConfiguration||(this._watchingConfiguration=!0,o.addEventListener(o.Events.Changed,this),o.addEventListener(o.Events.Error,this))},_stopWatchingConfiguration:function(){this._watchingConfiguration&&(this._watchingConfiguration=!1,o.removeEventListener(o.Events.Changed,this),o.removeEventListener(o.Events.Error,this))},_send:function(t,e,i,n){var s=this._requestMap;if(!o.apiBaseUrl||o.state===o.States.PENDING)return this._configFailed?(i(new Error("MapKit failed to initialize.")),0):(console.warn("[MapKit] The configuration has not been initialized, or it is loading. The request has been queued."),this._watchConfiguration(),s.add({path:t,parameters:e,callback:i,transform:n},"query"));var r;if(0===t.search(/\/v?[0-9]+\//)){var l=a.parseURL(o.apiBaseUrl);r=l.protocol+"//"+l.hostname,l.port&&(r+=":"+l.port),r+=t}else r=o.apiBaseUrl+t;e=e||{};var h=a.toQueryString(e);""!==h&&(r+=(a.parseURL(r).search?"&":"?")+h);var u=new c(r,{loaderDidSucceed:function(t,o){var a;if(s.remove(t.id),o.status<200||o.status>=300)i(new Error("HTTP error:"+o.status));else{try{a=JSON.parse(o.responseText)}catch(t){return void i(new Error("Failed to parse response:"+o.responseText))}i(null,n(e,a))}},loaderDidFail:function(t,e){s.remove(t.id);var n="Network error";e.status===o.HTTP.UNAUTHORIZED?n=o.ErrorStatus.Unauthorized:e.status===o.HTTP.TOO_MANY_REQUESTS&&(n=o.ErrorStatus.TooManyRequests),i(new Error(n))}},o.appendServiceAuthOptions({}));return u.schedule(),u.id=s.add(u,"xhr"),u.id},_sendImmediatelyOrWithUserLocation:function(t,e,i,n){return this.getsUserLocation||e.getsUserLocation?this._sendWithUserLocation.apply(this,arguments):this._send.apply(this,arguments)},_sendWithUserLocation:function(t,e,i,n){var o=this._requestMap.add({path:t,parameters:e,callback:i,transform:n},"geo");return this._locate(function(t,e){var i=this._requestMap.get(o);i&&(t?console.warn("[MapKit] Unable to get current location:",t.message):i.parameters.userLocation=[e.latitude,e.longitude].join(","),this._send(i.path,i.parameters,i.callback,i.transform),this._requestMap.remove(o))}.bind(this)),o},_checkOptions:function(t,e){a.checkType(t,"object","[MapKit] The `options` object is invalid."),Object.keys(t).forEach(function(t){-1===e.indexOf(t)&&console.warn("[MapKit] `"+t+"` is not a valid option.")})},_bestLanguage:function(t){a.checkType(t,"string","[MapKit] `language` is not a string.");var e=s.bestMatch(t);return null===e?console.warn("[MapKit] Geocoder: "+t+" is not supported."):e!==t&&console.warn("[MapKit] Geocoder: "+t+" is not supported. Substituting "+e+""),e},_locate:function(t){a.required(t,"Missing callback").checkType(t,"function"),r.locate(function(e){var i=e.coords;t(null,new l(i.latitude,i.longitude))},function(e){var i;switch(e.code){case e.PERMISSION_DENIED:i="PERMISSION_DENIED";break;case e.POSITION_UNAVAILABLE:i="POSITION_UNAVAILABLE";break;case e.TIMEOUT:i="TIMEOUT";break;default:console.assert(!1,"Unknown PositionError code: "+e.code)}t(new Error(i))},u)}},e.exports=n},{"../../../lib/geo":2,"../configuration":159,"../localizer":182,"../user-location/user-location":224,"./request-map":214,"@maps/js-utils":84,"@maps/loaders":85}],218:[function(t,e,i){function n(t,e){Object.defineProperty(this,"_impl",{value:new o(t,e)})}var o=t("./service-internal");n.prototype={constructor:n,get getsUserLocation(){return this._impl.getsUserLocation},set getsUserLocation(t){this._impl.getsUserLocation=t},get language(){return this._impl.language},set language(t){this._impl.language=t},cancel:function(t){return this._impl.cancel(t)}},e.exports=n},{"./service-internal":217}],219:[function(t,e,i){window.console||(window.console=t("./console")),window.mapkit=t("./index")},{"./console":160,"./index":175}],220:[function(t,e,i){function n(){this._element=a.htmlElement("div",{class:r})}function o(t){for(var e,i=[t];i.length>0;)if((t=i.shift()).nodeType===window.Node.ELEMENT_NODE){var n=window.getComputedStyle(t),o=parseFloat(n.marginLeft),a=parseFloat(n.marginTop),r=parseFloat(n.marginRight),l=parseFloat(n.marginBottom),h=s.rectFromClientRect(t.getBoundingClientRect()).inset(-o,-a,-r,-l);h.size.width>0&&h.size.height>0&&(e=e?e.unionWithRect(h):h),Array.prototype.push.apply(i,t.childNodes)}return e||new s}var s=t("@maps/geometry/rect"),a=t("./utils"),r="mk-style-helper";n.prototype={constructor:n,get element(){return this._element},sizeForElement:function(t){var e=t.cloneNode(!0);this._element.appendChild(e);var i=o(e);return this._element.removeChild(e),i.size},backgroundColorForElement:function(t){this._element.appendChild(t);var e=window.getComputedStyle(t).backgroundColor;return this._element.removeChild(t),/^transparent|initial|rgba\(.*, 0\)$/.test(e)?null:e}},e.exports=n},{"./utils":225,"@maps/geometry/rect":70}],221:[function(t,e,i){var n=t("../../lib/geo"),o=t("@maps/js-utils"),s=n.Coordinate,a=n.CoordinateRegion,r=n.CoordinateSpan,l=n.MapRect;e.exports={enclosingRegionForCoordinates:function(t){var e=0,i=180,l=-180,h=0,c=90,u=-90;t.forEach(function(t){var s=o.clamp(t.latitude,-90,90);c=Math.min(c,s),u=Math.max(u,s);var a=n.wrapLongitude(t.longitude);a<0?(e=Math.min(e,a),l=Math.max(l,a)):(i=Math.min(i,a),h=Math.max(h,a))});var d,p,m=u-c,g=c+m/2;if(e>l)p=i+(d=h-i)/2;else if(i>h)p=e+(d=l-e)/2;else{var _=h-e,f=360-(i-l);p=_<f?e+(d=_)/2:i+(d=f)/2}return new a(new s(g,p),new r(m,d))},padMapRect:function(t,e){o.checkType(e,"object","[MapKit] MapRect.pad expects a padding object with top, left, bottom, right but got `"+e+"` instead");var i=e.left||0,n=e.top||0;return new l(t.origin.x-i,t.origin.y-n,t.size.width+i+(e.right||0),t.size.height+n+(e.bottom||0))},mapRectContains:function(t,e){var i=e.origin.x,n=e.origin.y,o=t.maxX(),s=t.maxY();return i>=t.origin.x&&i<=o&&n>=t.origin.y&&n<=s&&e.maxX()<=o&&e.maxY()<=s},boundingRectForSortedRects:function(t){if(0===t.length)return new l;if(1===t.length){var e=t[0].minX();return e>=0&&e<1?t[0]:new l(o.mod(e,1),t[0].minY(),t[0].size.width,t[0].size.height)}for(var i=[[t[0].minX(),t[0].maxX()]],n=t[0].minY(),s=t[0].maxY(),a=1,r=t.length,h=0;a<r;++a){var c=i[h],u=t[a];n=Math.min(n,u.minY()),s=Math.max(s,u.maxY()),u.minX()<=c[1]?i[h]=[c[0],Math.max(c[1],u.maxX())]:(i.push([u.minX(),u.maxX()]),++h)}var d=i.length;if(1===d)return new l(i[0][0],n,Math.min(i[0][1]-i[0][0],1),s-n);for(var p=1+i[0][0]-i[d-1][1],m=i[0][0],g=1;g<d;++g){var _=i[g][0]-i[g-1][1];_>p&&(p=_,m=i[g][0])}return new l(o.mod(m,1),n,1-p,s-n)}}},{"../../lib/geo":2,"@maps/js-utils":84}],222:[function(t,e,i){"use strict";var n=t("../build.json"),o=t("@maps/js-utils"),s="";e.exports={createUrl:function(t){return s||(s=n.useLocalResources?this.getMapKitScriptParts().prefix:n.cdnUrl),t=t&&t.replace(/^\//,"")||"",[s,t].join("/")},createImageUrl:function(t){return this.createUrl("images/"+t)},getMapKitScriptParts:function(){for(var t=/(.*)(?=\/mapkit\.js)/,e=document.scripts,i=0,n=e.length;i<n;++i){var s=t.exec(e[i].src);if(s){var a=o.parseURL(e[i].src);return a.prefix=s[0],a}}return{}}}},{"../build.json":111,"@maps/js-utils":84}],223:[function(t,e,i){function n(t){this._delegate=t,this._showsUserLocation=!1,this._tracksUserLocation=!1}var o=t("./user-location");n.prototype={constructor:n,get showsUserLocation(){return this._showsUserLocation},set showsUserLocation(t){this._showsUserLocation=t,t?(o.addEventListener(o.Events.Change,this),o.addEventListener(o.Events.Error,this),o.watch()):(o.removeEventListener(o.Events.Change,this),o.removeEventListener(o.Events.Error,this))},get tracksUserLocation(){return this._tracksUserLocation},set tracksUserLocation(t){this._tracksUserLocation=t,t?(o.addEventListener(o.Events.Change,this),o.addEventListener(o.Events.Error,this),o.watch()):(o.removeEventListener(o.Events.Change,this),o.removeEventListener(o.Events.Error,this))},get userLocation(){return o},handleEvent:function(t){switch(t.type){case o.Events.Change:this._handleUserLocationChange(t);break;case o.Events.Error:this._handleUserLocationError(t)}},mapWasDestroyed:function(){delete this._delegate,o.removeEventListener(o.Events.Change,this),o.removeEventListener(o.Events.Error,this)},_handleUserLocationChange:function(t){o.errorCode=0,this._delegate.userLocationDidChange(t)},_handleUserLocationError:function(t){o.errorCode=t.code,this._delegate.userLocationDidError(t)}},e.exports=n},{"./user-location":224}],224:[function(t,e,i){function n(){clearTimeout(y),y=null}function o(t,e,i){if("AutoNavi"===p.tileProvider){var n=new u(t.coords.latitude,t.coords.longitude);m.shift(n,p.locationShiftUrl,function(n,o){if(n)i&&i(n);else{var s={coords:{latitude:o.latitude,longitude:o.longitude}};"accuracy"in t.coords&&(s.coords.accuracy=t.coords.accuracy),e&&e(s)}})}else e&&e(t)}function s(t){n(),c=t,p.ready?!v._stale&&v._coordinate&&t.coords.latitude===v._coordinate.latitude&&t.coords.longitude===v._coordinate.longitude||o(t,a,r):r({code:4,message:"MapKit not initialized."})}function a(t){v._stale=!1,v._location=t.coords,v._coordinate=new u(t.coords.latitude,t.coords.longitude),v.dispatchEvent(new l(v._coordinate))}function r(t){c=null,v._stale=!0,v.dispatchEvent(new h(t))}function l(t){d.Event.call(this,g.Change),this.coordinate=t,this.timestamp=new Date}function h(t){d.Event.call(this,g.Error),this.code=t.code,this.message=t.message}var c,u=t("../../../lib/geo").Coordinate,d=t("@maps/dom-events"),p=t("../configuration"),m=t("../coordinate-shifter"),g={Change:"user-location-change",Error:"user-location-error"},_=15e3,f=3,y=null,v=new function(){d.EventTarget(this),this.Events=g,this._location=null,this._coordinate=null,this._stale=!1,this._watchers=0,Object.defineProperty(this,"location",{get:function(){return this._location}}),Object.defineProperty(this,"coordinate",{get:function(){return this._coordinate}}),Object.defineProperty(this,"stale",{get:function(){return this._stale}}),this.watch=function(){this._watchId||(n(),this._watchId=window.navigator.geolocation.watchPosition(s,r),y=setTimeout(function(){n(),r({code:f,message:"Timeout expired"})},_))},this.locate=function(t,e,i){c&&this._watchId?o(c,t,e):window.navigator.geolocation.getCurrentPosition(function(i){o(i,t,e)},e,i)},this.addEventListener=function(){d.EventTarget.prototype.addEventListener.apply(this,arguments)&&++this._watchers},this.removeEventListener=function(){d.EventTarget.prototype.removeEventListener.apply(this,arguments)&&0==--this._watchers&&this._watchId&&(window.navigator.geolocation.clearWatch(this._watchId),this._watchId=null)},this.handleEvent=function(t){switch(t.type){case p.Events.Changed:if(!c)return;s(c)}},this.reset=function(){n(),this._watchers=0,this._watchId=null,c=null},p.addEventListener(p.Events.Changed,this)};e.exports=v},{"../../../lib/geo":2,"../configuration":159,"../coordinate-shifter":171,"@maps/dom-events":62}],225:[function(t,e,i){function n(t,e){var i=window.document.createElementNS(this,t),n=1;if("object"==typeof e&&null!=e&&!(e instanceof window.Node)){++n;for(var o in e)i.setAttribute(o,e[o])}for(var s=n,a=arguments.length;s<a;++s){var r=arguments[s];r instanceof window.Node?i.appendChild(r):"string"==typeof r&&i.appendChild(document.createTextNode(r))}return i}var o=t("@maps/device-pixel-ratio"),s=t("@maps/gesture-recognizers").SupportsTouches;e.exports={focusColor:"rgb(0, 122, 255)",classList:t("@maps/class-list"),get devicePixelRatio(){return o()},supportsTouches:s,supportsGestureEvents:!!window.GestureEvent,touchstartOrMousedown:s?"touchstart":"mousedown",touchendOrMouseup:s?"touchend":"mouseup",supportsForceTouch:!s&&"webkitForce"in MouseEvent.prototype,transitionend:document.createElement("div").style.WebkitTransition?"webkitTransitionEnd":"transitionend",htmlElement:n.bind("http://www.w3.org/1999/xhtml"),svgElement:n.bind("http://www.w3.org/2000/svg"),insideIframe:window.top!==window,parentNodeForSvgTarget:function(t){return t.tagName&&"div"!==t.tagName.toLowerCase()?this.parentNodeForSvgTarget(t.parentNode):t},imagePathForDevice:function(t,e,i){var n=(t||[]).indexOf(this.devicePixelRatio)>=0?this.devicePixelRatio:1;return i=i||".png",e+(n>1?"_"+n+"x":"")+".png"},parseQueryString:function(t){var e,i={},n=/\+/g,o=/([^&=]+)=?([^&]*)/g,s=function(t){return decodeURIComponent(t.replace(n," "))};if("string"==typeof t)for(;null!==(e=o.exec(t));)i[s(e[1])]=s(e[2]);return i},createSVGIcon:function(t,e){var i=this.svgElement("svg",e);return i.setAttribute("class","mk-icon"),i.setAttribute("focusable",!1),i.appendChild(this.svgElement("g")).appendChild(t),i},debounce:function(t,e,i){var n;return function(){var o=arguments;n&&window.clearTimeout(n),n=window.setTimeout(function(){n=null,t.apply(i,o)},e||0)}},convertColorToRGB:function(t){var e=document.createElement("div");try{return e.style.setProperty("color",t),e.style.color}catch(t){return""}},isValidCSSColor:function(t){return""!==this.convertColorToRGB(t)},updateLabel:function(t,e){t.setAttribute("title",e),t.setAttribute("aria-label",e)},easeInOut:function(t){var e=Math.pow(t,2);return e/(e+Math.pow(1-t,2))}}},{"@maps/class-list":57,"@maps/device-pixel-ratio":61,"@maps/gesture-recognizers":72}],226:[function(t,e,i){e.exports={"Annotation.Clustering.AccessibilityLabel":"{{n}} locations, {{title}}, {{subtitle}}","Annotation.Clustering.More":"+{{n}} more","Annotation.Clustering.More.Plural":"+{{n}} more","Annotation.Clustering.NoTitle.AccessibilityLabel":"{{n}} locations, {{subtitle}}","Annotation.Generic.AccessibilityLabel":"{{title}}, {{subtitle}}","Annotation.Pin.AccessibilityLabel":"Pin","Annotation.Pin.Green.AccessibilityLabel":"Green Pin","Annotation.Pin.Purple.AccessibilityLabel":"Purple Pin","Annotation.Pin.Red.AccessibilityLabel":"Red Pin","Compass.NorthIndicator":"N","Compass.Tooltip":"Rotate the map","Legal.Attribution.HTML.Label":"Data from {{logo}}, others {{chevron}}","Legal.Attribution.Plain.Label":"Data from {{attribution}}","Legal.Label":"Legal","Legal.Menu.Close.Label":"Close","Legal.Privacy.Label":"Privacy","Legal.Privacy.URL":"https://www.apple.com/privacy/","Legal.TermsOfUse.Label":"Terms of Use","Legal.TermsOfUse.URL":"http://www.apple.com/legal/internet-services/maps/terms-en.html","Location.Error.Instructions":"To allow this page to show your current location, connect to Wi-Fi and enable location services in your browser.","Location.Error.Message":"Your location can only be shown when location services are enabled and you are connected to the Internet.","Location.Error.Support.HTML":"For more information, visit {{link}}.","Location.Error.Support.Label":"Learn more","Location.Error.Support.URL":"https://support.apple.com/en-us/HT204690","Location.Error.Title":"Your current location cannot be shown.","Location.Subtitle":"Unknown Address","Location.Title":"Current Location","Logo.Apple.Tooltip":"Apple","Logo.AutoNavi.Tooltip":"AutoNavi","MapType.Tooltip":"Change the map type","Mode.Hybrid":"Hybrid","Mode.Satellite":"Satellite","Mode.Standard":"Standard","Scale.Feet.Short":"ft","Scale.Kilometer.Short":"km","Scale.Meter.Short":"m","Scale.Mile.Short":"mi","Track.User.Location.Tooltip":"Show your current location","Zoom.In.Tooltip":"Zoom In","Zoom.Out.Tooltip":"Zoom Out"}},{}],227:[function(t,e,i){e.exports={"en-AU":"en-GB","en-IE":"en-GB","en-IN":"en-GB","en-NZ":"en-GB","en-SG":"en-GB","en-ZA":"en-GB","es-LA":"es-MX","es-XL":"es-MX","nn-NO":"nb-NO","no-NO":"nb-NO","zh-HK":"zh-TW"}},{}],228:[function(t,e,i){e.exports=["en-US","fr-FR","pt-BR","zh-CN"]},{}],229:[function(t,e,i){e.exports={zh:{CN:"Hans",HK:"Hant",TW:"Hant"}}},{}],230:[function(t,e,i){e.exports=["ar-SA","iw-IL"]},{}],231:[function(t,e,i){e.exports=["ar-SA","ca-ES","cs-CZ","da-DK","de-DE","el-GR","en-GB","en-US","es-ES","es-MX","fi-FI","fr-CA","fr-FR","hi-IN","hr-HR","hu-HU","id-ID","it-IT","iw-IL","ja-JP","ko-KR","ms-MY","nl-NL","nb-NO","pl-PL","pt-BR","pt-PT","ro-RO","ru-RU","sk-SK","sv-SE","th-TH","tr-TR","uk-UA","vi-VN","zh-CN","zh-HK","zh-TW"]},{}],232:[function(t,e,i){e.exports=["ar","ca","cs","da","de","el","en","en-AU","en-GB","es","es-MX","fi","fr","fr-CA","he","hi","hr","hu","id","it","ja","ko","ms","nb","nl","pl","pt","pt-PT","ro","ru","sk","sv","th","tr","uk","vi","zh-Hans","zh-Hant"]},{}]},{},[219]);
"use strict";$(document).ready(function(){$(".dflt-select__bttn").on("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).parent().hasClass("active")?$(this).stop().parent().removeClass("active"):$(this).stop().parent().addClass("active")}),$(".dflt-input_numeric").inputmask("decimal",{rightAlign:!1,placeholder:"",groupSeparator:" "}),$(".dflt-input_phone").inputmask("+7 (999) 999-99-99"),$(".dflt-input_code").inputmask("999999",{placeholder:""}),$('.dflt-password__toggle input[type="checkbox"]').removeAttr("checked"),$(".dflt-password__toggle label").click(function(){$(this).siblings('input[type="checkbox"]').is(":checked")?$(this).parent().siblings(".dflt-input_password").attr("type","password"):$(this).parent().siblings(".dflt-input_password").attr("type","text")}),$(".scrolling__link").on("click",function(e){e.preventDefault();var t=$(this).attr("href"),s=$(t).offset().top;$("body,html").animate({scrollTop:s},1e3)});var t=!1,s=0,n=0;$(".test-item").on({mousemove:function(e){t&&function(e){$(this);$(".test-row").scrollLeft(n+s-e)}.call($(this),e.pageX)},mousedown:function(e){t=!0,s=e.pageX,n=$(".test-row").scrollLeft()},mouseup:function(){t=!1}})}),document.addEventListener("DOMContentLoaded",function(){var e,t,s,n,i,l,o;for(e=document.getElementsByClassName("form-select"),t=0;t<e.length;t++){for(n=e[t].getElementsByTagName("select")[0],(i=document.createElement("DIV")).setAttribute("class","form-select__current"),i.innerHTML=n.options[n.selectedIndex].innerHTML,e[t].appendChild(i),(l=document.createElement("DIV")).setAttribute("class","form-select__items form-select__items_hide"),s=0;s<n.length;s++)(o=document.createElement("DIV")).setAttribute("class","form-select__items-single"),o.innerHTML=n.options[s].innerHTML,o.addEventListener("click",function(e){var t,s,n,i,l;for(i=this.parentNode.parentNode.getElementsByTagName("select")[0],l=this.parentNode.previousSibling,s=0;s<i.length;s++)if(i.options[s].innerHTML==this.innerHTML){for(i.selectedIndex=s,l.innerHTML=this.innerHTML,t=this.parentNode.getElementsByClassName("form-select__items-selected"),n=0;n<t.length;n++)t[n].classList.remove("form-select__items-selected");this.classList.add("form-select__items-selected");break}l.click()}),l.appendChild(o);e[t].appendChild(l),e[t].getElementsByClassName("form-select__items-single")[n.selectedIndex].classList.add("form-select__items-selected"),i.addEventListener("click",function(e){e.stopPropagation(),c(this),this.nextSibling.classList.toggle("form-select__items_hide")})}function c(e){var t,s,n,i=[];for(t=document.getElementsByClassName("form-select__items"),s=document.getElementsByClassName("form-select__current"),n=0;n<s.length;n++)e==s[n]&&i.push(n);for(n=0;n<t.length;n++)i.indexOf(n)&&t[n].classList.add("form-select__items_hide")}});
"use strict";document.addEventListener("DOMContentLoaded",function(t){mapkit.init({authorizationCallback:function(n){fetch("/services/jwt").then(function(t){return t.json()}).then(function(t){n(t.token)})}});var n=mapkit.MarkerAnnotation,e=new mapkit.Coordinate(37.616934,-122.38379),i=new mapkit.CoordinateRegion(new mapkit.Coordinate(37.616934,-122.38379),new mapkit.CoordinateSpan(.167647972,.354985255)),o=new mapkit.Map("map"),a=new n(e,{color:"#67b7f0",title:" ",glyphText:""});o.showItems([a]),o.region=i});
"use strict";document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".menuToggle input[type='checkbox']"),t=document.querySelector(".collapse-overlay"),o=document.querySelector(".mobile");e.addEventListener("click",function(){t.classList.toggle("show"),o.classList.toggle("show")})});